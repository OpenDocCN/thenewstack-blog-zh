# 对基础设施即代码的安全性洞察

> 原文：<https://thenewstack.io/security-insights-into-infrastructure-as-code/>

[](https://www.linkedin.com/in/jdarmstro/)

 [吉姆·阿姆斯壮

吉姆是 Snyk 的产品营销高级总监，负责集装箱和 IaC 安全。他利用在 Docker、VMware 和 McAfee 学到的知识，在 Snyk 帮助公司使用开源、容器和 IaC 安全地构建应用程序。](https://www.linkedin.com/in/jdarmstro/) [](https://www.linkedin.com/in/jdarmstro/)

云原生应用不仅仅是开发人员创建的代码:今天的应用包括基础设施即代码(IaC ),它规定了应用如何在云基础设施上设置，以及容器化的应用如何在 Kubernetes 上运行。IaC 的使用允许更快、可重复的部署；但是它的使用也增加了开发人员的负担，不仅要保护他们的代码和容器，还要保护他们的基础设施和部署配置。

我们自己的研究(通过[Virtual Intelligence Briefing](https://vibriefing.news/)进行)表明，虽然组织尚未就使用 IaC 的“正确”方式达成一致，但那些利用自动化安全测试来定义 IaC 的组织比他们的同行更快地发现并修复错误配置。这些高绩效者在一天之内发现并修复 IaC 定义中的问题**的频率是那些没有使用自动化测试的人的两倍**。相反，当被问及多久需要一周以上的时间来检测错误配置时，没有自动化的组表示他们 60%的事件属于这种最糟糕的情况；相比之下，全自动队列只有 30%。尽管存在这些差异以及在不安全的配置下运行所带来的风险，但许多组织很可能会落入性能较低的群体，因为只有 7%的受访者表示他们已经以当前行业的最佳能力实施了 IaC 而 63%的人说他们刚刚开始探索这些技术。

当一切都是代码化和自动化时，速度和可靠性的好处是巨大的。但我们的研究表明，负责处理 IaC 安全性的团队是另一个问题——而且仍然悬而未决。调查显示，这是一个共同承担责任的领域，开发人员/开发人员、安全性和基础架构几乎各占一半。未来，受访者表示开发人员和 DevOps 将越来越负责任；但是开发人员将需要进一步的帮助来理解基础设施和配置问题，以便他们能够在其应用程序堆栈中保护这一新层。

## **后座司机**

目前，现代应用程序自动部署在通过代码创建和配置的基础设施上。因此，安全性往往让位于快速部署，这意味着直到部署这些应用程序之后，配置问题才会被发现。正如 Gartner [所说](https://www.gartner.com/en/documents/3984345/magic-quadrant-for-application-security-testing)，“到 2025 年，70%针对容器的攻击将来自已知的漏洞和错误配置，而这些漏洞和错误配置本来是可以补救的。”

然而，这并不一定意味着速度在 IaC 方面存在固有的风险。事实上，为其他形式的代码准备的自动化测试和发布关卡可以与 IaC 一起使用，并有助于使安全性最佳实践成为开发和发布过程的一部分。表现最好的人——那些发现和修复配置问题最快的人——已经在这么做了。

然而，当涉及到安全性测试时，这种类型的自动化测试仍然处于萌芽状态。近三分之二(60%)的组织表示，他们当前的 IaC 和配置代码工作流通过了持续集成(CI)测试，但安全检查并不总是这些测试的一部分。只有 32%的公司在其管道中包含安全检查。事实上，大多数安全问题仍然在部署后被发现——通过 pen 测试、审计和调查安全事件。对于那些只使用这些部署后检查的人来说，一半的情况下需要一周或更长时间来发现安全问题，近 2/3 的情况下需要一天以上来修复这些问题。总的来说，潜在的安全漏洞运行时间是九天，而表现最好的人不到一天。

对于那些说他们的 IaC 和配置代码通过 CI 测试的人来说，集成安全检查的最大障碍是缺乏关于检查什么的标准化最佳实践——他们的每个单独团队都自己决定要测试什么。当你考虑到 41%的人说他们的障碍是不清楚的安全基准时，提高 IaC 安全性的最短路径可以用提供更清晰指导的更好的工具来铺设；同时仍然为团队提供自由来决定对他们的需求来说什么是最重要的。

## **避免代码混乱**

发现问题只是难题的一部分——一旦发现问题，就必须有人来解决它。当面临选择时，52%的受访者声称他们通常通过直接调整基础架构来解决安全问题，而不是通过修改 IaC 源代码来解决。这打开了长期问题的可能性，因为用于创建它的基础设施和编码定义将开始漂移；否则，修改后的基础设施将在下一次部署时重置为其错误配置的状态。对于选择这种手动修复途径的人来说，他们的理由分为缺乏标准化、知识和沟通，以及希望尽可能加快修复。

将 IaC 安全性转移到左边的一个障碍是，团队一直在努力标准化整个组织的实践，让每个团队在他们认为合适的时候审计 IaC。除了明显的安全问题之外，这也说明了更大的责任缺失。

对于 IaC 内部的安全由谁负责，目前似乎还没有达成共识。开发人员和 DevOps 角色比其他单个团队的角色稍微大一点，很多人说这是一个共同的责任，可能适合更新的 DevSecOps 模型。当被问及哪个团队**应该**负责 IaC 安全时，如果这不是一个共同的责任，答案很大程度上转移到了开发人员/开发运维团队。那么，是什么阻止了这些安全责任进一步左移呢？更重要的是，它是对更广泛的组织的能力的信心，这种能力能够容易地发现并修复代码中的问题。

应对 IaC 安全挑战的一个明确且可扩展的解决方案是投资工具和培训，为这些团队增强信心并提供带宽帮助，使他们能够快速安全地部署代码。在上面引用的同一个“魔力象限”报告中，Gartner 还看到了这些自动化工具的潜力，并预测到 2025 年，组织将通过自动化解决方案应用的代码建议，加快 30%的代码漏洞修复速度；将修复 bug 的时间减少 50%。

*要了解更多关于 IaC、安全和其他云原生技术的信息，请考虑参加 5 月 4 日至 7 日在举行的[kube con+CloudNativeCon Europe 2021 虚拟大会。](https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/)*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>