# Spotify 如何采纳和外包其平台思维

> 原文：<https://thenewstack.io/how-spotlify-adopted-platform-engineering-culture/>

“平台团队创造了让 Spotify 能够快速学习和轻松扩展的技术，使我们的用户和全球业务得以快速增长。我们跨越多个学科，努力让业务运转起来，创建迎接十亿客户所需的框架、能力和工具。加入我们，帮助提高整个 Spotify 的生产率、质量和创新。”

[这个 Spotify 平台任务团队的招聘广告](https://datayoshi.com/offer/761604/senior-data-engineer-platfor)是对[平台工程](https://thenewstack.io/platform-engineering/)的最好定义之一，不，是我们发现的平台实现。这并不奇怪，因为音频流媒体服务以其[独特的协作文化](https://www.atlassian.com/agile/agile-at-scale/spotify)、透明和简单而闻名。而 Spotify 贡献了[后台](https://github.com/backstage/backstage)，一个构建开发者门户的开放平台，在[云原生计算基金会孵化。](https://cncf.io/?utm_content=inline-mention)

新的 Stack 与 Spotify 的同事 [Marcin Floryan](https://www.linkedin.com/in/mfloryan/) 和 [Helen Greul](https://www.linkedin.com/in/elenagreul/) 坐在一起，了解该公司与技术一起工作的独特方式，以提高其 6，000 名工程师的开发效率。

## 有效地联系了 6000 名工程师

Spotify 的平台任务团队——以几个不同的名称、结构和迭代——大约在 10 年前成立，作为连接平台建设者和平台消费者，或者连接同事和同事的一种方式。自那以后，它已经发展到大约 600 名开发人员，约占 Spotify 技术人员的十分之一。

拥有数万个微服务的 Greul 告诉 New Stack，平台任务团队并不拥有 Spotify 的所有服务，但它促进了平台的内部市场。

作为高级工程经理，Greul 在开发人员生产力部门工作，该部门负责[后台、](https://thenewstack.io/spotifys-backstage-a-strategic-guide/)单一平台，她称之为“无所不包的开发人员门户”，包括数据、文档和工具。该部门本身并不拥有它，而是策划它。平台任务团队致力于促进开发人员生产力所需的那些能力和关系的发现。

Platform Mission 实现了这一目标，因为正如 Greul 所言，它是一个“非常漂亮的跨职能团队”，不仅包括技术角色，还包括平台层面的营销，以推广内部产品，包括 MegaCAB，这是一年一度的客户咨询委员会研讨会，汇集了内部客户，以强调团队可以填补的最大机遇和差距。

“尽管我们是 Spotify 组织的一部分，但我们试图表现得像一家独立的公司一样，向内部所有开发者提供工具，只是为了保持这种心态，”Greul 说。“是的，不要成为那些以某种方式俘虏观众的团队之一，因为没有其他选择，所以他们必须使用内部工具。”

## 平台工程的文化方面

平台工程是一门社会技术学科。然而，几十年来，组织只关注平台的技术方面，这使得大多数组织中的大多数工程师都在问:“谁做什么？”在一个拥抱变化的组织中，这可能更加困难。

Spotify 平台的部分使命是帮助同事在组织中导航。平台任务团队的许多管理工作是在整个组织中沟通谁做什么。然而，弗洛里安说，对每个人工作的期望是创建一个跨组织的网络，Spotify 通过新员工入职时的介绍日和训练营团队来促进这一点。

在疫情之前，Spotify 是一家有意设在同一地点的公司。但是，随着它向在任何地方工作和混合的方向发展，该组织已经创建了一个 wiki 和幻灯片，概述了公司的不同部分。由此，Slack 中的公开提问文化有助于填补空白。

## 第一步:询问现状

Spotify 的工程总监弗洛里安(Floryan)提到了自己过去几年的工作，他要么是技术运营主管，要么是平台使命团队的企业敏捷教练。他的大部分职责集中在经常被遗忘的流程和工作方式上，而这些流程和工作方式必须推动平台团队。

根据围绕工程管理结构建立的组织[团队拓扑的](https://thenewstack.io/how-team-topologies-supports-platform-engineering/)联合创始人 [Manuel Pais 和](https://www.linkedin.com/in/manuelpais)的说法，平台工程应该从确定你今天的位置和你公司的差距开始。

在 Spotify，这些组织数据包括 GitHub 活动、构建和部署、系统健康和员工满意度调查。还有大量关于人力资源的数据，如结构级别、晋升和任期。Floryan 指出，大量的数据来源集中于揭示网络和依赖性，了解谁在产品的哪个部分为哪个团队工作。他说，关键问题是:

*   每个产品团队的工作量是多少？
*   他们能取得进步吗？
*   有没有成为瓶颈的团队？

“这个角色的最终目标是了解组织的工作方式，主要是通过技术的视角，看看什么工作得好，我们可以扩大规模，什么工作得更好，我们可以改进，当没有简单的方法与每个人交谈，感受组织中发生的事情时，你究竟如何理解一个有数千人的组织中发生的事情，”弗洛里安说，他在寻找利用现有组织资源来构建这幅图景的方法。

像所有优秀的用户体验研究一样，他的团队也花了大量时间向内部客户提问，包括:

*   我们给开发者什么样的工具？
*   我们如何启动他们的工作？
*   我们如何自动化他们的大部分任务？
*   我们如何给他们正确的信息来做出正确的决定？

此外，Floryan 补充道，“我们应该开发什么样的工具，让他们能够简单无缝地为公司创造价值，而不是陷入在云中创建实例的技术细节中？”

## Spotify 的不断变化

你可能会认为 Spotify 只会围绕 Spotify 模式进行组织，但弗洛里安表示，他的角色旨在变得更加好奇。他调查该公司的工程师是否有正确的团队结构和及时的相关信息，以便他们能够与产品需求保持一致。

“他们是否在正确的时间获得了正确的信息，来决定如何计划、如何组织他们的交付？”他问。“他们是想同时做太多事情，还是想依次做更少的事情。如果他们做了排序，他们如何排序，如何排序要避免的事情？你可以想到关键路径分析，例如:我们如何避免阻塞？”

他说，有了这些信息，就该去了解这个组织是否拥有合适领域所需的技能。“我们的专家是否在全公司范围内从事最有影响力的工作？”

最后，为了使软件交付团队更加有效，Floryan 的工作测量了团队协作的有效性。“然后我们要避免合作吗？因为这总会有成本和开销。”这带来了内部资源——类似于开放资源，但是在组织内部，任何人都可以提交一个解决方案来解决诸如“代码组件的可扩展性如何？平台的自助程度如何？”

每当你有一个拥有很多组件的团队时，这意味着它的工程师会收到来自整个组织的很多请求——通常是相互冲突的请求。这就造成了瓶颈。“这是一个投资于该团队的信号，[通过]增加人数，”弗洛里安说，或者这甚至可能意味着将该团队分成两个或三个团队。

这是康威法则——设计反映组织沟通结构的系统——也是非常灵活的组织结构和流程。“这很大程度上只是创造了一个组织某种程度流动性的期望，”弗洛里安说。“事实上，结构并不太严格，所以这些变化是可能的。”

事实上， [Spotify 陈述的第三个价值观](https://www.lifeatspotify.com/being-here/the-band-manifesto)是:“变化是我们不变的。”所以这是对 Spotify 工程师职业生涯的固有期望。弗洛里安称之为有组织的混乱，每个人都“不得不应对不确定性和模糊性”，当事情发生变化时，帮助每个人找到正确的解决方案，以调整计划和/或简化一些流程。

当然，上个月 Spotify 裁员 6%时，变化来得相当突然。弗洛扬说，虽然这很不幸，但他相信 Spotify 团队比大多数人更有能力应对这种变化。

## 成功的平台支持看起来像什么

虽然后台是最公开的成就，但一些内部平台的成就同样引人注目。Greul 说，Platform Mission 团队最近宣布了一个可衡量的 FleetShift 项目，“一种声明式的方式来管理您的基础设施，并进行任何改进和升级，如自动进行日常升级，只要您保持您的服务达到一定的标准。”

她补充说，从高层次来看，FleetShift 允许任何工程师或团队进行大规模的重构、代码或库更改，利用 GitHub 机器人来执行这些更改。

“最大的免责声明是服务需要符合特定的标准。必须有一定程度的测试，一定程度的我们称之为黄金标准的测试。她强调说:“如果你的基础设施跟不上最新最好的，那么变革就无法进行。

团队如何知道他们是否符合标准？平台任务团队已经努力把它游戏化了。后台的开源[技术雷达插件](https://backstage.io/blog/2020/05/14/tech-radar-plugin/)对语言、框架、流程和基础设施进行评级，并确定它们的类别:

*   **使用**:具有指定用例的大多数团队认可的黄金路径。
*   **试验**:正在评估具体的使用案例，已经显示出明显的优势
*   **评估**:正在进行实验，因此用于生产需要很高的成本和风险
*   **搁置**:不再投资的技术，团队应该避免它向前发展，并遵循推荐的迁移路径到受支持的替代方案

如果你的团队达到了黄金标准，那么它将获得一个令人垂涎的公共徽章、帽衫、贴纸，如果公司在同一地点，还会有特别的蛋糕。

Greul 说，这反映了 Spotify 从一开始就接受的平台思维，而不是试图实施任何标准的方式。

一切都是关于尽可能多的标准化、模板化和自动化平凡的样板文件，因此团队可以专注于他们的专长。

平台工程最常见的衡量标准之一是上船时间。大约两年前，当 Greul 转移到 120 人的开发人员生产力单元时，从开发人员开始感觉到生产力，并提出他们的第 10 个拉动请求，平均需要 110 天。现在，在有意降低竞争标准后，只需要 20 天。

“我们试图让它更容易做正确的事情，”她说。“或者做正确的事很有趣。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>