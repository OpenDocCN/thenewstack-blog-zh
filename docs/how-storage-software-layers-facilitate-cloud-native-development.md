# 存储软件层如何促进云原生开发

> 原文：<https://thenewstack.io/how-storage-software-layers-facilitate-cloud-native-development/>

本文是关于云原生存储的多部分系列的第一部分。本周晚些时候和下周查看新的堆栈，了解未来的部分。

您需要存储—每个功能都需要能够访问某种类型的存储。无论是存储本身还是应用程序访问存储的能力出现问题，后果都是严重的。红帽产品营销总监[伊尔沙德·雷汉](https://www.linkedin.com/in/irshadraihan/)解释道:“当应用程序失败时，通常是存储导致了问题。”。

无论您的应用程序部署在哪里，存储问题都会引发三个主要问题。最严重的是数据丢失或数据不可用。稍微不那么严重的是性能问题或无法处理需求高峰。在本文中，我们将从提供基于云原生(也称为“容器原生”)软件的存储以及专门为云基础架构设计的对象存储服务器 [Minio](https://www.minio.io/) 的公司的角度，了解如何以最佳方式将云原生工作流连接到存储。

[存储操作系统](https://storageos.com/)的创始人兼首席技术官 [Alex Chircop](https://www.linkedin.com/in/alexchircop/?originalSubdomain=uk) 说:“我最重要的一点就是让开发人员提前考虑存储属性。在“过去”,大多数开发人员依赖存储管理员提供资源，并且必须围绕可用存储构建应用程序，而现在，开发人员有自由和责任来控制存储资源调配过程，并且只需几分钟而不是几周就能完成。将云原生工作流连接到存储可能没有单一的最佳方式，与过去不同，开发人员能够根据特定应用程序需求调配存储，因此每个应用程序都可以以最佳方式连接到数据。但是，我们可以讨论每个人在考虑云原生项目的最佳存储选项时应该注意的具体问题。

## 到底什么是云原生？这对存储意味着什么？

云原生计算基金会将云原生系统定义为容器封装、动态管理和面向微服务。成为“云原生”最终与应用程序部署在哪里没有任何关系——一个提升并转移到 AWS 的整体永远不会是云原生的。

根据 Chircop 的说法，云原生环境中的存储应该与同一环境中的任何其他部分具有本质上相同的属性。[](https://www.linkedin.com/in/gouthamrao/)[Portworx](https://www.linkedin.com/in/gouthamrao/)的联合创始人兼首席技术官苟饶呼应了这种总体情绪。“客户更关心他们购买的软件是否符合围绕云原生生态系统设定的标准，”Rao 说。

让我们看看云原生系统的这三大支柱如何应用于存储环境，然后解决可移植性和第二天的问题，这两个问题都是考虑如何在现实生活中以最佳方式将云原生工作流连接到存储时的关键问题。

### 容器

Portworx 的营销副总裁 Michael Ferranti 谈到将容器直接连接到主要云供应商提供的存储选项时遇到的挑战时说,“不是云提供商没有提供可靠的服务，而是 Kubernetes 强迫你以一种他们没有设计的方式使用这些服务。

基于容器的环境是动态的。当每个容器在集群中移动时，它需要保持与存储卷的连接。如果您直接连接到 EBS，这需要一个容易出错的手动管理过程，即将卷分离并重新连接到新主机。

Kubernetes 集群通常也部署在几个可用性区域上，有时甚至部署在多个云上。但是云提供商的本地存储选项不允许卷连接到跨多个可用性区域运行的主机。除非 EBS 上有软件层，否则如果容器故障转移到第二个可用性区域，它将无法连接其数据。

### **微服务**

运行由数百或数千个微服务组成的应用程序是不切实际的，所有或大多数微服务都需要直接在 EBS 上或直接在您的本地服务器上连接到存储，因为对您可以连接到 Linux 或 Windows 实例的卷的数量有硬性限制(Linux 为 40 个，Windows 为 17-26 个)。“如果您想在一个虚拟机上运行 100 个、150 个或 250 个单元，并且每个单元都需要一个卷，那么使用本机 EBS 根本无法做到这一点，”Ferranti 解释道。

构建云原生应用需要密集打包您的微服务及其相关数据。这样做需要在云提供商的本地存储上有一个软件层。

### 动态管理

通过 API 尽可能多地处理来消除人为错误的机会是云本机最佳实践的关键部分。您不仅应该能够通过直观的用户界面来声明您的存储需求，云原生存储还应该需要最少的人工干预，以便在容器在集群中移动时分离和重新连接卷，处理扩展，在应用程序故障转移到另一个可用性区域时进行调整，以及在应用程序运行时处理存储降级。

### 轻便

Minio 首席执行官[阿南德·佩里萨米](https://www.linkedin.com/in/abperiasamy/)解释说:“当你从一个云迁移到另一个云时，你会意识到需要改变的部分实际上是存储而不是计算。“API 不兼容，”Periasamy 表示，公共云和公共云与私有云之间的可移植性是 Minio 从客户那里听到的最大担忧之一——Portworx 的行业调查显示了对锁定的类似担忧。特别是考虑到运行多云环境很常见，您的存储解决方案应该允许数据在公共云和私有云之间轻松移动。

### 第二天

随着应用程序的运行，事情会出错:网络被分区，磁盘出现故障，容器四处移动。在考虑存储时，重要的是要考虑在存储系统磨损的情况下如何保持性能，以及尽可能多地通过自动化处理维护工作。

“仅仅因为你可以将一个容器连接到一个存储系统，并不意味着你可以在一个云原生应用中获得你想要的操作特性，”Ferranti 强调说。要获得这些操作特征，需要在应用程序和存储资源之间有一个软件层。请将该软件层视为在您的容器化、API 驱动、基于微服务的应用程序和存储资源之间进行转换的一种方式，即使在云环境中，存储资源也连接到一台机器，并且仍然具有许多与本地存储选项相同的限制。

云原生应用程序需要以云原生方式运行的存储。

云本地计算基金会和 Portworx 是新堆栈的赞助商。

通过 Pixabay 的特征图像[。](https://unsplash.com/search/photos/layers)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>