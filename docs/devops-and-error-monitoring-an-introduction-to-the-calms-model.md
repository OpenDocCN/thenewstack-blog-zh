# DevOps 和错误监控:CALMS 模型简介

> 原文：<https://thenewstack.io/devops-and-error-monitoring-an-introduction-to-the-calms-model/>

[](https://raygun.com/)

 [弗雷亚·斯帕文

弗雷亚·斯帕文是 Raygun 的数字营销专家，这是一个软件智能平台，帮助开发团队为用户创造无错误的体验。](https://raygun.com/) [](https://raygun.com/)

等待客户报告软件问题后才修复的日子已经一去不复返了。

就其本质而言，DevOps 在团队和流程之间创造了更多的可见性。可以说，在发现和解决影响最终用户的崩溃和性能问题方面，这是最重要的。

像 [Raygun](https://raygun.com/) 这样的错误和性能监控平台完全适合 DevOps 环境，有助于沟通并降低软件错误的风险，甚至在一开始就落入客户手中。

本文将使用 [CALMS 模型](https://whatis.techtarget.com/definition/CALMS)阐明错误报告如何适应 DevOps 过程——可以说是评估团队对 DevOps 过程的准备情况时最常用的框架之一。

## 等等，什么是错误监控？

[错误和性能监控平台](https://thenewstack.io/right-tool-job-picking-monitoring-solution/)的存在是为了暴露生产和生产以外的问题。它们旨在通过提供对软件错误和性能问题原因的深入了解，使开发人员更容易构建高质量的软件。

通常，错误监控平台包括以下功能:

*   错误摘要页面:提供诊断细节(如堆栈跟踪)，
*   错误分组和过滤:为了合并错误发生，
*   部署跟踪:为了将错误与部署相关联，
*   用户跟踪:识别谁遇到了错误，
*   内置的真实用户监控:在代码级别提供用户体验的数据。

DevOps 和错误监控的结合点是提供对问题原因和结果的可见性，以便可以更快更准确地解决问题。崩溃报告和真实用户监控通过数据可视化以一种相关的、各方都能理解的方式显示大量数据。

*   DevOps 管理人员可以在日期和时间图表中发现趋势，
*   开发人员获得诊断细节(如堆栈跟踪)来解决错误，
*   在详细报告有多少客户受到影响后，管理人员可以评估业务成本，每个人都可以采取预防措施。

让我们看看错误监控在哪里适合最流行的概念 DevOps 框架之一:CALMS 模型。

## 为什么选择 CALMS 模型？

CALMS 模型是一个概念框架，用于评估公司采用 DevOps 流程的准备情况。CALMS 代表协作、自动化、精益、测量和共享。

使用这个框架，我们可以看到错误监控对 DevOps 开发人员和领导者最有用的地方。

### 协作(或文化)

DevOps 创造并鼓励一种环境，在这种环境中，工程师负责 QA，编写并运行他们自己的测试，以将他们的代码提供给客户。

没有专门的事件响应团队；相反，开发人员和运营人员必须合作，在错误导致真正的业务问题之前发现、分类并修复错误。

快速解决问题的一个障碍是孤立地进行监控，而不是集中在一个地方。例如，开发人员查看日志，管理人员可能会在分析软件中寻找影响，从而创建数据补丁和漏洞，以弥补部分缺失。

如果每个人都有一个数据源，问题将很快得到解决。错误监控工具和过程提供了这一点，而不需要在支持协作环境和分担责任的不同软件之间来回切换。

### 自动化

允许自动化实际上是为了创建可靠和高效的系统。重复的手工工作要花费大量的金钱——开发人员宁愿构建很酷的功能，也不愿在错误日志中追踪软件错误。

开发人员可能会花费惊人的[75%的时间](https://coralogix.com/log-analytics-blog/this-is-what-your-developers-are-doing-75-of-the-time-and-this-is-the-cost-you-pay/)使用日志和模糊的客户报告来搜索错误和性能问题。一个错误监控和真实用户监控平台通过聊天工具或电子邮件摘要提供智能警报，自动执行这一过程。开发人员没有必要花时间去寻找错误的原因，因为只需看一眼就可以对它们进行分类和评估。

### 倾斜

当我们谈论精益时，我们经常想到敏捷过程允许软件团队快速和不完美地部署。精益流程没有那些对客户体验影响很小甚至没有影响的额外功能。

几年前，软件团队发现，今天就把一个产品发布到客户手中，比再等六个月让它变得完美要好得多。

错误报告是这一连续交付过程的重要组成部分，因为错误在到达客户手中之前就在生产过程中被检测出来。仅仅因为一个产品的第一次迭代可能是最小的，并不意味着它一定是错误的。

### 尺寸

设计软件团队的 KPI 更多的是关于什么不能度量，而不是什么可以度量。有如此多的工具提供度量和报告，团队可能很难将注意力集中在那些会移动指针的数字上。

敏捷和精益的概念要求团队只关注少数指标。例如，[在我们的软件团队](https://raygun.com/blog/software-team-kpis/)中，我们只让人们对四个指标负责:

1.  **受 bug 影响的用户**:我们认为总错误计数是一种误导。如果一个团队有 10，000 个错误影响了一个客户，这还不如 500 个错误影响了 250 个客户。这一指标使得我们可以轻松地对用户进行优先排序。
2.  **平均应用响应时间**:平均响应时间是 50%的客户所经历的时间(或者更快)。性能赚钱——40%的用户会离开一个加载时间超过三秒的网站！
3.  **P99 应用响应时间**:中位数很棒，但我们也需要体会上限。我们跟踪 P99——第 99 百分位用户所用的时间。我们不担心它会慢，它会慢的。所谓慢，我们希望确保只有五秒钟，而不是一分钟。(我们不经常跟踪 P100，因为它是总超时的领域，是保持连接打开的坏机器人。因此，它不是真实用户的准确表示。)
4.  **已解决的 bug 与新 bug**:像 Raygun 这样的平台会根据根本原因对 bug 进行分组。理想情况下，团队修复 bug 的速度应该和他们创建 bug 的速度一样快。

这四个指标通过将用户体验放在第一位(因为归根结底，客户是我们的面包和黄油)来改善用户体验，并减少技术债务(这使我们的团队能够专注于功能，而不是补救工作。)

### 共享

DevOps 的存在是为了在开发者和运营团队之间架起一座桥梁。这一过程的很大一部分是确保分担责任。

尽管在 DevOps 中有一种“如果你构建了它，你就要对它负责”的文化，但这并不意味着每个开发人员都必须是运营专家。理想情况下，DevOps 团队应该分担代码中发现的问题的责任。

在开发生命周期的每个阶段，支持线上的开发人员与操作人员一起工作时效率最高。例如，开发人员将负责解决最终用户发现的问题，并对生产中的代码进行故障排除。

错误监控旨在节省这一阶段的时间，因为问题和性能问题的确切原因可能难以捉摸。开发人员可以看到页面上有问题的代码行，而不是搜索错误及其影响。随着开发人员在 backlog 中的进展，问题可以更快地得到解决，并且通过与 ChatOps 和问题跟踪器的集成，可以为运营团队创建更快的反馈循环。随着沟通渠道畅通，不被不正确或不相关的数据所迷惑，分担责任自然变得更加容易。

## 结论

DevOps 的成功依赖于软件工具和过程，但最终，它是关于支持人和文化。在本文中，我讨论了错误监控在 DevOps 过程中的位置，以及简单的工具如何支持可见性和通信。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>