# 阿帕奇·卡珊德拉开始的结束

> 原文：<https://thenewstack.io/the-end-of-the-beginning-for-apache-cassandra/>

帕特里克·麦克法丁

帕特里克是 DataStax 的开发者关系副总裁，他领导着一个团队，致力于让 Apache Cassandra 的用户获得成功。他还担任过 Apache Cassandra 的首席布道者和 DataStax 的顾问，在那里他帮助构建了一些最大、最激动人心的生产部署。

今天对我们这些 Apache Cassandra 社区的人来说是个大日子。经过漫长的艰难跋涉，Apache Cassandra 4.0 终于发布了[。我说最后，因为它有时似乎是一个难以实现的目标。我参与 Cassandra 项目已经将近 10 年了，经历了很多起起落落。所以我觉得这一天标志着一个重要的里程碑，不仅仅是一个版本号。这是数据库项目生命周期中的一个重要里程碑，它已经成为一个在世界范围内广泛使用的重要数据库。4.0 版本不仅在 Cassandra 的历史上非常稳定，而且很可能是所有数据库中最稳定的版本。现在，它已经准备好进入下一个 10 年的云原生数据；它拥有计算机科学和来之不易的历史来产生巨大的影响。今天的里程碑是开始的结束。](https://thenewstack.io/apache-cassandra-4-0-comes-in-ready-for-production/)

## 不是你想要的英雄，而是你需要的英雄

2011 年初，我和一个人共进午餐，我称他为卡珊德拉的第一个福音传播者:[阿德里安·科克罗夫特](https://twitter.com/adrianco)。当时，他正在帮助网飞从一家基于邮件的 DVD 公司转型为一家流媒体公司，这需要许多尖端技术，其中一些甚至还没有被发明出来。我们谈论了许多事情，但我唯一记得的是他告诉我应该尝试一下他们正在使用的分布式数据库 Cassandra。这是现场爆炸的几十个 NoSQL 数据库之一，因为我们这些试图根据不断增长的需求扩展基础设施的人发现了 Oracle 和 MySQL 的局限性。那天晚上我有一个 0.7 的运行集群在[亚马逊 Web 服务](https://aws.amazon.com/?utm_content=inline-mention)中运行，从那以后我就没有停止过。

这是 Cassandra 的早期，在任何数据库 30 到 40 年的典型生命周期中，这是一个功能和创新惊人增长的时期。Cassandra 正在被需要规模并准备投入工程时间来保持快速创新的组织所采用。计算机科学非常清楚:为了满足现代应用程序所需的规模要求，您必须使用为可用性和分区容差而构建的免协调数据库。有团队使用其他技术，但并不总是成功。正因为如此，Cassandra 赢得了不会让你失望的数据库的声誉，尽管它真的很难学。如果所有其他数据库都无法提供所需的正常运行时间或规模，Cassandra 可以完成这项工作。

## 成年并不容易

2016 年，Cassandra 3.0 发布，其中一个重大变化是全新的存储引擎。任何在运营部门工作过的人都知道，在达到一个普遍信任的稳定点之前，对核心组件的重大改动需要时间。卡珊德拉也不能幸免。由于 3.0 存储引擎中的许多初始问题，大多数用户选择继续使用 2.1 并等待升级。大约在那个时候，DataStax 正在脱离这个项目，这导致了很多内部项目冲突。阿帕奇·卡珊德拉已经到了尴尬的青春期。

就像人类青少年一样，Apache Cassandra 项目有一个时刻问自己，“我长大后想做什么？”这种对话发生在贡献者、提交者和项目管理社区之间。稳定性和正确性是数据库唯一重要的东西，世界上很大一部分人依赖它作为事实的来源。在 ApacheCon 2019 上，我参加了一个大型的临时聚会，讨论 Cassandra 项目希望为版本发布保持什么标准。我们没有会议室，所以我们都坐在火烈鸟拉斯维加斯的走廊里的地板上辩论。最后，我们一致认为，一个单一的声明体现了我们必须如何前进，它被该项目采用:“4.0 版本的首要目标是，Cassandra 4.0 应该处于一种状态，当它被削减时，主要用户将在生产中运行它。”

零点发布可以被认为是生产稳定的想法不符合许多运营商的世界观。当然，在尝试升级之前，至少要等几个 bug 发布，对吗？Apache Cassandra 社区的成员决定挑战这个想法。测试版或候选版的意义是什么？因为这不是在一个大教堂里建造，而是在露天集市上建造，所以对该项目的一个真正贡献将是运行一个带有生产工作量的测试版。在进入测试版之前，我们需要能够以各种方式测试正确性，失败可能会持续不断地发生。在过去的几年里，项目中已经建立了令人难以置信的工具，这些工具所呈现的失败模式是无情的。回报是真实的。Apache Cassandra 4.0 在所有测试中都是绿色的，正如承诺的那样，由赞助工程时间的组织在生产中运行。它的发布是因为项目成员相信这将是你可以使用的最稳定的数据库。

## 站在巨人的肩上

我们就是这样走到今天的。从一开始就有坚实的血统，多年的创新和对质量的承诺。该数据库受到网飞、优步、Flipkart、ING 银行和数百家其他公司的信任。现在我们正处于一个新的卡珊德拉时代的尖端。真正的开始的结束。那么，卡珊德拉的下一步是什么？

实际上相当多。

为了将质量管理落实到项目需要的地方，必须有一个早期的代码冻结，以阻止可能导致的持续变更和无休止的追尾。这意味着已经发布了相对较少数量的重要特性，但创新一直处于观望状态，着眼于 4.0 和代码冻结解除之后的日子。在这个项目的核心圈子之外，我们已经有了一个巨大的[生态系统](https://cassandra.apache.org/ecosystem/),围绕着 Cassandra 的项目和公司增加了访问权限，使它更容易使用。随着分布式应用程序中对稳定基础的需求增加，预计这一数字会进一步增长。像 [K8ssandra](https://k8ssandra.io/) 和 [Stargate](https://stargate.io/) 这样的项目可以依靠 Cassandra，专注于自己的项目目标。如果你有一个项目需要一个像 Cassandra 这样可靠和可信的数据存储，我们社区的许多人都愿意提供帮助。你只需要问一下。

Cassandra 增强流程( [CEP](https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=95652201) )已经到位，为 Cassandra 带来了主要的新功能。有几个已经开始了，包括[存储附加索引、](https://cwiki.apache.org/confluence/display/CASSANDRA/CEP-7%3A+Storage+Attached+Index)，它被设计成原始二级索引的替代品，也是 DataStax 重新承诺支持 Apache Cassandra 的一部分。其他被提议的包括给 Cassandra 添加连接(是的，我说过)和对事务的重要升级。提议的具有潜在最广泛影响的变化是可插拔存储的实现。这使得 Cassandra 能够使用针对特定工作负载优化的各种存储引擎。Instagram 已经通过添加 RocksDB 作为存储引擎展示了这一想法的早期前景，因此这种可能性真的令人兴奋。与此同时，Cassandra 将利用 Java 垃圾收集中快速发展的创新。零垃圾收集(ZGC)现在在 JDK16 中提供了[亚毫秒级](https://malloc.se/blog/zgc-jdk16)暂停时间，在不久的将来甚至会有更大的收益。对 Cassandra 和其他基于 JVM 的系统的影响将是深远的。请继续关注一些令人兴奋的基准测试。

如果你是 Apache Cassandra 的当前用户，你应该考虑尽快升级。稳定性和性能的提高将使它物有所值。如果你是 Cassandra 的新手，现在是进入并尝试一下的好时机。你不会失望的，火箭飞船正准备再次起飞——确保不要错过这次旅程。我们希望你能加入我们的社区。卡珊德拉的下一个时代将会令人兴奋，充满挑战。有一点可以肯定，不会像上一个时代。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>