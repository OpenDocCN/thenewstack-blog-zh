<html>
<head>
<title>Controlling the Wildfire of Container Management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">控制容器管理的野火</h1>
<blockquote>原文：<a href="https://thenewstack.io/controlling-the-wildfire-of-container-management/#0001-01-01">https://thenewstack.io/controlling-the-wildfire-of-container-management/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated"><a href="https://turbonomic.com/" class="clearfix infoBlock " target="_blank"><div class="infoBlockTextBlock"><p class="infoBlockTitle">Eva TUC zai</p><p class="infoBlockText">Eva在IT服务管理方面拥有超过15年的经验，在移动应用战略方面横跨应用性能管理、虚拟化优化和企业级持续质量。作为Turbonomic高级工程团队的一员，她致力于采用以客户为中心的解决方案来解决影响各地业务的问题。</p> </div> </a></p><p class="translated">部署容器的学习曲线很陡。大多数组织在进入生产之前只是刚刚开始试验。容器为组织的基础设施(内部或云中)带来的性能、成本和可伸缩性优势是不可否认的，这可能是为什么Gartner的聪明人预测，到2020年，超过50%的全球组织将在生产中运行容器化的应用程序，而今天只有不到20%。</p>
<p class="translated">并做好准备，因为一旦一个组织发现在哪里以及如何最好地部署容器，采用的速度将比从物理到虚拟的转变要快得多。集装箱很容易像野火一样蔓延，因为它们可以在几分钟内突然出现，几乎可以立即为客户服务。这对于敏捷性和弹性来说是极好的，但是这种即时的满足感将会带来挑战——尤其是当涉及到云中的成本超支时。</p>
<p class="translated">这一切的主角是Kubernetes。“Kubernetes，这是我的应用程序—现在为我运行它。”这是谷歌的凯尔西·海塔尔(Kelsey Hightower)倡导的终结游戏。有了Kubernetes，您可以拥有跨越一个或多个公共云和本地的遗留应用程序、微服务或功能。听起来很简单，对吗？</p>
<p class="translated">没那么快！对于最初的几个应用程序来说，这可能足够简单。然而，随着采用的增加，管理许多服务的复杂性也在增加，每个服务都有波动的需求。对复杂性有远见并理解部署容器的所有层面是至关重要的，这样一旦火花击中您的组织，您就可以做好控制野火的准备。</p>
<p class="translated">为了确保您的服务运行良好，并且平台能够应对部署的快速增长，管理服务级别目标(SLO)的多个维度是必不可少的。这引发了多个问题。</p>
<ul>
<li class="translated">工作负载可以扩展，但是如何在CPU、Mem或事务(响应时间、吞吐量)的所有关键维度上优化扩展呢？</li>
<li class="translated">何时以及应该水平或垂直扩展？</li>
<li class="translated">如果你在一个维度上进行扩展，你会在另一个维度上冒拥塞的风险吗？</li>
<li class="translated">服务可能依赖于其他服务、数据或与客户端的距离，那么它们应该在哪里运行——更靠近客户端还是更靠近数据？</li>
<li class="translated">虽然该平台提供了灵活性，但您应该横向扩展您的本地集群还是突然转向云，您如何确定何时可以节省资金？</li>
</ul>
<p class="translated">这些都是重要的问题。所以，让我们探索一下选择。</p>
<h2 class="translated">选项1:自动扩展工作负载</h2>
<p class="translated">容器编排平台提供了自动伸缩策略。然而，一个挑战是您需要决定指标(CPU和内存是默认的)并分别设置静态阈值。这种类型的分析需要用户确定阈值，然后手动维护它并分析趋势，以评估阈值是否仍然足够好。这些策略不能水平扩展，也不能假设容器是资源的最佳配置。考虑到甚至一个容器可能在一个维度上受到约束(比如内存)，但在另一个维度上过度分配(比如CPU)。水平扩展，没有首先调整大小，意味着您正在传播一个不保证性能的配置。首先，最好的行动可能是调整容器的大小，而不是仅仅依靠水平缩放。任何扩展操作都需要评估节点资源的可用性，如果没有节点资源可用，那么系统应该提供更多资源。</p>
<p class="translated">仅仅管理资源是不够的。您可以添加关于事务和响应时间的定制指标，但是首先，您需要添加一个解决方案来生成遥测数据(比如一个服务网格)，然后配置Prometheus来收集它。但同样，你正在设法达到一个近视的阈值，而这个阈值不是动态保持的。自我管理系统应该持续关注工作负载需求，在没有人工干预的情况下，确定是否需要垂直或水平扩展，同时确保您可以适应峰值需求。这需要多方面的分析。</p>
<p class="translated">即使在工作负载扩展之前，系统也应该确定如何更好地管理波动的工作负载需求，以避免由于嘈杂的邻居或节点性能问题而导致的资源拥塞，无论这些问题是来自一起达到峰值的容器还是底层群集中的计算或存储拥塞。为了确保工作负载能够正确访问可用的资源，通过重新调度pod来重新分配工作负载意味着pod可以利用其他兼容节点上的可用资源。</p>
<p class="translated">您希望高效利用资源，更好地重新分配工作负载应该以效率为目标，以释放更大的资源“块”,减少陷入挂起状态的单元，而不会给性能带来风险。那么，您如何知道移动哪个单元和节点，同时确保不会给另一个单元带来风险呢？这是多维分析优化重新调度和扩展决策的地方，并使它们具有可操作性，这要归功于第三方调度程序与本机调度程序进行交互来执行移动。</p>
<h2 class="translated">选项2:自动扩展基础架构</h2>
<p class="translated">在开始采用容器时，通常会过度供应。但是，如果您继续以40%到60%的利用率运行，这会导致资金浪费，因为您没有更好的方法来评估工作负载扩展的影响。另一方面，您希望自动扩展集群，这应该基于您的需求、环境中看到的增长以及对处于待定状态的pod的了解。智能扩展需要根据底层基础架构的可用性来评估需求，如果在公共云中，还需要根据成本来评估需求。一旦您有办法知道额外的节点何时应该向外扩展或向内扩展，那么您就需要考虑如何执行该操作。公共云提供了规模集/规模组，但阈值只关注节点。</p>
<p class="translated">拥有一种一致的方式来扩展Kubernetes节点将允许多维分析和一致的执行。我在<a href="https://turbonomic.com/" class="ext-link" rel="external ">turbometric</a>的团队正在密切关注<a href="https://github.com/kubernetes-sigs/cluster-api" class="ext-link" rel="external "> SIGs集群API </a>(使用机器组显示了前景)<a href="https://github.com/kubernetes/cluster-registry" class="ext-link" rel="external ">集群注册表</a>和<a href="https://github.com/kubernetes/community/tree/master/sig-multicluster" class="ext-link" rel="external ">多集群</a>的突破，这将使这成为可能。</p>
<h2 class="translated">选项3:多云</h2>
<p class="translated">虽然您可能还没有实现，但容器化的Kubernetes工作负载提供了真正的可移植性，可以在任何地方运行，允许组织利用不同的基础架构提供商来优化成本和访问其他服务或功能。这要求应用服务、架构和正确的模式为多云做好准备。作为分析中的额外维度，多云为DevOps带来了位置和服务彼此邻近性方面的挑战。这回避了“下一步是什么？”</p>
<p class="translated">它看起来像是利用容器化服务和功能的复合服务，这将进一步推动基于服务级别目标管理性能和效率的需求。但是，那是另一天的话题。</p>
<p class="attribution translated">通过Pixabay的特征图像。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>