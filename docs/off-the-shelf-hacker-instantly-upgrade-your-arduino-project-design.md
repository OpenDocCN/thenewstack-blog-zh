# 现成的黑客:立即升级您的 Arduino 项目设计

> 原文：<https://thenewstack.io/off-the-shelf-hacker-instantly-upgrade-your-arduino-project-design/>

Arduinos 非常适合低功耗的独立作业，只需读取输入，进行一些计算，然后设置一些输出。它们混合了模拟和数字输入/输出引脚，可以通过串行、I2C 和其他接口与其他板通信。它们也很快，使用基于固件的程序，并且功能单一。他们对很多工作都很在行。我自己的项目，[机器人头骨赫德利](/off-the-shelf-hacker-hedley-the-robotic-skull-spooks-minneapolis/)现在使用一个 Arduino 纳米克隆体作为他下颚伺服系统的驱动板。我最近用 Nano 替换了旧的 Arduino NG。

我坐在那里看着头骨，它给了我灵感。我能不能换一个基于 ESP8266 的模块，通常被称为 [NodeMCU 开发套件](https://www.banggood.com/3Pcs-NodeMcu-Lua-WIFI-Internet-Things-Development-Board-Based-ESP8266-CP2102-Wireless-Module-p-1121409.html?rmmds=buy&cur_warehouse=CN)，来代替 Arduino Nano，同时仍然让赫德利能够与我通话？这两块板大小差不多。它们的价格差不多，每个不到 5 美元。它们有相似的引脚，尽管有一些重要的区别，我们将在本文后面介绍。最后，您可以使用 Arduino IDE 和相关库对两种板进行编程。读者可能还记得最近关于在我的[庭院洒水项目](https://thenewstack.io/off-the-shelf-hacker-automated-yard-watering-project/)中使用 NodeMCU 的讨论。

为什么我要用 NodeMCU 替换 Arduino Nano？让我们来看看。

## 用不同的方式解决问题

一个 NodeMCU 内置了 WiFi。让那件事过去一分钟。

虽然这很酷，但我们当然不需要 WiFi 来移动赫德利的下颚伺服系统，而是使用树莓 Pi 上处理程序的一些串行数据。尽管如此，对于那份特殊的工作来说，这是一个近乎顺带的替代。

头上的 LED 显示，如果你的 Arduino 很容易联网，你可以解决一系列全新的问题。

我们必须将我们的“本地硬件点解决方案”思维扩展到“机器对机器”的网络视角。也许是多台机器对多台机器。这就是物联网(IoT)的本质吧？

我说的是从使用独立的微控制器来解决像移动赫德利的下巴这样的小问题，跳到使用一组小点解决方案的可扩展解决方案，这些小点解决方案相互之间以及与外部世界进行对话。牢记网络成为设计过程的一部分，帮助您实现前所未有的解决方案。

## 当前的项目想法如何？

我不喜欢我后院的感应灯。首先，它们相当昂贵。其次，它们并不那么可靠。而且，很难同时打开它们。你绝对不能远程打开它们。最后，除非我看到灯亮着，否则没办法知道后院是否有任何东西或人。午夜到凌晨 5 点之间有什么或什么人在院子里爬来爬去？不知道，没有数据。

一个 Arduino Nano，一个无源红外传感器，一个继电器板，一个小电源和一对 20 瓦的 led 可以在有东西经过设备前面时照亮院子的一个角落。那会给我我现在所拥有的。

只需换上一个 NodeMCU 并稍微更改固件，我就可以立即获得入侵者记录功能、硬件状态数据、警报激活甚至启动防御措施。使用随时间收集的数据，我们可以跟踪物业周围的活动，并发现模式，我可以利用这些模式来防止问题或大大提高对情况的认识。

我上周订购了继电器板和一个小电源。在我的新庭院灯项目中，我将使用我最近获得的一个 NodeMCUs 和一个来自零件箱的红外传感器。现有的 150 瓦密封光束聚光灯可以很容易地连接到该项目的第一次迭代中继板。用 110 伏 led 聚光灯替换密封光束是微不足道的，因为它们也是由继电器板切换的。

## NodeMCU 与 Arduino Nano

像工程中的所有事情一样，在将 NodeMCU 替换为 Nano 时有一些权衡。

NodeMCU 板只有一个模拟输入引脚，因此读取模拟传感器并不是它的强项。它还有 13 个通用数字输入/输出引脚，其中一些引脚作为各种通信接口，如 I2C 和 SPI。使用该板时，您必须考虑数字传感器。

另一方面，Nano 有八个模拟输入，其他一切都与 NodeMCU 基本相同。大不了。

另一个权衡是功耗。由于 NodeMCU 板有一个 wifi 无线电，当与您的本地网络通信时，它将比没有 WiFi 的直接 Arduino Nano 消耗更多的功率。报告称，传输数据时可能会达到 350 毫安。我没有做过任何实际的测试，这可能是未来故事的素材。不用说，网上的每个人都知道基于 ESP8266 的设备非常耗电。这是需要考虑的事情，尽管如果你使用小型电源而不是电池来运行你的项目，功耗可能不是问题。

纳米印刷电路板的宽度也大约是 NodeMCU 板的三分之二。它们都是标准的试验板友好型。我见过两种板都没有预焊的插头引脚，因此将它们连接到您的项目非常容易。

## 让我们来谈谈固件

实际上，在赫德利，把 NodeMCU 板换成 Nano 只花了大约 5 分钟。我用了两块试验板，把电线从一块移到另一块。请注意，Nano 使用 5 针 USB mini-b 连接器，而 NodeMCU 使用标准的 micro-B USB 配置。手机电缆通常使用后者，因此给 NodeMCU 加电可能稍微容易一些。

当然，无论你选择哪种板，你都需要合适的电缆来编程。

虽然 NodeMCU 使用了内置的 Lua 编程实现，但我还是用 Arduino IDE(集成开发环境)写代码。从 Nano 迁移到 NodeMCU 需要在“工具”和“板”菜单下指定硬件。“ESPduino (ESP-13 模块)”选项工作正常。我使用 Arduino IDE 软件的 1.8.7 版本进行测试。

我在 NodeMCU 板的固件中将伺服数据引脚切换到 GPIO4(物理引脚 D2)。我用的是 Arduino NG 和 Nano 版本的 GPIO6。除此之外，代码完全相同。

使用 NodeMCU 设备时，赫德利的下巴以完全相同的方式移动，就像使用 Nano 或古董 ng 板一样。

请务必在 Arduino IDE 中查看所有 ESP8266 设备的示例程序。他们有很多人。只需使用现有的 Nano 程序，黑进 ESP8266(网络)部分。

另外，不要忘记 MQTT 提供了一对多和多对一的能力。还有许多 MQTT 示例程序。我将在我的 Linux 笔记本上使用 MQTT 消息，或者可能使用一个新的 MQTT 代理作为院子洒水器和院子照明项目的数据传输机制。如果一个不速之客来到院子里，我们不仅可以开灯，还可以用洒水器把灯冲走。那不是很有趣吗？

网络化设计思维。明白了吗？

## 包裹

独立的 Arduino Nano 项目非常便宜，绝对适合某些项目需求。只要多花一点功夫，多“联网”思考，基于 ESP8266 的模块非常有用。

实现飞跃，开启一个全新的物理计算世界。

敬请关注更新。

特征图像:用 NodeMCU 板(ESP8266)替换 Arduino Nano。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>