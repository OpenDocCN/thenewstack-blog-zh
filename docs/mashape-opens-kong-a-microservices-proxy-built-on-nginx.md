# Mashape 开放了基于 Nginx 的微服务 API 网关 Kong

> 原文：<https://thenewstack.io/mashape-opens-kong-a-microservices-proxy-built-on-nginx/>

周二上午，API 平台提供商 Mashape 正式开源并免费提供一个名为 Kong T1 的微服务管理层。Mashape 最初在内部开发了 Kong，作为其 API hub 的开发和持续管理平台的一部分。

现在，正如 Mashape 首席执行官 Augusto Marietti 告诉新堆栈的那样，受到网飞例子的启发，该公司将免费分发其王国的钥匙。

## 世界第八大奇迹

Marietti 说，Kong 旨在帮助具有单一环境的公司更快地转向微服务架构。Marietti 说，Kong 实现了微服务定制服务和逻辑的自动化。

> “对于那些拥有微服务架构的人来说，[Kong]不会改变它的编排方式，但它使它变得更轻，因为它可以从七个、十个或二十个微服务中删除许多常见功能，并将所有这些功能集中在 Kong 上…使它变得更轻，更易于维护。”

Marietti 说，Kong 是建立在众所周知的 Nginx 反向代理服务器 T3 之上的。它在这个新生态系统中的角色是提供微服务工程师在日常开发过程中通常会使用或应该使用的服务(注意，不是“微”)。其中一个服务是 RESTful API 接口，用于在一种注册表中注册 API 本身，Marietti 提醒我不要把它称为“存储库”,原因我稍后会解释。

另一项服务是插件平台，提供微服务经常借用的常用功能基础。其中一个插件听起来应该很熟悉:身份验证。例如，OAuth 插件可以让 API 向后端的微服务提供认证。这样，可以确保在不同平台上交付的服务与它们声称的服务“对话”。

“它解决了处理认证协议和系统的所有难题，”首席执行官说。日志是另一个很好的例子，一个常见的服务，可能会暴露给微服务的插件，通过孔。

他指出，如果你将孔视为微服务将使用的服务的公共存储和访问机制，那么在一般意义上，“存储库”可能是一个合适的术语。但 Kong 并不是微服务本身的集合，就像 Docker Hub 将容器的图像收集到“repos”中一样。你用的 API 还是你自己的，托管在你自己的平台上。

## 集中分配

如果微服务架构的理想是长期成功，那么就需要有人来协调它。关于如何着手这项任务，人们首先想到的是为微服务构建和部署一个他们称之为“管理平台”的东西。

正如持续集成倡导者 Martin Fowler 所阐述的，当架构的指导原则之一是分散控制时，这很难实现。围绕分散控制很难建立一个中枢；问问任何尝试过共产主义的人就知道了。

尽管如此，这并不能阻止人们去尝试，因为正如任何一个资深共产主义者会告诉你的，你总有一天要向资本主义屈服。再举一个例子， [magnetic.io 的 Vamp](http://magnetic.io/#product) 试图成为一个跨平台的平台，在这个平台上，服务可以部署在任意数量的云服务上，同时作为同一个应用程序共存。

Mashape 的 Augusto Marietti 在讲述革命前的故事时解释道:“我认为有一段时间，我们一直生活在一个混合时代，许多公司都不是以微服务为中心，但也不再是铁板一块。

在 Marietti 为我们描绘的这个混合时代的图景中，大公司一直在古老的代码基础上运营他们的业务。他们处理现代化的方式是围绕他们现有的代码基础构建包装器，然后使用这些包装器将这些基础作为服务公开给移动服务。他举了一个大银行的例子，这里的每个人都知道它的名字，它的代码库深深地嵌入到它的基础设施中，由于担心他们可能会发现什么或他们可能会打扰到哪些古代的神，没有人深入到基础设施中去发现它。

因此，世行的移动解决方案就像一台深水钻机，像采集岩心样本一样采集代码。

Marietti 预计，至少在未来五年内，大公司将不得不继续以这种方式工作:有效地深入挖掘他们现有的代码库，然后将微服务包装在他们拉起的任何东西周围。当然，没有人在建造新的整体建筑，考古学家必须在 20 年后挖掘出来——或者至少，如果他们是，他们已经宣布自己是最高机密，我们需要政府的许可才能谈论它们。

“孔是从旧世界向新世界过渡的完美人选，”玛丽蒂说。“希望在未来，所有的公司都会像网飞一样，百分之百地运行在一个去耦的、以 API 为中心的微服务架构上。”

Kong 微服务管理层的 0.2.0-2 版本现在可以从 GitHub 的[下载，更多关于其架构和使用的信息可以从](https://github.com/Mashape/kong)[的](http://getkong.org/)获得。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>