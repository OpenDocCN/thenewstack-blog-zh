# 分散数据网格上的数据管理

> 原文：<https://thenewstack.io/data-management-on-a-decentralized-data-mesh/>

[](https://www.linkedin.com/in/fernando-velez-795792)

 [费尔南多·维勒兹

费尔南多是 Persistent Systems 的首席数据技术专家，Persistent Systems 是一家拥有 13，000 多名员工的全球解决方案提供商。他是一位有远见的软件技术专家，在数据管理、数据库系统、分析和信息管理方面有着广泛的职业生涯。在法国做了一段时间的研究员后，他在 Doubleclick(现在是谷歌的一部分)、Business Objects 和 SAP 等公司为这些领域市场开发和交付产品。](https://www.linkedin.com/in/fernando-velez-795792) [](https://www.linkedin.com/in/fernando-velez-795792)

数据网格是一个热门的架构概念，现在被列为主导的市场趋势。这是对渴望数据的大型组织在为决策提供数据时速度不足的一种反应，在这些组织中，必须考虑不断变化的复杂数据环境中的许多数据源、用例和用户类型。它指责集中式数据管理，因为它依赖于单个数据团队，而单个数据团队必须开发许多数据管道来为一些中央数据库(仓库、湖泊或主数据管理(MDM)中心)提供数据。

Data mesh 按领域组织其软件团队:每个团队处理自己的管道，并通过 API 将其数据作为“产品”提供，从单个消费点转移到多个消费点。该架构的技术不可知[原则](https://martinfowler.com/articles/data-mesh-principles.html)还解决了分散系统中出现的两个障碍:维护管道和基础设施的重复工作(通过中央自助服务平台)，以及不可互操作的数据产品(通过联合治理策略，如标准化数据格式、元数据表示和全球身份)。这两个“层”协同工作:表达这样的策略和标准应该使用平台中可用的计算设施。

我们认为数据网格受欢迎是实至名归的:它用合理的原则解决了一个真正的问题。然而，根据我们自己的经验，正如这里所报告的，企业经常需要来自其不同部门的综合见解，这转化为超越基于数据产品 API 的基本互操作性的需求。

为了使数据产品对分析有用，查询访问必须对消费开放。为了完全理解(可连接到其他数据产品)和依赖数据，除了 data mesh 在平台和联合治理层(模型描述和格式)中规定的内容之外，还需要在公共数据元素上达成一致。

事实上，正如我们在下面讨论的，它应该包括数据管理系统多年来在处理困难的数据集成问题时提供的一些重要功能。本文提出了一些可以在数据网格平台中使用的功能。

## **寻求数据整合**

简而言之，数据集成包括将来自几个不同来源的数据组合到一个统一的视图中，从而支持对组合数据集的分析。企业经常想要跨多个业务流程的洞察力，或者测试涉及多个业务流程的假设。例如，在一家消费品公司中，按地区找出某一类别的产品缺陷对销售、客户满意度和呼叫中心人员的影响。

这需要在通常使用不同操作系统的不同业务单位的流程中管理数据。获得这种洞察力需要数据集成能力。数据网格应该支持数据集成。

但是数据集成很难。我们认为这是因为以下挑战:

1.  **数据异构**。在我们公司上面的例子中，不同的操作系统存放不同格式和不一致语义的数据。
2.  **数据来源在种类和速度方面的爆炸**，这是由于云计算、物联网设备和移动性等新技术的普遍使用。
3.  **数据质量差**。除了上述问题之外，根本原因是数据所有权不足。大多数组织的数据质量[都非常差](https://hbr.org/2017/09/only-3-of-companies-data-meets-basic-quality-standards)。
4.  **并购**。许多组织以这种方式成长，继承了被收购公司的烂摊子。

由于其多功能性，数据仓库已经成为最流行的分析集成形式。它通过将数据移动到中央存储，并提供跨所有功能区域的通用统一视图，努力使这种异构性问题的每个方面均质化。然而，根据的调查，只有 22%的组织在过去两年中完全实现了任何数据仓库的 ROI。大多数数据仓库项目的失败都可以归因于上述的挑战。

 数据湖接收不需要符合统一视图的数据。通过清理/转换的建模和一致性被延迟到有业务需求的时候。数据湖并不能解决问题:今天，采用率已经下降，而且它们也有很高的失败率——根据 [Gartner](https://www.techrepublic.com/article/85-of-big-data-projects-fail-but-your-developers-can-help-yours-succeed/) 的说法，超过 85%，该公司引用缺乏治理、过时和不相关的数据作为[失败场景来防止](https://www.gartner.com/en/documents/3886263/how-to-avoid-data-lake-failures)。

联合或虚拟化系统实施另一种形式的集成，将数据留在原处，并将虚拟模型呈现为统一视图，但在查询处理能力和规模、统一历史管理以及在不更新数据的情况下清理数据的能力方面存在限制，因此使用率一直很低。然而，如下所述，这种情况正在改变。

最后，我们有主数据管理系统，它可以帮助组织集成数据质量问题最多的数据子集:他们的官方主数据资产，那些出现在多个运营应用程序中的“大级别”实体——客户、产品或地点。

它们提供了一个集中的、权威的中心，其中各个实体记录通过通用的、统一的模型和规则进行标准化，以避免不正确的(即脏的、重复的、不一致的)数据进入中心。MDM 项目也与高失败率相关联，尽管实现似乎[正在走向成熟](https://searchdatamanagement.techtarget.com/feature/Ten-years-on-master-data-management-software-market-comes-of-age)。

## **数据网格如何帮助数据集成**

通过按领域组织软件团队和分散所有权，data mesh 直接解决了数据质量的挑战。团队更接近数据的来源，更好地理解它，并且应该知道他们的消费者期望什么，因此他们最有能力解决数据质量差的主要根源。

联合治理团队确定测量什么——数据质量维度和 KPI——而数据平台团队提供“如何”部分——自动化测量的技术和最佳实践。

由于没有中央数据交付团队，消费者现在必须在数据产品中寻找数据，找到感兴趣的数据，并在需要时执行自己的集成-就像许多公司一样，在中央团队之外还有影子 IT 集成。

然而，由于“数据即产品”原则和联合治理标准，情况要好得多:数据产品通过标准元数据自我描述，可被发现，通过 API 统一访问，通过全局访问控制安全访问，并受益于托管的联合身份。

开发人员进行他们自己的集成——聚合域或与消费用例保持一致——仍然必须为它建立一个模型，这比建立一个 MDM hub 或数据集市的全局模型更简单，更不用说一个仓库了，因为它们是迭代地、有机地建立起来的，而不是预先的和跨组织的目标。他们还必须解决新数据产品中的数据质量问题，包括解决涉及同一实体的记录之间潜在的不一致问题。

## **提高数据网格中的数据集成能力**

### MDM 系统功能

让我们从 MDM 系统功能开始，因为它们有助于解决实体解析问题和解决不一致性。但是首先，我们认为强调 MDM 域和数据网格域概念之间的差异是很重要的。如上所述，主数据域是指跨多个应用程序和组织单位的*管理的“大级别”实体。*

相反，一个数据网格域是通过将一个复杂系统分解成沿着组织单元的【有界上下文】*而产生的。在上下文之间划出界限的主导因素是人类文化。一个 MDM 域对应于处理“相同概念”的几个数据网格域:*

*   一些域与源一致(例如，每个服务线或业务单位)
*   当*需要在某种程度上*将源域聚合成一个更全面的概念时，可以创建聚合数据域。

前一句中斜体的术语很重要。数据网格架构师 Zhamak Dehghani [明确警告](https://www.oreilly.com/library/view/data-mesh/9781492092384/ch04.html)不要创建 MDM 风格的、雄心勃勃的聚合域，捕捉特定概念的所有方面，例如“客户 360”，这意味着一个统一的跨组织模型，特别是如果来自不同文化的团队参与进来。

如果捕获一个复杂域的所有方面来发布一个可信的主数据中心是您的需求之一，那么 data mesh 将不会帮助您。这甚至会增加额外的负担，如建立自助服务基础设施、将数据作为产品实施，这将与交付速度背道而驰。

### **身份**

在她的数据网格原则文章中，Deghani 认为全球身份是平台和联邦治理层的一个基本关注点。身份识别听起来很简单，但对于复杂的领域(如客户),它需要匹配引擎的功能，该引擎使用个人姓名、组织名称、地址、标识符和日期等数据元素输入，通过创作的规则或机器学习方法来执行成对记录相似性计算。

市场提供通用匹配引擎(IBM、SAP、Informatica)、专用引擎(D&B 公司的数据匹配)和提供匹配能力的注册风格的 MDM 系统。

该服务还可以通过在创建 API 之前用批处理匹配和实时查找来包装这样的引擎，从而为域元素提供全局标识符。源对齐域和聚合域都可以调用这样的服务，各自选择自己的匹配策略。

### **聚合域中副本的一致性**

当两个记录引用同一个实体，并且它们属于同一个(数据网格)域时，该域必须决定应该保留哪些记录或记录值。最新更新是 MDM 系统中经常使用的策略。当同一实体的记录属于不同的域，并且它们的模型重叠时，当记录在重叠部分不一致时，就会出现不一致问题。

聚合域可以借用整合式 MDM 系统的功能:它们可以对重叠进行建模，检测相同实体的不一致记录，并根据预定义的生存策略决定如何解决冲突。常见的策略包括域源、值集和更新新近性。事实上，聚合域的实现可以通过包装合并风格的 MDM 系统来完成。

### **源对齐域内副本的同步**

上一节讨论了聚合域级别的一致性问题，但是在源对齐的域中这个问题仍然没有解决。为了解决这个问题，引入了其他更具雄心的 MDM 风格和功能:

*   **共存式系统**，有助于同步操作系统内的变化，以及
*   **事务型系统**，其中 MDM hub 成为主域的记录系统，通过服务提供对所有运营系统的读取访问；后者不再创建或编辑主数据。

如果源对齐域上的副本不一致的问题产生了太多的麻烦，一种解决方案是将共存风格的同步服务添加到网格平台，并如下使用它们:

*   源对齐域订阅聚合域内发生的实体变化，
*   在改变时，聚合域将改变的实体推送到订阅的域，并且
*   并发更新的竞争条件由治理级别的同步规则解决。

事务型集线器和数据网格截然不同；我们建议不要同时实现这两者。

### 分析师需要查询权限

互操作数据产品的基础是通过 API 提供访问，确保开发人员可以从其他域连接到其他域。数据产品开发人员应该提供操作性 API 和分析性 API，后者供消费者开发人员使用，例如，获取所有当前域记录、按标准过滤记录以及获取一段时间内的历史数据。API 既好又必要，因为它们是技术不可知的；通过封装，它们限制了内部数据结构变化的级联效应；他们促进安全。

然而，仅用于分析的 API 访问仅适用于数据科学工作负载或小型数据集。双型分析师更喜欢即席查询访问:数据提供者无法预测他们想要过滤、切片和切割数据的所有可能方式。如果没有直接的查询访问，他们必须通过 API 读取全部内容，并将其移动到另一个数据产品。

如果某个领域的数据需要进行分析，那么查询访问应该对消费者开放。请注意，市场上所有的商业智能(BI)工具都需要数据库连接。基于 API 的资源比 BI 工具可用的连接器多几个数量级。

### 应对变化的影响

如果查询访问是开放的，数据产品内部的数据模型更改将在所有消费查询中产生级联效应(考虑取消模型的规范化)。控制这种变化的影响的一种方法是通过当今数据目录产品中可用的数据沿袭技术。这些产品从 BI 工具、数据库和数据管道中间件收集元数据，将它们缝合在一起，并在表或视图上建立向下到列级别的查询依赖链。这种功能是对数据平台的一个受欢迎的补充。当然，在数据平台中采用数据目录还有一个明显的原因，那就是支持数据产品发现。

### 支持跨业务流程分析

我们现在转向对多种数据产品的分析，这就是最初对数据集成的追求是如何在数据网格上形成的。我们上面的例子——产品缺陷对销售和消费者满意度的影响——需要识别对支持销售和客户支持业务流程的数据产品具有重要意义的公共数据元素。其中包括地区代码、时间日历和产品层次结构。

支持数据互操作性意味着能够将相同地区和产品类别的 KPI 关联起来。这需要在这些公共数据元素的值上达成一致(这是 Kimball 的[符合尺寸](https://www.kimballgroup.com/2011/06/design-tip-135-conformed-dimensions-as-the-foundation-for-agile-data-warehousing/)等效)。创作、跟踪变更和向数据产品分发参考数据值必须受到治理:这种类似于 MDM 系统并受其支持的能力是包含在数据网格平台中的候选功能。

在分散的数据网格中，领域团队可以自主地将他们的数据产品存储在他们选择的系统中。我们在上面提到了虚拟化系统的使用是有限的，但最近的开源查询引擎——如 Trino，现在的[Starbust](https://www.starburst.io/)——已经朝着不可知存储技术的方向取得了重大进展，但仍然可以使用并行处理技术可扩展地处理数据。

一些组织可以不那么自由，让团队将他们的数据存储在同一底层数据引擎的指定区域，并且仍然忠实于 data mesh 的分散所有权原则，正如这里讨论的。在这种情况下，查询引擎在处理过程中需要移动的数据较少，因此可以获得更好的性能。

## **结束语**

Data mesh 有很好的成功机会，因为它有强大而合理的原则，并且因为有经过多年发展成熟的技术来解决许多相关的数据管理问题。然而，要完全确立自己的地位，需要有证据表明数据网格项目能够克服数据集成问题。具有数据平台层的数据网格是一个很好的起点，该数据平台层包含这里描述的数据管理功能。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>