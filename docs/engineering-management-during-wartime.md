# 战时工程管理

> 原文：<https://thenewstack.io/engineering-management-during-wartime/>

“早上我们去上班的时候，战争非常意外地来到了我们家。几个星期后，战争成了我们的新常态。”

这就是令人心碎的方式 [奥列格](https://www.linkedin.com/in/oleg-mykolaichenko-763ab699/) 拉开了他令人难忘的 [乌克兰](https://devopsdays.com.ua/#donation) 谈话的序幕。终身基辅居民已经从服务台支持、初级 DevOps 工程师成长为高级 DevOps 角色。现在，他在大型机器学习安全公司 SQUAD 担任基础设施负责人，管理着一个分布式团队，“所以我深深知道从不同的角度、公司和企业来看，事件是怎样的，”他说。

虽然入侵不是大多数工程应急计划考虑的事情，但 Mykolaichenko 认为，通过仔细的业务连续性规划和事件管理，SQUAD 为这一有史以来最严重的事件做了大约 80%的准备。不管你遇到什么样的危机，都有很多东西要学。通过适当的规划，恢复是可能的。

## **当最坏的事件发生时**

“再也没有时间了。你什么都改变不了。您不能添加更多的文档。你不能建立新的流程。您不能向 runbooks 中添加更多数据。您不能为知识共享创建会议。你不能测试任何备份。不行，你没时间了。因为最大和最糟糕的事件已经发生了，”2022 年 2 月 24 日，当米科拉琴科被俄罗斯轰炸他的国家的声音惊醒时说道。

很快，全球约 1000 名员工转向并聚集在 SQUAD 工程总监的一条指令周围:“在你到达一个让你感到安全的地方之前，不要担心工作。”

预料到攻击的可能性，小队已经给工作人员提供了一份可能的危险区域和前方 [连队掩体](https://www.linkedin.com/posts/squad-ua_even-before-the-start-of-russias-defiant-activity-6910508143189880832-BRIq?utm_source=linkedin_share&utm_medium=member_desktop_web) 的清单。不久之后，他们在罗马尼亚和波兰开设了办事处，并详细介绍了如何纳税和遵守当地法律。对于那些留在乌克兰的人，SQUAD 更正式地创建了一群志愿者，并努力满足那些加入乌克兰军队的队友的需求。

小队团队每天给 ping 员工写一个开源 bot，以:

*   检查它们是否安全。
*   检查工作可用性和承诺水平。
*   检查互联网连接。

这样，他们可以很快知道，在个人层面，每个员工是否都可以，在公司层面，是否有能力取得工程进展。即使在危机时期，让利益相关者和客户尽可能了解最新情况也是至关重要的。

“信任是这里的关键。你永远不应该逼迫你的工程师，因为你的工程师正处于压力之下，当他们能够保证自己的安全并[帮助]他们的家人保持在安全的地方时，他们会尽最大努力，”Mykolaichenko 说。如果在战争期间出了什么问题，那将比你的事故管理系统中的任何事情都要糟糕得多。

团队领导的角色很快包括照顾团队的心理健康。一开始，一些工程师唠叨着要把个人安全放在简单得多的日常任务之上。"在两个任务之间，人类会选择最清晰的任务."Mykolaichenko 说，当情况不明朗时，工程师会选择工作。班领导必须更好地沟通何时去，去哪里，带什么。

他还觉得自己的角色转向了帮助他的团队发现“为大胜利做出贡献的方式，所以你必须分享你的愿景，即每个团队成员如何为乌克兰的大胜利做出贡献。”

这包括贡献一部分有意义的薪水和志愿服务。由于 SQUAD 是一家机器学习公司，几位工程师正在与一家游戏公司合作，该公司拥有大量敌方军用坦克和装备的 3D 模型，可以更快地区分敌人的渗透。

## 如何创建业务连续性计划

虽然优先级可能会发生变化，但利益相关方需要在事件发生时就最重要的优先级达成一致。对于 SQUAD 来说，他们必须在数据处理管道中维护 50 多个关键应用程序，拥有[Pb](https://www.techtarget.com/searchstorage/definition/petabyte)的数据。

“定义最关键的部分，这样你就会知道你总是在正确的地方战斗，”Mykolaichenko 说。“你不需要把时间浪费在不重要的警报和嘈杂的警告上。”

他建议，一旦你知道谁在处理什么事件，就继续现有项目的进展，衡量可用资源，看看是否有机会取得至少一些进展。

团队领导还负责确保业务连续性，Mykolaichenko 说这包括:

*   不断与内部和外部利益相关者保持同步。
*   跟踪指标，包括确认时间和解决时间。
*   准备好介入并亲自参与最重要的工作。
*   创建一个新的公式，通过新的现实来评估和度量项目。

Mykolaichenko 建议，记录并澄清所有系统、服务、流程和职责，并在至少两个团队成员之间分享。这对团队领导来说更为重要，要成为一个完美的[被公交车撞的例子](https://english.stackexchange.com/questions/44977/origin-reason-for-the-hit-by-a-bus-phrase)，用你的方式和流程培训你的替代者。

一旦适应了 [新的工作-战争平衡](https://thenewstack.io/the-work-war-balance-of-open-source-developers-in-ukraine/) ，小队必须再次检查时区和可用的工作时间段，以 Terraform 为代码建立一个新的轮换计划，该计划被集成到前面提到的状态机器人中。

“让开发人员参与到生产环境中总是一个积极的变化，”他说，鼓励不仅仅是运营人员，还有开发人员随时待命，以分散责任并增加团队的弹性。

## 如何建立灾难恢复计划

“你需要知道如果最坏的情况发生了，该怎么办，”Mykolaichenko 说。灾难恢复计划不应过于详细，但应包括所有关键任务假设—数据库停机或被删除，数据被损坏，或者 Kubernetes 集群、负载平衡器、DNS 提供商或整个互联网消失—以及每个生产就绪系统所需的程序。

灾难恢复计划应该简单地阐明潜在的问题以及解决这些问题的途径。对于 SQUAD 来说，这需要召开几次会议来真正审查和挖掘架构依赖性，以确定:

1.  **识别关键操作。**哪些干扰会影响你的工作能力？
2.  **评估灾难场景。**确定您的优先事项、恢复目标和时间表。
3.  **制定沟通计划。**给特定的人和部门分配角色。
4.  制定数据备份和恢复计划。如何修复，如何遏制，以及如何监控进一步的入侵。
5.  测试你的计划。对于差距和弱点，添加提高效率所需的任何步骤。

## 警报操作手册

Mykolaichenko 说，操作手册是适当的应急计划的另一个先决条件，配有详细的解释，包括:

*   如何处理警报的详细步骤和命令。
*   在哪里可以找到更多的细节、文档、数据、架构模式和 Grafana 仪表板。
*   如何连接。
*   如何调试或修复。
*   如何确认和报告某事是固定的。
*   所有操作手册都以代码形式存储。

这使得任何人、任何地方都可以挺身而出，帮助处理任何警报。他说，如果任何事件有重复发生的风险，必须创建一个票证来自动或永久解决问题。

## 模板化你自己的死后

在失败的情况下，必须进行事后分析，但是，特别是在危机模式下，Mykolaichenko 建议，尽可能保持简单。你应该创建自己的事后模板，但他特别建议不要使用 [来自谷歌](https://sre.google/sre-book/example-postmortem/) 等“巨头”的模板，也不要使用开源模板——“因为通常它们太大了，你会浪费时间粘贴所有必需的角色和台词来遵循你可能不需要的方法。即使在危机中，也要努力关注重要的事情。”

他说，关注直接影响业务的问题，寻找可衡量的指标，如:

*   ****有多少用户受到影响？****
***   **你能量化金钱损失吗？***   **哪些服务器受到了影响？****

 **然后，Mykolaichenko 说要有警戒级别来决定修复的紧急程度。他说，一旦你采用了这一系列的事后分析实践，你的团队将能够扩展、自动化和检查事后分析，以找到更多的根本原因并进行更深入的挖掘。回到最初的安全第一指令，他说他的团队将在战争结束后更彻底地检查尸体。

## 如何建立一个“自动驾驶”团队

尤其是在不确定时期，团队领导的角色是确保他们正在建立一个自给自足的团队。您的团队应该知道当您离线时应该做什么，因为断开连接比以往任何时候都重要，或者如果您正在休病假或遇到其他危机，包括如何:

*   **执行没有你的流程。**(冲刺启动、每日站立、结束实施阶段、报告)
*   **从积压中取票。**
*   **必要时改变轻重缓急。**
*   向管理层报告。

他认为，一旦你促成了一个自动驾驶团队，你将需要处理更复杂和有趣的高层次问题，比如帮助培养下一任团队领导。

“建立一个自动驾驶团队是团队领导职责中最具挑战性的部分，因为现实生活中总会出现反模式，”Mykolaichenko 警告说。他称之为反模式:像对待孩子一样对待你的团队。

## 自我修复架构

他说，为了最大限度地减少面向用户的环境中的问题，用自我修复的方法设计你的应用程序来设计失败也很重要。

“幸运的是，DevOps 世界创造了大量如何构建稳定可靠软件的方法，”Mykolaichenko 说，包括断路器、自动重试和高级消息队列协议(AMQP)。他说，每一个失败的请求都应该自动重试。然后，如果重试请求失败，您可以成倍地增加重试次数或发送到延迟队列。他说，如果这个远程队列不可用，你可以保存到共享存储器，几天后再试。

“回退可以防止停机，可以防止数据丢失，”他还推荐道。Kubernetes 短暂的天性和计划者特别擅长自我毁灭和培养一个新的群体。

他还建议对所有面向客户的端点实施速率限制，并尽一切努力消除单点故障。他继续提出进一步的建议:

**失败计划:**

*   确定服务限制
*   使用自节流
*   考虑替代资源类型

**标准化:**

*   引入通用仪器
*   收集以事件为中心的诊断信息
*   让每个人都能看到

**优雅地失败:**

*   重新路由和解锁
*   自动化已知解决方案
*   通知人类

“如果你身处另一个更大的事故中，没有什么比管理事故更难的了，”Mykolaichenko 说，并以一些观点结束了他的讲话。

“你总是有机会让你的基础设施、应用程序、管道、工作流程、工作负载和所有流程像现在的乌克兰一样强大，或者像战争期间举办这次会议的乌克兰组织者一样强大。”

[乌克兰开源开发者的工作战争平衡](https://thenewstack.simplecast.com/episodes/the-work-war-balance-of-open-source-developers-in-ukraine)

## 直接支持一个被围困的乌克兰

如果最近像 [文尼察州](https://apnews.com/article/russia-ukraine-zelenskyy-kyiv-terrorism-ce25b78b4325ad0157d1b0361e5ed7ec) 那样对乌克兰平民的跨国轰炸的增加还不足以提醒人们，俄罗斯对乌克兰的入侵已经进入了第五个月。仍然迫切需要各种形式的帮助。“乌克兰志愿者日”是去年 5 月举办的一项虚拟活动，为以下慈善机构筹集了超过 10 万美元的善款:

*   **[](https://voices.org.ua/en/)********——为战争受害儿童提供心理支持。******
*******   **[**蒙斯特洛夫公司基金会**](http://monstrov.org/)****——为处于危机中的人提供人道主义和医疗救助。*****   **[**洞察**](https://www.insight-ukraine.org/en/)** **—支持乌克兰的 LGBTQI 群体。*****   **[**科洛基金会**](https://www.kolo-fund.org/en)****——组织人道主义援助，协调平民撤离。*****   **[**Razom**](https://www.razomforukraine.org//)****——支持促进乌克兰民主和繁荣的短期和长期项目。*****   **[**快乐爪子**](https://happypaw.ua/en/)****——为无家可归的猫狗提供救助。****************

 ****您可以直接支持这些重要的事业，也可以通过 [购买一张乌克兰 DevOpsDays](https://devopsdays.com.ua/#donation)的门票，这将让您有机会参加全球 DevOps 领导的 17 场会议，他们自愿抽出时间在这个战区为上述慈善机构筹集资金。

基辅 [小队](https://squad.ua/careers) 正在招人。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>******