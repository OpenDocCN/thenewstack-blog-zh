# 面向运营的机器学习

> 原文：<https://thenewstack.io/machine-learning-for-operations/>

管理基础设施是一个复杂的问题，有大量的信号和许多可以采取的应对措施；这是机器学习可以提供帮助的情况的经典定义。MLOps 或 aiop(Gartner 称之为这种趋势)的采用一直很缓慢，这可能是因为充分利用它们需要自动化来应用建议，至少部分是因为由于需要确保可用性，它自然是保守的。IT 团队之间的孤岛，如分离服务管理和性能管理，也使得难以收集所有必要的数据来进行有效的机器学习。但是潜力是巨大的，人们的兴趣也在增长。

AIOps 不仅可以帮助实现可用性和性能监控、事件关联和分析、It 服务管理、帮助台和客户支持以及基础设施自动化。这也是 DevOps 整体“左移”趋势的一部分，运营成为应用开发和交付的一个组成部分。这意味着变得越来越响应和主动，但也意味着改善团队之间的沟通和协调，并连接数据仓库。随着越来越多的应用需要运营、监控和支持，以及越来越多的应用使用微服务、容器和云服务，需要关注的基础设施数量成倍增加，机器学习正在成为跟上发展的关键工具。

IT 和运营是机器学习和数据科学的天然家园。Vivek Bhalla 说，如果您的组织中没有数据科学团队，IT 团队通常会成为“卓越中心”，直到最近，他还是负责 AIOps 的 Gartner 研究总监，现在是 [Moogsoft](https://www.moogsoft.com/) 的产品管理总监。

Gartner 预测，到 2022 年，40%的大型企业将使用机器学习来支持甚至部分取代监控、服务台和自动化流程。这只是开始在少数人身上发生。

在最近的一项 Gartner 调查中，人工智能在 IT 和运营中最受欢迎的应用是分析大数据(18%)和用于 IT 服务管理的聊天机器人-15%的人已经在使用聊天机器人，另有 30%的人计划到 2019 年底这样做。大约 8%的人正在使用预测分析来防止故障(34%的人计划这样做)，6%的人已经在使用人工智能进行应用性能管理(23%的人计划这样做)，5%的人使用人工智能进行网络监控和诊断(31%的人计划这样做)。大约 5%的人已经使用人工智能来优化公共云中的工作负载；只有 19%的人计划在未来这样做，这是一个不太受欢迎的方向。只有 4%的人已经使用它来改进根本原因分析，尽管这是第二大最受欢迎的计划用途，占 40%(仅次于 42%的计划不太具体的大数据分析)。三分之一还计划将人工智能用于一般 IT 和运营优化以及智能自动化。

Bhalla 在最近的 Moogsoft 活动中表示:“看看那些重复性的、低级别的任务，自动化已经成熟，可以腾出运营人员的时间，降低他们的压力水平，让他们利用额外的带宽更智能地工作。”

随着那些现成产品从使用平均数据的带宽分析和可视化成熟到使用流和有线数据以及存储的日志的更实时的方法，越来越多的人正在使用现成的解决方案，而不是使用像 [Logstash](https://github.com/elastic/logstash) 和 [Elastic X-Pack](https://www.elastic.co/guide/en/x-pack/current/xpack-introduction.html) 这样的工具来完成 [ELK stack](https://www.elastic.co/elk-stack) 的“本土”实施。像 [Splunk](https://www.splunk.com/) 和 [Sumo Logic](https://www.sumologic.com/) 这样的日志分析工具已经增加了机器学习选项，用于从历史数据中提取模式和异常，以及实时服务健康状况的指标和可视化，当检测到异常时会发出警报，以及自动化选项。micro Focus '[Operations Bridge](https://www.service-berry.com/micro-focus-operations-bridge-it-operations-managementitom/)将异常检测和相关警报的群集添加到 IT 监控中，而 [Sematext Cloud](https://sematext.com/cloud/) 通过从性能指标和日志中进行机器学习来执行异常检测。类似地，像 [Moogsoft AIOps](https://www.moogsoft.com/product/) 和 [OpsRamp OpsQ](https://www.opsramp.com/) 这样的工具从自动实时模式发现开始，并将其扩展到存储的历史数据。

机器学习也出现在现有的工具中，如网络监控和管理工具；例如， [Juniper 的 AppFormix](https://www.juniper.net/us/en/products-services/application-management-orchestration/appformix/) 分析和优化平台使用网络遥测技术来检测异常情况，如链路上的延迟比预期的高或带宽比预期的低。除了发送警报之外，它还可以向网络控制器发出 REST 调用，以关闭链路进行维护，并将流量重新路由到其他地方。 [Morpheus](https://www.morpheusdata.com/analytics) 利用机器学习将你的工作负载放在虚拟机、容器或者不同的公有云中，以节省资金；这包括通过 ServiceNow 请求自动暂停和关闭工作负载。

## 从相关到因果

Gartner 认为历史数据的可视化和统计分析是一种反应式方法；您可以使用机器学习来回顾和了解发生了什么，无论是对总体性能的了解还是对根本原因的分析。随着您将历史和实时数据与机器学习和因果分析相结合，运营团队可以通过预测性警告系统变得更加主动。如果人工智能驱动的系统要预测问题，甚至自动修复，它们需要做的不仅仅是发现模式；他们需要理解他们。

简单地检测哪些警报和错误来自同一个事件是非常有价值的，可以将大量的噪音转化为有用的东西。“IT 系统产生大量的自我描述数据，但产生的数据流往往是高度冗余的，”Moogsoft 首席技术官[威尔·卡佩里](https://www.linkedin.com/in/will-cappelli-7293132/)告诉新栈。"去掉冗余会把大量但信息贫乏的东西变成更稀薄、信息丰富的东西."这可以减少高达 95%的数据量。Moogsoft 的新观察工具(你可以在没有 Moogsoft AIOps 平台的其余部分的情况下部署它)获取时间序列数据和指标数据，然后丢弃所有不是异常或其背景的数据。

关联在同一时间段内创建的事件(考虑延迟)，使用 IT 系统的物理和应用程序拓扑，并比较相关文本的文本流(客户可以选择编写自己的规则)，从而聚合警报，使其更易于管理。(OpsQ 和 [BigPanda 的 L0](https://www.bigpanda.io/our-product/lo-autonomous-layer/) 做类似的相关和聚合，以实现可视性和降噪)。

下一个层次是因果分析，卡佩里解释道。“你最终会得到一个包含相关数据项的信封，你有理由认为这些数据项是相关的，然后我们引入因果分析。这些数据元素中哪些指向的事件是其他事件的原因，而这些事件指向此包中的其他数据项？其中一些是通过使用统计机器学习的概率根本原因分析来完成的，这在 IBM、Big Panda、Elastic 和 Splunk 的 AIOps 工具中很常见。“我们查看相关数据的数据包，我们可以基于神经网络来构建这个数据包。”

Moogsoft 还使用了第二因果系统；一个最近开发的使用图的顶点熵算法。“有很多方法可以查看拓扑信息，并找出拓扑中的哪些节点最有可能是重要事件发生的地方。通过观察一个节点与其他几个节点的局部连通性，您可以了解一个节点在图中有多重要。一旦你发现哪些节点是重要的，这就是一个很大的线索，表明来自该节点的数据是根本原因，或者是起着因果作用。”

从了解事故原因到修复事故仍然是一个巨大的飞跃。目前，Moogsoft 将因果相关的数据打包成一个“情境”(有点像 ServiceNow 超级票证)，并将其放入一个名为“情境室”的协作工作区，该工作区会建议谁拥有解决问题的正确技能，并试图引导他们找到有效的解决方案。

“一个情境不仅仅是一个事件的通知，它还是一个对事件意义的分析，”卡佩里说。“我们的算法识别不同的情况，并查看这种情况与另一种情况如何相似，以便可以应用为解决这种情况而做的事情。这让你有能力保存关于如何处理问题的机构知识，并从过去发生的事情中学习。如果有一个新团队在新的情况下走上了一条已经被证明是徒劳的道路，我们会告诉他们将他们引向不同的方向。”

情况室不包括自动化或操作手册自动化；相反，它们连接到像 Puppet、Chef 和 Ansible 这样的工具。但这意味着 AIOps 可能会将您从大量原始事件带到服务管理环境，在那里您可以解决问题。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>