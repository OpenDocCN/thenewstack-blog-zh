# 采用 Kubernetes 本地备份解决方案的 7 个理由

> 原文：<https://thenewstack.io/7-reasons-to-adopt-a-kubernetes-native-backup-solution/>

[](https://www.linkedin.com/in/rishigaurav/)

 [高拉夫·里什

Gaurav 是 Veeam 公司 Kasten 的产品副总裁。他处于 Kubernetes 生态系统合作伙伴关系的前沿，并且是云原生创新的频繁发言人和作者。他之前负责思科云媒体处理业务的战略和产品管理。](https://www.linkedin.com/in/rishigaurav/) [](https://www.linkedin.com/in/rishigaurav/)

组织继续向 Kubernetes 环境转移，但涉及状态数据备份的挑战依然存在。

根据 2019 年由[云本地计算基金会](https://cncf.io/?utm_content=inline-mention)(CNCF)[进行的一项调查，78%的受访者](https://www.cncf.io/wp-content/uploads/2020/08/CNCF_Survey_Report.pdf)表示他们正在以某种形式使用 Kubernetes，95%的人表示他们正在使用、评估或计划使用 Kubernetes 中的存储。

然而，这些统计数据中没有提到的是，在没有适当的数据备份和管理系统的情况下，在 Kubernetes 上部署应用程序会产生许多数据泄露、丢失或损坏的风险。

这种说法可能与 Kubernetes 平台的一些普遍观点相矛盾——许多人认为跨故障域运行复制数据服务的能力足以保护数据。但是复制不是数据备份或存储。

虽然复制支持高度可靠的应用程序，但它不能防止数据丢失和损坏。例如，删除数据的错误很容易被复制，这可能会导致数据灾难。

## 本机备份是您的最佳选择，原因如下

虽然您可能想利用遗留的备份工具，例如用于虚拟机的工具，但是有几个重要的原因说明在容器化的 Kubernetes 环境中这不是一个好主意。

事实上，使用传统备份解决方案备份 Kubernetes 应用程序实际上会增加数据丢失的风险，这是由于容器的性质以及容器中有状态和无状态组件的组合。需要保留数据和状态来恢复应用程序，而有状态组件在持久存储卷中维护数据和状态，无状态组件则不这样做。恢复应用程序而不在单独的位置备份无状态组件将导致恢复失败、配置错误和数据丢失。

Kubernetes-native 备份解决方案有助于降低风险并加快恢复速度，同时还能提供其他重要优势，帮助您的团队更高效地执行备份。让我们看看为什么 Kubernetes 本机备份解决方案是保护您不断扩展的 Kubernetes 环境的最佳选择:

1.  它适应 Kubernetes 部署模式。在容器化的应用程序中，没有到任何服务器或虚拟机的映射。应用程序组件分布在所有服务器上，以提高容错能力和性能。因此，传统的备份解决方案无法在不从其他应用程序收集数据的情况下捕获特定应用程序的状态，因此可能会导致错误配置。传统解决方案以设备为中心，旨在备份虚拟机，而 Kubernetes-native 解决方案可以适应容器化应用程序的动态方面，执行负载平衡以适应容器不断变化的需求和内容，实时发现变化并捕获所有应用程序上下文。
2.  它与“左移”开发一致:Kubernetes 是关于快速开发周期的。其独特的设计需要以应用程序为中心的备份解决方案，并符合 DevOps 的“左移”理念。在左移方法中，开发人员将应用程序和基础设施组件定义为代码，并动态提供这些编程请求。尽管左移是敏捷开发环境的基石，但它可能会带来配置错误导致数据丢失的风险。备份和保护 Kubernetes 需要自动发现新的和不断变化的应用程序，而开发人员不需要对他们的应用程序或打包进行任何更改。该解决方案还应该是 API 驱动的，以消除采用的任何障碍。
3.  它简化了操作:技能差距是真实的。许多只在 Linux 或 vSphere 环境中工作过的开发人员来到 Kubernetes，因此备份工具提供 CLI 访问和易于使用的仪表板非常重要。这将有助于弥合差距并隐藏底层复杂性，从而简化备份工作流。这样，操作员不必了解如何保护群集中的数百万个组件，也不必执行各种手动任务来更新具有恢复卷的应用程序。
4.  它支持多集群可扩展性。处理 Kubernetes 集群中的数百万个离散组件需要一个解决方案，该解决方案能够大规模地捕获和理解应用程序、数据和 Kubernetes 状态之间的关系。它必须能够动态适应应用程序和群集的变化，并且在不使用时规模缩减到零—所有这些都需要最少的操作员参与。Kubernetes 多集群配置的使用越来越多，这使得需求更加复杂，这些配置通常分布在不同的环境、团队和应用程序边界、区域、云和本地数据中心。适应多集群可扩展性的解决方案将消除大量运营负担，为团队节省时间和资金。
5.  **它填补了保护空白** : Kubernetes 是为容错而设计的，但复制不是备份。即使在云中，复制也会遭受数据损坏和删除。想想本地存储快照—它们通常无法抵御硬件故障，如果您删除一个，相关的快照也可能会丢失。此外，停止文件系统进行备份可能需要提升安全权限。本地解决方案可以在不牺牲安全性的情况下为备份准备数据，并透明地跨各种应用堆栈和部署方法工作，而不会增加运营商工作流程的复杂性。
6.  **它增强了安全性**:如果不削弱集群内的隔离策略，传统备份解决方案无法发现应用程序，更不用说访问或停止应用程序了。相比之下，Kubernetes-native 解决方案可以将自己嵌入到控制平面中，并规避这些限制。基于角色的访问控制(RBAC)是一项关键需求，应该与 Kubernetes 中定义的角色保持一致，以支持自助服务功能，并最大限度地减少开发人员学习其他角色管理系统的需求。
    本地备份系统将理解 Kubernetes 证书管理和存储集成[密钥管理系统(KMSs)](https://en.wikipedia.org/wiki/Key_management) ，并通过 [Kubernetes Secrets](https://kubernetes.io/docs/concepts/configuration/secret/) 接口支持[客户管理的加密密钥(CMEKs)](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/customer-managed-encryption) ，以避免以纯文本方式传输应用程序数据。它可以执行独立的备份来抵御恶意软件和勒索软件，并且可能具有深度平台集成来实现快速、自动化的恢复。
7.  **与云原生生态系统的集成**。开发生态系统已经扩展到包括多种数据服务(例如，MongoDB、MySQL 和 Cassandra)，并且通常在同一个应用程序中使用这些服务。Kubernetes-native 备份解决方案可以在服务内部和跨服务捕获整个应用程序堆栈的一致副本。它还可以从副本中识别和收集数据，减少对应用程序的影响，并提高性能和效率。随着越来越多的组织在不同的环境中运行 Kubernetes 集群，将备份与开发人员和运营商习惯的云原生工具(如用于日志记录和根本原因分析的 Prometheus 或 Kubernetes APIs)集成的能力将变得至关重要。

## 利用本机备份计划阻止数据丢失

虽然定期备份是开发团队的标准程序，但 Kubernetes 的日益普及要求重新审视传统的备份方法，以确保数据保护和安全性，以及企业应用程序的可靠性和可用性。

但是 Kubernetes 不同于其他开发环境，它具有独特的特征，需要一种新的方法来备份关键的应用程序数据和存储。传统的基于设备的方法根本无法解决问题，依赖复制服务是一种有风险的方法。Kubernetes-native 备份解决方案是确保安全、可靠的数据备份的唯一方法，不会中断开发人员的工作流程或增加可能抑制创新的复杂性。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>