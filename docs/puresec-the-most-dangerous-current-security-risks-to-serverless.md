# PureSec:当前无服务器最危险的安全风险

> 原文：<https://thenewstack.io/puresec-the-most-dangerous-current-security-risks-to-serverless/>

根据最近由完全专注于无服务器安全的无服务器工具 [PureSec](https://www.puresec.io/) 的联合创始人兼首席技术官[奥里·西格尔](https://twitter.com/orysegal)编制的[十大无服务器安全威胁](https://github.com/puresec/sas-top-10)，过度授权的功能权限和事件数据注入是无服务器环境的两大安全威胁之一。

Segal 证实，在无服务器系统中，底层基础设施由云提供商保护。因此，云提供商自己最终负责修补和升级基础设施，这是转向无服务器方法的最大好处之一。

“但是你仍然要对身份和访问管理以及应用程序本身负责，”Segal 警告说。

Segal 说，当考虑到无服务器应用安全时，有许多攻击媒介。当一个事件被触发时，它执行一个功能，该功能可以与第三方组件交互，然后生成一个输出。所有这些活动都是潜在的攻击面。

“攻击无服务器系统有三种主要方式，”Segal 说:

1.  **通过事件功能(例如，消息队列、流处理或数据库访问)，以及事件数据。Segal 给出了一个 HTTP 请求的例子，它可以通过参数或报头进行攻击。**
2.  **通过代码本身。**当有人部署恶意代码，或者通过网络钓鱼攻击、内部威胁或第三方库更改代码时，就会发生这种攻击。Segal 特别指出，最近一些 Python 库中出现了恶意代码问题，因此当开发人员在他们的无服务器架构设计中重用这些代码时，他们无意中引入了安全威胁。
3.  **通过损害功能与之交互的外部组件之一。**例如，当无服务器工作流程中的 S3 存储桶或其他组件中存在不安全的资产时，就会出现这种情况。

“我们意识到传统的安全解决方案和产品存在问题，”Segal 说。“传统产品需要运行基础设施来观察和监控异常情况。但是在无服务器中，您不再控制基础架构，因此您无法部署这些传统解决方案。它们现在不适合无服务器。”

相反，Segal 认为，无服务器应用程序安全不应该是“你最后栓上的东西”。相反，安全性成为整体无服务器设计的一部分。当人们谈到现代应用程序架构设计的 DevSecOps 时，可能会想到 AppSecOps。

Segal 说，在无服务器系统中，安全性部分在于将正确的策略与各种功能和无服务器组件相匹配。“例如，如果您正在从 S3 存储桶中收集数据，您需要查看 IAM 角色，并确保它们是细粒度的，只适合所需的访问权限，而不是更宽的范围。还有其他类型的静态分析可以在无服务器应用程序的设计中进行，以确保没有任何安全漏洞，”他说。

Segal 给出了一个无服务器工作流的例子，其中 HR 候选人将他们的简历作为电子邮件的 PDF 附件提交。无服务器的工作流程可能会触发 lambda 函数，从电子邮件中提取附件，将 PDF 转换为文本，检查简历文本是否确认候选人符合专业要求，然后将所有内容放入 AmazonDB 数据库。在这种情况下，无服务器架构师需要确保当函数更新 DynamoDB 中的数据时，它只能更新数据，而不能访问更大范围的数据。

“我们在这类例子中看到的是两个安全风险。我们看到的最常见的是函数数据强制、过度特权函数和不安全的依赖，”Segal 说。

## 解决特权过多的函数

Segal 说，降低过度特权函数带来的安全风险的最好方法是始终应用“最小权限概念”。“对于每个功能，您需要知道运行所需的绝对最小权限，您只需在 IAM 策略中允许这些权限，”Segal 表示，这一点非常重要，因此在 PureSec，他们已经将它作为解决方案的一部分，以帮助用户自动化 IAM 角色。

“我在 AWS 上的角色是一把双刃剑，”西格尔说。“粒度给了你很大的权力，你可以定义实体实际能做什么。问题是您需要学习权限的确切模型，并准确理解您的代码需要什么。他建议说:“设计系统的架构师需要运行一个威胁模型，然后定义所需的角色，开发人员会将这些角色编码到配置中。

## 应对数据注入风险

Segal 表示，数据注入风险已经伴随 SQL 注入 20 年了，在无服务器系统中也是同样的挑战。“输入到代码中的每一条数据都需要仔细检查:代码永远不应该只相信外部输入，”Segal 建议道。“开发人员仍然会犯这些错误的原因是因为验证数据并不简单。您必须清理和验证您的函数，对您的所有输入运行验证，并确保输入符合您预期的输入。无论何时接受输入，都必须编写杀毒器/验证器函数。它变得复杂，所以分析输入并不那么简单。规则应该是，你从外部获取的任何数据，你都应该确保它是你所期望的，并且不能包含任何攻击，”Segal 说。

随着无服务器系统越来越多地进入以前设计了概念验证用例的企业的生产环境，PureSec 看到了更大的关注点，而不是安全性，这不仅是管理威胁的一种方式，也是合规性要求的一部分。某些行业的法规可能要求企业证明，不仅底层云基础架构符合 SOC2 或 PCI 标准(这很容易做到)，而且现在他们自己的定制代码也需要符合标准。

专题图片:由[米尔科维](https://unsplash.com/photos/kYlYwQze5vI?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/search/photos/gate?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>