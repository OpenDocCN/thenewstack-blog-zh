# Magnum 是名称，Docker 容器管理是游戏

> 原文：<https://thenewstack.io/magnum-is-the-name-docker-container-management-is-the-game/>

创建 OpenStack 的人将它作为一种将资源集中在一起供虚拟机使用的方法。Docker 容器是一台机器，它是虚拟的，但它不是我们所知道的 VM。Docker 和 OpenStack 是操作可消费基础设施的两种方式。双方都没有义务“拥抱”对方。

OpenStack 可以运行 Docker 容器……有点像。Docker 容器有一个管理程序驱动程序[,使它们能够在 OpenStack 的计算平台上运行，也称为 Nova。Docker 和其他虚拟机有望](https://wiki.openstack.org/wiki/Docker)[在 Nova 平台上以互补的方式](https://www.mirantis.com/blog/need-openstack-use-docker/)运行。但是因为容器不是真正的 VM，所以它不应该像 VM 一样被管理。

这两个开源系统很难知道如何处理彼此。就像劳雷尔和科斯特洛一样，他们看起来就像是一段美好友谊的两半，正等着走到一起——只不过不是彼此。

因此，周三上午在温哥华举行的 OpenStack 峰会上，Rackspace 杰出的建筑师阿德里安·奥托和思科首席软件工程师史蒂文·大可首次展示了他们的系统可能采用的一种方式:OpenStack 的想法，微软过去称之为“拥抱和扩展”

不管出于什么原因，它被叫做玛格南。除了一个非常关键的战略补充，它没有对 Docker 堆栈进行任何激进的添加，因为它已经开始被认可。

## 停靠在马格南湾

奥托解释说，码头集装箱有自己的要求:

> 容器——因为它们有不同的生命周期，因为它们有不同的 API——需要一个专用的服务，该服务有一个专用于容器的 API。

套用一句话，这是一个新的堆栈，由已知的元素组成:以 Kubernetes 为指挥的 OpenStack，Kubernetes 内部子网的[法兰绒覆盖网络](https://github.com/coreos/flannel)，以及 Docker Swarm 集群。

“Magnum 与之前的其他容器软件不同，”Otto 继续说道，“它与众不同的第一点是，它是多租户的。”事实上，这一发现说明了为什么仅仅在 Nova 上运行虚拟机管理程序驱动程序是不够的:OpenStack 数据中心在云业务中。

如果容器要成为真正的混合云的一部分，那么它们不仅需要是可消费的，还必须成为消费品。这意味着他们需要同样的东西，任何其他容器系统需要适销对路，无论是橡胶板条箱或塑料袋:包装。

这是 Magnum 对生态系统的关键补充:容器(或 Kubernetes 配置中的 pod)和运行它们的虚拟机管理程序之间的额外抽象层。Magnum 将该组件称为“隔间”，您可以将其视为客户租赁的码头的一部分。

正如 Otto 所解释的，在 Magnum 模型中，Nova 的一个实例是一个节点。他思考这个问题的方式是，节点可以在任何地方—理论上，它可以是一个虚拟机。

“海湾是集装箱编排系统去的地方，”他说。“你有梦龙 API。作为用户，您创建一个隔间。一旦你有了一个隔间，你就可以开始往隔间里放东西了。你放在那里的东西，如果你用库伯内特斯海湾型，就是豆荚。如果你使用 Docker Swarm bay 类型，你放在那里的东西就是容器。”

机架的优点是可以通过模板进行配置，从而使最终客户能够自行配置服务，而不需要像 Red Hat 软件工程师在前一天的一次会议上所说的那样需要博士学位。它还支持一种以客户为中心的配置，这使得 Magnum 可以作为一个真正的多租户环境运行，防止其他用户看到自己机架中配置的所有内容，即使在利用公共云资源时也是如此。并且由于间隔供应功能是通过异步 API 处理的，请求这些功能的服务接收到对该请求的 HTTP 201 响应，而不是必须等待可能几分钟。

“我们集成了 OpenStack 服务，”Otto 补充道。“OpenStack 做得好的一切，我们都想利用。我们不想在任何地方重新发明轮子。”例如，他指出 Glance 被用作 Magnum 的存储库而不是 Docker Hub，Heat 用作编排引擎，Keystone 用作身份提供者，而 Neutron 用作其网络控制器。CoreOS 或 Fedora Atomic 都可以用作容器的内部操作系统。总的来说，没有惊喜。

## 婚姻中的匹配，还是火焰中的匹配？

Otto 使 Docker 和 OpenStack 的思维模式的整合变得流畅而轻松，就像父亲给女儿读睡前故事一样。虽然现实并不完全是一场噩梦，但本周峰会上其他地方的 OpenStack 专家似乎认为噩梦即将来临。

在周二题为“容器对 OpenStack 构成威胁了吗？”Red Hat 高级咨询工程师 Jan Mark Holzer 表达了谨慎的怀疑态度。“我认为从长远来看，容器可能会对 OpenStack 构成威胁。因为如果你想象人们真的开始转向基于微服务的架构，这些服务本身是自我维持、自我修复等。，对复杂的底层基础设施的需求就会少得多。…这是一个很好的观点，希望让我们所有人都做好准备，解决围绕 OpenStack 环境的运营、生命周期管理以及所有这些真正重要的事情的所有问题，这些都是我们今天面临的难题。”

在 Magnum 会议的问答阶段，最后一个提问者将一些新生的怀疑带到了房间里。他说他注意到 OpenStack 的工程师似乎对 Kubernetes 比对 Docker 更感兴趣，他想知道 Otto 是否同意。

“目前，情况确实如此，”奥托回答道，带着一个初中学生扮演夏洛克·福尔摩斯时那种被部分掩盖了的好奇。

“事情进展得相当快。“如果你在三个月前问我同样的问题，”他继续说道，“答案可能会不同。三个月后，谁知道呢？”他说，CoreOS 最近表示有兴趣将 rkt(以前称为 Rocket 的系统)作为 Magnum 的 Kubernetes bay 类型，很有可能，Mesos bay 类型也会随之而来。

“我认为这里的要点是，当你作为一个服务提供商做出选择时，”Otto 突然说道，他在整个演示过程中一直没有表现出活力，“关于你的容器策略将是什么，现在选择一个赢家是有风险的，因为事情发展得太快了。如果你说，“看，我知道 OpenStack 将是我的一部分，我选择 Magnum，你选择你今天想要的托架类型，如果你以后决定要开始使用不同的托架类型，那也没关系。您将能够同时使用它们…因此您将拥有一个针对您的用户的实际迁移策略。

“Kubernetes 恰好是现在的事情。它最终可能会盛行。谁知道呢，事情可能会改变。我们希望你有一个可插能力的故事，这样到时候你就可以放入你的用户真正想要的任何东西。”

奥托这么说后，没人想问问题了。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>