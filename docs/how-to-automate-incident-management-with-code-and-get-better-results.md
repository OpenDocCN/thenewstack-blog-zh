# 如何通过代码实现事件管理自动化并获得更好的结果

> 原文：<https://thenewstack.io/how-to-automate-incident-management-with-code-and-get-better-results/>

[](https://www.linkedin.com/in/echovue/)

 [迈克·麦克罗里

迈克是一名全球公民，目前已经定居在太平洋西北部。白天，他是 DevOps 团队的首席工程师，晚上，他写作并修补其他技术项目。当他不敲键盘的时候，可以看到他和他的孩子一起远足、钓鱼、探索城市和乡村的风景。他总是很乐意帮助另一个开发人员，他非常喜欢帮助那些带来美食甜甜圈、精酿啤酒和单一麦芽苏格兰威士忌的人。](https://www.linkedin.com/in/echovue/) [](https://www.linkedin.com/in/echovue/)

当你的生产环境出现问题时，你希望你最优秀、最聪明的头脑尽快开始解决问题。对我来说，解决生产问题的最佳时间是当我计划好一天的工作，我刚刚喝完早晨的咖啡，我的头脑已经准备好行动。不幸的是，这个时候生产事故很少发生；通常情况下，更像是凌晨 3 点 24 分。根据我的经验，一个人跌跌撞撞地从床上爬起来，摸索着寻找手机和笔记本电脑，至少在十分钟左右不会处于最佳状态，如果你够幸运的话！

如果你能利用工程师的心智能力，让他的头脑做好准备并专注于构建解决方案，解决白天或晚上任何时候发生的问题，会怎么样？本文将讨论从昏昏欲睡的人到支持模型的进化跳跃，其中系统本身自动处理伤检分类和对事件的初始响应。您会发现自己拥有一个更具弹性的系统，您的工程师将能够发挥最佳水平，为您的客户创造更多价值。这是双赢的局面。

## **下一次发展:代码响应**

随着软件开发的发展，构建和支持应用程序的过程变得更加简单和有组织。例如，使用 Infrastructure-as-Code (IaC ),您可以在机器可读的定义文件中描述基础架构，然后将这些文件与您的源代码一起签入代码存储库，从而为您的应用程序和部署应用程序所需的基础架构提供一个真实的来源。

代码响应计划与此类似；您在代码旁边签入解决方案和工具，这可以为自动识别和解决问题提供基础，而不需要工程师的参与。下面我将向你展示如何实现这个计划；但是首先，让我解释一下为什么你应该考虑这么做。

作为一个多年来支持生产系统的人，我注意到了一些事情。DevOps 系统在建立所有权和生产更好的产品方面非常出色，但是当工程师忙于开发新功能和支持系统时，倦怠和警报疲劳的风险就会增加。实施新计划需要时间，您需要说服您的团队这是值得的，但结果将是花费在解决常见问题上的时间更少，以及更快的平均检测时间(MTTD)和更短的平均解决时间(MTTR)。

## **开始你的代码响应计划**

您的代码响应计划将包含几个关键部分。您将从构建一些可以在所有项目中使用的通用组件开始，以识别和解决常见问题。您还需要特定于项目的组件来完成每个项目特定的问题。然后，您将连接所有这些组件，形成一个可以自动处理大多数问题的综合系统。

### **第一步:从你的剧本开始**

我工作过的大多数团队都为特定的问题编写了脚本和解决方案。行动手册可以采取多种形式，从共享文档到复杂的知识库。如果您还没有行动手册，那么您应该从您的团队成员那里收集知识，并编制一份。

无论你的剧本采取什么形式，它将使你能够识别你的团队面临的一些常见的生产问题。您将首先确定该问题是该服务特有的，还是跨多个服务的更普遍的问题。例如，您可能偶尔会遇到磁盘空间问题或流量突然激增，从而导致性能下降。一旦您能够识别问题并确定如何以编程方式识别它，那么您就可以设计一个自动响应来解决它。同样重要的是要记住，程序化的反应在某些情况下可能不起作用，因此您需要确保您有一个涉及实际人员的升级路径，以防问题超出某个阈值。

我发现实施这一步骤的一个非常重要的方面是利用您现有的监控和应用程序性能监控(APM)解决方案。其中许多产品都允许您根据特定标准设置警报。您可以使用 API 或 webhook 的触发器来调用脚本来纠正问题。在过去，我曾使用过调用 [AWS Lambda](https://aws.amazon.com/lambda/) 来自动解决基础设施需求。

### **第二步:识别并构建模式来检测问题**

一旦你根据剧本解决了一些常见问题，摘下了一些唾手可得的果实，就该往大处想了。纵观您的组织，确定核心技术堆栈，然后开始编译可以自动检测常见问题的代码解决方案库。您还可以参考以前的生产问题，这将有助于您在将来以编程方式识别和解决相同的问题。

在这一点上，值得一提的是 [StackPulse](https://torq.io/use-cases/) 在这一领域所做的工作。为了让技术世界变得更加可靠，并为 sre 和开发人员提供资源，他们已经为 Redis、RabbitMQ 和其他技术编写了标准剧本。

### **第三步:构建和共享解决方案**

您还可以开始编译一个潜在解决方案库，以及您收集的问题识别和故障排除工具。我提到了一个 AWS Lambda，我构建它是为了在特定条件下自动解决基础设施问题。我在该解决方案中使用的模式可以应用于修复 AWS 中的许多问题，并且逻辑也可以移植到其他云和本地解决方案。

当你开始与他人分享你的成果并鼓励他们参与时，前三步的巨大潜力会变得更加明显。我还没见过一个工程师对自动化解决方案不感到兴奋的，更重要的是，减少了下班后打电话解决问题的风险。

### **第四步:保持滚动，继续防御性编码**

重要的是，这些步骤不是一劳永逸的解决方案。随着您添加新的功能和技术，实施您的计划将需要不断的了解和维护。您应该努力建立一个团队和一种组织文化，为所有新工作的进展投资一个健壮的代码响应组件。正如我上面所说的，对潜在问题的自动化响应减少了解决生产问题所花费的时间，并节省了工程师的人力物力。

## **不断前进，持续改进**

正如在更广泛的 DevOps 运动中，您的重点将是为您的团队构建和建立强大且有弹性的模式以供遵循。您应该不断地寻找新的方法来改进设计、开发和部署软件的过程。一个健壮的代码响应计划将帮助你把你的团队推进到下一个层次，当你掌握了它，你将为下一次改进和创新做好准备。

说到持续改进，关键是要了解当今越来越容易获得的现代事件响应工具的类型。您可以通过阅读 StackPulse 的文章“事件响应软件堆栈如何发展”来了解更多信息

如果这是一个让你感兴趣的话题，你应该注册以尽早获得 StackPulse 正在构建的工具和社区。你可以在这里注册并了解他们所提供的更多信息。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>