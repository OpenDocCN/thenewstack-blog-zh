# 您需要托管数据库吗？

> 原文：<https://thenewstack.io/do-you-need-a-managed-database/>

我们已经习惯于将应用程序和数据中心基础设施迁移到云中。一些人甚至发现体验就像云提供商承诺的那样无缝、无痛苦。

但是，当涉及到许多组织的核心数据库时，尤其是需要亚毫秒级响应和坚如磐石的弹性的在线事务处理系统，风险要高得多。做错了，往好里说是一场危机，往坏里说，是对你整个企业的生存威胁。

因此，如果您正在运行实时 NoSQL 安装，意识到速度或可伸缩性正在成为一个越来越大的挑战，并开始渴望看到云可以提供的几乎无限的数据库服务，您从哪里开始呢？你需要考虑什么来成功实现这一飞跃？

## 管理云数据库的成本

也许你首先需要后退一步，考虑一下你当前的设置是否可以移动。对于某些应用程序，内部部署是唯一的选择。

这可能是受行业法规约束的金融公司的真实情况， [ScyllaDB，](https://www.scylladb.com/?utm_content=inline-mention)的产品副总裁 [Tzach Livyatan 说，该公司生产一个开源的分布式 NoSQL 平台。](https://www.linkedin.com/in/tzach)

同样，对于在特别敏感或高安全性领域(如国防或网络安全)运营的组织来说，迁移到云可能根本不被允许。

但是让我们假设您有将数据库迁移到云中的自由。不要忘记，总有人要去管理它。

云中的数据库管理包括什么？管理本地数据库涉及的几乎所有内容。

“你通常不需要安装在云上，”Livyatan 告诉新的堆栈。“但你确实需要定期升级数据库，你需要操作系统和第三方软件包。每周或每个月，都会有一些 Linux 或数据库的补丁发布，这是您需要注意的。”

当然，您需要掌握扩展能力，以及保护数据所需的安全组、身份管理和防火墙。

您可能有一个技术熟练的团队能够执行所有这些功能，但是您需要考虑日常管理您的数据库是否是这些技能的最佳使用方式——无论是在本地还是在云中。

“通常你会发现运行数据库最昂贵的部分是运行它的人，因为它是熟练的工程师，”Livyatan 说。"在许多情况下，团队本身一年的花费超过了数据库操作的花费."

这影响了你能从这个团队中获得的价值。在最近的 TNS 播客中，adtech 供应商 GumGum 的工程总监 Keith Sader 讲述了他的公司如何决定转向 ScyllaDB 的托管服务。GumGum 从亚马逊网络服务(AWS)上的自我安装、自我管理的 Apache Cassandra 设置中做出了这一举动，因为他说，“管理 Cassandra 数据库并不是我们的业务真正赚钱的地方。”

甚至在 AWS 上托管其 Cassandra 安装也留下了“厨房厨师太多的问题”

## 降低供应商锁定的风险

出于所有这些原因，迁移到云不再是一个问题，而是迁移到托管云数据库服务。

但是，在决定竞争服务时，他们需要权衡哪些因素呢？Livyatan 说，客户通常希望在已经部署了应用程序的地方运行数据，以确保尽可能低的延迟，并避免云之间潜在的数据传输成本。

这可能会使多云对一些客户来说不再是一个有吸引力的选择。与单一供应商合作还可以简化技术和管理任务。毕竟，每个云都有自己的工具集和细微差别，而处理不同的计费系统和费率卡只会让生活变得不必要的复杂。

无论您使用一个云提供商还是多个云提供商，您都应该关注供应商锁定的可能性。简单来说，放弃您的本地基础架构会将您锁定在一般意义上的云中—很难迁移回不再存在的本地基础架构。

但是还有一个专业知识的问题。比如说，一旦您的数据库专家成为“AWS 专家”，就很难考虑在必要时迁移到其他平台。

在 ScyllaDB 的托管数据库服务( [ScyllaDB 云](https://www.scylladb.com/product/scylla-cloud/))的案例中，Livyatan 说，“我们在一定程度上减轻了这种风险，因为我们使用了标准的 API。因此，最糟糕的情况是，因为我们使用的是 Apache Cassandra API 和 DynamoDB API，所以你总是可以退回到运行自己的 ScyllaDB[企业或开源]，甚至无需太多工作就可以转移到另一个数据库，因为它是一个标准 API。”

为你的栈的主要部分制定一个退出策略总是一个好主意，包括你的数据库，但是在使用它之前你需要仔细权衡几个因素。

Livyatan 建议，从长远角度考虑所涉及的基础设施的规模和可能的成本，并与潜在的提供商一起考虑最好和最坏的情况。他指出，如果一些平台开始每秒处理数百万个请求，它们可能会变得昂贵。

## 信任的问题

Livyatan 说:“你需要决定一条道路，这条道路一年后会给你一个合理的成本和性能。”“一年后，你可能会非常成功，也可能不会那么成功。”因此，对这两种情况进行定价是有意义的。

即使一切按计划进行，高峰和低谷也是不可避免的，在这种情况下，托管服务可以帮助减轻负担。

adtech 供应商 GumGum 的 Sader 在 New Stack Makers 播客上讲述了他的公司是如何做到这一点的:“现在，我们正进入一年中最忙的时候。广告在第四季度确实有所增加。所以我们真正要做的是，我们伸出手去，然后说，‘嘿，我们在这些地区需要更多的节点，你能为我们实现吗？’他们说，‘是的，把东西给我们。’我们付了钱。它发生了。"

这说明了如果您选择托管数据库产品，能够“信任”您的合作伙伴是多么重要。Livyatan 说，这种信任可以通过供应商的成熟度以及其提供所需服务水平的能力来确定，只要确保您写入的数据在您想要检索时就在那里。

但这也是对供应商专业水平的信任。他说，一些提供商将提供多种开源产品作为托管服务。但是用户需要问他们自己，当问题出现时，他们是否有信心供应商将有深厚的专业知识来解决问题——或者你是否需要依靠开源项目更广泛的“社区”来寻求帮助。

Livyatan 建议，在这种情况下，你可能会更放心地知道供应商正在与编写和拥有你所依赖的核心产品的人打交道。

## 谁管理迁移？

无论您选择哪个选项，仍然存在管理迁移本身的问题。

“第一个问题是，您是从兼容的数据库还是类似的数据库(如 Apache Cassandra 或 DynamoDB)迁移到 ScyllaDB，还是相反？”利维亚坦问道。“那么您的应用程序可以保持大致相同，您的数据模型可以保持大致相同，我们“只是”在谈论将数据从一个地方移动到另一个地方。”

然而，迁移到云可能被视为从现有数据库进行更大转变的机会。“那么你必须改变你的数据模型，”Livyatan 说。“你必须改变你的申请。然后我们讨论一个不同的尺度。很可能你需要另外编写一个应用程序，或者只是改变它。所以当然，这更复杂。”您希望移动的数据越多，这项任务可能需要的时间就越长。

Sader 的建议是，如果可能的话，调整你自己的设置，并且“在过渡到托管解决方案之前，尽可能地接近普通执行。”他补充说，“如果你能让它成为一个顺带的替代品，过渡会更顺利。”

无论哪种方式，您都将不得不面对这样一个问题，即您的组织能够容忍多长时间的停机时间，或者您是否希望在逐步引入新数据库之前运行两个平台一段时间。

此时，您对新供应商的选择以及他们管理您所需服务的能力将真正发挥作用。

“我不认为这是微不足道的，”Livyatan 说。"但是因为我们做过很多次，我们在这方面有了一些专业知识."

* * *

查看最新一期的 New Stack Makers 播客，了解更多关于 GumGum 决定使用 ScyllaDB 托管数据库平台的信息。

[https://www.youtube.com/embed/Sor8fOkuc4I](https://www.youtube.com/embed/Sor8fOkuc4I)

视频

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>