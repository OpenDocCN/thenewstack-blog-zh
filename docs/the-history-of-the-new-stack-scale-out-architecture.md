# 新体系的历史:横向扩展体系结构

> 原文：<https://thenewstack.io/the-history-of-the-new-stack-scale-out-architecture/>

与纵向扩展相反，横向扩展意味着通过添加更多机器来为应用程序增加更多功能，而不是通过添加更快的 CPU 或更多内存来升级机器。你可以认为这是一个数量胜于质量的论点。严格来说，横向扩展计算将包括预构建的集群和超级计算机，这些计算机包含多个旨在协同工作的系统板。但是，当人们谈论横向扩展时，他们往往指的是构建廉价的商用硬件集群。

这种方法有几个优点。

首先，它们是多余的。应用程序不会因为一个硬盘出现故障而离线。第二，它们可以增量扩展。也就是说，您可以根据需要添加额外的服务器。第三，它们往往更具成本效益，尽管在横向扩展变得比纵向扩展更便宜之前，对于您需要达到的确切规模仍有一些争论。横向扩展架构是由亚马逊和谷歌在 2000 年代推广的，但这个想法实际上可以追溯到商业计算的早期。

## 1955-1965 年:第一个集群

DEC 在 20 世纪 80 年代初推出 VAXCluster 系列时创造了“集群”一词。但是 [《寻找集群*的作者 Greg Pfister*](https://perilsofparallel.blogspot.com/) *说集群最有可能是在 20 世纪 60 年代初甚至 50 年代末发明的。虽然没有人确切地知道是谁建立了第一个集群，但他有一个很好的想法。“它们是由第一个客户发明的，他看着这些昂贵的(大型机)之一，心想:‘如果这东西坏了，我的企业就垮了。我们需要一个后援。”*

 *这些客户会很快意识到让备用计算机闲置不动是一种浪费，并决定将两台计算机的功能结合起来。这两个系统集群与今天的千节点 Hadoop 集群相去甚远，但每个想法都必须从某个地方开始。

## 1983 年:宇宙立方体

尽管在 20 世纪 60 年代和 70 年代一直有并行计算的实验，但我们今天称之为横向扩展的第一个例子可能是由加州理工学院研究人员 Charles Seitz 和 Geoffrey C Fox 创建的。

塞茨和福克斯于 1981 年开始建造宇宙立方体，并于 1983 年完工。它由 64 个独立的 x86 系统主板和处理器组成，与 IBM 当时用于台式机的组件相同。根据 [极限科技](http://www.extremetech.com/extreme/125271-the-history-of-supercomputers/3) 的说法，克雷 X-MP 是当时最强大的超级计算机之一，尽管只有四个处理器。

根据 1984 年发表的一篇工程与科学文章，宇宙立方体的能力只有单处理器 Cray 1 的 10%左右。但是 80，000 美元的宇宙立方体的价格只有克雷 1 的百分之一。Geoffrey C. Fox、Roy D. Williams Paul C. Messina 在他们的书*[Parallel Computing Works](http://www.netlib.org/utk/lsi/pcwLSI/text/node13.html)*中写道:“宇宙立方体提供了一个戏剧性的演示，表明可以快速、廉价、可靠地构建多台计算机。

他们写道:“以今天的标准来看，它的性能很低，但它的性能仍然是 12 月 VAX 11/780 的五到十倍，这是当时学术计算机部门和研究小组的首选系统。”“该系统的制造成本为 80，000 美元，在当时大约是一台配置适中的 VAX 的一半。”宇宙立方体启发了许多其他廉价的定制超级计算机，如加州理工学院的马克 2 号和马克三型系统。但是这个概念被超级计算产业掩盖了。像克雷和富士通这样的公司正在制造带有数千个处理器的机器，而像 IBM 这样的公司正在销售集群，例如 [并行 Sysplex](https://en.wikipedia.org/wiki/IBM_Parallel_Sysplex) 。但是向外扩展商用硬件的想法不会被遗忘太久。

## 1993 年:Beowulf 将开源集群带给大众

1993 年，一位名叫唐纳德·贝克尔的计算机科学家和早期 Linux 开发者意识到，台式计算机实际上比超级计算机提供了更好的性能。

2005 年，何对说:“以前，你可以在超级计算机上找到最高性价比。”。“但这越来越不真实了。工作站领先了一段时间，但显然个人电脑开始提供最佳性价比。”

Becker 当时在国防分析研究所超级计算机研究中心工作，为国家安全局做研究，但他的雇主对横向扩展计算的想法不感兴趣。幸运的是，贝克尔和他的合作者托马斯·斯特林设法通过美国宇航局找到了资金。在那里，他们创建了一个由运行 Linux 的现成 PC 组成的 16 节点集群。斯特林将其命名为贝奥武夫，以史诗主角的名字命名，据说他有 1000 人的力量。最重要的是，他们开源了将个人电脑整合成一个单一系统的软件，使全世界的研究人员能够建造自己的廉价超级计算机。

## 2003 年:谷歌向世界揭示其横向扩展的秘密

起初，商品集群主要由大学研究人员和业余爱好者使用。但在前进的道路上，亚马逊和谷歌等公司的工程师意识到，扩大他们的网络服务器运营比扩大更有意义。但是因为贝奥武夫从来没有设计过服务器网页和管理数据库，亚马逊和谷歌不得不建立自己的软件。尽管这两家公司没有开放他们的工具，但他们都发布了解释他们方法的白皮书。

2003 年首次出现了谷歌文件系统报告，详细描述了该公司分布式文件系统的工作原理。该公司在 2004 年发表了 MapReduce 论文，解释了其将大问题分解为小问题，将这些问题分散到一个集群中，然后将结果汇编成一个答案的方法。2006 年，它发表了一篇关于分布式数据库 BigTable 的论文。

2007 年，亚马逊紧随其后，发表了 Dynamo 论文，解释了它如何将数据存储扩展到数千台服务器上。那些论文引来了一大批模仿者。2005 年，Doug Cutting 和 Mike Cafarella 开始构建 Hadoop，它基于 MapReduce 和 Google 文件系统论文。Powerset 在 2007 年构建了一个大表克隆 Hbase。2008 年，脸书发布了基于 Dynamo paper 和 BigTable paper 的数据存储库 Cassandra。所有这些活动在 2009 年的第一次 NoSQL 会议上达到高潮，那时，横向扩展数据存储的想法已经深入到有远见的开发人员的头脑中。

## 今天

如今，横向扩展不再是一个前卫的想法。但并不是每个人都认为这是最好的方法。去年，微软研究院发表了一篇论文 ,认为对于除了最大的工作负载之外的所有工作负载，纵向扩展实际上比横向扩展更具成本效益，甚至像脸书和雅虎这样的公司也使用集群来解决问题，而这些问题在单台服务器上可以更有效地解决。

与此同时，一家名为 ProfitBricks 的公司逆势而上，为客户提供横向扩展和纵向扩展的能力。

“profit bricks 的创始人非常清楚人们实际使用专用机器的目的，以及他们对 CPU 和内存的需求，”该公司营销副总裁威廉·托尔说。“传统数据库(如 MySQL)的垂直扩展面临的挑战之一是，它们非常需要内存。”

对于这些类型的遗留应用程序，一台强大的机器通常比几个较小的系统要好。尽管如此，横向扩展仍然是当今基础架构的核心部分。“我认为毫无疑问，现代应用程序是围绕云技术设计的，”他说。“云技术往往意味着可以访问数量惊人的虚拟机，因此很容易横向扩展。”

图片由 [seier+seier](https://www.flickr.com/photos/seier/1786608880/in/photolist-5ue8x1-8hBPQk-3rX8A-6UH11C-97keFD-eMJ2AL-5ZYbEV-dYUSmJ-dGhbJw-6UCW3V-LvMef-LvMeo-dZzYUK-2Pazi-6xgtBZ-9Apr2n-eguHX8-7rLSoY-6GbC72-e7PoC7-8ub9gv-e7KouK-ekeJ6Q-9ZszPZ-3HSQzo-9zgPB2-9wiiM2-8v2sRb-64JYjn-87SWgL-nkPvkU-5F4egU-dKhuCz-9aFzMk-2iiar-9Ztbz8-BGJ7d-8aJpCv-9THVMd-dGhbrU-4sPzPy-dTY8g6-9PiTMf-9ZttZX-hxFQPC-f92S4x-bnWFb2-q556B-dU4L11-LvMeE)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>*