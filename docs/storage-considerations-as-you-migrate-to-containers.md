# 容器迁移的存储注意事项

> 原文：<https://thenewstack.io/storage-considerations-as-you-migrate-to-containers/>

[](https://platform9.com/leadership/)

[roo pak Parikh](https://platform9.com/leadership/)

[roo pak 设想了为平台 9 提供动力的技术，现在他正带领我们的工程奇才们去实现这一设想。Roopak 喜欢与客户一起设计解决方案和解决技术难题。他还领导组织内的孵化项目，喜欢谈论从最新的 javascript 框架到区块链技术的一切。在共同创建 Platform9 之前，Roopak 是 VMware 的技术主管，在那里他帮助设计和发布了主要的 vSphere 产品:Update Manager 和 vCloud Director。在加入 VMware 之前，Roopak 是一家早期移动计算初创公司的早期工程师。工作之外，Roopak 是有声读物的粉丝，喜欢烹饪，关注体育运动，并在足球场上跟上他的孩子。](https://platform9.com/leadership/)

[](https://platform9.com/leadership/)[](https://platform9.com/leadership/)

迁移到 Kubernetes 的好处之一是您的应用程序可以在高度可伸缩的环境中运行。如果您突然需要更多容量，您可以快速添加额外的 pod，然后在您不再需要它们时将其删除。

从历史上看，当您在无状态应用程序世界中终止一个容器时，容器中的所有内容都会随着资源的释放而被销毁。但是，如果您运行的是有状态的应用程序呢？在这种情况下，需要支持事务历史的专用存储。

为了支持有状态应用程序，Kubernetes 提供了卷。在规划和执行到 Kubernetes 环境的迁移时，了解如何在 Kubernetes 部署中使用和管理卷的技术细节非常重要。

Kubernetes 的第一批采用者用它来部署无状态应用程序。最初，容器被设计成无状态的，因为这符合它们的可移植性和灵活性。但是随着容器的广泛使用，人们开始将现有的有状态应用容器化(重新设计和重新打包，以便从容器中运行)。这给了他们使用容器的灵活性和速度，但是带有存储和有状态的上下文。

例如，现在许多组织将 Kubernetes 集群部署到他们的内部数据中心、公共和私有云提供商和/或混合环境中。它在边缘计算中也变得流行，因为在边缘部署轻量级应用程序允许提供商通过将处理移动到离消费者更近的地方来获得云的便利并提高性能。

随着部署 Kubernetes 的各种方式的增加，提供事务存储的需求也在增加。确定如何将短暂容器与持久存储结合起来是一个复杂的问题，但是尽管有一些挑战，已经提出、测试和改进了各种解决方案。

一个原因是持久数据存储的需求因应用程序而异。一些存储意味着长期使用，这意味着它可以更慢；例如，在存取时间不太重要的情况下，用于归档科研成果的长期存储。其他存储需要高性能的响应时间；例如，实时零售客户数据库交易。

最后，还有需要高度弹性的存储；例如金融机构的灾难恢复存储。这些不同的存储要求产生了对 Kubernetes 中通用解决方案的需求，该解决方案允许访问这些存储类型中的每一种，而不会引入使其不可行的复杂性。

持久存储解决方案的核心是持久卷(PV)和持久卷声明(PVC)的概念。PV 定义了集群中的一个存储单元。它是一个具有可配置特性的 API 对象，与 Kubernetes 生态系统的其他部分没有什么不同。PVC 是对定义的存储类别的访问请求。集群管理员定义 PVs，然后 PVs 作为集群中的静态资源可用。如果 PVC 请求一种不可用的资源类型，群集可以动态提供一个持久卷来满足需求。

最近，Kubernetes 增加了对基于 PV/PCS 模型的容器存储接口(CSI)的支持。CSI 是一个插件，它增加了将您的群集与数据块和文件存储系统相连接的能力。它是一个可扩展的接口，可以连接 Kubernetes 集群资源和存储资源。使用 CSI，Kubernetes 可以访问 AWS EFS、AWS EBS、Azure 磁盘、Azure 文件、IBM 块存储和其他类似的资源。

让我们来探讨如何满足这些需求。

## 高可用性

当我们谈到可用性时，我们指的是在需要时让存储资源准备就绪，这也意味着高可用性存储，即使支持它的一些基础架构出现故障。我们还在考虑数据持久性和灾难恢复，以及允许您从更大范围的停机和灾难中恢复的备份流程和程序。

## 确保传输速度的可扩展性

传输速度与可伸缩性密切相关。随着应用程序的扩展，它产生和消耗的数据量也在增加。如果您的存储不能随应用一起扩展，您会很快发现这将阻碍您发挥全部潜力并提供最高质量的用户体验。

## 数据安全

数据的安全性也许是最重要的事情，但是安全性是一把双刃剑。您希望授权用户和资源能够高效地访问他们需要的资源，同时防止未经授权的访问。身份管理系统可能非常复杂，它们需要在足够精细以保护大型系统的每个组件和足够简单以易于管理和实现之间取得平衡。

无论您的存储位于何处，一流存储提供商的特征都是相似的。原生云存储也不例外。您的存储解决方案需要在应用程序需要时可用，能够以应用程序所需的速度传输数据，并保护来自组织内外的潜在威胁。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>