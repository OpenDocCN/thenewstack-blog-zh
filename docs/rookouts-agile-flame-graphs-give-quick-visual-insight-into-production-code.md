# Rookout 的敏捷火焰图可以快速、直观地洞察生产代码

> 原文：<https://thenewstack.io/rookouts-agile-flame-graphs-give-quick-visual-insight-into-production-code/>

Rookout 首席技术官兼联合创始人 Liran Haimovitch 认为，对于希望调试生产环境代码中出现的问题的开发人员来说，他们经常陷入进退两难的境地。该公司表示，它通过让调试在任何环境下都可用来帮助工程师更快地解决客户问题，本周该公司发布了敏捷火焰图，通过将代码调试变成一种视觉媒体，进一步朝着这一目标努力。

“传统上，分析工具分为两类:一类可以收集任何东西，任何东西，包括整个厨房的水槽，这些工具非常慢。它们给了你一个非常准确的视角来观察正在发生的事情，但是它们太慢了，你不能在任何真实的场景中运行它们。另一种选择是应用性能监控(APMs)，它被设计为在现实世界中运行，但这些为您提供了一个非常不清晰的视图，只有少量的数据点，”Haimovitch 说。

Rookout 希望通过敏捷火焰图(Agile Flame Graphs)来弥合这一差距，这是该公司调试平台的一项功能，允许你点击一个按钮来选择你想要测量时间间隔的点。

Rookout 通过软件开发工具包(SDK)集成到开发人员的代码中，Haimovitch 说这只需要几分钟，并且与 JDK 运行时、Docker 运行时、Python、Node.js 和 Ruby、[等兼容。](https://www.rookout.com/your-stack-is-our-playground)

从那里，SDK 允许开发人员设置公司所说的“不间断断点”，这允许开发人员在代码中设置观察点，而不会中断代码的运行。相比之下，标准断点会中断代码执行以返回结果，这使得它与运行时调试不兼容。Rookout 通过字节码操作并结合敏捷火焰图来实现这一点，这意味着开发人员只需看一眼图形就可以快速确定代码可能会在生产中的哪些地方阻碍软件的性能。

这也不是 Rookout 第一次涉足可视化调试，该公司去年还向[推出了一个实时调试热图](https://thenewstack.io/rookouts-live-debugging-heatmap-promises-to-identify-time-wasting-bugs/)。

使用 [Rookout](https://www.rookout.com/?utm_content=inline-mention) ，开发人员可以在两个不同的代码行之间设置这些不间断断点，甚至是相邻的代码行，敏捷火焰图将显示这两个点之间的延迟。

Rookout 首席执行官沙哈尔·福格尔在一封电子邮件中进一步解释了 Rookout 与竞争对手的不同之处，它允许开发人员在复杂的生产环境中处理代码，而其他工具可能会失败。

“调试的‘老方法’要么是本地复制并一步一步调试，要么是添加日志行并希望问题再次发生。在云原生和分布式环境中，以及在生产环境中，这些方法是无效的，有时甚至根本无法使用，”Fogel 写道。“复杂的环境很难或不可能在本地重现，但一步一步地调试意味着停止你的应用或 pod，这是你在生产中无法做到的。添加日志行意味着在任何地方都要等待数小时甚至数天，即使对于最敏捷和自动化驱动的组织来说也是如此。”

目前，延迟是敏捷火焰图提供的主要指标，但该公司计划在不久的将来添加新的数据点，包括 CPU 使用率、内存分配和垃圾收集压力。Haimovitch 解释说，例如，垃圾收集压力会降低性能，也可以进行类似的监控。

“无论何时分配或取消分配，都必须进行清理。这项清理工作需要时间。例如，在 Node.js 中，当系统面临很大压力时，它没有时间清理，特别是如果你创建了很多对象，然后删除它们，这对运行时来说是很费时间的，”Haimovitch 说。“如果你任意分配大量的对象，这会导致代码变得低效。您实际上是在给垃圾收集操作施加压力，使其持续运行。应用程序将收集您生成的垃圾，而不是运行您的代码来服务您的客户。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>