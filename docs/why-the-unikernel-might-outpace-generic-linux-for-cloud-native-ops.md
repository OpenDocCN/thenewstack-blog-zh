# 为什么单内核在云原生操作方面可能超过通用 Linux

> 原文：<https://thenewstack.io/why-the-unikernel-might-outpace-generic-linux-for-cloud-native-ops/>

单核是一种专用的可执行映像，可以在虚拟机管理程序上本机执行，而不需要单独的完整操作系统。该映像包含运行特定应用程序所需的一切。单核的最大好处之一是它们使用的资源只是成熟操作系统所需资源的一小部分。单核还能够提供:

*   提高安全性。
*   更小的脚印。
*   全系统优化。
*   接近即时启动时间。

你可能还记得几年前，单内核找到了它成为焦点的方法。反对单内核的最大理由之一是它[剥夺了给管理员其他选择的一切](/good-luck-debugging-unikernels-joyents-chief-technology-says/)。控制在哪里？如果服务失败，管理员会怎么做？unikernel 没有提供故障排除和恢复的标准工具。没有操作系统的想法让许多公司对这项新技术望而却步。那是在容器在企业计算领域占据主导地位之前。现在，我们看到了容器化的应用程序可以多么容易和可靠地部署。随着容器的出现，很明显单内核可以很好地提高 Kubernetes 在速度、可伸缩性和安全性方面的部署。正因为如此，单内核又重新出现了。

在他们最近的论文“[单内核:Linux 统治的下一阶段](https://www.cs.bu.edu/~jappavoo/Resources/Papers/unikernel-hotos19.pdf)”中，来自 Red Hat 和 Boston 大学的一组研究人员发现:

*“事实上，有证据表明 Linux 内核的结构对于当今的许多关键用例来说是有问题的。首先，需要高性能 I/O 的应用程序使用 DPDK 和 SPDK 这样的框架来绕过内核，不受阻碍地访问硬件设备。这些应用程序中对性能最敏感的通常是用于部署的专用整机，例如 Ceph 等基础架构组件。”*

换句话说，这篇论文的作者阿里·拉扎、乔纳森·阿帕沃、奥兰·克里格、帕鲁尔·索哈尔、乌尔里希·德雷珀、雷纳托·曼库索、詹姆斯·卡登、理查德·琼斯和拉里·伍德曼总结说，在一些用例中，Linux 显然是受益于单内核的选择。

## 单核对现代企业有什么好处？

现代企业 IT 基础设施的状态已经变成了要求非凡的速度、敏捷性和安全性的状态。随着容器和云基础设施的部署不断增加，我们是否已经到了 Linux 单内核是最佳解决方案的地步？要回答这个问题，我们必须了解单核将如何惠及现代企业。

单内核最大的好处(根据 Raza 等人的说法)是它能够"*……适应目标应用程序的需求，以提高应用程序的性能，或者在高度受限的执行域内支持它。*

换句话说，单内核可以高度专门化，从而更好地满足单个应用程序所需的性能和安全性需求。有了单核，应用程序的攻击面大大减少，从而最大限度地减少了恶意黑客造成损害的机会。

无论您正在使用云基础设施还是容器集群，最具挑战性的一个方面就是编排。为了成功地(高效地)协调此类基础设施的部署、管理和扩展，您不能依赖庞大的通用操作系统。创建这样的操作系统是为了包含各种各样的任务。为此，管理员必须在超出现有基础设施范围的任务上花费大量精力。

考虑一下:标准的 Linux 内核由以下部分组成:

*   系统调用接口。
*   内核子系统(包括进程管理、内存管理、文件系统、设备控制、网络)。
*   实现的功能(包括并发、多任务、虚拟内存、文件和目录、设备访问、连接)。
*   软件支持(包括 arch 相关代码、内存管理器、文件系统类型、块设备、字符设备、网络子系统、IF 驱动程序)。
*   硬件驱动程序(包括 CPU、内存、磁盘、控制台、网络接口)。

单核去掉了传统的操作系统层。在这种技术中，操作系统上必要的功能都与应用程序代码一起编译成一个可执行文件。如果您熟悉容器，这可能听起来有些熟悉。最大的区别是容器需要完整的操作系统栈才能运行。想象一个不需要操作系统来启用功能的容器。相反，该容器可以部署在管理程序之上。如果没有操作系统的增加，容器将会以惊人的速度运行。随着速度的提高，安全性也呈指数级增长。

当然，这并不是真正的容器化内核，但其思想是相似的——截断运行服务所需的必要部分，将它们整合到一个可执行文件中，并在几秒钟内完成部署。

单核由以下元素组成:

*   系统库。
*   语言运行时。
*   必备应用。

这些组件被编译成一个可引导的虚拟机映像，直接在标准虚拟机管理程序上运行。

今天有一系列的 unikernel，包括基于 Golang 的 [Clive](http://lsub.org/ls/clive.html) ，微软的 [Drawbridge](https://www.microsoft.com/en-us/research/project/drawbridge/?from=http%3A%2F%2Fresearch.microsoft.com%2Fen-us%2Fprojects%2Fdrawbridge%2F) ，流行的 [MirageOS](https://mirage.io/) ，以及 [Unik](https://github.com/solo-io/unik) 。

单核的含义令人印象深刻。以云为例。从一开始，云就受到缓慢、臃肿的数据中心操作系统的阻碍。尽管这些系统非常适合提供网站、数据库和其他信息，但它们不一定适合扩展到云所需水平的服务。当数十亿用户需要访问某项服务时，运行该服务的服务器必须具有巨大的可扩展性……这是传统操作系统难以应对的。云所需的映像需要数千兆字节的存储和内存。为了纵向扩展云，需要更多的硬件和资源。这反过来又要花钱(在某些情况下，要花很多钱)。

然而，想象一下同样的云——由单核提供动力。无需部署越来越多的硬件，更多的单核映像可以部署到虚拟机管理程序上。这种扩展方式不仅更具成本效益，而且效率也更高。当您可以使用一个专门的、单一用途的单内核时，为什么要对映像上不必要的服务提出额外的要求呢？

### 值得再看一眼

尽管几年前围绕单核的炒作已经销声匿迹，但它们从未变得如此重要。请务必通读“[Unikernels:Linux 统治的下一阶段](https://www.cs.bu.edu/~jappavoo/Resources/Papers/unikernel-hotos19.pdf)”一文，看看你是否不想再看一眼这项技术。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>