# 解耦如何帮助你写出更好的软件

> 原文：<https://thenewstack.io/how-decoupling-can-help-you-write-better-software/>

解耦是一个强大的工具，可以帮助缓解现代软件日益增长的复杂性所带来的许多问题。为了在这种功能丰富的应用程序中保持高水平的性能，您可能会考虑将应用程序分解为相互通信的不同服务，也就是说，将应用程序的组件解耦。

通过服务将组件解耦，使您能够针对应用程序的每个功能单独处理性能问题、成本优化和特性开发。解耦还将一个组件的故障影响其他组件的风险降至最低，从而导致服务的适度降级，这可以显著增强用户体验。在快节奏的环境中，解耦在软件开发、调试、[成本优化](https://thenewstack.io/what-does-kubernetes-cost-you/)、测试等方面有很大的优势。

让我们看看解耦的基础，解耦如何帮助你编写更好的软件，以及在确定解耦的组件时要注意什么。

## 什么是脱钩？

与传统架构不同，传统架构采用整体设计和紧密耦合的功能和特性，去耦描述了消除两个或更多组件、服务或系统之间直接依赖的过程。远离紧密耦合的设计模式有助于确保快速的开发生命周期和更容易的代码维护，以跟上市场的需求。

想象一个典型的电子商务 web 应用程序，它具有注册和登录用户、列出库存、接受订单、分配送货、接受付款等功能。在整体架构中，所有这些特性和功能都合并到一个可执行文件中。在这种情况下，部署对某个特性的更改的唯一方法是部署整个应用程序。然而，分离的体系结构与服务和组件一起工作。

同一个电子商务应用程序的解耦架构可能有不同的支付、注册、履行等服务。一些核心服务，如[授权](https://docs.cerbos.dev/cerbos/latest/index.html)，可以外包给第三方组件。这为您提供了极大的灵活性和自由度，让您可以根据自己独特的需求和优先级来开发应用程序。

## 为什么解耦是必要的？

一个分离的系统允许你快速地设计、开发、测试和部署特性。在解耦设计中构建新功能时，您可以独立测试和部署服务，而无需部署所有其他组件，从而使大多数应用程序能够正常运行。这使得应用服务的组合和部署变得简单而持续。

默认情况下，当您与外部服务和产品交互时，解耦就在起作用。为了使您的应用程序解耦，您需要构建其组件，以遵循帮助您的应用程序与外部服务交互的相同通信原则。API 驱动的开发和可发现的服务是分离系统的核心。这种结构允许使用第三方产品，为您的工程团队腾出时间进行内部开发。

最后，为了安全可靠地将应用程序的这些不同组件绑定在一起，您需要授权形式的身份和访问管理。在处理单片堆栈时，需要一定水平的专业知识来实现授权。然而，使用一个分离的系统，你可以通过将核心工作委托给第三方系统来避免雇佣专家的必要性和成本。因此，解耦系统的使用改进了开发过程，并允许更有效地使用资源。

## 选择外部元件时应该注意什么？

选择合并一个外部组件作为应用程序功能的核心贡献者可能是一个长期的决定。如果您不得不在应用程序的后期放弃某个组件，那么成本会很高，尤其是当您不打算这么做的时候。为了防止这种情况发生，您应该首先执行一些简单的检查。

### 组件应该坚如磐石

如果你打算使用一个专有组件，你需要考虑锁定的成本，并确保该组件是完全可靠的。如果您将授权等核心服务外包给第三方，这一点尤为重要。您需要检查您所考虑的组件是否具有正确的特性，以及它是否是为满足各种客户需求而积极开发的。

对于一个开源组件，你应该检查项目是否有一个强大的社区，一个定义良好的公共路线图，清晰的文档和频繁稳定的发布。验证这些东西将会给你一个产品整体成熟度的指示。最重要的是，虚荣指标，如 GitHub repository stars、forks 等。，可以很好地反映项目的受欢迎程度。

### 组件应该是可定制的

在为应用程序选择组件时，可定制性是最关键的方面之一，尤其是当应用程序中的多个服务将与该组件交互时。您的第三方组件越灵活，您在构建和发展您的应用程序时就越灵活。

如果一个组件背后的公司有定义良好的开放标准，这可能是一个很好的指标，它的组件将是灵活的和可定制的。开放标准迫使公司考虑跨多个行业和领域的用例，这反过来又促使他们制造足够灵活的组件来满足广泛的需求。要充分利用任何第三方组件，请确保它的可定制性足以满足您当前和未来的需求。

### 组件应该是兼容的和安全的

当构建处理关键数据的应用程序时，您应该确保您在解耦应用程序中使用的任何外部组件都是[安全的](https://docs.cerbos.dev/cerbos/latest/configuration/server.html#_transport_layer_security_tls)，拥有相关认证，并且是[合规就绪的](https://cerbos.dev/blog/authorization-in-the-context-of-soc-2-and-other-certifications)。这些检查不仅会为你的申请打下一个坚实的基础，还会鼓励你的客户之间的信任。

### 应该检查组件

最后，您应该检查组件以确保它们符合您的要求。检查您需要与应用程序的不同服务无缝集成的组件特性，特别是当您部分或全部重新构建一个整体的遗留应用程序时。迁移和实现案例研究在这里可能会有很大帮助。如果您正在考虑集成一个与您的应用程序的其他组件交互的第三方组件，彻底的审查是至关重要的。

## Cerbos 如何帮助解耦系统

授权是每个 web 应用程序都需要的核心服务。虽然可以自己实现，但不必多此一举。这是一个特别的领域，您可以从 Cerbos 这样的开源产品的专业知识中受益，Cerbos 集中管理您的解耦应用程序的所有组件和服务的授权。Cerbos 通过在一个地方管理逻辑，帮助您防止自定义授权逻辑分散到整个应用程序中。无论是基于角色的访问控制、基于属性的访问控制还是其他任何访问控制策略模式，都可以用 Cerbos 来实现。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>