<html>
<head>
<title>Semaphore Tests Continuous Integration on Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">信号量测试Docker上的持续集成</h1>
<blockquote>原文：<a href="https://thenewstack.io/getting-continuous-integration-semaphore/#0001-01-01">https://thenewstack.io/getting-continuous-integration-semaphore/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">持续集成(CI)和持续开发(CD)为开发人员提供了在短时间内将应用程序投入生产的能力。随着团队分散在全球各地，CI/CD成为一种必需，因为代码变更提交可以在一天中的任何时间添加到存储库中——通常是一天多次。</p>
<p class="translated">Semaphore 提供了一个CI平台，通过不仅提供CI服务，还提供CD，使开发人员能够部署到生产环境中。当结合在一起时，这两个特性使团队能够快速测试、部署和投入生产。</p>
<h2 class="translated">码头工人之前</h2>
<p class="translated">Semaphore是基于Docker的前身<a href="https://linuxcontainers.org/" target="_blank" class="ext-link" rel="external "> LXC容器</a>的托管CI和CD服务。Semaphore选择LXC是因为它能够提供高性能，而不是虚拟化。虚拟化中使用的CPU性能通常不是问题，因为KVM可以直接访问它。然而，当运行集成和可接受的测试时，在数据库运行时会出现瓶颈。Semaphore发现，与虚拟机相比，使用LXC容器时，LXC和虚拟化之间的性能差异在效率上提高了4倍。<br/> <br/> <span class="media-direct-link"> <a href="https://thenewstack.simplecast.com/episodes/darko-fabijan-semaphoreci-at-dockerconeu" class="ext-link" rel="external ">达科·法比扬</a></span></p>

<p class="translated">随着Docker进入技术生态圈，Semaphore团队发现有必要支持Docker，以便用户可以在Semaphore上构建和运行Docker，同时使用<a href="http://www.linux-kvm.org/page/Main_Page" target="_blank" class="ext-link" rel="external "> KVM </a>作为其虚拟化层。</p>
<div id="attachment_798318" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/11/build_plan.png" class="local-link"><img aria-describedby="caption-attachment-798318" decoding="async" loading="lazy" class="size-large wp-image-798318" src="../Images/4e2d7fb7dc1d0d1fb76f7c74d03c5c51.png" alt="Pictured: Semaphore Build Plan Review" data-original-src="https://thenewstack.io/wp-content/uploads/2015/11/build_plan-1024x566.png"/></a><p id="caption-attachment-798318" class="wp-caption-text translated">图为:信号量构建计划评审</p></div>
<p class="translated">Semaphore最初是一家Rails咨询公司，后来随着其LXC产品进入了容器生态圈。“当我们安装Jenkins，然后需要扩展时，这是与GitHub或Heroku不同的体验。Semaphore的联合创始人兼首席技术官Darko Fabijan 表示:“我们希望打造一种像这些平台一样容易为CI所用的服务。在CI和CD中设置和部署生产必须是一个简单的过程，因为在整个开发周期或sprint中将多个应用或微服务投入生产时，时间是至关重要的。</p>
<h2 class="translated">飞快地</h2>
<p class="translated">无论是运行单元测试还是集成测试，公司都在继续扩大他们每天运行的测试的规模。通过用户反馈，Semaphore发现它的客户想要快速的反馈循环来查看他们的代码是否通过了测试，以便部署到生产中。在CI和CD中，等待测试编译几分钟已经成为一个标准，而不是一个例外。</p>
<p class="translated">Semaphore在CI/CD方面有一些竞争。TravisCI 和<a href="http://buildbot.net/" target="_blank" class="ext-link" rel="external "> Buildbot </a>都提供CI框架，这些框架提供广泛的CI和CD工具，如发布管理、测试和集成。TravisCI是最大的开源CI测试产品之一，目前在其平台上有超过246，506个项目。这些解决方案中的每一个都为用户提供了管理和测试其部署的能力，无论他们的项目处于开发的哪个阶段。</p>
<div id="attachment_798319" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/11/deployment_type.png" class="local-link"><img aria-describedby="caption-attachment-798319" decoding="async" loading="lazy" class="size-large wp-image-798319" src="../Images/f7ac1d622905fbe3e65f31ad7e8cb3dc.png" alt="Pictured: Choosing a deployment type in Semaphore" data-original-src="https://thenewstack.io/wp-content/uploads/2015/11/deployment_type-1024x791.png"/></a><p id="caption-attachment-798319" class="wp-caption-text translated">图为:在信号量中选择部署类型</p></div>
<p class="translated">这可以在GitHub和GitLab上看到，因为贡献给存储库的用户经常会在他们选择的CI平台上看到标记为通过或失败的测试。Semaphore在构建过程中提供实时日志，详细记录任何冲突和测试运行的结果。为了获得更短的反馈循环，Semaphore将这个工作负载分散在服务器上。</p>
<p class="translated">“测试大约45分钟，在32台机器上进行。这使我们能够在3-4分钟内获得结果，这对我们的开发人员来说是一个巨大的优势，”Fabijan说。对于CD管道，一天部署几十次是很常见的。在集中的控制面板中单击部署成为这一过程的关键部分，节省了可能运行多个软件来推动部署的时间。</p>
<div id="attachment_798321" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/11/Screen-Shot-2015-11-19-at-12.02.39-AM.png" class="local-link"><img aria-describedby="caption-attachment-798321" decoding="async" loading="lazy" class="wp-image-798321 size-full" src="../Images/c023464311971ffc3386d746f01e0d99.png" alt="Pictured: Semaphore users can choose from GitHub or Atlassian's Bitbucket to host their repo." data-original-src="https://thenewstack.io/wp-content/uploads/2015/11/Screen-Shot-2015-11-19-at-12.02.39-AM.png"/></a><p id="caption-attachment-798321" class="wp-caption-text translated">图为:Semaphore用户可以从GitHub或Atlassian的Bitbucket中选择来托管他们的存储库。</p></div>
<p class="translated">Semaphore目前使用Docker来运行其服务，但尚未完全过渡到微服务架构。目前处于测试阶段，用户可以注册并请求Docker特性，因为在他们的开发工作流程中需要它们。用户可以部署<a href="https://docs.docker.com/compose/" target="_blank" class="ext-link" rel="external "> Docker compose </a>并在信号量基础设施中生成许多容器，将它们推送到Docker hub，然后将所做的更改部署到产品中。</p>
<p class="translated">如今，大规模管理和部署容器有许多解决方案。Docker compose等工作流工具的可用性和简单性允许开发人员从线框或项目大纲快速将项目投入生产。在过去，保持开发和生产环境相同是一个巨大的挑战；随着容器技术的进步，Docker和Semaphore等工具致力于改进这一点。</p>
<p class="attribution translated">Docker是新堆栈的赞助商。</p>
<p class="attribution translated">新的Stack主编Alex Williams为这个故事做出了贡献。</p>
<p class="attribution translated">通过Pixabay的特征图像。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>