# Yor 自动将基础设施标记为代码

> 原文：<https://thenewstack.io/yor-automates-tagging-for-infrastructure-as-code/>

网络安全公司[帕洛阿尔托网络](https://www.paloaltonetworks.com/cloud-security?utm_content=inline-mention)最近发布了 [Yor](https://yor.io/) ，这是一款开源工具，可以自动将基础设施内的云资源标记为代码(IaC)框架。据帕洛阿尔托网络公司的首席架构师[巴拉克·肖斯特](https://il.linkedin.com/in/barakschoster)称，Yor 是在向用户征求他和他的团队创造的另一个安全工具的意见后产生的想法。

“我们决定开发 Yor 的原因之一是，我们与 Checkov 用户、OPA[开放策略代理]用户和其他作为代码引擎的策略进行了交流，我们问他们，‘您将在您的组织中运行的最常见的策略是什么？’人们要求的最常见的政策是有一致的标签。你是解决这个问题的方法。这一切都是为了给 SREs 和 DevOps 团队提供超能力，并自动化他们的大量手动任务，而不是让他们阅读大量的 Confluence 和 docs 页面。"

Schoster 曾是 Bridgecrew 的首席技术官和联合创始人，该公司最近被 Palo Alto Networks 收购，并创建了 Checkov、代码扫描工具和 Yor。除了对作为代码引擎的策略的用户进行投票，Schoster 说试图标记大量的微服务也使他们产生了 Yor 的想法。

“当你有大量的微服务时，当你在云中运行时，它带来了很多优势，也带来了很多关于运营的问题。例如，如果您的[页面任务](https://www.pagerduty.com/?utm_content=inline-mention)出现问题，谁拥有该微服务？哪个队拥有它？敏感吗？是否包含敏感数据？还是业务关键型？””肖斯特说。“许多大企业都有大量的文档，说明应该如何标记云中的每一项资源。你会得到 50 个不同标签的列表，AWS 上有超过 160 个服务。这是一项非常繁琐的手工任务。”

第一次运行 Yor 时，它将查询您的 Git 历史，检查对您的云基础设施清单所做的任何更改，无论是 Terraform、Cloud Formation 还是无服务器框架，并根据这些更改填充标记。在下一次部署时，它会将这些标签投入生产，追溯分配标签，例如 git 组织、存储库、文件、git 修饰符、每个资源的唯一跟踪以及用户添加的任何自定义标签。Yor 还提供了一组内置的标记规则和最佳实践，除了自动标记之外，它还支持从代码到云的安全错误配置跟踪，而无需访问敏感数据，如计划或状态文件。Yor 既可以作为持续集成(CI)工具来执行，也可以作为持续集成和持续交付(CI/CD)过程来执行，该过程将为每次提交添加上下文，无论是所有者、成本中心还是用户定义的其他自定义标记规则。

Schoster 说，标记有助于组织管理六个不同的领域-库存、所有权、风险管理、访问控制、成本分配和流程自动化-这些错误配置是违规和停机的主要原因，部分是由于繁琐和容易出错的流程，这在跨多个云操作时被夸大了。他说，Checkov 和 Yor 相互合作，防止这类问题的发生。

“假设您有一个公共 S3 桶或过度特权身份访问管理(IAM)策略，这两种情况都是在云中可能发生的错误配置，如果您有公共资产，这意味着您的数据可能会泄露。或者，如果你有一个过度特权的角色，你可能会授予不该访问一组敏感数据源的人访问权限。“当您想要对这些错误配置做出响应时，Checkov 将帮助您检测它们，而 Yor 将通过为云中的每个资源附加一个所有者来为您提供快速解决这些问题所需的附加上下文。”

Schoster 说，展望未来，Yor 将增加对 Kubernetes 的支持，并有可能支持 kustomize。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>