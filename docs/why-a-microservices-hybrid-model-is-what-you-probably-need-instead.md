# 为什么您可能需要微服务混合模式

> 原文：<https://thenewstack.io/why-a-microservices-hybrid-model-is-what-you-probably-need-instead/>

如果你听大多数人谈论[微服务](https://www.twistlock.com/2017/03/20/microsecurity-for-microservices-2/)，你会注意到他们倾向于讨论它们作为一个非此即彼的命题:要么你重构你的应用程序以在微服务上运行，要么你坚持你的 monolith。很容易理解为什么人们会这样想——微服务是一个复杂的主题，当你将其归结为二进制类别时，复杂性更容易掌握。

然而，微服务的现实是，它们不必是一个非此即彼的概念。有可能拥有你的微服务，也有可能吃掉它们——或者用更通俗的话来说，将微服务用于应用程序的某些部分，但不是所有部分。当然，这也适用，即使其他组件仍然基于单一架构。

这样做意味着对微服务采取混合方法。在本文中，我将解释混合微服务的含义、使用它们的原因以及如何构建混合微服务架构。

## 混合微服务的内容和原因

 [索尼娅·科普季耶夫

Sonya 是 Twistlock 的福音传道部主任。自 SharePoint 和. NET 早期以来，她一直在推动各种开发技术的社区工作。Sonya 致力于建立 Office 开发人员社区和 Microsoft AI 开发人员社区，并将最新的前沿技术带到开发人员手中。作为 Twistlock 的一部分，Sonya 希望将安全的云原生开发带到每个开发人员的手中，确保他们能够以安全的方式充分利用最好的云原生技术。](https://www.paloaltonetworks.com/prisma/cloud) 

简而言之，混合[微服务架构](https://www.twistlock.com/resources/guide-cloud-native-microservices/)意味着应用程序的某些部分作为微服务进行开发和部署，而应用程序的其余部分保持整体。

如果您喜欢类比，可以将混合微服务视为类似于混合云，它将公共、私有和/或内部基础架构混合在一起。混合云是一种非常流行的实践；事实上，我认为您很难找到一个云基础架构在某种程度上没有混合的组织。

如果我们可以混合云，我们也可以混合微服务架构。这样做可以更容易地获得微服务的灵活性、可扩展性和安全性优势，而不必重构传统应用程序来完全作为微服务运行。

考虑到对大多数组织来说，将 monolith 完全重构为微服务所需的开发人员资源是一个巨大的挑战，采用混合微服务策略是将微服务置于软件交付团队可及范围内的一个好方法。否则，这些团队可能会认为微服务对于他们来说是不可行的，因为他们缺乏时间和/或重构整体的专业知识。

## 创建混合微服务架构的最佳实践

混合微服务的基本概念很容易理解。当实施混合微服务架构时，事情变得更加棘手。这需要你确定应用程序的哪些部分要“微服务化”(我知道，这不是一个真正的词，但我觉得它应该是)，以及哪些部分要保留在整体代码库中。以下是做出这些决定的一些建议。

### 在微服务回报最大的地方进行重构

在混合微服务策略中，最明显也是最重要的事情是确定应用程序的哪些部分在作为微服务运行时将提供最大的优势。

应用程序的哪些部分符合这些标准？当然，答案会根据您的具体情况而有所不同，但一般来说，可以使用这些指标来指导您决定将哪些服务转换为微服务:

*   *[伸缩性](https://www.twistlock.com/2019/01/28/security-strategy-needs-scale-heres/)。*你的应用程序的某些部分可能需要比其他部分扩展得更多。例如，身份验证需求可能在一天中的特定时间达到峰值，即人们首次登录时，而对应用程序其他部分的需求可能不会波动太大。在这种情况下，将身份验证分解到一个单独的微服务中，可以让您更好地以资源高效的方式满足对该功能的需求波动；
*   *安全*。您的应用程序的哪些部分面临的安全威胁最大，攻击者最容易利用哪些部分将漏洞从应用程序的一部分升级到其余部分？这些组件是转变为微服务的优先候选对象，这将有助于隔离它们并减轻它们带来的安全风险；
*   *更新*。微服务的一个重要好处是，它们使您能够在不干扰其他部分的情况下更新应用程序的一部分。应用程序的某些组件可能比其他组件更频繁地接收更新。例如，也许你经常在后台不经常改变的地方推出界面更新。在这种情况下，您可以将应用程序的前端重构为一个微服务(或一组微服务)，以便更容易地更新应用程序的这一部分，同时继续将后端作为整体代码库的一部分运行。

### 管理微服务复杂性

微服务有很多优点，但是它们也有一个很大的缺点:它们大大增加了应用程序架构的复杂性。处理这种复杂性使得开发人员和管理员的工作更加困难。

出于这个原因，明智的做法是构建一个混合微服务策略，最大限度地减少(尽可能)微服务带来的额外复杂性。在实践中，这可能意味着做一些事情，例如确定哪些微服务需要最少的 API 调用来完成它们的工作，或者哪些微服务可以整齐地打包到单独的容器中。如果您将应用程序的这些部分优先转换为微服务，您可以避免管理更多不必要的 API 开销或容器。

### 想想未来

像混合云基础架构一样，混合微服务战略不是一劳永逸的事情。相反，它是你应该期待不断进化的东西。您可以通过将应用的一小部分重构为微服务来开始您的混合微服务策略，但您不必就此止步。随着时间的推移，你可以进行更多的重构。

因此，从混合微服务过渡开始，您就应该有一个微服务路线图。即使您没有承诺具体的日期，至少对您期望您的混合微服务架构如何随着时间的推移而发展有一个大致的了解。

## 结论

我们都想移动我们的单片，但现实是我们大多数人没有必要的开发人员资源来在一夜之间将我们所有的单片代码转换为微服务。与其让这一事实让你沮丧并决定完全放弃微服务，不如考虑采用混合微服务架构。您可以使用上面的指针来确定您的应用程序的哪些部分需要“微服务化”(我又来了，编造词语)，哪些部分可以保持完整。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>