# 公共云上的无服务器:终极对决

> 原文：<https://thenewstack.io/serverless-on-public-cloud-the-ultimate-showdown/>

[桑德拉](https://www.thundra.io/)赞助了这篇文章。

 [埃姆拉·萨姆丹

艾姆拉是桑德拉公司的产品副总裁。他热衷于无服务器、可观测性和混沌工程。](https://www.linkedin.com/in/emrahsamdan/) 

面对如此多的无服务器产品，做出正确的选择可能会有问题。进行直接的功能比较具有挑战性，因为每个无服务器平台的实际操作特征可能会有很大差异，从无服务器功能的调用方式到计费方式。在本文中，我们将讨论三大云服务提供商的无服务器产品:Amazon Web Services、Google Cloud 和 Microsoft Azure。我们将对每一个进行比较，并根据四个标准确定获胜者:成本、集成的容易程度、可集成服务的数量和行业采用指标。

## 回顾风景

我们将讨论三种主要的无服务器产品。第一个是 AWS Lambda，它于 2014 年发布，是第一个可用的无服务器产品。它提供了与众多 AWS 产品的触发器集成，从简单的 HTTP 驱动事件到基于文件上传特征的 S3 执行。对于许多公司来说，选择 AWS 来驱动他们的无服务器功能意味着将他们所有的基础设施放在一个地方，因为据一些报道称，AWS 在[运营着大约 40%](https://www.theverge.com/2018/7/28/17622792/plugin-use-the-internet-without-the-amazon-cloud#:~:text=As%20of%20last%20year%2C%20Amazon,visible%20connection%20to%20the%20company.) 的云市场。

我们将考察的下一项服务是谷歌云功能，它运行在谷歌云平台上，经过漫长的测试期后，于 2018 年 7 月 24 日正式发布。与 AWS 一样，Google Cloud 功能有许多触发器可用，从简单的 HTTP 触发器到由云调度程序和云任务驱动的工作流。

最后一项令人感兴趣的服务是微软 Azure Functions，该服务于 2017 年正式发布。这是在一个漫长的测试期之后，在此期间，微软继续加强 Azure 功能和微软 Azure 平台其余部分之间的联系。微软的产品有大量的注释和文档，根据你运行的版本，[将允许多种不同的服务](https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings)作为触发器、输入源或输出源。

## 比较微软和谷歌

为了开始我们的比较，我们将从微软 Azure 功能和谷歌云功能的对比开始。两者都提供可扩展的功能基础设施，可以扩展以满足无服务器应用程序的容量需求。让我们看看一些细节:功能执行时间、设置/集成的容易程度以及价格。

大多数公共云服务基于基础设施的执行时间是相当的。微软 Azure 函数和谷歌云函数都有相似的冷启动时间，[相似的开销](https://dzone.com/articles/the-serverless-performance-shootout)，自 2017 年以来，差距只变得更小。谷歌云功能相对于微软 Azure 功能的优势在于易于设置。虽然微软 Azure Functions 在配置新项目方面具有很大的灵活性，但谷歌的 UI 展示了它作为一家以网络为先的公司的起源，具有直观的用户界面流和易于理解的选项。

至于定价，微软和谷歌同样根据使用的资源计费。每个都有一个慷慨的免费层，可以很容易地满足业余爱好者的需求。基于使用量的计费，微软和谷歌每 GB 秒和 GHz 秒大约收费 0.000016 美元。因此，最终平台的选择将取决于你消费相关服务的程度。每一种都提供类似数量的服务集成，因此除非您正在寻求一种多云方法，否则在这里做出正确的选择可能就像选择您当前基础架构提供商平台上存在的选项一样简单。

## 比较微软和 AWS

接下来，我们将微软 Azure 函数与 AWS Lambda 进行比较。微软 Azure 函数，如 AWS Lambda，提供了许多不同的运行时和机器配置，它们决定了专用于你的应用程序的最终资源。由于成本结构相似(两种服务的目标成本都是 0.000016-0.000017 美元/GB 秒)，这两种服务在运营上没有太大区别。在用户界面上，微软也有一点优势，因为他们灵活的配置文件格式给了你比 AWS 中类似的 Lambda 函数更多的控制来运行你的函数。

然而，作为游戏中最老的玩家，AWS Lambda 拥有许多微软 Azure 无法比拟的优势。虽然功能执行时间和冷启动延迟大致相同，但平台年龄的优势在工具链的可比较成熟度中是显而易见的。像 [provisioned concurrency](https://aws.amazon.com/about-aws/whats-new/2019/12/aws-lambda-announces-provisioned-concurrency/#:~:text=We%20are%20announcing%20Provisioned%20Concurrency,serverless%20applications%20at%20any%20scale.&text=Customers%20only%20pay%20for%20the,time%20that%20it%20is%20configured.) 和 [AWS SAM](https://aws.amazon.com/serverless/sam/) 这样的工具提供了一个配置和复杂性管理层，大大减轻了使用无服务器应用程序的挑战，并且没有额外的成本。虽然微软在将其功能作为更大的应用程序的一部分来呈现方面做得更好，导致了更有效的组织，但 AWS 在这一领域取得的进展基本上弥合了这一差距。

## 比较谷歌和 AWS

我们将通过将谷歌云功能与 AWS Lambda 进行对比来完善本文的直接比较部分。正如我们在其他比较中观察到的，这三个平台在执行环境、第三服务集成甚至成本水平方面大致相当。因此，我们最好着眼于生态系统的次要特征，因为这将为我们指出真正的差异。

虽然谷歌的配置流程可以说比 AWS 方法更用户友好，但这种用户友好的方法对平台应该如何使用做了一些假设。虽然 Google Cloud Functions 更喜欢在用户界面上花时间，但 AWS Lambda 利用 CloudFormation 等工具，让您的开发人员可以选择采用基础设施即代码的方法，从而提高应用程序架构的所有权和可维护性。

这种比较的最后一个优势是第三方支持。由于 AWS 拥有如此庞大的用户群，AWS 生态系统中可用的第三方工具的类型和种类比谷歌云更丰富。如果没有足够的第三方工具，您的仪表板和监控工作将局限于您的提供商堆栈中可用的工具，其中一些工具可能很难破译。像[桑德拉](https://www.thundra.io/)(目前只在 AWS 上工作)这样的第三方在这些特定于提供商的接口上添加了一个额外的层，填补了信息流中的漏洞，否则需要定制管道来修复。

## 我们的建议:AWS

我们在上面看到的是，大多数无服务器云提供商已经达到了某种功能对等。三种无服务器功能服务的执行统计数据是相似的，从成本的角度来看，这三种服务之间没有太大的区别。因此，对于大多数无服务器应用程序来说，选择“正确的”提供商可能只是一个你已经与基础设施服务平台绑定有多深的问题。如果你的应用已经在微软 Azure 上运行，那么在构建无服务器功能时，将 Azure functions 作为潜在的第一选择是有意义的。

对于那些您可以灵活选择无服务器功能提供者的应用程序，第三特征在选择“正确的”平台时优先考虑。在这种情况下，我们推荐 AWS Lambda 作为您的无服务器函数提供者。与微软和谷歌相比，AWS Lambda 的成熟和周围的生态系统使其在可用性方面具有明显的优势，第三方生态系统使其超越了其他产品。

使用 AWS，您可以利用像桑德拉这样的工具来全面了解您的无服务器应用程序，提供超越本机仪表板的洞察力，这在监控您的应用程序的行为时可能是至关重要的。加上巨大的市场份额以及与 Route 53、API Gateway 和 S3 等服务的轻松集成，AWS 在第三方生态系统部门中是一个明显的赢家，它可以帮助您的应用程序更上一层楼。

亚马逊网络服务是新堆栈的赞助商。

通过 Pixabay 的特征图像。

目前，新堆栈不允许直接在该网站上发表评论。我们邀请所有希望讨论某个故事的读者通过推特(Twitter)或脸书(T2)与我们联系。我们也欢迎您通过电子邮件发送新闻提示和反馈:[反馈@thenewstack.io](mailto:feedback@thenewstack.io) 。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>