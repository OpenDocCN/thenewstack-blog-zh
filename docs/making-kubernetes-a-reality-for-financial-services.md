# 让 Kubernetes 成为金融服务的现实

> 原文：<https://thenewstack.io/making-kubernetes-a-reality-for-financial-services/>

[](https://www.kublr.com/)

 [特里·谢伊

特里·谢伊是 Kubernetes 最全面的企业平台 Kublr 的首席营收官。](https://www.kublr.com/) [](https://www.kublr.com/)

金融服务行业传统上非常依赖技术，但在采用新技术方面经常遇到困难。支付行业在某种程度上是个例外。例如，沃达丰(Vodafone)及其子公司推出的移动支付解决方案 M-Pesa 已经有十多年的历史了，它让非洲、印度和其他地方没有银行账户的个人能够接收和支付款项。在离家更近的地方，青少年现在使用像 Venmo 这样的应用程序来分摊披萨或优步的费用，今年这一应用程序的增长了 80%。

许多金融科技公司(“金融科技公司”)已经利用了与“云原生”技术相关的现代应用架构和开发运维实践。“移动”英国银行 Monzo 在他们的演讲“[与 Kubernetes](https://skillsmatter.com/skillscasts/9146-building-a-bank-with-kubernetes) 建立银行”中讨论了这一点他们在 7 月份发布了年度报告，列举了 3 年内从 0 到 750，000 客户的增长。Monzo 并不孤单。美国政府最近的一份报告强调了非银行公司金融服务的增长，主要是金融科技公司。一些更惊人的数据点:

*   2010 年至 2017 年间，共有 3300 家金融科技公司成立
*   2017 年，金融科技公司的融资额达 220 亿美元
*   在此期间，这些公司的个人贷款从 1%上升到 36%

 [Oleg Chunikhin，Kublr 首席技术官

Oleg Chunikhin 已经在软件架构和开发领域工作了近 20 年。奥列格于 2016 年加入 Kublr 担任 CTO。Oleg 在公司的所有工作中都支持 DevOps 的标准化，并且是推动自动化和人工智能应用采用的坚定信徒。Oleg 拥有新西伯利亚州立大学的数学学士学位以及应用数学和计算机科学硕士学位，并且是 AWS 认证的软件架构师。](https://kublr.com/) 

那么什么是原生云，它如何影响应用程序开发和 it 运营，以及传统金融服务公司如何利用它与新的金融科技竞争？

云原生计算基金会(CNCF)章程将云原生应用描述为具有以下特征:

*   集装箱包装
*   动态管理
*   面向微服务

容器化支持应用程序的快速部署和更新。使用微服务时尤其如此。动态编排是通过 Kubernetes 实现的。Kubernetes 处理部署，最大化资源利用率，提供“所需状态管理”功能，并支持应用程序自动扩展。

大多数开发团队发现在他们的应用程序开发过程中使用容器并不太困难，但是 IT 运营团队通常对 Kubernetes 的经验要少得多。使这变得复杂的是，大多数成熟的金融服务公司不能或不愿在一夜之间摆脱单一的核心应用程序。与在微服务中编写后端的 Monzo 不同，成熟的金融服务公司将需要设计混合应用程序，其云原生前端运行在云中、数据中心或两者中，并连接到在数据中心运行的后端服务。

Kublr 平台使 IT 运营团队能够在任何他们希望的地方部署、运行和管理 Kubernetes，但是要构建一个完整的解决方案，有几个因素需要考虑。我们提供以下建议:

## 使用 Kubernetes 进行云原生之前的一些考虑

能够在多种环境中开发、运行和管理云原生应用意味着金融服务必须考虑如何解决一些关键问题:

### 利用云的可伸缩性:水平 Pod 自动伸缩与节点自动伸缩

容器、容器编排和微服务技术(如 Kubernetes 和 Istio)承诺可伸缩性和对不断变化的资源需求的快速响应。然而，运行容器仍然需要一个真实的基础设施——无论是物理机还是虚拟机。为了帮助利用云的可扩展性，Kubernetes 支持两个级别的扩展:1)水平 pod(自动)扩展，以及 2)节点(自动)扩展。

虽然水平 pod 扩展在水平方向上扩展了应用程序，增加和减少了正在运行的容器副本的数量，但是它没有考虑基础设施；它只是假设有足够的资源在必要时启动新的容器副本。

另一方面，节点扩展涉及在需要更多资源时(自动)向集群添加新节点，以及在不再需要时停止或删除未充分利用的节点。

水平 pod 缩放通常要快得多；节点扩展的反应时间需要几秒钟，而不是几分钟。然而，要实现云中自动扩展的优势，这两种技术都是必需的。

### 与整体后端应用(如核心银行系统)对话的云原生前端应用

有时，迁移到云原生架构需要额外的考虑，例如与合规性和现有技术相关的可用性要求。例如，不容易扩展的大型机数据库可能需要特殊的预防措施，以确保表示层中的云本机应用程序在扩展和缩减时不会影响后端数据库的可用性。

### 将当前的开发、QA 和发布流程与更快的发布时间表结合起来

新的云原生技术堆栈不仅影响应用程序开发和交付工具；它也需要 QA 和发布过程的改变。职责发生了变化，需要调整以适应更快的发布时间表。就其本质而言，基础设施即代码方法将某些基础设施管理问题转移到了开发上，并引入了新的开发运维实践。一些组织采用 SRE(站点可靠性工程师)角色来整合应用程序质量和可用性的职责，并缩小操作、QA 和开发团队之间的差距。在任何情况下，流程和业务都会受到影响，需要调整以从技术现代化中获得最佳价值。

### 扩展集群和应用监控，并为开发和运营团队提供正确的可见性和警报

云原生方法通常意味着应用程序监控、可见性实践和技术的变化。最显著的变化可能是云原生应用程序的身份和本地化更加灵活——应用程序组件包括多个(动态变化的)副本，这些副本可以在集群内的节点之间(甚至在集群之间)自由移动，并可以扩展和缩小；集群节点缺乏身份，可以停止并重新启动以响应不断变化的需求。应用程序组件由不同版本和变体的副本组成，并根据需要重新路由流量，例如推出新功能、A/B 测试等。

这些动态环境需要新的工具，例如 Prometheus、Grafana、InfluxDB、M3、ELK stack、FluentD 和 Jaeger 等等。这些监控工具的集成需要认真考虑和规划。

### Jaeger、Zipkin 和其他解决方案的故障排除微服务

可追溯性是监控和可见性的一个方面，随着云原生迁移工作的进一步推进，并将重点从基础架构和平台层转移到应用程序重构，可追溯性变得尤为重要。用微服务架构取代单片带来了许多优势，但也带来了自己的挑战，可追溯性就是其中之一。Jaeger、Zipkin 和其他框架的出现弥补了这一差距。它们通常与云原生微服务框架(如 Istio)和容器编排工具(如 Kubernetes)集成良好。

### 保护容器部署:容器扫描、可信注册中心、管理 IAM 和节点之间的通信

安全性是新堆栈的另一个方面，需要仔细考虑和规划。容器安全性是担忧的合理原因，类似于虚拟化采用早期的虚拟化安全性。就像虚拟化一样，对可靠的容器安全性的需求导致在堆栈的所有级别上开发和采用解决方案:

*   **容器隔离和安全技术** — Kubernetes 和 Docker 与 SELinux 和 AppArmor 的集成，Linux cgroups 和 namespaces
*   **基础设施安全** —容器编排框架与基础设施管理层(如 AWS、Azure 和 Kubernetes 的其他提供商)的集成，跨基础设施和容器编排层的安全策略管理和治理；
*   **跨级别的网络安全** —基础设施(VPC、子网、路由和网络策略、安全组等。)、容器(覆盖网络提供商，例如编织透明加密)、容器编排(Kubernetes 网络策略、TLS 等)。)，以及应用程序(例如，具有透明加密的 Istio
*   **应用安全** —应用框架层面的透明认证和授权，如 Istio
*   **容器映像安全** —支持映像验证、扫描、签名、手动和自动批准的映像存储库和流程，以及支持映像部署策略的 Kubernetes 准入控制器；
*   **支持所有组件和层的更新和安全补丁**。

## Kubernetes 的云本地未来

在整个行业，我们已经看到创新的金融服务公司开始解决所有这些问题。云原生架构正在推动数据科学、物联网和其他领域的创新，这将提供被破坏的威胁和创新的机会。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>