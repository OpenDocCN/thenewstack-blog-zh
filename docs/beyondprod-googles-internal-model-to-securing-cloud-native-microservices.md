# BeyondProd: Google 保护云原生微服务的内部模型

> 原文：<https://thenewstack.io/beyondprod-googles-internal-model-to-securing-cloud-native-microservices/>

继其用于保护企业网络的有影响力的 [BeyondCorp](https://www.beyondcorp.com/) 模型之后，谷歌发布了另一个理想化的安全架构，称为 [BeyondProd](https://cloud.google.com/security/beyondprod/) ，用于保护微服务。这是基于该公司自己在跨越数百万个集装箱的数不清的服务方面的大量专业知识。

[像 BeyondCorp](https://thenewstack.io/beyondcorp-google-ditched-virtual-private-networking-internal-applications/) 零信任模型一样，BeyondProd 假设应用程序本身之外没有安全区域。“服务信任应该取决于代码来源和服务身份，而不是像 IP 地址一样在生产网络中的位置，”谷歌安全和隐私产品经理玛雅·卡佐罗夫斯基在总结论文的推特帖子中写道。

要实现 BeyondProd，您需要:

*   相互验证的服务端点。
*   运输安全。
*   具有全局负载平衡和拒绝服务保护的边缘终端。
*   端到端代码起源。
*   运行时沙盒。

“BeyondProd 中的原则是应用程序安全性未来的一部分，”Aspen Mesh 首席技术官安德鲁·詹金斯在一封电子邮件中写道。“从根本上说，消除对外围安全的依赖非常重要。我们认为，基于服务是什么(工作负载身份)和它代表谁请求(最终用户身份验证和授权)，服务应该是可信的。这比你在哪里更重要:在不在‘可信范围’内。”

这篇论文对于新兴的微服务社区来说是及时的。网络自动化软件提供商 Kong [对 200 名技术决策者进行了调查，发现](https://konghq.com/resources/digital-innovation-benchmark-2020/)部署基于微服务的应用时最常提到的挑战是安全性。

## 蓝色地平线之外

BeyondCorp 模型假设防火墙和虚拟专用网络是无用的。一旦攻击者突破了这个边界，获取里面的美味数据将变得微不足道。因此，安全性需要通过以设备为中心的身份验证和授权工作流来实现。同样，BeyondProd 也不重视微服务本身之外的安全性，这些微服务可能运行在公共云中或某种第三方主机上。因为它们在集装箱里，它们可能会经常移动。因此，建立信任依赖于代码来源和服务身份等因素。

在这种环境中，开发人员可以严格定义哪些服务可以与哪些其他服务通信，同时保持工作负载隔离。“对于开发人员来说，最好的部分是这些安全控制直接内置于他们使用的工具中——基本上，这就是 DevSecOps，”Kaczorowski 写道。“您可以在成本较低的时候尽早解决安全问题，并以标准化和一致的方式来解决。”

谷歌也在周二发布了一份独立的白皮书来描述它是如何“代码起源”的。在这个过程中，一个名为 Borg 二进制授权(BAB)的引擎会进行部署时强制检查，以确保代码在上线前满足安全要求。每一个代码更改都必须输入到公司的代码库中，由第二个工程师进行充分审查，并验证二进制文件是在专用基础设施上构建的。

在硬件方面，另一个称为主机完整性(HINT)的过程验证主机系统软件已被安全引导，包括验证 BIOS、BMC、引导加载程序和 OS 内核上的数字签名。

Aspen Mesh 的 Jenkins 建议说，即使你自己的操作没有 Google 那么大，这篇论文仍然值得研究，因为它将帮助你熟悉基于工作负载/零信任安全的概念。并非所有工作负载都与这种方法直接兼容。例如，外部数据库可能不支持基于工作负载身份的相互 TLS。他说，这就是服务网络可能有所帮助的地方。

[Liz Rice](https://www.lizrice.com/) ，是容器安全专家 [Aqua Security](https://www.aquasec.com/) 的开源工程副总裁，也是云计算原生计算基金会技术监督委员会的主席，她同意该模型对较小的组织也是有用的，尽管她警告说这是一个框架，而不是安全解决方案。

赖斯在一封电子邮件中写道:“虽然这种方法坚持云原生的原则，并展示了现代安全的方式，但它的实施对于没有谷歌开发能力的组织来说可能不太容易，尽管开源工具可以覆盖其中的一些部分。”

还有几个领域是白皮书没有充分涉及的，即以云为本的 Aqua 为其客户提供的领域。一个是运行时保护。她写道:“[谷歌内部]gVisor 提供的沙箱当然可以限制应用程序中恶意代码的爆炸半径，但还有其他工具可以防止零日攻击。”。

赖斯建议,“漂移预防”也值得更多关注。“如果可执行文件在被扫描时不在容器映像中，则不允许它运行。这使得远程代码注入和执行几乎是不可能的。”

作为谷歌，谷歌不必担心管理安全，也不必担心在多租户环境中管理多个云。赖斯写道，谷歌的方法应该可以在这些环境中工作，尽管采用 BeyondProd 意味着使用“可以处理跨云交互的安全工具”，以及管理“一套集中管理的通用策略，以及可以在业务部门或团队级别控制的其他策略”。

*New Stack 分析师 Lawrence Hecht 对此文有贡献。*

Aspen Mesh 是新堆栈的赞助商

来自 Pixabay 的 Marc Vanduffel 的专题图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>