# CDN 中断:探索提高弹性的方法

> 原文：<https://thenewstack.io/cdn-outages-exploring-ways-to-increase-resilience/>

在过去几年中，内容交付网络(CDN)提供商的问题已经导致了几次引人注目的中断—上个月的 Cloudflare 中断影响了其大部分客户；一年前的一次快速中断使从亚马逊到 CNN 的网站瘫痪；2020 年的另一次 [Cloudflare 宕机](https://thenewstack.io/cloudflares-network-shutdown-shows-why-dns-is-a-devops-problem/)，这次是针对其 1.1.1.1 DNS 服务，产生了类似的广泛影响。

在每一个案例中，原因都是相对随机的，尽管共同点是人为错误。Cloudflare 最近的中断是由配置更改中的[错误引起的，Fastly 2021 年的中断是由新部署的软件](https://blog.cloudflare.com/cloudflare-outage-on-june-21-2022/)中的[错误引起的，cloud flare 2020 年的中断是由亚特兰大的一个路由器](https://www.fastly.com/blog/summary-of-june-8-outage)过载的[错误配置引起的。](https://blog.cloudflare.com/cloudflare-outage-on-july-17-2020/)

## 应对突发事件

这些问题指出了在不断变化的在线环境中的一个关键挑战:正如 Fastly 首席产品和战略官拉克什米·夏尔马(Lakshmi Sharma)告诉新堆栈的那样，再多的测试或模拟也无法预测每一种可能的意外情况。“互联网和支持它的大型边缘和云基础设施具有高度的弹性，但是，正如任何在许多固定和可变部分上相互依赖的复杂系统一样，意外可能会发生——导致中断，”她说。

夏尔马说，法斯特丽的回答是，如果真的出现问题，要尽可能直接和主动。她说:“我们能做的最好的事情就是对客户保持透明，诚实地对待发生的事情，分享重要的经验教训，这不仅有助于解决当前的问题，还有助于减少未来发生任何中断时的恢复时间。”。

在某种程度上，这意味着鼓励客户考虑多样化的策略来提高弹性。“我们希望我们的客户取得成功，所以我们也建议他们可以在自己的基础设施中进行改变，包括在战略上适当的情况下实施多 CDN 或多云业务连续性战略，”Sharma 说。

除了上面链接的博客帖子中的信息，Cloudflare 拒绝对本文发表评论，但他们对这些事件的原因以及他们采取的应对措施也同样透明。

尽管如此，当简单的配置错误可以产生如此强大的影响时，是否有更广泛的教训可以吸取？

## 考虑较小的提供商

云服务提供商 [Civo](https://www.civo.com/) 的首席执行官 Mark Boost 告诉新的堆栈，像这样的中断表明把所有鸡蛋放在一个篮子里从来都不是一个好主意:单个提供商的一个错误不应该导致互联网的大面积瘫痪。“过度依赖一两家供应商是企业在降低自身风险时应该考虑的，”他表示。

Boost 说，对于一家拥有全球客户群的大公司来说，依靠 CDN 在全球范围内分发内容是有意义的——但对于许多较小的公司来说可能不是这样，它们可能会从考虑其他选择中受益。“他们中的许多人可能没有使用图像等缓存内容，还有其他解决方案可以帮助提高安全性，”他说。“你可以购买各种电器，也可以使用各种较小的供应商。”

Boost 说，虽然许多大公司提供免费服务，使入门变得容易，但重要的是要意识到风险。他指出，2020 年 AWS 中断导致[iRobot vacuums](https://twitter.com/irobot/status/1331667670383685635?lang=en)瘫痪，这是依赖大型提供商的潜在负面影响的一个例子，大型提供商可能会因人为错误和网络攻击而面临中断。“我不知道人们是否真的在考虑针对这些大公司的有针对性的攻击的安全风险，”他说。

Boost 说，随着规模的扩大，通常会带来巨大的复杂性——这可能会导致提供商方面的问题和用户的错误配置。“如果你想到亚马逊提供的 150 种服务，所有服务都有不同的选项，你可能会在很多方面意外地配置错误，”他说。“您可能认为您已经有了一个高可用性设置，但事实证明您没有以正确的方式配置它，这可能会导致安全风险。”

## 多样化的景观

尽管如此，从较大的提供商转向较小的提供商仍然有明显的阻力:最近一项针对 1000 名开发者的调查发现，51%的人认为较小的云提供商不太安全，47%的人认为他们遭受了更多的中断。“有时人们不愿意给他们机会，这些小供应商——但事实上，仅仅因为他们小并不意味着他们不擅长他们所做的事情，”Boost 说。

当然，所有这些都可以被视为 Boost 自己公司的推销手段，但他强调，他更感兴趣的是说服潜在客户扩大他们的选择范围，而不是简单地向他们推销自己的产品。“有一些利基供应商可能会专注于某些领域，甚至比 AWS 更专注于这些领域——比如一个真正的高安全性、封闭、零信任类型的环境，”他说。“还有很多其他人可以利用。”

考虑一系列提供商的潜在好处是显而易见的，无论是由 Fastly 的 Sharma 建议的多 CDN 或多云策略，还是由 Boost 建议的将较小的提供商纳入组合的愿望所推动的，这两者并不相互排斥。Boost 说:“如果我们与一些中小型提供商分享这些超大规模服务器当前的部分总负载，这将意味着世界不再局限于少数人，从安全角度来看，这是一个危险的地方。”

从这个意义上来说，Sharma 和 Boost 的建议，分别来自一个较大的供应商和一个较小的供应商，最终都非常相似:在适当的时候求助于多个供应商来增加弹性是有意义的；不管你考虑哪一个或哪几个供应商，透明度都是关键。Boost 说:“不会有一个世界不发生任何中断。”“总会有出错的地方——这取决于你如何处理。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>