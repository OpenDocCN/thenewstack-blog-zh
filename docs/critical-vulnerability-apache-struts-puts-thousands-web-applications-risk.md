# Apache Struts 中的严重漏洞将数千个 Web 应用程序置于危险之中

> 原文：<https://thenewstack.io/critical-vulnerability-apache-struts-puts-thousands-web-applications-risk/>

流行的基于 Java 的 web 应用程序的 Apache Struts 开发框架的开发人员已经修复了一个严重的漏洞，该漏洞可能会被用来危害服务器。

该漏洞被追踪为 CVE-2017-9805，由软件工程分析公司 [Semmle](https://semmle.com/) 的研究人员发现，位于 Struts 版本 2 的流行 REST 插件中。它是由不可信数据的[反序列化](https://owasp.org/www-community/vulnerabilities/Deserialization_of_untrusted_data)引起的，可导致在运行易受攻击的应用程序的 web 服务器上远程执行代码。

周二发布的 Struts 2.5.13 通过对每个 REST 动作实施类限制，修复了该缺陷。这意味着除了更新 Struts 之外，开发人员还必须检查新的限制是否会破坏他们应用程序中的功能，并且必须相应地调整类白名单。

Semmle 的产品经理 Bas van Schaik 表示:“由于 Struts 开发人员非常明智地选择在默认情况下保护他们的用户免受该漏洞的影响，那些希望在 Struts 中使用特定类型数据的用户将不得不自己将这些数据类型列入白名单。"如果他们不这样做，他们的应用程序将停止工作."

在 Struts 用户有足够的时间升级之前，Semmle 的研究人员将不会发布一个有效的概念验证。然而，这并不意味着攻击者可能无法通过分析补丁来找出如何利用漏洞。

早在三月份，Struts 的 Jakarta 多部分解析器修复了一个远程代码执行缺陷[。几个小时后，中文网站上出现了一个利用该漏洞的漏洞，随后很快就出现了广泛的攻击。一些黑客利用该漏洞在服务器上安装 DDoS 恶意软件，而其他人则利用它安装 Cerber 勒索软件程序。](https://cwiki.apache.org/confluence/display/WW/S2-045)

这些攻击表明，基于 Struts 的 web 应用程序对黑客来说是一个有吸引力的目标，这很可怕，因为它们中的许多都为大公司处理敏感的客户数据和业务流程。

## 影响

Semmle 与 [RedMonk](http://redmonk.com) 的分析师[Fintan Ryan](http://redmonk.com/team/fintan-ryan/)合作，确定这一缺陷的潜在影响，据他称，至少 65%的财富 100 强公司正在积极使用 Struts 框架构建的 web 应用程序。这包括洛克希德·马丁公司、国税局、花旗集团、沃达丰、维珍大西洋、读者文摘、办公仓库和 Showtime 等组织。

在过去的几年中，反序列化已经成为 Java web 应用程序严重漏洞的重要来源。反序列化是在将数据转换为二进制格式(序列化)后重新构造数据，以便通过网络发送或存储在内存中。

2015 年，在 Apache Commons 库的 Collections 组件中发现一个关键错误后，Java 反序列化错误受到了关注。[那个错误](https://foxglovesecurity.com/2015/11/06/what-do-weblogic-websphere-jboss-jenkins-opennms-and-your-application-have-in-common-this-vulnerability/)造成了特别广泛的影响，因为受影响的库默认用于 Java 应用服务器和其他产品，包括 Oracle WebLogic、IBM WebSphere、JBoss、Jenkins 和 OpenNMS。

Semmle 通过使用其 lgtm.com 代码审查服务发现了这个最新的 Struts 漏洞，该服务可以扫描超过 50，000 个开源项目中的错误。该服务是 Semmle 商业技术的公共实现，允许研究人员将代码视为存储在数据库中的数据，并针对不同类型的漏洞编写分析。这些分析被写成在数据库中查找代码错误的查询。

“我们与 Struts 团队合作，决定安全披露该漏洞的正确策略，我们不得不得出结论，通知所有 Struts 用户的唯一方法是公开这些信息，并希望他们修复他们的应用程序，”van Schaik 说。“这个安全问题自 2008 年以来一直存在于 Struts 版本 2 中，虽然我们在这个阶段没有发现任何人滥用它，但我预计很快就会有人对该漏洞进行反向工程，并开始滥用它。”

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>