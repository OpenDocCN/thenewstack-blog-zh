# 为什么是时候升级到受控部署了

> 原文：<https://thenewstack.io/why-its-time-to-upgrade-to-controlled-rollouts/>

[](https://www.split.io/)

[Adil Aijaz](https://www.split.io/)

[Adil Aijaz 是 Split Software 的首席战略官和联合创始人。Adil 拥有超过十年的工程和技术经验，曾在一些最具创新性的企业公司担任软件工程师和技术专家，如 LinkedIn、雅虎和最近的 RelateIQ(被 Salesforce 收购)。Adil 拥有加州大学洛杉矶分校的计算机科学工程学士学位和康奈尔大学的计算机科学工程硕士学位。](https://www.split.io/)

[](https://www.split.io/)[](https://www.split.io/)

从历史上看，特性标记系统是开发人员内部构建的工具，用于在向客户推出新特性之前测试和控制新特性。由于标志源自内部，它们必须在内部进行维护，使得开发人员不仅要负责他们要构建的功能，还要负责用于管理这些功能的工具。

然而，软件开发行业正在发生变化，对功能标志的需求也在增加。更好的自动化测试、监控和可观察性为生产中的测试打开了大门。通过供应商合作和集成，软件应用程序变得更加完善，使特性标志成为现代开发团队所需的更大类别工具的基础。

在我们继续深入之前，让我们确保我们在特性标志到底是什么的问题上达成一致。把一个特性标志想象成一个电灯开关:向一个方向翻转，一个特性就为用户打开了；反过来，它就不再可用了。如果你感觉更有冒险精神，你可以增加为随机百分比的用户或一些用户属性打开一个特性的能力。当功能标志接近这种级别的功能和复杂程度时，它们被称为“受控推出”。在您的特性标记系统中，受控的展开看起来像这样:

```
// turn on the feature for 50% of users in California. For everyone
// else, turn it on for 1% of users.

if user.state  =  ‘ca’  then split  50%:on,50%:off
else split  1%:on,99%:off

```

受控推出是一个强大的工具，它允许产品工程团队发挥创造力，同时减少错误的爆炸半径，并在生产中进行测试。最重要的是，受控的发布给产品工程师提供了量化一个特性对工程和产品度量的影响的机会，而无需向所有用户发布。

在受控的首次展示中，一个特性最初被发布给 1%到 5%的用户。这使得工程师可以立即了解到该特性是否引入了 bug、异常或延迟变化。

由于受众如此之少，整个网站的平均或 95%的延迟几乎看不到任何影响。应用程序性能监控(APMs)和异常跟踪系统并不是为拾取功能标志产生的信号而构建的。

如果您的特性成功地通过了第一轮测试，并且没有降低工程操作指标，那么是时候升级您的测试池并将其发布给下一个 20%到 50%的用户了。与 APMs 类似，产品分析系统在这种暴露水平下不会检测到该功能对用户行为指标的影响。

## 开始实验

既然我们已经确定特性标志和受控推出会破坏您测量工程和用户行为指标变化的能力，那么您如何测量它们的影响呢？答案是在单个集成系统中将测量与特征标志联系起来。当您将特性标志与受控的部署和度量结合起来时，您就进入了下一个层次:实验。

集成系统在完全成熟时能够管理特性标志和运行实验。这意味着工程师可以向 1%的用户发布一个功能，如果页面延迟或异常率受到负面影响，系统将自动检测、警告并取消该标志。这些系统还使产品经理能够继续向 50%的用户发布，并收集关于该功能是否对用户行为产生了预期影响的数据——或者至少没有导致降级。

没有受控的展开和测量，功能标志是不完整的。然而，通过一个统一的功能交付解决方案，结合快速发布、测量和向用户学习的能力，您可以创建一个世界，在这个世界中，每个功能都是安全的，有目的地向用户发布，并通过指标量化。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>