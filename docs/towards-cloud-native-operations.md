# 原生云:服务驱动的运营可节省资金，提高 IT 灵活性

> 原文：<https://thenewstack.io/towards-cloud-native-operations/>

[](https://twitter.com/heptio)

[Craig McLuckie](https://twitter.com/heptio)

[McLuckie 是 Heptio 的创始人兼首席执行官，hept io 是一家专注于让生活在云计算世界中的企业能够访问 Kubernetes 的初创公司。在创办 Heptio 之前，Craig 是谷歌的一名产品经理，在那里他创建了 Kubernetes 项目，并与业界合作创建了云原生计算基金会，他也是该基金会的主席。他还负责启动和交付几个商业云计算产品，包括谷歌计算引擎、谷歌容器引擎和谷歌部署管理器。在加入 Google 之前，McLuckie 在微软从事企业技术工作将近十年。](https://twitter.com/heptio)

[](https://twitter.com/heptio)[](https://twitter.com/heptio)

我对手术很着迷。我想这是从我在一家金融服务机构担任部门 it 经理时开始的。将变更部署到生产中非常困难，而且变更的成本非常高。我觉得应该有更好的方法，自 2008 年以来，我在职业上做出的几乎每一个决定都让我致力于让男人或女人的生活更轻松的技术。

> 云原生运营采用运营自动化与专注于运营的专业工程师配对的理念。

当我想到 Joe Beda 和我正在创建的新公司将 Kubernetes 带给各种规模的企业时，我乐观地认为，我们不仅有能力影响工程师设计系统的方式，而且有能力影响他们思考向业务提供技术的团队的运营和结构的方式。

让我们通过观察三种不同的运营模式来获得一点视角。两个你可能听说过，一个新的正在出现，并提供了很多承诺。

## 系统管理员:票证的统治

系统管理员站在业务和混乱之间。尽管我们已经看到了自动化和配置理念的一些变化，但这在今天的许多地方仍然如此。

对于系统管理员来说，票证是工作的原子，而人是操作员。

您需要一个新的虚拟机实例吗？开罚单。你需要更新一个系统？开罚单。更改系统上的配置？开罚单。一个人在后端处理票，工作就开始了。有趣的是，人们已经基于票证构建了复杂的自动化流程。这通常会演变成“票证作为 API ”,并且会非常痛苦，因为您使用了错误的工具。

系统管理员的引入解决了一个明显的问题:它为生产变更创建了一个控制点。它将专业人员置于部署和配置的工作流程中，这肯定比开发人员直接访问和全权管理生产系统的混乱世界好得多。不幸的是，它非常慢，即使最好的系统管理员也是人:错误时有发生。比这更糟糕的是，它是次线性扩展的。部署的系统越复杂，规模越大，工作就越繁重。

SysOp 模型还增加了想要快速进行的开发团队和试图系统地定义和管理风险的集中组织之间的紧张关系。软件正在合理地蚕食世界，现代企业需要比运营商实际管理的更快地迭代、部署和扩展。

## DevOps:英雄工程师出场

开发者代码。有了正确的编码工具，他们能够解决复杂的业务问题。那么，为什么不让他们自己编码来解决系统部署配置问题呢？要么使用领域特定语言(DSL ),要么使用命令式框架，允许他们精确地描述系统应该如何配置。每当您需要部署某个东西时，您可以在之前的基础上，根据代码或 DSL“配方”创建一个完美配置的系统

这是 IT 自动化工具的世界:Ansible、Chef、Puppet 和 [Salt](https://saltstack.com/) 。在这里，集成是工作的原子。在这个世界里，开发人员用一种语言编写业务解决方案，然后用另一种语言部署它。

DevOps 无疑创造了部署的严谨性，但是我反复看到了一些问题:

1.  编写您的厨师脚本可能与一开始就完成代码一样繁重，这给经理们带来了压力，他们需要用比严格必要的技能更广泛的技能来构建组织，而且…
2.  您使用相对原始的工具在生产场景中运行(通常)命令式代码。如果您依赖这些功能来处理伸缩事件，那么某个“apt-get”步骤很有可能会因为难以理解的原因而失败，并且您刚刚添加的新节点将处于一种奇怪的状态。愿上帝帮助你。
3.  也很难确切地知道什么在哪里运行，统一执行策略是一个挑战，还有许多其他微妙的问题，我将在未来的帖子中深入探讨。
4.  它要求所有开发人员具备新的技能和职责。在组织中传播运营知识是一把双刃剑。最后…
5.  DevOps 很难扩展到更大的团队。这些工具通常不提供集中控制的级别。这通常会导致 DevOps 组织——与 SysAdmin 模型非常相似。

## 云原生操作:API 驱动的服务

考虑云原生操作有两种截然不同的方式。第一种是哲学上的，因此，倾向于表现为极客给首席技术官或 IT 开发人员写“来自未来的信”,告诉他们如果他们像谷歌一样运行，他们就可以生活在这个原始的、发光的新世界中。或者脸书。或者推特。或者网飞。他们只需要相信，购买容器，管弦乐队，微服务和一切都会膨胀。

[https://www.youtube.com/embed/5Q4huiDcNSs?feature=oembed](https://www.youtube.com/embed/5Q4huiDcNSs?feature=oembed)

视频

毫无疑问，这是事实。我看到许多小商店通过采取这种正确的方式，将 AWS 支出减少了一半以上，见证了已经实现飞跃的组织将生产时间提高了 10 倍。也许更值得注意的是谷歌能够通过 [Borg](https://thenewstack.io/google-learned-borg-container-management/) 实现的显著效率，这是客户通过传统 IaaS 产品可以实现的令人瞠目结舌的效率改进。但是如果你从围墙的另一边接近它，并且想知道你如何到达那里，这是很难内在化的。这条路的第一步是什么？

> 我看到 Kubernetes 用户在过渡到 Kubernetes 时减少了他们的 AWS 账单。我亲眼看到用户报告基础架构利用率降低了 50%到 80%。

我更喜欢从另一个角度来看这个云原生故事。如果你考虑一下云的一个最明显的属性，那就是技术是作为 API 背后的服务来交付的。亚马逊、微软或谷歌已经有效地将硬件和硬件运营团队置于 API 之后。开发人员可以使用该 API(通过编程、工具或 web 控制台)来获得一个“作为服务”交付给他们的虚拟基础架构。

我们需要问的问题是，在 API 背后还可以放入什么，并指派专门的运营团队向更广泛的组织交付服务？让我们可持续发展的基础是什么？

[云原生运营](/category/cloud-native/)采用运营自动化与专注于运营的专业工程师相结合的理念。它使组织能够围绕核心功能进行专门化，并以不同的消费水平高效地交付给服务。SaaS 的使用，无论是完全打包的应用程序，还是与基础设施相关的离散服务(如亚马逊[红移](https://aws.amazon.com/redshift)，或谷歌 [BigQuery](https://cloud.google.com/bigquery/) )，已经引领组织走上了这条道路。你可以获得 API 背后的一项非常有用的技术，聘请一个运营团队来帮助你处理问题。但是，您也会发现自己非常局限于与高度分散的提供商打交道，并且缺乏通用的工具。它不一定能帮助您管理应用程序。PaaS 提供了一个更简单的、API 驱动的界面来部署和操作子系统，但它们往往被绑定到一种非常特定的操作方式(例如，仅 12 因素应用程序)，并且它们不是为了帮助您向自己的组织交付一般服务而设计的。

实现这一目标需要一些组织还没有做的事情。

## 云原生操作的一些要素

要采用云原生运营模式，有几个因素可以帮助您。从技术上来说，您可以使用手头的资源来交付这种方法(就像如果您真的想用 C 编写面向对象的代码一样)，但是有一些技术会自然而然地将您引向这个方向。

1.  集装箱(码头工人、RKT、OCID/CRIO、花园等):集装箱解决了运营问题的一个重要部分。它们创建密封的、可重复的和可靠的代码部署单元。如果您想将自动提供的服务放在 API 后面，一个很好的起点是可重复的部署单元和密封的应用程序环境。
2.  **编排者** (Kubernetes、Mesos、Cloud Foundry Diego 等):集群技术如果做得好，可以创建可编程的“逻辑基础设施”。服务提供者的应用程序与基础设施很好地解耦，典型的服务生命周期操作可以通过编程来处理。“正确的”抽象集对于实现高水平的自动化至关重要。
3.  **微服务框架**:微服务框架允许工程师将可能由不同组织运营和管理的离散子系统连接在一起，并在稳定的接口后发布为一致的服务。他们可以选择复制该服务并将其发布给其他人。

Kubernetes 和 Docker 或 [CRI-O](https://thenewstack.io/cri-o-make-kubernetes-center-container-ecosystem/) 等容器技术的结合将在这条道路上产生一个强大的起点。Docker 简化了单个组件的开发和部署，Kubernetes 提供了一个可编程的“逻辑基础设施”平台，使自动化变得容易。Kubernetes 服务框架使得将专业管理的服务组合在一起变得容易。

## 承诺

很难完全量化过渡到云原生运营对当今企业的潜在影响，但这一机会非常有吸引力。整合的好处是显而易见的:我看到 Kubernetes 用户在过渡到 Kubernetes 时减少了他们的 AWS 账单。我亲眼看到用户报告基础架构利用率降低了 50%到 80%。

不过，我不认为这是主要的价值所在。对于大多数 IT 组织来说，物理基础架构的成本被淹没在噪音中，而机会成本是能够更有效地让工程师参与解决问题的成本。承诺能够建立极其轻量级的分散工程团队，这些团队建立在广泛来源提供给他们的技术之上。他们需要能够安全地使用由集中团队交付和运营的各种特定于业务的服务，通过简单一致的平台技术来解决问题。

*要了解更多关于 Heptio 和云原生计算的信息，请查看我们在 Kubecon 2016 上与 McLuckie 和 Beda 录制的播客:*

[克雷格·麦克卢奇和乔·贝达在库比康](https://thenewstack.simplecast.com/episodes/craig-mcluckie-and-joe-beda-at-kubecon)

Docker 是新堆栈的赞助商。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>