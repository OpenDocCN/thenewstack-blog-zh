<html>
<head>
<title>Cloud Native Apps Need to be Managed in a Completely New Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云原生应用需要以全新的方式进行管理</h1>
<blockquote>原文：<a href="https://thenewstack.io/cloud-native-apps-need-to-be-managed-in-a-completely-new-way/#0001-01-01">https://thenewstack.io/cloud-native-apps-need-to-be-managed-in-a-completely-new-way/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated"><a href="https://twitter.com/Pypestream/status/1064677962019041281" class="clearfix infoBlock " target="_blank"> <div class="infoBlockTextBlock"> <p class="infoBlockTitle">马克斯·约翰逊</p> <p class="infoBlockText">马克斯·约翰逊是霍尔伯顿学校的前学生。他目前在纽约市的Pypestream担任DevOps工程师。在业余时间，他喜欢学习新技术，是一个狂热的视频游戏玩家，喜欢Crossfit和斯巴达比赛。</p> </div> </a></p><p class="translated">为在云中运行和扩展而构建的应用程序需要以全新的方式进行管理。DevOps是在云中构建和发布应用程序的新方式——但这说起来容易做起来难。</p>
<p class="translated">做DevOps的时候很容易出错。考虑到现代应用程序的复杂性、它们的分布式基础设施、大量的流量以及新的工具和技术，DevOps的采用可能会以一百万种方式出错。</p>
<p class="translated">这就是自动化必不可少的原因。通过将自动化构建到SDLC的每个阶段，您可以确保成功过渡到DevOps。</p>
<h2 class="translated">DevOps呼吁左倾思维</h2>
<p class="translated">转移到DevOps软件交付方法的最大优势之一是速度。更快的发布带来更好的创新。然而，DevOps不仅仅是速度，它同样关乎质量。从一开始就构建高质量的应用程序会更加稳定、可靠、高度可用。DevOps能够在速度和质量上超越传统开发模式的原因是它的左移方法。</p>
<p class="translated">左移是什么意思？在传统的瀑布模型中，一个想法通常从产品和业务团队的上游开始，然后移动到开发，在那里它以代码的形式出现。然后传递给QA进行测试。在这三个步骤之间有许多来回，直到特性达到可接受的质量水平。然后，它就翻墙向它扔去。他们部署它，或者如果它还没有准备好部署，就把它送回去做更多的更改。发布会因为最后的兼容性问题、错误、安全漏洞等等而出错。通常，出乎所有人意料的是，这款应用在生产中比在测试中更不稳定，更容易出错。但是如果质量没有从一开始就被考虑进去，这是一个预期的结果。</p>
<p class="translated">Shift-left打破了瀑布从左到右线性移动的僵化，将测试带到了第一步。这不仅迫使QA，还迫使其他团队，如产品和开发团队，也要考虑他们构建的功能的可靠性。</p>
<p class="translated">这实际上意味着，每当提出一个想法或新功能时，所有的团队——产品、开发、QA和Ops——都会聚在一起讨论该功能的可行性，应该记住哪些注意事项，以及对该功能的最低期望。实施这一点的两个概念是<a href="http://searchsoftwarequality.techtarget.com/definition/Behavior-driven-development-BDD" target="_blank" class="ext-link" rel="external ">行为驱动开发</a> (BDD)，和<a href="http://searchsoftwarequality.techtarget.com/definition/test-driven-development" target="_blank" class="ext-link" rel="external ">测试驱动开发</a> (TDD)。BDD使用用户行为作为标准来定义一个特性的成功意味着什么。TDD定义了一些单元测试，如果特性被认为是可接受的，就必须通过这些测试。在这两种方法中，团队从一开始，在构建之前，就定义了成功对每个特性意味着什么。</p>
<blockquote><p class="translated">Shift-left打破了瀑布从左到右线性移动的僵化，将测试带到了第一步。</p></blockquote>
<p class="translated">沃尔玛用BDD左移，采用持续集成(CI)和持续交付(CD)。他们描述方法，在开发之前定义自动化单元测试。然后，他们编写基本代码，这些代码在开始时无法通过大多数必需的测试。然后，在每次迭代中，他们减少失败测试的数量，直到所有测试都通过。一旦发生这种情况，这个特性就差不多可以部署了。</p>
<p class="translated">左移方法有很多好处。它让质量成为每个人的头等大事，而不仅仅是QA和Ops。它节省了成本和精力，并通过确保在周期的早期发现错误来防止糟糕的用户体验。它迫使产品、开发、QA和Ops团队从一开始就一起工作，定义成功对产品或单个特性意味着什么。这有助于打破他们之间的孤岛，因为他们使用自己独特的专业知识来解决共同的问题。</p>
<h2 class="translated">左移在每个阶段都需要自动化</h2>
<p class="translated">要让左移成为现实，需要在流水线的每个阶段实现自动化。开始时，你需要一个像<a href="https://jenkins.io/" target="_blank" class="ext-link" rel="external ">詹金斯</a>这样的CI工具来自动化构建，并触发自动化单元测试。这个阶段的反馈循环应该是快速的，给开发人员关于代码质量的即时反馈。一旦基本单元测试通过，QA执行更高级的功能测试、负载测试等等。在这一步，移动带来了新的挑战——QA需要确保代码通过跨多个平台和设备的功能测试。这就是像<a href="https://saucelabs.com/" target="_blank" class="ext-link" rel="external "> Sauce Labs </a>这样的测试自动化工具必不可少的地方，它也有一个真实的设备测试云。</p>
<p class="translated">随着测试数量的增加，而且大多数测试都是自动化的，您还需要自动化另一个关键方面——基础设施的创建。与虚拟机是运行这些测试的默认选择不同，今天容器是标准。它们是轻量级的，易于创建，并且可以比虚拟机更高效地扩展。正如容器是新的一样，自动化其创建和管理的工具也是新的。</p>
<p class="translated">Kubernetes已经成为最强大的容器编排工具，并得到了容器生态系统各个角落的支持。它使您能够将基础设施层与应用程序层分离开来，因此您可以根据需求轻松扩展测试和生产环境的创建。优势是多方面的——更快的测试，因为环境准备得更快，更可预测的测试结果(因为一切都是自动化的，不容易出现人为错误)。最后，您将体验到更快的部署，这只是将质量和自动化带到上游的结果。</p>
<h2 class="translated">自动化云中的安全性</h2>
<p class="translated">容器容易受到外部攻击，并且缺乏内部监督。随着您自动化测试和部署，确保您不会在安全性方面有所欠缺变得更加重要。容器的运行规模比虚拟机大得多，保护它们自然也更复杂。与虚拟机不同，虚拟机可以通过为每个实例配置相同的安全参数来手动保护，容器需要基于策略的安全性，根据容器包含的内容以及容器与系统中其他容器的交互方式，以独特的方式对待每个容器。</p>
<p class="translated">为了满足容器的新安全需求，Twistlock在其容器安全平台中添加了两个新功能。首先，有<a href="https://www.twistlock.com/2017/07/07/cloud-native-app-firewall-cnaf-deep-dive/" target="_blank" class="ext-link" rel="external ">云本地应用防火墙(CNAF) </a>，它处理流量到容器的自动路由。它与CI流程集成并创建安全策略，以确保只有经过扫描的安全流量才能到达集装箱。为了实时扫描大量的流量，它利用了机器学习算法。因此，它会自动阻止来自Tor、DDoS和僵尸网络等危险来源的流量。它报告漏洞的重要细节，包括可疑的IP和恶意软件签名。运行容器时，安全性至关重要，CNAF在运行时提供了急需的威胁检测。</p>
<p class="translated">尽管您尝试保护容器，但在某个时候漏洞还是会悄悄出现。如果您运行的数百万个容器中有一个受到威胁，该怎么办？这时，您需要进行损害控制，并将缺口的周边限制在尽可能少的容器内。Twistlock推出了<a href="https://www.twistlock.com/2017/09/29/cloud-native-network-firewall-twistlock-2-2-deep-dive/" target="_blank" class="ext-link" rel="external ">云本地网络防火墙(CNNF) </a>来做到这一点。</p>
<p class="translated">它是一个容器到容器的防火墙，扫描和控制容器之间的访问。当它发现一个受损的容器时，它会限制该容器对系统其余部分的访问。CNNF还使用机器学习来识别集装箱之间的正常交通模式，无论交通流量有多大，都可以发现偏差。</p>
<p class="translated">像CNAF和CNNF这样的特征正是集装箱安全所需要的。像你开发管道的其他部分一样，手工只能做到这一步。要真正大规模地使用容器，您需要实现安全自动化。</p>
<h2 class="translated">结论</h2>
<p class="translated">当你优先考虑质量和速度时，你会看到质量向你的管道左边移动。这种左移方法从一开始就建立在强大的自动化之上。自动化构建和自动化测试应该渗透到自动化基础设施管理中。最后，你不能忽视容器的安全措施。就像管道的其他部分一样，您的安全应该通过像Twistlock的CNAF和CNNF这样的工具实现自动化。</p>
<p class="translated"><em>感谢<a href="https://www.holbertonschool.com/" target="_blank" class="ext-link" rel="external ">霍尔伯顿软件工程学院</a>，它将新堆栈连接到作者马克斯·约翰逊。</em></p>
<p class="attribution translated">Twistlock是新堆栈的赞助商。</p>
<p class="attribution translated">照片由<a href="https://unsplash.com/photos/DbeEqK0iFRQ?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="ext-link" rel="external "> Jason Yu </a>在<a href="https://unsplash.com/search/photos/shift?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="ext-link" rel="external "> Unsplash </a>上拍摄。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>