# 部署到云的 API 驱动的应用的安全性考虑

> 原文：<https://thenewstack.io/security-considerations-for-api-driven-apps-deployed-to-cloud/>

[](https://www.traceable.ai)

 [穆扎弗尔帕夏

穆扎弗尔在可追溯 AI 公司工作，是一名安全宣传员。他在安全、IT、网络和基础设施领域拥有超过 25 年的经验，在供应商和客户方面都有工作经验。在 Traceable，Muzaffer 帮助企业领导人做出更明智、更有洞察力的网络安全决策，更好地保护他们的组织免受网络攻击。](https://www.traceable.ai) [](https://www.traceable.ai)

在过去的几年里，API 驱动的应用程序在企业级云平台上不断涌现。它们根据用户需求进行扩展的能力彻底改变了应用程序的编写和部署方式。通常，这些分布式应用程序部署在 Kubernetes 平台上，以便更容易管理、编排和部署微服务容器。

DevOps 团队投入大量资源来确保他们在 Kubernetes 基础设施平台上运行的应用程序是安全的，不会被利用。这包括强化操作系统、通过微分段防止跨集群的横向移动，以及通过严格的 RBAC 控制限制访问来防止未经授权的访问。

然而，这只是成功的一半。从 Kubernetes 平台向上，部署的 API 驱动的应用程序有自己的安全问题类别，需要不同的方法来实现适当的安全保护级别。API 驱动的应用程序的兴起催生了一类新的 API 漏洞，现有的应用程序安全产品无法保护这些漏洞。隐藏在底层 API 中的漏洞会暴露出等待被利用的弱点，从而暴露关键的业务数据。网络犯罪分子已经注意到了这一点，并正在开发新的攻击载体，以便在组织转向 API 经济时利用它们。

我们需要一种新的方法，摆脱过去专注于保护单一应用程序的应用程序安全性，转而关注 API 驱动的应用程序如何运行，以提供适当的保护级别。

下面是在评估 API 安全解决方案时应该考虑的一些关键标准。

## API 可见性和监控:你不能保护你看不到的东西

尽管 API 的使用呈爆炸式增长，但许多安全和开发团队无法回答关于他们的 API 程序的基本问题——比如我们有多少，谁拥有它们，它们做什么。这给组织带来了巨大的安全风险，尤其是在当今复杂的威胁形势下。

为了防范安全风险，组织了解其 API 程序的所有方面及其相关的安全挑战是至关重要的。这有助于领导者通过适当的缓解策略改善组织的安全状况。大多数组织都公开了大量内置的 API，并对客户和合作伙伴开放源代码。它们由不同的团队发布，使用不同的应用程序堆栈和不同的过程。因此，很难跟踪和了解潜在风险在哪里。下面是一些您应该考虑的关键 API 可见性挑战:

*   **未知 API:**影子 API、不推荐使用的 API 或隐藏的 API 可能会超出安全团队的可视范围，这通常会导致它们不受保护。这些 API 可能会传输敏感数据，危及组织的合规性。
*   **API 参数:**批量分配等 API 漏洞可通过允许攻击者将用户配置文件更改为“admin”而导致权限提升，从而导致欺诈、数据丢失或更糟的情况。
*   **敏感数据暴露:**响应代码或错误消息中机密或敏感数据的暴露可用于窃取数据或作为大规模攻击的一种侦察形式。
*   **业务逻辑缺陷:**应用程序业务逻辑缺陷可以使不良行为者通过帐户接管、抓取、假帐户创建和其他形式的 API 滥用来实施欺诈。

当寻求解决这些常见的 API 安全挑战时，提出问题来评估和减轻风险的程度是有帮助的。有许多问题需要考虑:我们现有的 API 是做什么的？谁是 API 所有者？哪些原料药符合法律或法规要求？我们如何监控 API 中的漏洞？我们的 API 是否会暴露敏感数据或 PII，从而导致我们不符合规范？我们如何测试和测量我们的 API 监控的有效性？

## API 安全性:不同类型的应用程序安全性

大多数拥有 web 应用程序的组织都会有一个 Web 应用程序防火墙(WAF)来提供安全保护。然而，随着组织继续增加他们的 API 驱动的应用程序，他们发现对于单片应用程序工作良好的传统 WAF 不能扩展以匹配现代 API 驱动的应用程序的需求。由于 API 驱动的应用程序的编写方式非常独特，这使其成为一个独立的可利用漏洞类别，与 OWASP 十大 web 同类产品非常不同。在保护整体 web 应用程序免受 OWASP 的 10 大 web 漏洞攻击方面非常有效的安全方法在 API 领域并不适用。使用传统的 web 安全方法很难防御诸如 BOLA(破碎对象级授权)和批量分配之类的关键 API 漏洞。越来越多的客户慢慢意识到部署 WAF 来保护他们的 API 就像拿刀去枪战。这只是错误的武器。

一类新的 API 安全产品已经出现，它们取代了 web 应用程序防火墙，并且更加符合保护 API 驱动的应用程序不被利用的特定要求。这些 API 安全解决方案是围绕应用程序的日常行为方式构建的。这些安全解决方案由机器学习(ML)提供支持，专注于学习应用程序行为和发现异常活动。构建应用程序机器学习模型可以为发现嵌入数百个微服务的内在业务逻辑缺陷和 API 漏洞奠定基础。用户驱动的流量推动了机器学习模型的开发，并捕获了应用程序的微服务如何协同工作来提供应用程序业务逻辑。用户交互中的微小偏差可能会突出表明网络攻击者正在探查应用程序中的缺陷或利用应用程序中的 API 漏洞。

如果您正在寻找 API 安全解决方案，您应该考虑以下三个标准:

*   **发现:**识别组织环境中的所有 API。理想情况下，API 安全工具应该知道定义允许的 API 请求的 API 参数。例如，一个 API 应该允许用户只用 255 个字符串字符来响应。通常，未经验证的 API 响应可用于利用应用程序漏洞。
*   **学习:**API 安全工具应该能够从用户驱动的流量中学习 API 行为。这允许 API 安全解决方案的机器模型学习定义正常应用程序行为的所有细微差别。用户行为中轻微而突然的偏差会通过警报呈现给安全运营团队。
*   适应:大多数在敏捷环境中开发的现代应用程序变化很快。API 安全解决方案应该能够自动调整其安全模型，以持续适应所有新的变化，从而确保应用程序安全性始终与 DevOps 保持同步。

## 威胁分析:检测正在发生的网络攻击

网络犯罪分子发动精心策划、谨慎而耐心的复杂网络活动。当他们从应用程序中泄漏敏感数据时，他们采取必要的预防措施来逃避检测。为了应对这些威胁，威胁分析需要检测访问您的应用程序的用户之间的恶意活动。从您的应用程序中获得的数据的质量和广度将决定您的安全保护级别，并决定您检测即将到来的网络攻击的速度。随着应用程序变得越来越复杂和分散，了解应用程序的内部工作方式、工作原理、业务逻辑以及与其他第三方技术合作伙伴的交互变得越来越重要。收集应用程序中所有点的数据交互可以确保您全面了解用户与应用程序的所有交互。数据集越丰富，就越容易将恶意用户交易与合法用户交易区分开来，并使您的安全团队能够尽快发现数据泄露。

API 安全平台应该使安全团队能够执行以下任务:

*   **威胁搜索:**安全分析师可以在数据湖中搜索正在进行的活动。
*   **跟踪攻击者:**当攻击者深入应用程序时，您可以跟踪杀伤链活动，如侦察或扫描活动。
*   **事后分析:**安全分析师可以获得事后取证，以了解网络攻击如何利用应用程序的业务逻辑或漏洞。

## 结论

快速变化的 API 驱动的应用程序有助于加快上市时间，但也释放出可被网络犯罪分子快速利用的 API 漏洞。在保护整体式 web 应用程序方面运行良好的应用程序安全产品在保护 API 驱动的应用程序方面并没有很好的伸缩性。由于跨更复杂和分布式应用程序架构的快速变化，API 安全性的要求与市场上现有的应用程序安全性产品有着根本的不同。当您评估 API 安全解决方案时，重点关注:该解决方案如何提供可见性，它对您的应用程序的理解程度，以及您的威胁分析的质量和深度。

获得专门针对 API 应用程序的适当的应用程序安全解决方案，将有助于您的组织更好地抵御不断增加的 API 驱动的网络攻击，这些攻击试图利用您最宝贵的资产—您的数据。

![](img/f620400d3f58d723440a85aa65739860.png)

*要了解更多关于 API 安全性和部署在云中的 API 驱动的应用程序，请考虑参加 10 月 11-15 日举行的 [KubeCon+CloudNativeCon 北美 2021](https://events.linuxfoundation.org/kubecon-cloudnativecon-north-america/) 。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>