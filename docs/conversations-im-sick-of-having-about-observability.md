# 我讨厌关于可观察性的对话

> 原文：<https://thenewstack.io/conversations-im-sick-of-having-about-observability/>

去年，谷歌对“可观察性”的搜索激增，任何寻求平易近人的介绍的人都不得不滚动浏览伪装成文章的广告页面，以及同样枯燥的学术定义的重新编排。

尽管内容过剩，如果你仍然对[到底什么是](https://thenewstack.io/observability-in-2022-it-pays-to-learn/)的可观察性感到困惑，你会在一个好公司。据[数字企业杂志](https://www.dej.cognanta.com/2022/03/04/observability-done-right-practices-of-leading-organizations/)调查，多达 48%的组织报告市场对该术语感到困惑！对于一个已经在[流行了六年的行业术语来说，我们仍然在进行关于定义的 101 级讨论，这是很疯狂的。](https://thenewstack.io/observability-the-5-year-retrospective/)

如果您正在阅读本文，我假设您对可观测性的含义有所了解，因此我们可以跳过我给出自己的定义的部分，以及在向您介绍“可观测性的一个真正定义”之前，讲述钻研日志和争论指标的可怕日子的历史课

让我们从最常见的误解开始，“可观察性是监测更名。”

## 可观察性是监测更名

没有。可观察性和监控是不同但互补的概念。

考虑一个厨房，它有一个发出警报的烟雾探测器。

传统的探测器使用一束光，当一定量的粒子阻挡或减弱了光线后，就会触发警报。作为智能家居系统一部分的新型探测器使用两个光束、早期预警通知、关于被触发的探测器在哪个房间(也就是检测到问题的地方)的上下文，并结合摄像机来提供房间的实时图像。

烟雾探测器本身是监视器，并且感测和检查是否达到某个阈值的内部循环是监视行为。

观察涉及到一个观察者，一个对烟雾警报做出反应的人，以及触觉、视觉和听觉等感官来回答:“为什么烟雾探测器会启动？是真的紧急情况吗？”可观察性是指响应者能够利用探测器提供的数据以及他们自己的感觉和经验来回答这些问题的程度。

可能是你室友刚在炉子上烧了一锅意大利面，油烟机通风口动力不足。你会发现探测器上有足够多的灰尘，是灰尘而不是烟雾触发了它。或者这可能是更换电池的有效预警呼叫。

依靠传统的探测器意味着人类需要做更多的工作进入房间并评估情况，只知道探测器正在发射，并依靠他们可用的视觉、听觉和触觉来理解事物。相比之下，较新的智能探测器可以提供细节，如被触发的探测器所在的房间和实时视频。

可观察性是观察者能够接受信息并提出问题以理解正在发生的事情的程度。想想哪个系统会帮助你回答“为什么火警会响？”传统检测机还是现代检测机效率更高？最明显的赢家是能够提前提供上下文信息的现代探测器。那是一个具有更大可观测性的系统。传统探测器的可观测性较低。他们依靠人耳跟随哔哔声来定位房间，然后依靠眼睛来查看是否有东西着火。要缩小问题的位置和内容，需要采取很多措施！

> 监控和可观察性共同提供了系统的整体视图，为操作员提供了丰富的信息，有助于进行有效的故障排除。

如今，传统和智能烟雾探测器与人类居住者一起在建筑安全中发挥着关键作用。如果人类不是重要的一部分，当探测器响起时，我们会立即派遣消防队员。同样，我们需要探测器来持续监控，因为人类无法保持高度警惕。这不是监视与可观测性，而是监视**和**可观测性。

监控和可观察性共同提供了系统的整体视图，为操作员提供了丰富的系统信息，有助于进行有效的故障排除。

## 现状运行良好

我的第一个想法是，“到底为谁工作？

 *我们在企业中设计、构建和交付软件的方式在向微服务、容器和云的迁移中发生了根本性的转变，这被称为“云原生”一份[数字企业杂志调查](https://www.dej.cognanta.com/2022/03/04/observability-done-right-practices-of-leading-organizations/)报告称，在现代化项目后，58%的组织在从拉动式请求到生产的过程中失去了可见性。

可观察性是下一个要做的投资，高层领导尤其需要“啊哈！”因为在 2023 年[云原生可观测性报告](https://go.chronosphere.io/2023-observability-report.html)的调查中，没有人对他们当前的可观测性解决方案有任何抱怨。然而，令人震惊的是，100%的个人投稿者都心怀不满。

假设一个警报响起，呼叫一名工程师，因为某项特定服务的错误率增加，而他们正在云本地商店工作。该应用程序可能运行在云服务器上的虚拟机的容器中，配置可能分布在不同区域的多个 Kubernetes 对象上。这是很多潜在的罪魁祸首！工程师需要快速理解:

*   问题有多严重？它是否可见并面向客户？
*   这是属于应用程序的一个实例还是跨多个实例？
*   代码、配置或基础设施是否有变化？
    *   如果是，那么参与的是什么/谁？
*   这是基础架构层的问题吗——糟糕的主机、嘈杂的邻居、区域性中断等。？
*   正常是什么样子的？
*   有多少用户/帐户遇到了这种情况？

发誓要让 2023 年成为您缩小差距的一年，倾听那些随叫随到的人，深入了解平均修复时间(MTTR)等肤浅的事件指标，以了解为什么以及如何提高可观察性可以使您的组织受益。

## 可观察性是轨迹、日志**和**指标

跟踪、日志和度量是您的系统可以发出的[信号的类型，](https://thenewstack.io/beyond-the-3-pillars-of-observability/)并且认为它们是可观察性的基础不属于“[三大支柱](https://chronosphere.io/learn/are-the-three-pillars-of-observability-still-relevant/)

准确地说，可观测性是一个系统特征，一个描述符，一个形容词，而不是一个遥测清单，数据类型之间的界限比您可能意识到的要模糊。如果一个日志是结构化的，那么它可以被分类为一个事件；如果它有开始和结束时间戳，以及跟踪和父 id，那么它可以被分类为一个跨度。指标可以从源中发出，也可以从日志、跟踪或事件中获得。

> 如果你在第一天就开始使用一个不发出任何东西的服务，然后添加了日志记录，你就不会有 33.3333%的“实现可观察性”的机会。

如果你在第一天就开始使用一个不发出任何东西的服务，然后添加了日志记录，那么你还没有达到“实现可观察性”的 33.3333%。考虑数据被发送到哪里，如何被访问，以及谁在查看它。

还怀疑？思考以下问题:每种类型是否被发送到不同的工具，它们有自己的 UI、查询语言和图表库？在堆栈的每个部分，是否有专门针对工程师的入职和培训？数据类型之间的元数据和标记有多一致？最后，您的工程师是否经常使用遥测技术来通知软件生命周期的每个阶段？

了解这些问题的答案以及每种数据类型如何符合您的可观察性策略，是充分利用您的数据并确保正确的数据出现在正确的仪表板上的关键。

## 可观测性太昂贵了

Chronosphere 是我工作过的第三家 observability 公司，这意味着我习惯于听到“我们永远负担不起托管供应商解决方案。这就是我们在内部运行可观察性堆栈的原因。”

从表面上看，运行自己的内部堆栈似乎是一个更便宜、更简单的选择。但是，建立和运营自己的可观察性堆栈有很多隐性成本，例如雇佣和管理 SRE 团队来运营平台的成本，隔离基础设施的成本增加，以及从头开始开发支持和培训。

这让我想到了操作和扩展一个高度可用的实时监控和可观测性平台所需要的巨大提升。考虑到现场可靠性工程师的高薪，支付隔离基础设施的费用，以及不得不从头开始创建培训和支持，建立和运行自己的可观测性堆栈有很多隐性成本。

另一个考虑因素是供应商本身；他们的信息传递何时转向了可观察性？他们是从传统的监控公司起家的吗？您是否因为专有仪器而被锁定在[巨额账单](https://thenewstack.io/the-growth-of-observability-data-is-out-of-control/)中？

在云原生环境中，生成的遥测数据数量庞大，重复数据可能是导致天价账单的一个因素。Eric Mustin 在他的“[关于厂商中立可观察性测试的笔记”](https://ericmustin.substack.com/p/notes-on-vendor-neutral-observability)中说得很好:

*“如果用户通过一个 span 事件、一个 RED 度量、一个日志和一个错误跟踪事件收集相同的错误和堆栈跟踪，他们应该期望为此支付 4 次不同的费用。他们需要花时间来管理他们发出的数据量以及如何发出数据。”*

就可观察性成本而言，重要的是将数据访问和存储的具体成本与为运营内部堆栈的团队配备人员的隐性成本考虑在内。

## 结论

好吧，那么我们完全同意了？

可观察性是指通过使用仪器产生的信号，人们能够多好地理解他们的系统。

可观察性不是监控，工程师们感受到了现状实现的痛苦。不仅仅是你发射的遥测信号，甚至是你使用的工具，它还包括并赋予回路中的操作人员能力，以及一个整体的遥测策略，可以应对大规模遥测的高成本。

既然这个问题已经解决了，我们下次再讨论平台工程吧。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>*