# 混乱之路...作为一项服务

> 原文：<https://thenewstack.io/the-road-to-chaos-as-a-service/>

[](https://pingcap.com/en/)

 [西顿唐

西顿唐(@西顿唐)是平凯普杰出的工程师。他一直致力于下一代 HTAP 数据库 TiDB，并领导分布式键值存储 TiKV 的开发。他是一个开源狂热者，在 Rust 中开发了许多库，如 rust-prometheus、rust-grpc 和 rust-rocksdb。](https://pingcap.com/en/) [](https://pingcap.com/en/)

在分布式计算的世界中，工作负载集群可能会在任何时间、任何地点发生不可预测的故障。长期以来，对于拥有大量网络业务、必须支持大量实时客户交易的企业来说，这一直是一个挑战，例如流媒体内容服务、电子商务公司和金融服务公司。但是，随着疫情加速数字化转型并推动客户上网，许多较小的组织现在也依赖于分布式计算部署。

为了更好地识别这些环境中的漏洞并提高恢复能力， [网飞](https://netflix.github.io/chaosmonkey/) 在 2010 年代初开创了混沌工程的概念。混沌工程是一个测试高度分布式计算平台承受随机中断并提高其可靠性和弹性的能力的过程。

虽然传统的故障测试在当时已经存在，并且服务于类似的目的，但是它仅限于针对系统中预期易受攻击的特定点。故障测试不允许您评估和发现隐藏的弱点，这通常会导致最具破坏性的失败。另一方面，混沌工程使你能够发现那些“未知的未知”通过考虑随机性和意外情况，混沌工程加深了你对被测试系统的了解，并挖掘出新的信息。

想想 10 月初的重大事件[](https://www.npr.org/2021/10/05/1043211171/facebook-instagram-whatsapp-outage-business-impact)(这也影响了 Instagram、WhatsApp 和 Oculus)。该平台离线六小时，这是该公司自 2019 年以来最严重的一次宕机。最终，脸书 [确定](https://engineering.fb.com/2021/10/04/networking-traffic/outage/) 问题是由 “协调我们数据中心之间网络流量的骨干路由器的配置变化”引起的像这样的情况很难预测，但一个好的混沌工程平台可以预测这些罕见的事件，并帮助企业做好准备。

自从混沌工程被引入以来，它已经被其他主要的网络公司所采用，但是它还没有被运行次超大规模部署的组织所接受，这些组织缺乏这样做的资源。但是，随着混沌工程的新阶段开始出现:混沌即服务，这种情况将在未来几年内改变。

像许多其他 XaaS 运动一样，混乱即服务将成为一种民主化的力量，让更多的组织获得一种有价值但复杂的技术。在这种情况下，民主化是非常必要的。“混沌即服务”最终将使没有网飞或脸书规模的企业能够利用混沌工程。

## **混乱即服务将使服务大众化**

Chaos-as-a-service 将为各种规模的组织提供一种快速、简单的方法来运行 Chaos 实验并测试其系统的弹性。Gremlin 的联合创始人 Matt Fornaciari 概述了要点， [解释了](https://jaxenter.com/chaos-engineering-service-144113.html) 混沌即服务应该为用户提供“直观的 UI、客户支持、开箱即用的集成，以及你需要在几分钟内进行试验的一切。”

这些是最基本的。再深入一点，为了实现足够的易用性，混沌即服务必须提供以下四个东西:

*   用于管理的统一控制台，工程师可以在其中编辑配置和创建混沌实验。
*   可视化指标，允许工程师查看实验状态。
*   暂停或存档实验的操作。
*   简单的交互，允许工程师轻松地拖放对象来编排他们的实验。

简而言之，混沌工程平台需要更简单的管理、更大的可见性和更流畅的操作能力。目前的混沌工程产品在这些方面有所欠缺，并且缺乏上面详述的特性。因此，今天没有真正的混沌即服务平台；然而，正在努力使之成为现实。

## **混沌网格:走向混沌即服务**

[混沌网格](https://chaos-mesh.org/) 是一个开源的云原生混沌工程平台，在 Kubernetes 环境中编排混沌实验。该平台具有针对复杂分布式系统的全方位故障注入方法，涵盖 pod、网络、文件系统、操作系统、JVM 应用程序甚至内核中的故障。它被设计成易于使用，高度可扩展，并覆盖多种故障类型。由于越来越多的用户社区的支持，Chaos Mesh 作为一个沙盒项目加入了[云本地计算基金会](https://cncf.io/?utm_content=inline-mention) (CNCF)。

凭借其开源背景和对简单性的关注，Chaos Mesh 被设计为可广泛访问。该技术已经被小型和大型企业[](https://github.com/chaos-mesh/chaos-mesh/blob/master/ADOPTERS.md)采用(包括 Azure，其中 [采用混沌网格](https://docs.microsoft.com/en-us/azure/chaos-studio/chaos-studio-tutorial-aks-portal) 允许用户将故障注入 Azure Kubernetes 服务集群)。Chaos Mesh 的易用性使其在未来两到三年内能够很好地支持一些 Chaos 即服务功能。在此期间，社区将致力于做出一些关键改进:

*   **更好的可用性**:一些混沌网格特征使用起来比较复杂。例如，当您应用一个混沌实验时，您经常需要手动检查实验是否已经开始。
*   超越库伯内特:混沌网格主要用于库伯内特的环境。尽管 chaos 支持在物理机器上运行 chaos 实验，但其功能非常有限，而且命令行的使用也不方便。
*   **增加定制**:平台目前不允许插件。要应用定制的混沌实验，你必须修改源代码。另外，今天混沌网格只支持 Golang。

像其他混沌工程平台一样，混沌网格在提供混沌即服务之前还需要做一些工作。但是这项技术特别适合于混沌即服务，并且已经提供了基本原理。

## 混乱即服务的下一步是什么？

在像混沌网格这样的开源努力的带领下，混沌即服务将把混沌工程带给大众。还需要两年左右的时间才能到达那里，但是等待是值得的。

通过利用混沌即服务，各种规模的组织将能够提高其分布式计算部署的弹性和可靠性。事实将证明，在一个广泛数字化转型的时代，这一点至关重要。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>