# 关于无服务器数据库，前端开发人员需要了解什么

> 原文：<https://thenewstack.io/what-front-end-developers-need-to-know-about-serverless-databases/>

无服务器是我们创建和运行 web 服务和应用的下一个范式转变。无服务器计算在云中运行，使开发人员不必考虑后端任务，如管理基础架构、扩展服务器以及配置容量和资源。

在本文中，我们将讨论前端开发人员在使用无服务器数据库时需要了解的基本知识，以及它们与传统系统的不同之处。

## 无服务器数据库的核心特性

有许多不同种类的无服务器数据库。每个主要的云提供商都提供一个，甚至有像 [Fauna](https://fauna.com/) 这样的公司，以提供无服务器数据库为核心产品。让我们看看所有这些数据库都具备的功能，以及它们缓解了遗留数据库的哪些难题。

### 基于消费的计费

 [丹·安东内尔

丹·安东内尔是动物界前端工程经理。他原本是澳大利亚人，也曾在英国和美国生活和工作过。之前在财富 500 强公司和政府机构工作，他喜欢像动物界这样充满活力的初创公司提供的文化、动力和技术。他热衷于寻找对人们有用的技术解决方案，而不是相反。](https://fauna.com/company) 

一般来说，无服务器技术的要点是基于消费的计费。我们不需要每月支付固定金额的订阅费；我们只为我们使用的东西付费。

例如，如果我们创建一个新的应用程序，它还没有任何用户，我们不需要为此付费。许多无服务器数据库产品甚至附带一个免费层，通常足以容纳我们获得的第一批用户。这个免费层允许我们在最终确定设计和费用细节之前测试成本结构。

通常，无服务器数据库的定价基于存储和计算。我们在数据库中存储数据的数量和时间，以及我们使用计算来读取和写入数据的数量和时间。这些计算所基于的指标的粒度因提供商而异，一些提供商允许用户在需要时切换到调配的容量。在建立了实际的使用指标之后，这可以在服务的生命周期中节省大量的资金。

### 自动缩放

自动扩展是无服务器技术的另一个重要部分。它是快速适应利用率变化而无需任何人工干预的能力。

在以前私有服务器的时代，系统设计人员必须选择合适大小的硬盘、CPU 和内存。如果我们买的不够多，我们就会耗尽空间，或者服务质量会随着用户数量的增加而下降。如果我们买得太多，我们会为我们不需要的硬件买单，这将使我们的服务更加昂贵，并可能给竞争对手带来成本优势。

后来有了云，我们可以租用服务器，甚至是虚拟服务器。首先，他们必须被租用几个月和几分钟。因此，当需求发生变化时，启动新服务器或关闭旧服务器是可能的。

无服务器自动扩展是这一发展的下一步。有了无服务器数据库技术，当流量激增时，我们可以扩展到几乎无限的磁盘空间并在几秒钟内完成计算，如果所有用户都离线，我们还可以缩小规模。

请记住，如果处理不当，自动扩展与基于消费的计费相结合可能是一把双刃剑。如果我们没有为免费用户设置上限，或者我们的定价结构有缺陷，这种设置会导致我们没有预料到的巨大成本。了解一个用户将花费我们多少钱是至关重要的，所以当我们突然拥有数百万用户时，我们不会感到惊讶。

### 没有冷启动

围绕无服务器的一个主要讨论围绕冷启动展开。当第一次访问无服务器资源时，或者在很长一段时间没有访问无服务器资源后，会发生冷启动。冷启动有很高的延迟，这就是为什么他们不被反对无服务器的人所接受。

冷启动不是固有的无服务器问题，而是像 AWS Lambda 或 Azure Functions 这样的功能即服务(FaaS)平台的问题。例如，像 [FaunaDB](https://fauna.com/faunadb) 这样的无服务器数据库没有冷启动，即使在待机一段时间后也可以提供低延迟响应。

### 无操作

不必考虑运营与无服务器技术没有直接关系，而是作为云和托管服务的一部分。

有了托管服务，我们不必购买过时或损坏的新硬件，也不必在发布更新和错误修复时更新数据库软件。在无服务器领域，许多服务提供我们数据的自动备份，因此如果发生故障或者我们或我们的一些客户犯了导致数据丢失的错误，数据也不会丢失。

无服务器数据库具有内置的操作。乍一看，在租用的服务器上运行的充分利用的遗留数据库可能比无服务器数据库更便宜，但是我们不能忘记其他长期维护成本，这些成本会增加总拥有成本。

### 全局低延迟

几乎所有无服务器数据库提供商都有某种形式的全球部署产品。 [FaunaDB](https://fauna.com/faunadb) 建立在一种称为 Calvin 的特殊算法之上，与其他解决方案相比，该算法允许在不同地理数据中心进行复制，延迟开销最小。

开始时，全局可用性区域可能看起来并不重要，但是如果没有它们，如果有必要为不同的位置添加额外的数据库和复制，可能会带来不必要的复杂性。无服务器数据库允许我们从一开始就把数据保存在需要的地方。

在当今的全球经济中，当谈到竞争优势和盈利能力时，这往往是成败的关键。

### 默认安全

谈到数据库，许多开发人员忽略的另一个重要方面是安全性。

像维护一样，它与我们正在考虑使用的产品没有直接关系，但如果有人窃取用户数据，它会很快变得昂贵。

大多数无服务器数据库在默认情况下都是安全的，并且在静态和传输过程中都进行了加密，有些数据库还配备了特定的加密客户端，可以在数据传输到后端之前对其进行加密。这些都可以用基本的安全知识来处理，不需要几周的学习，甚至不需要聘请安全专家。

### 没有一致性权衡

虽然大多数无服务器数据库提供了一些 ACID 一致性，以允许跨整个数据库集群的事务，但它们通常会带来重大的折衷，特别是在性能**方面。他们在后台执行的所有内务处理以允许以后回滚，可能会阻止其他客户端访问或更改数据。

使用 Calvin 算法，权衡保持在最低限度，因此客户端不会得到陈旧的数据，也不会因为其他客户端启动了一个事务而突然看到性能下降。

## 其他功能

有些特性并不是每个可用的数据库产品的一部分，但是它们仍然应该被强调。

### 直接客户端访问

像 Firebase Cloud Firestore 和 [FaunaDB](https://fauna.com/faunadb) 这样的数据库提供了通过客户端(如浏览器)的直接访问。其他的，比如 AWS DynamoDB，必须由应用服务器或 AWS API 网关间接访问。这是许多前端开发人员的基本特性之一，因为他们通常缺乏设置应用服务器的经验。

### 无模式

大多数无服务器数据库不是关系型的，因此不需要模式就可以开始。[比如 FaunaDB](https://fauna.com/faunadb) ，通过 GraphQL 访问时只需要一个 GraphQL 模式，但是数据库本身是无模式的，可以容纳多种类型的数据模型。Azure Cosmos DB 和 AWS DynamoDB 也是如此。

无模式数据库有一些粗糙的方法来组织数据，但通常允许我们发送我们所拥有的数据，并保存它。表单中有一个新字段需要在另一个屏幕中显示？没问题。将新数据发送到一个无模式数据库，它就可用了。

一些提供商提供关系数据库，如 AWS Aurora Serverless 和 Google Cloud Spanner，它们允许关系模式定义。

### 实时处理和同步

一些无服务器数据库，如 IBM Cloudant 和 Firebase Cloud Firestorage，提供了前端和后端之间的实时数据同步。

并不是所有类型的应用程序都需要这样做，甚至可能不是大多数应用程序都需要这样做，但是实现这样一个系统并不简单，当这个特性是必不可少的时候，让数据库来完成繁重的工作会有很大的帮助。

### 酸性交易

大多数无服务器数据库提供一些 ACID 一致性，但这通常是以增加复杂事务的延迟为代价的。 [FaunaDB](https://fauna.com/faunadb) 的新算法 Calvin 有助于以最小的占用空间跨多个地理位置不同的数据中心扩展多文档事务。

虽然高性能、100% ACID 一致性对于所有类型的应用程序来说都不是必需的，但对于其中一些应用程序来说，它可能是至关重要的，应该从一开始就考虑到，这样我们就不会在以后被事务协议的争用足迹淹没。

### FaaS 一体化

大型云提供商的数据库通常会集成到他们的 FaaS 生态系统中。Azure Cosmos DB、AWS DynamoDB 和 Firebase Cloud Firestore 可以触发后端功能，这些功能需要额外的工作，如在软件库或第三方服务的帮助下转换数据。

如果预期要进行后端数据转换，我们应该考虑选择一个允许我们加入一个函数来完成这项工作的数据库。FaaS 允许前端开发人员创建无服务器的后端功能，而无需自己建立和维护基础设施。

## 结论

无服务器数据库拥有的所有特性给前端开发人员提供了强大的能力，而不需要后端开发技能。作为前端开发人员，创建全栈应用从未如此简单。

我们可以按下按钮建立一个数据库，并开始向其中输入数据。一切都将毫不费力地扩展和归档。此外，没有预付款。如果我们没有用户，我们就不用为资源付费，但如果我们有一款畅销产品，我们仍然可以选择在全球范围内进行扩展。

最重要的是，当我们可以创新下一个特性时，我们不必花费周期在错误修复和损坏的硬件上。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>