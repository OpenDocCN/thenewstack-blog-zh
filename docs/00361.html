<html>
<head>
<title>The CockroachDB Distributed SQL Database Reports for Production Duty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CockroachDB分布式SQL数据库报告用于生产任务</h1>
<blockquote>原文：<a href="https://thenewstack.io/cockroachdb-1-0/#0001-01-01">https://thenewstack.io/cockroachdb-1-0/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">每个人都知道细节中的魔鬼，但是谁能想到在构建一个高度一致、始终可用、可伸缩的SQL数据库时会有这么多的细节呢？</p>
<p class="translated">据首席执行官<a href="https://www.linkedin.com/in/spencerwkimball/" class="ext-link" rel="external ">斯潘塞·金博尔</a>称，这是蟑螂实验室从其CockroachDB项目的测试版中吸取的教训。他说，与此同时，该公司也被对该项目的兴趣“冲昏了头脑”。</p>
<p class="translated">经过三年的制作，该公司宣布该数据库现在已经可以生产了。</p>
<p class="translated">CockroachDB是一个分布式SQL数据库，构建在事务性和强一致性的键值存储之上。它水平缩放；从磁盘、机器、机架甚至数据中心故障中幸存下来——因此它指的是昆虫的生存能力——延迟中断最少，无需人工干预。它还支持强一致性的ACID事务；并为结构化、操作和查询数据提供了熟悉的SQL API。</p>
<p class="translated">蟑螂实验室的Jessica Edwards在之前的一篇关于新堆栈的文章中解释了<a href="https://thenewstack.io/cockroachdb-unkillable-distributed-sql-database/" class="local-link">cocroach db架构</a>。</p>
<p class="translated">金博尔在<a href="https://www.cockroachlabs.com/blog/cockroachdb-1-0-release/" class="ext-link" rel="external ">的博客文章</a>中解释说，过去一年的开发集中在三个领域:分布式SQL支持小型和大型用例的无缝扩展；多活动可用性，实现始终一致的高可用性；以及在几乎任何环境中的灵活部署。</p>
<p class="translated">自2016年3月测试版发布以来，它的下载量已超过10万次。客户包括<a href="https://heroiclabs.com/" class="ext-link" rel="external ">英雄实验室</a>，它为构建社交和实时游戏提供开源的可扩展服务器，以及中国互联网公司百度，它最近展示了一个用例，涉及每天处理20亿次插入，同时针对“混沌事件”进行测试，以检查弹性。</p>
<p class="translated">1.0版提供了完全分布式的ACID事务、零停机模式更改以及对二级索引和外键的支持。它还引入了分布式查询执行引擎，使分布式连接能够支持分析查询，随着节点添加到集群中，分析查询的速度会线性加快。</p>
<p class="translated"><iframe loading="lazy" title="CockroachDB: Architecture &amp; Overview from Cockroach Labs [Code Driven by FirstMark]" src="https://www.youtube.com/embed/tV-WXM2IJ3U?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p>
<p class="translated">该数据库使用“多活动可用性”的概念，这一概念起源于蟑螂创始人的前雇主谷歌。它包括使用两种以上的资源，并从他们那里迅速获得一致性的共识，而不是达到最终的一致性。他说，亚马逊的Aurora也提供类似的跨站点复制。</p>
<p class="translated">他说，数据不仅存在于三个或更多的地方，而且处理也发生在这些不同的地方。任何节点、任何复制站点都可以为应用程序提供服务。</p>
<p class="translated">Kimball说，编写最初的数据库实现花了大约一周时间，解决问题花了两年多时间，尤其是围绕<a href="https://raft.github.io/" class="ext-link" rel="external "> Raft </a> consensus算法。</p>
<p class="translated">CockroachDB可以在笔记本电脑、公共云或私有云上本地运行。它仍然没有自己的云服务，尽管这可能会在未来12个月内实现。金博尔说，与AWS或谷歌云服务相比，它的优势在于它不会绑定到特定的云。</p>
<p class="translated">在之前讨论<a href="https://thenewstack.io/google-cloud-spanner-view-field/" class="local-link">谷歌扳手</a>时，金博尔认为，由于它是专有的，如果你后来决定要将数据转移到其他地方，就没有真正的障碍。许多大公司运营着自己的数据中心，但正在寻求向公共云服务转移。他说，这对于蟑螂来说很简单——只是一个配置上的改变。</p>
<p class="translated"><a href="https://www.nextplatform.com/2017/02/22/google-spanner-inspires-cockroachdb-outrun/" class="ext-link" rel="external ">蟑螂经常被比作</a>和<a href="https://thenewstack.io/google-cloud-spanner-view-field/" class="local-link">谷歌扳手</a>，后者占据了最近数据库的大部分头条。然而，许多其他项目也加入了为分布式SQL增加规模的探索，包括<a href="https://thenewstack.io/tidb-brings-distributed-scalability-sql/" class="local-link"> TiDB </a>，它也旨在构建Spanner的开源版本；<a href="https://thenewstack.io/crate-addresses-database-speed-scaling-standard-sql/" class="local-link"> Crate </a>，重点支持Docker容器和微服务；和<a href="https://www.timescale.com/" class="ext-link" rel="external ">时标</a>，为时序数据构建。还有<a href="https://thenewstack.io/faunadb-harnesses-serverless-cloud/" class="local-link"> FaunaDB </a>，它将自己描述为关系型，但不是SQL。</p>
<p class="translated">蟑螂实验室还宣布了2700万美元的B轮融资，由Redpoint Ventures的Satish Dharmaraj领投，Benchmark、FirstMark Capital、GV(原谷歌风投)、Index Ventures和Work-Bench也参与了融资。</p>
<p class="translated">金博尔说，新的资金将进一步使该公司能够努力填补公司需求和数据库提供之间的差距。</p>
<p class="translated">该公司一直在宣传地理分区，称其竞争对手不具备这一功能。蟑螂计划在今年年底实现地理分区测试版。</p>
<p class="translated">他说，就公司需要什么来运行全球服务而言，这只是冰山一角，特别是随着更多涵盖数据主权的法规的出现。</p>
<p class="translated">Kimball之前解释过地理分区是将数据移动到不同区域的有效方法，因为毕竟客户确实会移动:</p>
<p class="translated">“地理分区允许公司拥有单一的逻辑数据库。但是每个区域都是透明和独立的。澳大利亚客户的数据位于澳大利亚。欧盟数据仅限于欧盟。在德国，这可能比欧盟还要严格。但是如果需要的话，系统中没有任何东西可以阻止你在这些系统之间进行操作。因此，如果您跨区域添加一些功能，可以通过一次操作完成。这使它原子化，使它一致，”他说。</p>
<p class="translated">从开发人员的角度来看，它只是数据库模式中的一列。假设数据位于欧盟，如果您更改该字段，关于该客户的所有数据都会移到后台。这对于运营团队来说更简单，因为您拥有规模经济。你有一个全球服务，而不是一套不同的监控，不同的机器，不同的发布周期。</p>
<p class="translated">CockroachDB起源于<a href="https://github.com/cockroachdb" class="ext-link" rel="external "> GitHub项目</a>。然而，该公司还宣布了付费企业层。一个企业级功能是分布式增量备份和恢复。免费版本包括非分布式备份和恢复。</p>
<p class="translated">金博尔说，该公司需要一个可行的商业模式，但它希望在免费版本中保留大多数真正有用的功能。他说，只有那些只适用于拥有庞大数据集的大公司的产品才会进入企业版。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>