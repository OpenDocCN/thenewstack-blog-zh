# Kubernetes 前后的 DevOps

> 原文：<https://thenewstack.io/devops-before-and-after-kubernetes/>

随着 Kubernetes 五岁，我们探索了 K8s 世界中 DevOps 的变化。

## DevOps 初始状态和缺点

 [Anoop Balakuntalam

Anoop Balakuntalam 是印度海得拉巴的一名好奇的技术专家。在过去的 18 年中，他在 web 开发和服务器管理领域建立了合资企业，建立了为财富 500 强客户服务的云实践，并在开发各种基于云的应用程序和 SaaS 产品方面发挥了重要作用。结合他对 DevOps &软件架构的浓厚兴趣和他对建立灵感团队的热情，他目前正忙于为 HyScale 的 Kubernetes 构建一个无摩擦的应用交付平台。](https://www.hyscale.io/) 

在前 Kubernetes 时代，基础设施和应用程序开发不可避免地交织在一起。随着复杂性的增加和团队的发展，我们看到“DevOps”成为开发和运营之间的桥梁，试图解决由来已久的交付问题，这些问题是由开发人员向运营部门扔东西，然后运营部门不得不在另一边处理生产问题而引起的。开发运维上升为现有团队中的一种新的亚文化，有时会产生新的"[开发运维团队](https://thenewstack.io/category/devops/)"，甚至会产生一类新的工具和方法。

然而在现实中，沟通技能和发展运营文化是不够的。如果没有适当的配置管理，应用程序的正常运行就会出现问题。应用程序配置通常会与其自身的安全性、可伸缩性和可用性配置目标相冲突。不可避免的是，每当呼机响起的时候——除了小问题——两个角色都会被拉进来揭开在生产中运行软件的秘密。

敏捷交付的挑战在于，应用程序配置和基础设施配置必须协作完成，同时具有定义良好的所有权和明确的角色分离。在没有这样一个模型的情况下，有太多的头仍然参与交付，导致许多摩擦和溢出的能量。最重要的是“it 为我工作”综合症的经典案例，开发人员经常抱怨他们的软件在他们自己配置的开发环境中工作良好，但一旦被推到 IT 配置的环境中，表现就不同了。配置地狱盛行，尽管 DevOps 的文化似乎正在寻找出路。

## 配置驱动的 DevOps:从等幂到不变性

为了应对这些挑战，行业转向了等幂原则。我们大多数人把幂等简单地理解为一种运算，不管执行多少次，都会产生相同的最终结果在配置管理的情况下，这个最终结果将是应用环境的期望配置。当环境偏离其期望的配置时，我们可以使用该原理来确保漂移被校正，并且环境被带回到期望的状态。Puppet 和 Chef 等工具就是从这个想法中诞生的，并且在一段时间内似乎是最合适的解决方案。

虽然幂等理论解决了一些问题，但它也带来了挑战。

我们有办法知道什么时候事情发生了变化，并且只更新那些需要更新的东西。然而，这并没有解决所有问题，因为我们仍然不得不处理看似大量的案件。

随着容器的出现，这种复杂性变得可以避免。我们现在可以部署不可变的完全配置的容器映像，并简单地用新的更新的容器替换旧的容器，而不是原地改变。因此，焦点从幂等转移到另一个重要的原则:不变性。正如维基百科所说，“*不可变对象是一个在被创建后状态不能被修改的对象。*“因此，一旦一个应用程序连同它的依赖项和配置被打包到一个容器映像中，任何数量的*相同的*容器都可以从中派生出来。

## 进入 Kubernetes:不变性+基础抽象

随着容器成为 DevOps 游戏规则改变者的流行，Kubernetes 成为最受欢迎的容器编排平台。应用程序团队现在可以确信，他们打包成容器的应用程序可以部署到任何地方运行的任何 K8s 环境中，并且由于不变性，应用程序的行为是相同的。除此之外，Kubernetes 对基础设施的出色抽象意味着基础设施和开发团队可以干净地、独立地专注于他们自己的专业领域，消除大量的配置和协作挑战。

这似乎结束了前面提到的配置地狱，因为我们目睹了一个根本性的转变，运行时基础设施操作和应用程序部署之间的关注点完全分离。因此，它可以专注于集群基础架构、容量管理、基础架构监控、集群级灾难恢复、联网和网络安全、存储冗余等方面。另一方面，应用程序团队可以将精力集中在构建容器映像、编写部署和配置脚本(Kubernetes manifest YAML)、外部化配置和秘密等方面。

应用程序团队不再需要在不同的技能组合之间来回切换，寻找信息并与不同的团队协调以完成工作，也不再需要等待数小时/数天来处理票证。突然间，有办法[消除摩擦](https://thenewstack.io/eliminate-friction-in-app-delivery-to-kubernetes/)并提升协作的重量。实际的基础设施对于交付来说不再那么重要，因为它已经被 K8s 很好地抽象了。

## DevOps 的未来之路

凭借 K8s 带来的所有抽象和清晰的分离，它还在运行它的虚拟机/机器上添加了另一层。这意味着 IT 部门在集群管理、网络、存储等方面的额外开销。最近，业界非常关注如何简化 K8s 的设置和管理，以便企业团队获得所有预期的好处。

对于一个应用团队来说，容器化一个典型的中型的基于微服务的应用需要编写和管理几千行 K8s 清单文件。每个新的部署都需要重新构建容器映像，并可能修改几个清单文件。显然，当今世界的 DevOps 将不同于前 Kubernetes 时代的 DevOps。

这些新的 DevOps 团队可能会在向 Kubernetes 交付自动化流程方面做得很好，以便在保持可靠性和速度的同时，可以更快地实现效率收益和经济效益。这种自动化和标准化流程将进一步实现管理基础设施的 IT 团队和向 K8s 交付应用的应用团队之间的清晰交接界面。对于追求大规模敏捷性和无摩擦交付的企业来说，寻找[到 Kubernetes](https://www.hyscale.io/) 的最短路径将是未来 DevOps 的核心。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>