<html>
<head>
<title>How Dow Jones Folded Security into its Automated Dev Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">道琼斯如何将安全性纳入其自动化开发管道</h1>
<blockquote>原文：<a href="https://thenewstack.io/how-dow-jones-folded-security-into-its-automated-dev-pipeline/#0001-01-01">https://thenewstack.io/how-dow-jones-folded-security-into-its-automated-dev-pipeline/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">像许多组织一样，道琼斯金融媒体公司在将自动安全检查纳入其持续集成和交付管道方面面临挑战，这种做法被称为“DevSecOps”。因此，该公司开发了许多用于自动化的开源工具，以及一些管理实践，以在不中断开发人员流程的情况下检查新代码的安全性。</p>
<p class="translated">“众所周知，安全工具对CI/CD并不友好，”道琼斯的产品安全总监杰伊·克拉斯在本周于北卡罗来纳州罗利举行的<a href="https://allthingsopen.org/" class="ext-link" rel="external ">万物开放</a>会议上说。</p>
<p class="translated">道琼斯安全团队的安全架构师<a href="https://github.com/pranav1688" class="ext-link" rel="external "> Pranavkumar Patel </a>说，这个由两名成员组成的产品安全团队的目标是尽可能提高道琼斯800名开发人员的工作效率，即尽可能多地自动化软件开发中的低级安全工作。</p>
<p class="translated">为此，他们开发了两个应用程序，可以自动执行许多不同的安全测试，因此可以将它们合并到公司的持续集成和部署管道中，从而减少手动执行这些检查所需的时间和精力。</p>
<p class="translated">在审查了DevSecOp工具供应商的产品并发现它们在覆盖和/或自动化方面有所欠缺后，安全团队决定自己构建软件。所以他们建立并开源了自己的软件。</p>
<p class="translated">作为《华尔街日报》、《巴伦周刊》、《市场观察》和道琼斯新闻服务的出版商，<a href="https://github.com/dowjones/hammer" class="ext-link" rel="external ">道琼斯</a>至少从2012年开始依赖开源。道琼斯的工程总监Vishaal Patil<a href="https://github.com/dowjones" class="ext-link" rel="external ">说，当时公司开始使用Node.js，后来扩展到使用React和Express.js进行网络开发，使用Terraform管理云基础设施。该公司最近也成为了开源贡献者。</a></p>
<p class="translated">第一个工具是Hammer，它的出现源于一年前<a href="https://www.upguard.com/breaches/cloud-leak-dow-jones" class="ext-link" rel="external ">公开的安全漏洞</a>,在那次事件中，由于亚马逊网络服务S3存储桶上错误配置的权限设置，数百万用户的账户被泄露。该团队现在承认这是一个愚蠢的错误，因此它领导了一个名为<a href="https://github.com/dowjones/hammer" class="ext-link" rel="external "> Hammer </a>的软件，该软件确实检查了这样的错误，比如简单的配置错误。它甚至可以“自动修复”一些错误，并为其他错误提供易于操作的警报。</p>
<p class="translated">该软件本身是许多AWS Lambda函数，这些函数扫描AWS S3桶中的道琼斯代码和数据，寻找公共Docker实例的错误配置模式，如开放端口、不正确的权限设置、不正确的IP号码、暴露的密钥。漏洞可能来自简单的输入错误。“这些是真正的问题，可能会在整个行业造成许多事故，”帕特尔说。</p>
<p class="translated"><iframe loading="lazy" title="AWS re:Invent 2017: How Dow Jones Identifies, Analyzes, and Remediates Security Issu (SID350)" src="https://www.youtube.com/embed/Z0wl_lIq4Ys?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p>
<p class="translated">Kelath指出，第二个工具暂定名为Braavos，用于在部署管道中自动进行安全检查。这个包的想法是尽量减少安全检查对开发人员工作流程的干扰。</p>
<p class="translated">最初，Dow Jones开发管道中包含了一系列全面的安全检查工具，这些工具都是在管道的不同位置触发的，例如在构建阶段。然而，开发人员抱怨它们，因为它们引发了误报，否则只会因为额外的需求而使开发管道停止。因此，安全团队寻找一种方法，悄悄地将这些工具放入管道，“特洛伊木马式的”，Kelath说。</p>
<p class="translated">作为替代方案，该团队将一组最重要的工具和规则集捆绑到一个容器中。通过这种方式，“开发人员并没有真正与安全工具进行交互。他们不是测试者，”Kelath说。该团队希望将运行所有安全检查的时间减少到10分钟或更少。他指出，因此他们减少了检查工具的数量，只检查那些“我们只知道我们不擅长的”东西，比如跨端脚本、SQL注入问题。其他问题可以在管道之外解决。</p>
<p class="translated"><a href="https://cdn.thenewstack.io/media/2018/10/a117e41c-img_1902-2.jpg" class="local-link"><img decoding="async" loading="lazy" class="aligncenter size-large wp-image-5920388" src="../Images/27b6309841d6abaf234b3894b74b24c2.png" alt="" data-id="5920388" data-original-src="https://cdn.thenewstack.io/media/2018/10/a117e41c-img_1902-2-1024x768.jpg"/>T2】</a></p>
<p class="translated">“不要试图煮沸海洋。只要看看你真正想在组织中解决的两三个大问题就行了，”Kelath说。目前，生产管道的检查过程大约需要53分钟才能完成，安全部分大约需要5分钟才能完成。</p>
<p class="translated">对于道琼斯来说，这组工具包括<a href="https://www.checkmarx.com/" class="ext-link" rel="external "> CheckMarx </a>(静态代码分析)<a href="http://git-secret.io/" class="ext-link" rel="external "> Git-Secret </a>(一个私人数据仓库)<a href="https://docs.npmjs.com/cli/audit" class="ext-link" rel="external "> NPM-Audit </a>(安全审计)<a href="https://portswigger.net/burp" class="ext-link" rel="external "> Burp </a>(动态网络漏洞扫描器)，以及<a href="https://docs.sonarqube.org/" class="ext-link" rel="external "> SonarCube </a>质量管理软件。</p>
<p class="translated">特别是，假阳性可能是CI/CD管道的一个特殊挑战，尽管有许多事情可以降低它们，Kelath指出。许多工具都是为减少误报而设计的，比如<a href="https://owasp.org/www-project-defectdojo/" class="ext-link" rel="external "> DefectDoJo </a>，来自<a href="https://www.owasp.org" class="ext-link" rel="external ">开放Web应用安全项目</a>。</p>
<p class="translated">该团队对试图在管道中插入安全性的其他人有一些额外的建议。一个是当开发人员在开发的那个阶段工作时，提醒他们一个错误。在代码继续运行之后，修复一个bug变得更加困难，开发人员对此也不感兴趣。此外，安全检查应该尽可能完全集成到开发人员自己的工作环境中。</p>
<p class="translated">“一旦你告诉开发者进入一个安全工具并检查结果，你就完全失去了他们，”Kelath说。</p>
<p class="translated"><em> All Things Open资助了此次活动的差旅费用。</em></p>
<p class="attribution translated">专题图片(从左至右):道琼斯的维沙尔·帕特尔、普拉纳夫库马尔·帕特尔、杰伊·克拉斯。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>