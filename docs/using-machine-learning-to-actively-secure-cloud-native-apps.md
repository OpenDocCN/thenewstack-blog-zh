# 使用机器学习主动保护云原生应用

> 原文：<https://thenewstack.io/using-machine-learning-to-actively-secure-cloud-native-apps/>

传统上，系统和应用[安全](https://thenewstack.io/category/security/)被视为防御:用护城河包围你的城堡，保护它免受任何入侵者的攻击。

但是[云使得防御、城堡和壕沟的安全方法过时了](https://thenewstack.io/why-cloud-native-systems-demand-a-zero-trust-approach/)。随着越来越多的组织不仅迁移到云[，而且迁移到多种云](https://thenewstack.io/serverless-multicloud-popular-with-k8s-users-survey-says/)——结合本地服务器和边缘环境——没有一个单一的“城堡”需要保护。

此外，不仅城堡在地理上是分散的，而且当应用程序被构建为容器化的微服务并由 [Kubernetes](https://thenewstack.io/category/kubernetes/) 编排时，这些“城堡”可能会突然构建、繁殖或消失。

“大多数第一代云原生安全解决方案都失败了，”安全和可观察性公司 Tigera 的总裁兼首席执行官 Ratan Tipirneni 指出。

Tipirneni 告诉新的堆栈，尽管这些工具是对传统防火墙的改进，但它们还不能与云安全问题的范围相匹配。

他说，在分布式云环境中，安全是一个“多维问题”，早期的云安全供应商采取了“一维”方法。

“这些供应商大多来自漏洞管理和图像扫描的根源，”Tipirneni 说。他补充说，这个因素很重要。"但这只是你需要担心的八个因素之一."

他说，组织需要在 Kubernetes 运行的云系统中涵盖的八个要素包括:

1.  在构建时发现映像中的漏洞。
2.  检测映像中的错误配置:映像中是否启用了 SSH？权限设置是否错误？
3.  Kubernetes 环境中的错误配置。
4.  运行时检测漏洞和恶意软件
5.  防止数据泄露
6.  与防火墙的集成:Kubernetes 有动态 IPs，而大多数防火墙是为静态 IPs 设计的。
7.  寻找新的零日威胁。
8.  一种缓解策略，使用微分段来防止恶意软件和勒索软件传播。

另一个使以前的安全策略过时的情况是开源软件的广泛和快速采用。几乎所有企业都在其基础设施和应用程序中使用一些开源组件，这些组件可能带有未知的漏洞。([见证最近的 Log4j 例子。](https://thenewstack.io/one-more-log4j-security-hole-before-the-new-year/))

为了应对这些挑战， [Tigera 于 2 月 10 日宣布对其云原生应用保护平台(cn app)Calico Cloud](https://thenewstack.io/tigera-tightens-cloud-native-container-security/)进行重大增强。新版本的 Calico Cloud 不断扫描图像中的漏洞和错误配置，提供 Kubernetes 集群的实时可观察性。

它还采用机器学习来创建威胁防御系统和集成的安全策略，以立即减轻恶意软件，使它们不会传播到其他容器。

## 零信任，更多自动化

Tipirneni 说，对于企业和其他客户来说，通过向云的迁移和对开源软件组件的严重依赖，“问题陈述已经被重新定义”。

他说，组织已经知道他们的系统存在漏洞，并且这些天来要求云安全提供三样东西，这需要更积极的方法:

1.  通过零信任减少攻击面
2.  检测已知和未知的威胁。
3.  一种补救策略，用于处理发现漏洞和实施修复之间的时期。正如 Tipirneni 所说，“如果我没有一个缓解策略，我将面临一个艰难的选择，要么关闭我的服务应用程序或系统，要么将自己暴露于一些潜在的违规行为，我必须面对后果。”

[零信任安全](https://thenewstack.io/cisa-lays-out-security-rules-for-zero-trust-clouds/)的原则是基于一个假设，即入侵者已经在你的系统中。它侧重于保护敏感的基础设施和数据(称为“攻击面”)，要求用户在有限的时间内(通常基于他们在组织或团队中的角色)进行身份验证和授权。

零信任的一个关键方面是自动化。因为人类容易犯错——有时健忘、不可靠、不在场、过于信任、懒惰和/或[倾向于走捷径以满足最后期限](https://thenewstack.io/why-access-management-is-step-one-for-zero-trust-security/)——许多支持零信任架构的当代工具会自动生成身份验证凭证和访问授权，轮换凭证并强制实施时间限制。

但这是零信任策略的一半，即防御方法。一种主动的云原生安全性方法包括可观察性:在 Kubernetes 集群中发现漏洞和错误配置，以便能够快速修复它们。

## 用于威胁缓解的机器学习

当检测到威胁时，缓解不仅必须立即开始以保护系统的其余部分，还必须以不会导致业务瘫痪的方式进行。

Tipirneni 说，Log4j 在 2021 年底的崩溃凸显了自动化威胁缓解的必要性。“当漏洞被发现时，有一个令人紧张的两周时间，没有修复，”他回忆道。“可悲的是，地球上的每个黑客都在将它武器化，并利用 Log4j 漏洞实际注入恶意软件。”

他说，这一时期给 DevOps 团队带来了一些艰难的选择:“我要完全关闭服务吗？”

Calico Cloud 现在使用机器学习在运行时生成安全策略建议。“您可以隔离该[漏洞]，或者隔离关键基础架构的任何其他部分，并真正保持您的服务运行，直到您知道有长期的修复和补救措施。”

然而，Log4j 现在是一个已知的漏洞。Tipirneni 指出，真正可怕的是零日威胁——潜伏在你的系统中的未知威胁，可能很难检测到，直到为时已晚。

Tigera 使用[扩展的 Berkeley 数据包过滤器(eBPF)技术](https://thenewstack.io/how-ebpf-turns-linux-into-a-programmable-kernel/)构建强大的探测器，检测系统中每个工作负载的文件系统、系统调用、进程级和网络级行为，使用这些信息建立行为基准。Tipirneni 说，当工作负载偏离该基线时，“我们会将其视为妥协或攻击的迹象。”

标记了潜在威胁后，Calico Cloud 会向用户提供他们可以对受损容器采取的操作选项:隔离、暂停、生成需要人工干预的警报，甚至终止容器。

“我们在毫秒内执行这些操作，所以我们有接近实时的响应，”Tipirneni 说。

## 帮助“左移”的安全工具

Tipirneni 说，Calico Cloud 旨在帮助开发人员对他们构建的应用程序的安全性进行更多的控制和承担更多的责任。

“开发者不关心安全性，这有点荒谬，”他说。“但我认识的每个开发人员都非常关心安全性，只是安全工具的现状妨碍了他们的工作。这就是他们试图解决这个问题的原因。”

根据 [strongDM](https://www.strongdm.com/?utm_content=inline-mention) 在 1 月发布的一项调查，变通办法很普遍，并且伴随着获得基础设施的繁琐程序而发展。

在接受调查的 600 名 DevOps 专业人员中，53%的人表示，在提出请求后，他们可能需要几个小时到几周的时间才能获得所需的访问权限。难怪 65%的人说他们使用团队或共享登录，42%的人共享 SSH 密钥。

Tipirneni 说，Tigera 的方法旨在让开发人员在开发应用程序时对安全策略的设置有更多的控制权。但是它平衡了组织内安全组的需求。

他承认，给予开发人员更多的安全政策控制权，对于安全部门的专业人员来说，听起来可能“很可怕”。但他说，权力的平衡被纳入了一个分层的安全系统。

“我们使开发人员能够使用基于角色的访问控制来配置一组安全策略，但我们给予安全团队配置安全策略的权利和控制权，以保护整个企业的基础设施，”Tipirneni 说。"因此，即使开发者无意或恶意地做了什么，爆炸半径也是有限的."

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>