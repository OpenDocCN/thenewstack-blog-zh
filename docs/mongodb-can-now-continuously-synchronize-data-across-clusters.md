# MongoDB 现在可以跨集群持续同步数据

> 原文：<https://thenewstack.io/mongodb-can-now-continuously-synchronize-data-across-clusters/>

MongoDB 最近推出的[集群到集群同步](https://www.mongodb.com/products/cluster-to-cluster-sync)现在允许开发人员和管理员创建第二个集群，实时准确地反映他们的生产级数据。

群集到群集同步可以跨不同环境同步数据，以连续、一次性或停止/开始单向数据流的方式从源群集到目标群集。它允许开发者跨多个环境同步数据，包括 [MongoDB](https://www.mongodb.com/cloud/atlas/?utm_content=inline-mention) 自己的多云托管数据库服务、 [Atlas](https://www.mongodb.com/atlas) 。

*   本地集群—> Atlas 集群
*   本地集群—>本地集群
*   Atlas 集群—> Atlas 集群
*   Atlas 集群—>本地集群

Cluster-to-Cluster Sync 的产品经理艾伦·郑(Alan Zheng)领导着一个由 12 名工程师组成的团队来开发这一功能，他将该项目的目标描述为“建立一个持续的机制，使数据从源到目的地全天候流动。”

MongoDB 上周为其 [MongoDB World](https://www.mongodb.com/world-2022) 推出了集群到集群预览版，并将于 2022 年 7 月全面上市。

## **集群到集群的方式让开发人员的生活变得更加轻松**

**数据迁移**:随着越来越多的公司希望迁移到云，集群间同步有助于提高可靠性。内置的工具包括暂停、恢复、检查进度，如果需要还可以反转方向。

**在软件开发生命周期中**:现在开发团队可以在整个软件开发生命周期中访问实时、准确的生产数据，而不会中断生产工作流程。还支持蓝/绿数据环境。目前，没有能力改变源或目标集群的拓扑结构，但郑提到这是在项目的管道。

**审计和法规遵从性**:在非常普遍的意义上，这允许开发人员将生产数据移交给审计和法规遵从性团队，而不必移交生产数据密钥。在更薄的层面上，一些国家的合规性法规要求公司在本地保存数据，但这些地区无法访问 MongoDB Atlas。

**分析**:与审计和合规性类似，现在分析团队不再需要生产数据的生产数据键。

**压力退出**:澳大利亚、新西兰和东南亚是少数几个制定了法规要求公司制定退出策略的国家，这些策略允许数据在几个小时内从云中取出并放回本地。

## 分片的挑战

构建连续同步的最大挑战之一是[分片](https://www.techtarget.com/searchoracle/definition/sharding)，或者将一个数据集分割到多个数据库中。

“如何支持更复杂的拓扑结构？如果您有分片的集群，您如何确保将所有分片都移动到目的地？”郑这样描述挑战。

他解释说，分片会带来数据块迁移。当数据从源移动到目标时，数据也可能在源上移动，那么一个工程师团队如何确保数据也在移动呢？

这似乎已经被成功克服了，因为分片集群支持是新特性的关键功能之一。目前，只有当两端的拓扑相似时(例如，一个分片集群到一个分片集群)，才能在两个集群之间同步。但是，目前不支持在具有不同拓扑的两个集群之间进行同步..郑和他的团队正在开发这部电影，不过暂时还没有确定上映日期。

集群到集群同步支持连续同步、可恢复同步或一次性同步。虽然在连续同步期间，目标群集和生产群集之间可能会有延迟，具体取决于吞吐量和网络，但目标群集与生产群集几乎完全相同。郑讨论了“最终的一致性”

目前，群集到群集同步支持 1:1 的群集比率。郑说，未来将增加支持更多集群的功能，但没有提供暂定的发布日期。

有关如何设置集群间同步的更多详细信息，请参见[文档](https://www.mongodb.com/docs/cluster-to-cluster-sync/current/)。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>