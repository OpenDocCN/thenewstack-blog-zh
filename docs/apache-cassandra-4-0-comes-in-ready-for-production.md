# Apache Cassandra 4.0 即将投入生产

> 原文：<https://thenewstack.io/apache-cassandra-4-0-comes-in-ready-for-production/>

在 Apache Cassandra 4.0 发布近六年后，分布式 NoSQL 数据库背后的社区发布了 Apache Cassandra 4.0，宣传该项目的生产准备就绪。虽然对于其他达到. 0 里程碑的软件来说，生产就绪可能是理所当然的，但对 Cassandra 来说却不是这样——直到现在。

“从一开始，Cassandra 4.0 的目标就非常简单:能够从发布的第一天就在生产中运行它，”网飞和 Apache Cassandra 委员会的工程经理 [Vinay Chella](https://www.linkedin.com/in/vinaychella) 说。“尽管一开始听起来很简单，但作为一个 Cassandra 开发人员社区，要实现这一点，我们有非常严格的准则，不能在主要版本的质量上妥协。这尤其导致了 1000 多个错误被识别和修复。许多问题只是在我们在世界上最大规模的生产工作负载中运行 Apache Cassandra 时才浮出水面，这是出了名的难以发现。”

[基于 Apache Cassandra 的 DataStax 的开发者关系副总裁 Patrick McFadin](https://www.linkedin.com/in/patrick-mcfadin-53a8046) 也有同感，他说 [Cassandra 4.0](https://www.apache.org/dyn/closer.lua/cassandra/4.0.0/apache-cassandra-4.0.0-bin.tar.gz) 应该被认为是一个长期版本(LTR)。

“对于寻找最稳定的 Cassandra 版本进行部署的运营商来说，这标志着一个重要的里程碑，”他说。“即使是在数据库世界中闻所未闻的. 0 版本。许多大型运营商已经将候选版本部署到生产环境中，并对这给他们带来的运营开销差异感到惊讶。”

根据一份新闻稿，Apache Cassandra 自上一个 3.x 版本发布以来已历时三年，“反映了 1000 多个错误修复、改进和新功能。”与此同时，一篇相关的博客文章强调了多种类型的测试，包括模糊测试、重放测试、升级/差异测试、性能测试、单元/测试覆盖范围扩展和故障注入，所有这些都是为了覆盖“潜在错误或数据损坏的巨大表面区域”

首席技术官[本·布罗姆黑德](https://www.linkedin.com/in/benbromhead/)在一封电子邮件中写道，他们已经运行 Cassandra 4.0 几个月了，这是“我们见过的测试最多、最成熟、功能最丰富的 Cassandra 版本”他进一步解释说，Apache Cassandra 的早期版本在早期的主要版本中遇到了“稳定性困难”,许多用户以前不得不投入工程资源来简单地操作数据库本身。

“考虑到当时使用 Apache Cassandra(非常大的组织/非常大的数据库)的人可以燃烧工程周期来稳定生产，人们暂时忍受了它——但显然并不理想，”Bromhead 写道。“这种在主要版本发布之前测试和改进一切的做法反映了更广泛的社区和更深入的采用，新版本需要对每个人都非常可靠，而不仅仅是那些负担得起的人。当然，大型运营商也非常重视将工程周期用于其他领域的能力。”

除了测试、错误修复和稳定性，Apache Cassandra 还引入了许多特性和改进，以提高其速度、可靠性和服务企业客户的能力。例如，新版本支持本机审核日志记录和全查询日志记录，这在以前需要第三方库，并有助于确保法规和安全符合 SOX、PCI、GDPR 或其他要求。Cassandra 4.0 还通过保持数据副本同步以优化增量修复来提高一致性，添加新的配置设置，提高压缩效率，并通过减少垃圾收集器暂停时间来最大限度地减少延迟。

当被问及新特性时，Chella 强调了 Apache Cassandra 4.0 的速度，简单地说“它很快。”

“当我说快时，这是一个词，但它包含了太多的东西，”他说。“节点到节点、节点间的流传输速度提高了四到五倍。在节点内，当我们考虑吞吐量和延迟时，吞吐量和读写速度至少提高了 25%。延迟比以前的版本快得多，因此这有助于降低所有这些运行大量 Cassandra 的公司的成本。”

Bromhead 进一步总结了这些变化，重点是运营商的体验。

“在改善操作体验方面投入的令人难以置信的时间和精力使 Cassandra 4.0 有别于以前的版本，”他写道。“从为消除更多错误和问题而进行的大量测试，到向零拷贝流的转移，到支持新的 JVM 版本并提供更好的[垃圾收集]策略，这一点显而易见。现在，所有消息都受到每个连接、每个端点和全局级别的强制资源限制的控制，这大大提高了系统的稳定性。Bromhead 写道:“由于新的零拷贝流媒体网络框架和对 [Netty](https://netty.io/) 的改进使用，Cassandra 4.0 承诺更好的客户端 p99 延迟和节点恢复时间比以前的版本快五倍，使集群更加可用和响应更快。

最后，麦克法丁指出了一个过程中的变化，他看到改善卡桑德拉前进。

“这也标志着 Cassandra 生态系统中一些惊人变化的开始。项目管理委员会在如何向 Cassandra 添加新功能方面做出了一些重大改变，称为 Cassandra 增强流程(CEP)，”麦克法丁写道。“提议的新功能仅在 4.x 版本中提供，以保持 4.0 版本的稳定性。现在它已经发布了，我们将在接下来的几个月里看到已经提出的建议被添加到项目中。一些最令人兴奋的是让 Cassandra 真正成为云原生的。你现在可以在 [K8ssandra 项目](https://k8ssandra.io/)中看到它的开端

他说，对切拉来说，阿帕奇·卡珊德拉的未来是“光明的”。

Chella 说:“由于我们非常注重质量，并将所有这些系统工具和技术作为我们发布周期的一部分，从现在起，我们将能够更快地发布 Apache Cassandra，并相信它可以在任何主要发布的第一天就投入生产。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>