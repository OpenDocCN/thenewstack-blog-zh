# 多大的可观测性才算足够？

> 原文：<https://thenewstack.io/how-much-observability-is-enough/>

[](https://www.linkedin.com/in/jujhar)

 [朱哈尔·辛格

朱哈尔·辛格是 Thoughtworks 的首席基础设施开发人员。此前，他是《经济学人》的全球发展合作实践主管。他在 AWS 工作了 11 年多，在 GCP 工作了 5 年。他喜欢围绕 DevSecOps 实践的领域，以及如何组织团队和软件来最大化云提供的价值。](https://www.linkedin.com/in/jujhar) [](https://www.linkedin.com/in/jujhar)

在 OpenObservability Talks 播客的一个受欢迎的 [集](https://anchor.fm/openobservability/episodes/How-Much-Observability-Is-Enough----OpenObservability-Talks-S1E9-er730m) 中，主持人 Dotan Horovits， [Logz.io](https://logz.io/) 的首席技术布道者，与嘉宾 Jujhar Singh 一起，他当时是《经济学人》的全球开发实践主管，目前是 [Thoughtworks](https://www.thoughtworks.com/en-us) 的首席开发和基础设施顾问。他们的谈话集中在理解多少可观察性是足够的，包括投资和利益相关者的采纳。

在这篇文章中，Dotan 和 Jujhar 总结了这一事件的主要教训，并提供了一些新的观点。在开始实现可观测性之前，记住几个因素很重要。

## **为什么可观察性很重要？**

 [多坦霍洛维茨

Dotan 生活在技术、产品和创新的交汇点。作为一名软件开发人员、解决方案架构师和产品经理，他在高科技行业工作了 20 多年，带来了云计算、大数据解决方案、DevOps 实践等方面的丰富知识。Dotan 是开源软件、开放标准和社区的狂热拥护者。Dotan 目前在 Logz.io 担任开发人员倡导者，在 Logz.io 宣传 IT 系统中的可观测性，使用流行的开源项目和标准，如 ELK stack、Grafana、Jaeger 和 OpenTelemetry。](https://www.linkedin.com/in/horovits/?originalSubdomain=il) 

> 可观察性是指设计您的环境，通过有意义的数据提供可操作的洞察力。

首先，在我们进入为什么之前，让我们理解什么是可观察性。[是观察你的系统在每一层做什么的过程，这样你就可以对它是如何做的有一个全面的了解](https://logz.io/blog/what-is-observability/)。当您刚开始时，只是收集遥测数据，但当您擅长这项工作并达到高度成熟时，就可以摆脱噪声，并有针对性地了解系统在不同场景下的行为。

它是关于从您的应用和底层基础设施中生成和捕获高质量的遥测数据。它是关于分析提供的信息，将数据转化为系统改进，并磨练你的视觉辅助工具，告诉你真正发生了什么，而不仅仅是猜测答案。可观察性是指设计您的环境，通过有意义的数据提供可操作的洞察力。

一旦您了解了系统的行为和“感觉”,您就可以做出更及时的决策来调试和丰富您的系统。简单地说，没有可观察性，你就不能调试和优化。有了这些唾手可得的效率，您可以通过洞察特定趋势来优化并最终回答用户(和潜在客户)如何与您的系统互动的问题，从而改善包括客户体验(CX)在内的许多业务职能。这是一种非常数据驱动的方法。随着大量数据流入您的系统，您需要适当的解决方案来过滤和分析数据，以帮助做出更明智的决策——这就是 [可观察性](https://www.youtube.com/watch?v=sR-Q3Z-YP2E) 。

## **所需的最小可观测性是什么？**

> 一般的经验法则是:服务的 SLO/SLA 越高，它需要的可观察性就越强。

所需的最低可观察性取决于两件事:您的业务需求和应用程序架构。例如，典型的整体式后台会计应用程序只需要一周工作五天，从早上 9 点到下午 5 点，可能不需要像你的 24/7、99.99%的高容量、基于微服务的电子商务平台那样多的可观察性。可观察性是很难的，所以做出正确的决定在哪里投资是非常重要的。您不希望过度投资于简单、中等重要性的系统，从而损害复杂、核心的业务应用程序。

这里的一般经验法则是服务的服务级别目标(SLO)/服务级别协议(SLA)越高，它需要的可观察性就越大。

像任何工具一样，成本是决定需要多少的主要因素。可观察性并不便宜，而且对某些人来说，实现起来也不容易。它不仅涉及对工具的投资，还涉及对技能组合、工程能力和人员的投资，并且对组织文化和工程实践的相关改变将是困难的。很多时候，我们购买了一个可观察性工具，认为它可以解决我们的问题，但我们从来没有考虑到所需的工程投资，这个奇妙的工具没有被使用，放在架子上，烧了我们的预算。

深入到更详细的技术细节，您可以将问题分解为基础设施和应用程序可观察性。对于基础设施服务，一个好的起点是美国的**指标** **:** 利用率、饱和度和错误。对于应用服务，通常的做法是涵盖 **R.E.D .指标** **:** 请求率、错误率和持续时间(或延迟)。谷歌的“SRE 书”将这三个与流量(或饱和度)一起推荐，称为“四个黄金信号”要了解微服务时代谷歌的 SRE，请查看这篇 [文章](https://medium.com/@horovits/sre-revisited-slo-in-the-age-of-microservices-30c1ff80cb6a) ，其中包括谷歌员工 SRE 的见解。

许多组织试图遵循领先科技公司(如谷歌或网飞)的工程团队发布的可观测性实践，但最终却得到了一个过于复杂、昂贵的系统，以满足他们的规模和需求。或者更糟的是，他们有一个工具专家，但是当这个专家离开时，没有其他人维护仪表板或者知道如何使用它们。

尽可能外包你的工具。可观测性工具运行起来很麻烦，它们必须处理和存储大量遥测数据，这是一个不小的挑战。《经济学人》有一个本地 Splunk 实例。保持实例的高可用性和补丁是一场噩梦，几乎是工程师工作量的一半；这忽略了许可和不断增加的托管成本。与其花时间旋转、运行和保护你自己的国产普罗米修斯堆栈，不如找一个 SaaS 版本。通过外包您的监控和可观察性工具，您可以专注于使用它们，而不是运行它们。

## **实现可观性的人为因素**

> 仅仅因为你听到或被告知这个解决方案是多么令人印象深刻，并不意味着它现在就适合你。

最重要的是，可观察性对你来说必须是容易的。如果您的组织没有能力使用和实现复杂的解决方案，请避免采用它们。工具越复杂并不意味着它在您的监控工作中会更有效——事实上恰恰相反。避免为了买工具而买工具。确保你买的工具得到了很好的利用。仅仅因为你听到或被告知这个解决方案是多么令人印象深刻，并不意味着它现在就适合你。

当您决定实现可观察性和监控时，您需要确保正确的工程能力已经就位，以便集成该工具。在购买前考虑这些基本因素将有助于避免以后的麻烦。当购买这样的工具时，您需要合适的人员和时间来实现它。通常，一个组织需要工程人员来强化该工具或运行概念验证(PoC ),以全面了解实施该工具需要多长时间以及需要做些什么。PoC 阶段是通过提出正确的问题和进行有意义的测试来预先设定期望值的重要机会。从这里开始，拥有一个站点可靠性工程(SRE)功能来围绕服务级别目标进行产品对话对您的系统管理可能非常重要。

## **设定明确的目标，巩固工装**

> 围绕您的“黄金路径”上的核心工具子集进行标准化即使你做不到——也不要在你设定的原则上让步。

您必须首先了解多少可观察性足以满足您的需求，以及不同的可观察性工具在您的组织中将扮演什么角色。数据无处不在，管理这些数据和遥测数据的重要性对于为您的组织构建一个坚实的基础以避免长期或未检测到的灾难并改善您的服务至关重要。

一旦你有了这种认识，就设定你的战略目标和原则，并坚持下去。一些好的可观察性目标/原则的例子有:

*   所有服务都必须公开健康检查和指标端点。
*   所有服务都必须生成或转发 traceId 以启用请求跟踪。
*   所有服务必须以纯文本形式公开应用程序遥测。

理想情况下，您应该围绕您的"[](https://engineering.atspotify.com/2020/08/17/how-we-use-golden-paths-to-solve-fragmentation-in-our-software-ecosystem/)"黄金路径上的核心工具子集进行标准化，这些工具被您更成熟的团队很好地使用。新的团队将更容易加入和影响，因为他们可以“复制和粘贴”你更成熟的团队所做的事情。然而，在现实世界中，您可能最终会有几个工具做同样的事情。这在一定程度上是不可避免的，但是即使您不得不在工具选择上让步，也不要在原则上让步。尽可能坚持开源，因为它使得工具之间的移植和与其他工具的集成更加容易。

为了更好地理解可观察性在你的组织中应该扮演的角色，请查看开放可观察性讲座 [集](https://open.spotify.com/episode/5ArQAVtv38XSDQS14NO2uW) :

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>