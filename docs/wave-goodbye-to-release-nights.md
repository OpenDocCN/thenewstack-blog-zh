# 向发布夜挥手告别

> 原文：<https://thenewstack.io/wave-goodbye-to-release-nights/>

[](https://split.io)

 [塔莉娅·纳西

塔莉娅·纳西是 Split Software 的一名开发人员，她与全球的工程团队密切合作，以更高效地发布软件。她热衷于生产测试、特性标记、金丝雀发布、CI/CD 和 A/B 测试。她也是一名国际主题演讲人，在会议上发表关于测试和质量的演讲。她在无数的会议上发言，听众从 100 到 4000 人不等！](https://split.io) [](https://split.io)

正如玛丽·近藤(Marie Kondo)在她广受欢迎的节目《与玛丽·近藤一起整理》(cleaning With Marie Kondo)中告诉我们的那样，每个人都需要评估自己的财产，保留那些能表达自己心声的东西，抛弃那些不再能激发快乐的东西。因此，当你扔掉中学的躲避球参与奖杯时，想想你如何将同样的经验应用到你的软件交付过程中。

对于许多开发者来说，答案很简单:是时候告别发布之夜了。

虽然宣称发布夜给我们带来了快乐可能有些夸张，但曾经有一段时间，它们是有目的和价值的。对于软件开发团队来说，设定向客户发布软件的具体日期曾经是一种标准做法。由于软件开发的早期阶段，组织别无选择，只能收集所有的新代码并一次性发布。

> 通过用特性标志代替发布夜，您现在可以自由地以您想要的速度和频率发布新代码。

对于实施瀑布流程的公司来说，发布夜非常重要。发布经理会花上几天甚至几周的时间来组织和计划这些特殊的夜晚，而 QA 团队继续搜索代码以找到任何剩余的 bug。一旦重要的夜晚终于到来，团队不一定会充满兴奋和自豪，向世界展示他们一直在努力的工作。相反，他们对发布感到犹豫和怀疑。一旦代码上线，团队将不得不花费数小时焦急地测试生产中的关键流程，以确保没有任何问题发生。

发布之夜也很有压力，部分原因是开发人员需要在向用户发布特性之前知道它们在产品中是有效的。他们不再有足够的带宽来花无数的时间在深夜对不可预见的生产问题进行分类。没有什么比在测试阶段测试一个新特性，建立对该特性工作的信心，审查所有需求，然后在发布之夜看到一切都崩溃了，因为该特性在生产中不起作用。

发布之夜在数据方面也有一个重大缺陷:暂存环境中的数据很少与生产环境中的数据相匹配。这意味着你很可能会得到矛盾的测试结果。如果一个新特性在产品中注定会失败，那么给开发团队施加这么大的压力，让它在发布阶段变得完美，这是违反直觉的。

## 作为替换的功能标志

既然已经决定取消发布之夜，你可以用什么来代替它来点燃软件交付过程中的喜悦呢？答案是在将代码发布给整个用户群之前，用特性标志测试生产中的代码。通过这种方式，您可以将代码部署与功能发布分离，并清楚地指定谁可以在运行时看到哪些功能。它还允许您安全地测试代码，并且确信，即使您确实发现了一个 bug，它也不会影响用户群。

通过用特性标志代替发布夜，您现在可以自由地以您想要的速度和频率发布新代码。实际上，只需点击一个按钮，您就可以在某个功能可以测试时打开它，在测试完成时或者当该功能导致负面用户体验时关闭它。

有了特性标志作为发布新代码的主要工具，您现在可以自由地进行 canary 发布——也称为百分比推出——这在发布之夜是不可能做到的。Canary 版本为团队提供了灵活性，可以在某个特性对整个用户群可用之前，向特定的用户组逐步推出该特性。这些版本非常适合敏感的配置变更或产品变更。

就像企业不再使用过时的技术，如打字机和传真机一样，现在是时候离开发布夜，拥抱功能标志，重新开始享受代码发布过程了。

通过 Pixabay 的特色图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>