# 迁移时要避免的常见错误

> 原文：<https://thenewstack.io/common-mistakes-to-avoid-when-migrating/>

[](https://www.linkedin.com/in/norman-abramovitz-8690482/)

 [诺曼·阿布拉莫维奇

诺曼·阿布拉莫维奇是斯塔克&韦恩公司的技术总监。他有几十年部署和编排重要应用程序的经验。他参与的一些项目涉及安全网络、安全操作系统、关系数据库和医疗仪器等领域。他开发了从大型机到微控制器的软件。在过去的几年里，他专注于云计算领域，尤其是 Cloud Foundry 和 Kubernetes。](https://www.linkedin.com/in/norman-abramovitz-8690482/) [](https://www.linkedin.com/in/norman-abramovitz-8690482/)

对于企业来说，能够迁移成千上万的应用程序是保持竞争力不可避免的一部分。弄清楚如何实现成功的迁移是很可怕的，所以让我们深入了解要避免的陷阱。

新冠肺炎既造成了技术人才短缺，又增加了对加快技术进度的需求。许多公司开始面临“红皇后”效应，公司不得不重新定义他们在市场上如何竞争以及在哪里竞争，以确保他们保持相关性。如今，仍沾沾自喜的企业得到的回报是一个尖锐的劣势和一个永久的追赶周期。从现有技术迁移到响应速度更快、更具成本效益的解决方案是任何企业变革的重要组成部分；然而，对于没有准备的人来说，它可能充满陷阱。

根据波士顿咨询集团 2020 年的一项研究，其中包括 70 家公司的 825 名高管，涉及 895 项数字化转型，只有 30%的转型达到了他们的转型目标。

这些数字不足以激发信心。幸运的是，Stark & Wayne 致力于实现多种企业迁移，因此其他人可以避免它们。Stark & Wayne 是迁移企业级基础架构方面的专家。过去的项目包括管理 45，000 个应用实例的 [Cloud Foundry Foundation](https://www.cloudfoundry.org/?utm_content=inline-mention) 部署。

## 记录绩效基线

这是命令！每个公司都要求更好的绩效，但许多公司缺乏基线绩效指标或方法来衡量更好的绩效意味着什么。性能与最终用户体验相关吗？性能是否基于扩展和缩减工作负载以减少消耗？性能是通过减少部署或升级时间来衡量的吗？一旦确定了度量性能的方式，就可以将其与您的应用程序、客户和业务联系起来。

这将使您能够评估应用程序在迁移期间和迁移之后是否表现不佳。它还有助于在重大变革期间管理认知，并有助于量化成功。您需要比较具有相似工作负载的迁移前和迁移后平台。您测量的内容取决于业务需求，但一些通用测量包括:

*   组件运行时间
*   应用程序响应时间
*   应用程序总体执行时间
*   测试应用程序以验证组件连接性和服务可访问性
*   API 指标(页面负载、内存利用率、CPU、服务器性能)
*   日志输出负载
*   一段时间内的事件报告负载
*   自动化(将自动化视为一等公民，因为它将提高整体性能)
*   迁移和任务自动化带来的运营成本变化
*   使用模拟您的环境的应用程序类型进行测试。

## 好的仪表板:你不能迁移你找不到的东西

大多数组织知道他们现在支持什么，但需要确定迁移后他们想要支持什么。了解应用程序实例的数量很容易，因为您的供应商可能会根据这个指标向您收费。不过，您还需要知道应用程序的数量、哪些团队支持应用程序、应用程序之间有哪些相互依赖关系，以及每个应用程序使用哪些类型的服务。确定这些变量将有助于确定如何迁移和支持新环境。

在规划每个应用程序的所有者时，确定哪些所有者拥有自动化测试脚本来验证应用程序正在工作是非常重要的。理想情况下，每个应用程序都有自动化测试脚本，但是至少，您需要有一个应用程序所有者的映射。此外，您需要寻找未使用和未维护的应用程序。当应用程序需要在迁移前移除或修复时，您最不想做的事情就是迁移非功能性应用程序(我们已经看到了这种情况)。很多时候，您会发现应用程序所有者的主映射并不存在，这在迁移期间和迁移后都会产生问题。

因此，重点是“库存、库存、库存”，因为许多公司没有一个中心位置来编目每个应用程序的所有者、每个应用程序有什么或做什么，以及应用程序的业务影响是什么。快速查询和查找相关信息的能力对于运营、效率和业务决策至关重要。

从哪里开始？首先，回答更广泛的问题:

*   你在哪些地区跑步，为什么？
*   每个地区都在运行哪些应用程序？
*   每个应用程序在每个地区使用什么服务？
*   使用的是什么版本的 Linux？
*   什么应用程序与区域中的其他应用程序通信？
*   哪些应用程序是面向客户的，哪些是内部的？

收集这些初始数据点不会回答所有的未知问题，但它们将开始提供您需要的洞察力。

## 审核你能做的:接受不可知的

无论您对每个细节的审核或记录有多好，都会有未知的变量影响停机时间、客户、同事、费用和时间表。这些未知因素只有在技术团队参与迁移过程时才能发现。以下是您可以支持他们的方式:

*   为未知添加时间线
*   当未知项目造成问题时，有更多可用资源提供帮助
*   灵活应对公司政策、内部会议和新功能的推出
*   准备好备份计划，如测试失败时的回滚
*   首先关注小的成功，以获得动力，同时规划大的成功。请记住，有形的速赢可以提高士气，只要它不会导致更多的运营开销。

首选方法是进行一次全面的审计，记录组织结构和关系，并在整个工作中作为参考。一旦项目开始，这些文件将成为你的地图，并有助于避免降低优先级或搁置项目。您可能会发现，可能需要上报给高层管理人员，以便对您需要完成的行动进行优先排序。尽管如此，首选应该是了解单个团队如何工作，并与他们建立良好的沟通，而不是越过他们。

## 保安:带安全小组出去吃午饭

我们不是指托尼·索波诺那种“带他们去兜风”的方式；我们真正的意思是带安全团队出去吃午饭，以建立面对面的融洽关系。安全团队对于迁移过程至关重要，可以限制、放松或为出现的阻塞提供解决方案。您还需要他们迅速审查成功迁移所需的任何新软件。一个被忽视的安全团队将会成为一个阻碍者。让我们面对另一个可怕的电影类比安全永远不想成为来自巨蟒组的黑骑士尖叫，“没有人会通过！”但是他们真的想扮演保护一切安全的重要角色。最后，只要有适当的指导原则，安全部门希望让组织中的每个人都能参与进来。如果你让他们早点参与进来，你就可以避免在最后一分钟引入安全措施时的麻烦。

## 抵制范围蔓延:这是一个非常好的主意…明年

范围蔓延需要小心管理。所有的组织都想同时解决他们的问题，但是你应该专注于解决一个非常具体的问题。以从 Pivotal Cloud 迁移到开源 Cloud Foundry 为例，Cloud Foundry 的主要优势是可以添加的许多功能和定制的潜力。例如，改善灾难恢复状况和备份可能很诱人，但是扩大范围会带来更多的难题。

范围蔓延还会产生一个问题，即某些东西可能会损坏，并且您无法确定损坏是由您的总体项目目标还是额外的范围造成的。

## 镜像:匹配你想留下的世界

一旦您为您的项目和期望的结果建立了参数，您必须确保您已经镜像了将被迁移的所有环境。这包括您的操作环境或“游戏场”，在那里您将证明之前的一切，转到非生产，最后是生产。

在构建操场环境时，您会希望确保现有技术(在我们的示例中为 Pivotal)与您的非生产环境是对等的。这将使你更有信心，你会遇到更少的问题。

## 管理问题:结交高层朋友

你需要管理层的支持，所以不要把事情描绘得一片美好。迁徙的道路还很漫长。移动平台是一回事，但你还必须处理所有的服务。管理层需要了解您的迁移方法和降低业务风险的计划。管理层会感到紧张，因为迁移可能会影响底线，所以您需要讨论所有避免这种情况的措施。

## 失败得好:让它成功

失败是好的，失败是伟大的，只要你下次实施学到的教训，失败应该是意料之中的。你不能解释所有的事情，当未知成为阻碍时，感知到的失败就会发生。让管理层知道会有失败，有望避免负面影响，提高整体士气。事实上，你需要庆祝从失败中吸取的教训，因为你正在进步。为了证明失败是可以接受的，你需要一个清晰的后备计划。将此作为您的迁移日计划的一部分，其中包含回滚的进行/不进行决策点。

许可费用和风险是迁移到开源 Cloud Foundry 或 Kubernetes 的主要驱动因素。运行数千个应用程序的大型组织，风险是至关重要的。随着对规模需求的增加和开发人员的短缺，迁移似乎有风险。主要问题是避免对应用程序团队的影响和避免停机。好消息是，Stark & Wayne 已经成功执行了许多企业级迁移，这些迁移遵循了最小的开发人员影响和限制在变更控制窗口内的停机时间。

通过排除我们遇到的这些常见错误，你的下一个项目不太可能成为波士顿咨询集团建议的那 70%没有得到他们期望的那一部分。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>