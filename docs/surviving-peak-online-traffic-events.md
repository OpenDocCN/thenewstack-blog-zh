# 在高峰在线流量事件中幸存

> 原文：<https://thenewstack.io/surviving-peak-online-traffic-events/>

[](https://www.split.io/)

 [戴夫·卡罗

戴夫在开发人员工具、开发人员社区和使软件交付更加可持续的宣传方法方面有三十年的经验。戴夫是在斯坦福大学的校外长大的，当时硅谷正从国防发展到芯片、软件，最后是互联网服务。戴夫坐在所有这些活动的前排，这让他对技术发展的漫长过程和重复主题有了独特的看法。作为 Split Software 的 CD 布道者，Dave 谈到了将渐进式交付(即新代码的逐步推出)与系统健康、用户体验和用户行为的可观察性结合起来。](https://www.split.io/) [](https://www.split.io/)

重要的一天已经到来，消费者正成群结队地涌向你的数字财产。你的网站打破了流量记录。在一个小时内，你看到的会话比你一天中看到的要多好几倍。游客对你的提议非常兴奋，他们似乎不能很快地花掉他们的钱。在需求方面，情况再好不过了。但是你的快乐是短暂的。突然，你的网站在最终崩溃前慢如蜗牛。

当遇到高峰在线流量事件，如黑色星期五、网络星期一、情人节、超级碗或重大产品发布会时，这是电子商务的噩梦场景。减速、停机和意外会让你的客户转向你的竞争对手。当它们发生在引人注目的事件中时，会对你公司的声誉造成真正的损害。

尽管这些重大事件充满了危险，但它们也充满了机遇。通过在大流量到来之前解决问题，问题是可以避免的。脱颖而出的关键是提前知道你的网络和移动应用能够支持活动高峰。最好的方法是在大型活动之前运行负载测试，以识别和消除潜在的瓶颈。

## 确保你的测试是有效的

当然，如果没有做好，负载测试就没有什么意义。它必须有效。在系统降级或崩溃后，确信负载测试已经完成，却发现负责测试的人只是“勾选了一个框”，这种情况并不罕见没有足够的信息、时间或预算来完成使测试有效所需的工作。因此，这些测试根本不是为了测试实际遇到的情况而设计的。

这听起来像是常识，但值得重复。要使负载测试被视为“有效”，它必须尽可能准确地模拟您预计数字频道将面临的真实性能挑战。通过模拟客户可能遇到的问题，你给自己一个机会，在真正的、活生生的消费者真正到达你的网站之前解决这些问题。请务必尽早开始测试，以便有足够的时间来解决问题。有效的测试通常会发现解决潜在问题的多种机会，但是如果你没有足够的跑道来采取行动，这也没有关系。你的第一个大测试应该在大日子之前几周甚至几个月就设计好并运行。

除了有效负载测试之外，你还可以做些别的事情来确保你的数字频道在重要的日子里不会陷入困境。

## 使用 Ops 开关快速降低负载

大多数主要网站都有能力在繁忙的日子里可能出现问题的地方减少自己的特色。您可以通过使用功能标志在高峰流量期间快速卸载来实现同样的目的。这些标记称为“ops toggles”，控制生产系统的操作方面。如果您正在实现一个性能含义不明确的新功能，您可能希望引入一个 ops 开关，以便在需要时可以快速禁用或降级该功能。例如，在你的主页上禁用一个“推荐”面板，这个面板的生成要求相对较高。

电子商务中常见的另一个例子是库存管理。如果你有一个非常大的库存，并且你不希望卖完任何东西，那么当客户下订单时，不实时处理库存管理，而是稍后分批处理，通常会更有效率。然而，通过使用 Ops Toggle，您可以像平常一样打开它，但也可以在流量太大、网站变慢时关闭它。

或者你可能在利用第三方做一些有趣的事情，但不一定是必须的。如果您不确定它们能否在高峰流量期间处理繁重的负载，您可能希望能够在生产中打开和关闭它们。但是您可能还希望能够在测试期间关闭它们。想要这样做有几个原因。第一，您可能没有权限使用负载测试来测试第三方，因此您可能需要在较大的负载级别上关闭它们。第二，如果他们在测试中遇到瓶颈，你不希望不得不取消整个测试，你只是希望能够把他们带出循环。

Ops toggles 是一种不寻常的特殊类型的特征标志。对于大多数特性标志，您的目标是一旦您对新特性有了信心，就让它们退役。有了 ops 开关，你可以无限期地保持它们的位置，这样你就可以随时使用它们。

通过设计有意义的负载测试和用 ops toggle 特性标志包装资源密集型的“最好拥有”特性，开始准备永远不会太早。

通过像素的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>