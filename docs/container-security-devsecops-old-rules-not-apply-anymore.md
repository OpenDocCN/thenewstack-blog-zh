# 容器安全和 DevSecOps:旧的规则不再适用

> 原文：<https://thenewstack.io/container-security-devsecops-old-rules-not-apply-anymore/>

[](https://www.aquasec.com/)

[Tsvi Korren](https://www.aquasec.com/)

[CISSP Tsvi Korren，做了 20 年的企业 IT 安全专业人士，有大型组织的业务流程咨询背景。他在 CA Technologies and Digital Equipment Corporation 担任过各种技术和面向客户的职务。Tsvi 目前是 Aqua Security 的技术服务总监，致力于在 DevOps 和安全性之间搭建桥梁。](https://www.aquasec.com/)

[](https://www.aquasec.com/)[](https://www.aquasec.com/)

运行容器环境的一个常见问题是如何确保只有授权的映像才能作为容器运行。组织还面临着在所有产品组和开发团队中找到在这些映像中实现软件和配置标准的方法的挑战。

在传统的 IT 环境中，两个过程并行发生:一个是软件开发(“dev”))另一个是准备软件运行的基础设施(“ops”))每个流程都有既定的安全实践:

*   软件开发通过静态代码分析工具来保护，这些工具评估源代码，检查常见组件的弱点，并强制实施编码标准。
*   服务器评估工具可测试操作系统和其他组件的版本，扫描漏洞和补丁程序级别，并强制实施配置标准，从而确保基础架构设置的安全性。

这些过程独立运行，只有当新开发的软件安装在准备好的基础设施上时才会聚合。在大多数情况下，如果在基础设施的配置中存在问题，它们会在安全和操作之间进行处理，很少或根本没有开发人员的参与。

虽然第一组实践(保护开发的代码)通常不会受到过渡到容器中的应用程序的影响，但后一组控制将需要改变并适应容器化的环境。

## 集装箱:新规则、新安全流程

使用容器，所有操作系统组件、必备组件及其设置都嵌入到映像中。一旦映像被构建和发布，它就不应该改变。在运行的容器中，无法调整配置、修补或交换组件。修改映像内部环境的唯一方法是构建新的映像。

这意味着只有一个地方可以实现基础设施安全性:构建过程内部。因为一旦部署了映像，就不可能再对其进行修复。

## 安全需要重新找到合适的位置

在构建过程中嵌入基础设施安全控制是一个重大的、根本性的变化。它完全颠覆了现有的安全流程。

而不是等到开发和集成过程结束，然后迭代评估、打补丁和配置修复；安全性在实施这些控制方面只有一次机会，而且必须在第一次构建映像时，在它进入 CI/CD 流程之前就做好。“向左转移安全”的整个想法——这就是它看起来的样子。

在此期间，执行基础架构安全策略的所有元素以及容器映像特有的策略非常重要:

*   映像是根据批准的基础映像(模板)构建的。
*   服务器软件组件具有可接受的漏洞暴露级别。
*   服务器软件组件是所需的最低版本。
*   映像操作系统的配置符合组织标准。
*   图像元数据具有必需的元素、用户上下文设置和入口点设置。

理想情况下，这些策略应该反映物理、虚拟或云环境中主机上当前使用的策略。例如，映像的不可接受漏洞列表应该与用于评估服务器合规性的列表完全相同。

## 安全现代化的时候到了

很长一段时间以来，安全组织一直关注未经授权的更改。跳转服务器、特权身份管理、管理日志、更改窗口和根本原因分析的全部实践都是为了说明、检测和否定对软件组件及其配置的未授权更改而设计的。内部和外部主机的持续漏洞评估在某种程度上是为了追踪 IT 基础架构中不可避免的变化并衡量其影响。

集装箱化的环境正在实现看似不可能的目标。它们既是动态的，又是一致的。使用容器，不需要接触主机，因为主机不携带任何有意义的负载或配置(除了容器引擎之外)。)也不需要改变正在运行的容器，因为当编排移动或重新创建容器时，这种改变将被覆盖。永远不需要修改主机上的映像。简而言之，永远不需要改变。

真正发生变化的地方是构建新的映像来替换、扩充，或者，是的，对不再适合其预期目的的容器应用补丁。如果安全插入到这个过程中，并有效地执行，似乎可以实现不可能的事情:比以往任何时候都更快、更有效地创建本质上更安全的应用程序。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>