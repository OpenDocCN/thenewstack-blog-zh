# Kubernetes 中优化数据弹性的新工具

> 原文：<https://thenewstack.io/new-tools-for-optimizing-data-resilience-in-kubernetes/>

[](https://www.linkedin.com/in/marcelhergaarden/)

[Marcel Hergaarden](https://www.linkedin.com/in/marcelhergaarden/)

[Marcel 是 Red Hat 数据基金会业务团队的产品营销高级经理。自 2012 年以来，他一直在 Red Hat 工作，工作地点在阿姆斯特丹附近。他拥有技术背景和丰富的基础设施相关技术销售经验。](https://www.linkedin.com/in/marcelhergaarden/)

[](https://www.linkedin.com/in/marcelhergaarden/)[](https://www.linkedin.com/in/marcelhergaarden/)

里面没有银子弹。例如，很容易认为公共云可以解除您所有的业务连续性担忧。主要的云提供商无疑比许多内部数据中心提供更强的数据弹性。但是故障可能并且确实会发生，从业务服务的重大中断到影响消费者的后端中断。

正如许多组织现在所做的那样，将工作负载分散到多个云中只会增加复杂性。您的任务关键型数据不再驻留在一个位置，数据所在的位置可能会经常变化。您的灾难恢复变得更加复杂。

容器化和 Kubernetes 容器编排可以提供帮助。Kubernetes 使您能够更快速、更轻松地在不同环境之间转移应用程序。如果一个应用程序进程失败，Kubernetes 可以立即生成一个新的实例，这样应用程序就不会宕机。

这也是 Kubernetes 被生产环境所接受的原因之一。事实上，根据最近的红帽研究，85%的企业认为 Kubernetes 是云原生应用战略的关键。

但是用 Kubernetes 管理任务关键型应用程序提高了数据弹性的门槛。首先，这些应用程序通常需要持久的数据存储。此外，微服务架构将应用程序分割成相互作用的离散服务集合。与每个微服务相关的所有数据都是构成应用程序及其输出所必需的。如果某个应用程序确实是任务关键型的，任何停机都会影响您组织的运营、收入和声誉。

幸运的是，正确的 Kubernetes 平台应该为您提供工具，以优化您的容器化、多云环境中的数据弹性。

## **拍摄快照**

快照是数据恢复的基础。它们为您提供了数据的时间点拷贝，如果需要，您可以快速方便地返回到这些拷贝。例如，在测试、修补和升级过程中，如果您遇到问题并需要返回到之前的状态，它们会很有帮助。

容器存储接口(CSI)在 Kubernetes 中启用快照方面起着重要的作用。CSI 是一个标准化的插件，支持容器编排工具和数据存储系统之间的连接。

有效的 Kubernetes 发行版将允许您使用 CSI 来管理您的快照功能。您可以获得持久数据卷的可定制的时间点快照，使您能够更快、更轻松地返回到以前的状态。

CSI 对单个存储后端的复杂性进行了抽象。因为 CSI 抽象了存储和特定于品牌的操作，所以创建快照不需要成为存储专家。

请注意，快照只能在创建它们的存储系统上使用。您不能将快照“发送”到另一个位置。但是快照的内容可以通过灾难恢复或备份应用程序进行备份。一旦执行完毕，您就可以将数据发送到另一个位置。

## **获得 API 保护**

快照并不是您可以利用 Kubernetes 特定集成实现数据弹性的唯一领域。备份也会受益。

使用 Kubernetes，您的应用程序在容器中运行，而相关数据保存在存储类提供的持久存储中。要从故障中恢复，您的备份解决方案必须保护容器和容器中运行的应用程序上下文中的数据。为了使用容器集群，备份还需要集群资源上下文。这样，当应用程序被恢复时，恢复工具可以恢复和重新配置与其持久数据相关联的名称空间。

如果没有 API，您需要完全理解 Kubernetes 名称空间才能将您的环境恢复到以前的状态。手动恢复所有文件并将其重新关联到正确的位置可能需要几天时间。

但是使用正确的 API，您可以创建应用程序一致的备份映像，以及描述相关集群资源的持久数据卷和元数据。这些类型的 API 允许跨集群和集群版本的应用程序可移植性。您的备份可以处理本地应用程序故障，并在整个群集出现故障时恢复到备用群集。

## **同步(和异步)您的数据复制**

最后，一个有效的 Kubernetes 数据服务解决方案将为同步和异步数据复制提供工具。同步复制同时将数据写入本地磁盘和远程磁盘。如果本地磁盘出现错误，系统会尽快故障转移到复制的数据。同步复制依赖于高带宽和低延迟等先决条件。

相比之下，异步复制最初将数据写入主磁盘存储，然后以设定的时间间隔将数据复制到另一个介质。它可以通过广域网延迟连接来执行。

您的 Kubernetes 平台应该为同步复制启用“metro”数据恢复，其中不同位置的容器平台节点之间的延迟不超过一位数毫秒的往返时间。它还应该支持“区域性”数据恢复，用于跨容器集群的异步复制。在这两种情况下，复制都应该由独立于备份或灾难恢复应用程序的 Kubernetes 数据服务解决方案来实现。

Kubernetes 已经成为管理成熟集装箱化环境的首席信息官的首选编排平台。该技术使组织能够优化其应用程序，以提供更强大的功能和更丰富的用户体验。更好的是，Kubernetes 可以帮助您实现这些目标，利用数据服务解决方案帮助您维护业务保护数据弹性。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>