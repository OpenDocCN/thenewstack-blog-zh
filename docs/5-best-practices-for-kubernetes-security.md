# Kubernetes 安全性的 5 个最佳实践

> 原文：<https://thenewstack.io/5-best-practices-for-kubernetes-security/>

[](https://www.linkedin.com/in/robert-a-brennan/)

 [罗伯特·布伦南

罗伯特·布伦南是 Kubernetes 支持公司 Fairwinds 的开源软件总监。他专注于软件开发，该软件抽象出底层基础设施的复杂性，为工程师提供最佳体验。在 Fairwinds 之前，他在谷歌担任人工智能和自然语言处理方面的高级软件工程师。他是 DataFire.io 的联合创始人，data fire . io 是一个用于构建 API 和集成的开源平台，LucyBot 是一套由财富 500 强公司部署的自动化 API 文档解决方案的开发者。他毕业于哥伦比亚大学和哥伦比亚工程学院，在那里他专注于机器学习。](https://www.linkedin.com/in/robert-a-brennan/) [](https://www.linkedin.com/in/robert-a-brennan/)

无论您是刚刚开始探索 Kubernetes 的前景，还是已经开始使用容器编排系统，您可能都有疑问。像任何向云原生技术的过渡一样，您想知道如何在扩展时保持可靠和高效。但除此之外，还有一条更重要的事情要做:安全。

特别是在以安全为中心的行业，如医疗保健和金融，开发运营(DevOps)团队必须在可用性、功能性和安全性之间取得平衡。如果实施得当，Kubernetes 可以成为这个等式的答案。问题是原生云容器是一种新的软件部署方法，所以 DevOps 团队不能只使用他们的老把戏。与其他技术一起工作的框架和过程要么在这里彻底失败，要么需要进行重大改革，以便为您的应用程序提供所需的保护。

当您部署 Kubernetes 时，所有常见的安全威胁都潜伏在其中。但是，在这些威胁中，您最常遇到的三种是拒绝服务(DoS)攻击、获得内部资源访问权限的外部威胁，或者给予员工过多访问权限从而暴露漏洞的内部威胁。

安全工作应该集中在防止安全威胁上，尤其是这三个方面。虽然没有任何代码是 100%没有漏洞的，但是应该遵循以下五个最佳 Kubernetes 安全实践，以确保您现在和将来在技术方面取得成功。

## 1.减速

是的，您渴望让您的应用程序启动并运行，然后继续前进。但是，假设您在实际完成之前就已经完成了，或者过快地完成部署配置，都会导致安全漏洞。这是因为 Kubernetes 的安全性是绝对可能的，但像许多 Kubernetes 一样，它很复杂。

例如，您可能认为您的部署没有资源请求和限制就很好。但是，如果没有把这些部分落实到位，以后肯定会出现问题。您的配置可能意味着保护您的资产或经历由于您的部署配置错误而发生的 DoS 攻击之间的差别。

所以，慢点。利用 Kubernetes 一流的内置安全工具以及强大的开源生态系统和商业解决方案来强化您的集群。这是违反直觉的，但是从长远来看，仔细考虑你的安全策略实际上不会减慢你的速度。相反，它将帮助您最终更快地移动，因为您强大的安全配置文件将防止大量耗时、破坏性的安全问题。

## 2.小心使用

同样，为了快速部署，很容易就将权限拱手让人。但是，对不需要对集群进行广泛控制的应用程序授予管理员级别的访问权限会使您容易受到攻击。这就是基于角色的访问控制(RBAC)对 Kubernetes 如此重要的原因。

根据最低权限原则，使用 RBAC 设置集群的访问权限。例如，如果一个应用程序只需要查看日志，那么相应地限制它的访问，这样你就不会发现它在挖掘比特币、查看秘密或删除资源。

> 默认情况下，单个 Kubernetes 集群中的所有应用程序都可以访问集群中的所有内容。您的工作是编写一个网络策略，限制集群中没有业务往来的部分之间的通信。

这将有助于减少飞溅损害，如果你的帐户受到损害，并节省你很多头痛的路要走。许多团队无法正确处理 RBAC 配置，因为它们可能会令人困惑，但是有工具可以使这变得简单得多。

## 3.保护您的政策

网络政策本质上类似于 RBAC，对 Kubernetes 的安全至关重要。但是，网络策略并不允许访问资源，而是设置谁可以与群集中的人对话。默认情况下，单个 Kubernetes 集群中的所有应用程序都可以访问集群中的所有内容。您的工作是编写一个网络策略，限制集群中没有业务往来的部分之间的通信。这样，即使攻击者潜入您的网络，也将被限制在一个工作负载范围内，无法扩散到整个集群。

网络策略也可用于管理群集的入口和出口。把它想象成一个空中交通管制员，他对谁可以在他的机场着陆，谁可以离开机场有着高度的选择性。仅供内部使用的应用程序应该只接受来自防火墙内部 IP 地址的流量，合作伙伴 IP 地址应该列入白名单。类似地，将允许的域加入白名单是一个好主意。

毕竟，黑客可能试图进入您的集群，然后将数据推送到外部 URL，这当然是个坏消息。但是，具有严格入口和出口规则的强大网络策略将限制这种可能性。此外，配置入口策略来限制用户在被关闭之前可以消耗的流量，有助于防止分布式拒绝服务(DDoS)攻击。

## 4.获取配置验证

DevOps 团队经常人手不足，并且缺少资源来手动检查每个引入的变更。正因为如此，期望他们抓住每个漏洞是不合理的——然而不这样做对他们是有害的。这就需要使用正确的工具来监控和验证您的配置。

有些平台为 Kubernetes 的部署和管理人员提供了更好的可视性、优先推荐和协作工具。正如商业的许多其他方面一样，软件通常可以填补我们自己无法填补的空白。Kubernetes 也不例外，获得正确形式的验证可以确保您的配置在安全性方面获得成功。

## 5.保持最新状态

你上次更新 Kubernetes 版本是什么时候？更新有时被认为是一件麻烦的事情，所以那些关注其他部署的好心人可能会把它一脚踢开。这可能不会立即带来灾难，但如果他们继续拖延下去，安全漏洞很可能会出现。

每个新的更新都承诺了重要的安全修复和增强的功能。特别是如果你使用附加产品来扩大 Kubernetes 的好处，你的攻击面会增加，你的风险也会增加。但是，当您及时更新错误修复和新版本，并测试更新时，您可以确保您的安全性和功能处于最佳状态。

记住:建立集群最快的方法是最不安全的方法。幸运的是，Kubernetes 具有强大的内置安全功能，可以为您的组织提供一个适用于所有云计算的单一平台。它的好处数不胜数，但只有在安全性被放在首位的情况下才能实现。通过遵循这里概述的最佳实践，您的 Kubernetes 实现肯定会比其他系统更安全、更易于维护。它需要的只是第一次以正确的方式设置一切的意图和意愿。

玛格达·埃勒斯摄于**佩克斯。**

*目前，新堆栈不允许在该网站上直接发表评论。我们邀请所有希望讨论某个故事的读者通过 [Twitter](https://twitter.com/thenewstack) 或[脸书](https://www.facebook.com/thenewstack/)访问我们。我们也欢迎您通过电子邮件发送新闻提示和反馈: [feedback@thenewstack.io](mailto:feedback@thenewstack.io) 。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>