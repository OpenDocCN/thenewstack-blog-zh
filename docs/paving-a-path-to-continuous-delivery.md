# 为持续交付铺平道路

> 原文：<https://thenewstack.io/paving-a-path-to-continuous-delivery/>

[](https://www.linkedin.com/in/stephen-atwell/)

 [斯蒂芬·阿特韦尔

斯蒂芬开发产品是为了改善技术人员的生活。目前，他的重点是军械库的政策和合规产品。Stephen 拥有计算机科学工程学士学位，曾担任过网络管理员、软件工程师和产品经理。](https://www.linkedin.com/in/stephen-atwell/) [](https://www.linkedin.com/in/stephen-atwell/)

对于今天几乎所有的企业来说，开发软件能力是必不可少的。在全球 10 家资本最高的公司中，有 8 家是以软件为核心价值的科技公司。Airbnb、优步和网飞等企业改变了各自行业的规则，尽管几乎没有资产，却实现了惊人的估值。他们的业务以通过软件交付创新为中心。

几乎每一个这样的企业都有一个共同点，那就是在持续软件交付方面的卓越。他们已经掌握了使用连续交付(CD)来自动执行从构建阶段到生产的软件构建、测试、配置和部署过程。

他们通过创建发布管道来实现这一点，发布管道可以自动生成新版本所需的基础架构和部署任务，从而安全、可靠地成功完成生产之旅。精英公司使用微服务构建分布式应用，将其打包在容器中，并部署到多个目标，包括多个云平台。他们按需以极高的频率执行这一过程，故障更改率极低，并且从故障中恢复的速度可确保满足客户苛刻的服务级别期望。可以自动化的一切都是自动化的，开发人员使用一组一致的最佳实践和防护栏来确保他们被遵循。

处于[高水平软件开发成熟度的公司](https://cloud.google.com/blog/products/devops-sre/announcing-dora-2021-accelerate-state-of-devops-report)部署代码的频率是表现不佳的公司的 973 倍，变更失败率比表现不佳的公司低三倍，当失败发生时，从事故中恢复的速度是表现不佳的公司的 6570 倍。据[麦肯锡&公司](https://www.mckinsey.com/industries/technology-media-and-telecommunications/our-insights/developer-velocity-how-software-excellence-fuels-business-performance)称，他们的业务增长速度也快了五倍，股东回报率提高了 60%，运营利润率提高了 20%。

商业领导经常错误地认为持续的软件交付仅仅是他们的 IT 组织的责任。实际上，它需要紧密地融入企业文化。如果数据是孤立的，管理人员相互隐瞒信息，流程不透明，必要的变革就不可能发生。持续交付需要被视为一种文化需求，而不仅仅是一种发展策略。需要全面的参与，每个涉众都需要完全投入到理解他们是在软件业务中。

## 持续交付的优势

在速度至关重要的商业环境中，能够比竞争对手更快地交付软件的战略优势是显而易见的。但是还有许多其他的好处:

**改进的开发者体验**。开发人员在编码的时候最开心，最有动力。组织可以通过提供使开发人员更容易快速工作并保持对项目控制的工具来提高工作满意度、保留率和生产率。软件容器是这一领域的一个巨大飞跃，因为它们使开发人员能够在几分钟内而不是几天或几周内提供完全配置的基础设施。

**增加部署速度**。用现代化的云原生环境取代自主开发的传统工具，并将项目分解为模块化组件，这些组件可以并行编码并快速集成，从而大幅缩短交付时间。例如，网飞每天部署数千次新代码，让其竞争对手永远处于追赶模式。

**快速扩展产品和业务的能力**。无状态容器和微服务支持快速部署新资源以满足需求。企业只需要在弹性云实例中构建新的集群，以适应使用量激增或向市场推出新服务。基于云原生原则构建的软件具有内在的、几乎无限的可扩展性。

**更一致的代码和环境。**采用最佳实践和标准化工具集可以最小化代码模块之间的冲突风险。最好的开发团队使用一套标准的、记录良好的应用程序接口来实现简单的集成，而不需要开发人员深入钻研代码。新功能可以很容易地插入，API 可以作为服务提供给合作伙伴和客户。

**更平滑的回滚过程**。更新导致 70%的生产中断。手动回滚会导致部署暂停，并且通常会引入新的和不必要的步骤来防止再次发生。相比之下，自动回滚使应用程序的上一个无错误版本能够立即恢复，因此可以在不中断生产的情况下纠正问题。

**通过自动化加快交付速度。**虚拟化允许将基础设施作为代码进行管理。这反过来又通过脚本、笔记本和声明性配置实现了高水平的自动化。成熟的开发组织虚拟化一切可能。消除手动任务不仅使一切进行得更快，而且消除了人为错误的风险。

**节省时间和成本**。基于一套通用工具实现自动化和标准化可减少错误、提高合规性并简化培训和部署时间。Google 的 [Accelerate State of DevOps 报告](https://services.google.com/fh/files/misc/whitepaper_roi_of_devops_transformation_2020_google_cloud.pdf)发现，高性能的开发组织比低性能的开发组织经历的失败少 50%,恢复服务的速度快 12 倍。对于许多组织来说，每小时的停机成本[超过 100 万美元](https://techchannel.com/IT-Strategy/09/2021/cost-enterprise-downtime)，好处显而易见。

**提高依从性。**devo PS 和 CD 的采用允许组织彻底检查他们的软件开发操作，使工具现代化，并使程序和报告标准化。这些有助于更快、更透明地报告合规情况。

**提高客户满意度**。软件即服务(SaaS)和移动应用(人人都是)的用户已经习惯了看到新功能和更新像变魔术一样出现。传统开发环境中典型的一年或半年一次的更新计划不再被接受。连续交付提供了一种快速、低调地引入改进用户体验的增强功能的方式。

## 转向连续交付

从传统的“瀑布式”开发环境迁移到 CD 模型是思维和过程上的一个重大转变，传统的开发环境具有严格的需求定义、冗长的审查和测试周期以及不频繁的代码部署。与大多数转型变革一样，最大的障碍不是技术上的，而是文化上的。

组织必须从优先级经常相互竞争的集中式 IT 团队转变为以开发人员为中心的流程。这个旅程始于一个使软件开发成为核心能力的组织承诺。这个信息需要来自组织的最高层，而不仅仅是首席信息官。人们需要明白，封地需要被打破，过程需要变得更加透明。更大的好处是推动整个组织向前发展，即使有些人必须在这个过程中放弃权力。

### 阶段 1:准备团队

首先，解散集中的团队，将决策权转移给开发人员，开发人员应该在逻辑上甚至物理上与业务用户保持一致。评估应用架构，以确定哪些整体程序应该分阶段转移到微服务、替换、丢弃或现代化。

然后，团队可以开始采用最佳实践，比如创建新的工作流和发明持续收集反馈的方法。应该重新评估计划的项目，看它们是否可以模块化和并行化。这些步骤的目标是通过每月进行多次代码部署来缩短发布周期。

需要找到并解决组织障碍。例如，开发和运营之间的错位是常见的。写代码的人想要快速前进，即使一些不完美需要被容忍。运营团队重视稳定性和可预测性。领导层必须向运营人员解释新的范例，并通过明确开发运维及持续交付策略来减少停机时间并提高可见性，从而让他们放心。

可能还需要分配新的角色，以适应新过程的采用，如“左移”和“右移”测试，它们在开发过程的早期和后期移动测试。DevOps 还需要一种更具协作性的方法来与将要使用它的人一起构建软件。不是所有的开发人员都很适合这个过程，所以客户大使需要被识别和培训。

### 第二阶段:转向光盘

下一步是彻底检查开发人员使用和培训的工具包。目标应该是转向基于微服务和容器的架构，同时简化计算环境。应尽可能对平台进行虚拟化，并发现实现自动化的机会。每个开发团队都应该使用相同的平台进行部署；容器大大简化了这一过程。随着团队对新的角色和流程越来越有信心，他们将会看到部署周期加快，交付时间表被压缩到每天一个或多个版本。

在这一点上，一个结构化的和文档化的发布和回滚过程应该被放置在适当的位置，随着代码的发布，还有一个快速收集用户评论的反馈循环。还应该为访问工具集、容器库、数据库和其他敏感元素分配适当的权限。

您还应该考虑度量标准，因为它们对评估有效性至关重要。这方面有许多选项，包括服务级别协议合规性、服务级别指标、部署时间、停机频率、每月发布次数、回滚次数和推出新服务的时间。

### 第三步:精英表演

处于最高软件成熟度级别的组织很少遭受停机，并且在每个应用程序的基础上定义他们的服务级别协议。他们不是对客户投诉做出反应，而是使用分析和反馈机制来主动发现和解决问题。他们快速的部署速度使他们能够采用新的反馈技术，如“金丝雀”和 A/B 测试，并通过蓝/绿部署来简化交付。

最重要的是，精英团队始终作为一个团结的整体工作，没有孤岛或审批瓶颈。他们可以专注于创新而不是流程。这使整个组织的绩效和可持续优势达到新的高度。

## 选择正确的工具

从第一天开始就使用正确技术的组织通常会取得最大的成功。

通过使用正确的工具来自动化您的 CD 过程，并为每个开发人员创建一致的体验，您可以使您的 CD 之旅更加顺利和快速。网飞就是这样做的，他们创建并开源了一个多云连续交付平台 [Spinnaker](https://spinnaker.io) 。许多公司都是这样做的，包括我在 T3 工作的 T2 公司。

开始转向连续交付永远不会太早——并且要从[和其他人](https://resources.armory.io/webinars/ci-cd-in-the-real-world-mp4)，包括 [Snap](https://resources.armory.io/webinars/snap-aws-armory-reliable-safe-deployments-mp4) 的建议中学习，以实现这种转变。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>