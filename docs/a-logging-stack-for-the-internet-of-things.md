# 面向物联网的日志堆栈

> 原文：<https://thenewstack.io/a-logging-stack-for-the-internet-of-things/>

[LogDNA](https://logdna.com/) 赞助本帖。

与任何生产系统一样，来自物联网(IoT)系统的日志对于优化、调试、取证和其他关键任务至关重要，以便在不影响用户的情况下保持这些系统正常运行。日志数据驱动着可观察性堆栈的各个方面，以及许多(如果不是全部的话)警报、监控和度量功能。让我们探讨物联网日志堆栈的具体需求和解决方案。

## IoT 是什么？

 [劳拉·圣马利亚

作为 LogDNA 的开发者倡导者，劳拉·圣马利亚喜欢学习和解释事物是如何工作的。她在外部开发人员、sre 和内部工程团队之间架起了一座桥梁。此外，她还是一分钟麦克风的策展人。除了工作之外，她还共同主持奥斯汀 DevOps，为多年为奥斯汀编程的女性教授 Python，以及奥斯汀 DevOpsDays 的志愿者。科技之外，劳拉跑步，和她的狗玩耍，扔碟片，看云——真正的那种。](https://www.linkedin.com/in/lauraasantamaria/) 

我们都听过一个流行词(buzz-initialism？)*物联网*在现代科技会议和博客中随处可见。但它是什么，为什么重要？物联网是小型计算设备互联网络的总称，这些设备无缝共享数据。通常，这些设备不是具有全尺寸处理器、板载内存、主板和连接硬盘的成熟系统。相反，它们通常是具有不同处理系统的较小系统。例如，您可能使用微控制器，这是一种集成电路，具有处理器和板载存储器，您可以将引脚纯粹用于输入和输出。微控制器的例子有 Arduino Uno 或 Flora。

对于大多数自己动手的物联网项目，你更有可能使用片上系统(SoC)架构。这些系统使用单个芯片，将 CPU、板载内存和所有其他不需要主板就能运行的外围设备结合在一起。SoC 最常见的例子就是众所周知的树莓 Pi。

虽然物联网已经成为业余爱好者的游乐场有一段时间了，但有相当多的公司在该领域工作，整个行业已经起飞并呈指数级增长。从智能电视到可穿戴设备，物联网普遍存在，并将继续存在。然而，我们都需要解决一些关于物联网网络的问题。

### 安全性

流经物联网网络的数据的隐私和安全可能是人们对物联网最重要的担忧，有很多关于这些问题的信息。首先，固件更新是确保物联网设备安全的必要条件。然而，推出固件更新并确保它们得到一致应用是困难的。第二，太多的消费者网络不够安全。大多数消费类调制解调器和路由器为了易用性牺牲了强大的安全性。第三，许多物联网设备正在通过不太安全的连接发送未加密的数据，从运行在这些不安全的调制解调器上的网络到广域蓝牙广播或小区域 NFC 广播。最后，考虑到之前的担忧，这些设备产生的大量个人数据既令人印象深刻又令人担忧。

### 分布式系统和连接

根据定义，物联网系统是分布式、网络化的系统。无论是连接到互联网还是仅连接到特定物联网系统中的其他设备，设备都依赖连接来按预期运行。从处理异步通信和并发错误，到影响整个网络的单个设备故障的可能性，围绕任何分布式系统的关注都适用。这些设备中的一些设备的连接也可能不稳定，例如当消费者在跑步时不带手机。虽然稍后当设备重新连接到网络时可以协调数据，但数据中仍可能存在错误，或者设备的内存在重新连接之前可能已满，从而导致数据丢失。虽然这些问题看起来很小，但当你考虑到其中一些用例可能包括人们依赖的数据时，它们会变得更加令人担忧——从心率到检测异常，再到智能汽车中检测前方道路的传感器。

## 登录物联网是如何工作的，为什么它如此重要？

由于物联网完全是为了收集和传输数据，因此日志记录对于整个空间来说也同样至关重要。

### 典型日志

就像服务器一样，组成物联网系统的设备会生成日志。从硬件角度来看，板载存储器、微控制器和任何传感器的状态都由日志描述。这些数据可以告诉你任何事情，从系统是否按预期运行，到你的下一次更新是否需要削减内存使用以避免板载内存过载。从软件的角度来看，微控制器记录数据如何流经应用程序的细节。然后你有网络日志。了解数据如何流入和流出设备对于物联网系统这样的互联系统至关重要。

### 日志位置

登录 IoT 的最大部分是了解在哪里存储生成的数据。与服务器不同，这些设备没有足够的板载内存来存储任何有用时间段的日志。此外，日志数据本身有时是设备使用的一部分，因为所分析的数据可用于通过设备本身向客户提供进一步的服务。这种分析通常在集中的数据中心进行，而不是在设备的边缘进行。最后，由于物联网系统根据定义是分布式的，因此来自多个设备的聚合数据对于排除整个系统的问题是必要的。

因此，集中式日志管理系统是从操作角度使用和理解物联网系统的关键。虽然日志可以在设备本身上存储很短的一段时间，但是当这些日志不可访问或被隔离时，对于开发人员、操作工程师或安全工程师来说是没有用的。

### 用例示例

假设你是一名 DevOps 工程师，负责一个小型智能手表物联网网络。当您开始收到客户的手表在第一批更新推出时没有通过加载屏幕的报告时，固件更新的自动推出引起了您的注意。您通常会首先从日志中获取信息。您的团队决定在每台设备上存储日志，每天向中央服务器发送一次批处理。不幸的是，由于设备在尝试更新时被卡住，设备无法连接到网络来上传这些更新的日志。您将不得不通过客户报告、测试数据和其他信息手动反向工作，以发现究竟是什么阻塞了设备。您关闭了更新，并开始尝试了解发生了什么，而与此同时，另一个团队正在为某个功能不可用而烦恼，或者安全部门正在为客户数据仍然容易受到该更新要解决的最近发布的漏洞的攻击而烦恼。

倒回那个场景。现在，您有了一个集中的日志管理系统，并且要求设备在更新时连接到互联网。您开始获得第一个设备卡在加载屏幕上的报告，并且您可以在暂停部署时深入查看这些设备的日志。您发现最近对自动固件更新过程的更改意外跳过了一个步骤，该系统的快速补丁将完成的更新发送给第一批。您可以立即看到更新起作用了，并且您可以毫不费力地继续推广。

## 最后

现在，考虑到我们是一个集中式日志管理提供商，我们可能有点偏见。然而，无论您是将数据用于典型的基本调试、事后取证、安全审计、网络跟踪，还是用于最终用户的数据分析，物联网系统在日志的某种集中位置上确实做得更好。大多数物联网设备不具备在边缘推动分析的计算能力，即使具备，您也会错过由多个设备将日志转储到一个位置所带来的更深入的分析。日志是成功的物联网系统的重要组成部分，拥有一个关于如何存储和使用这些日志的具体计划是真正成功和失败的区别。

*如果您想了解 LogDNA 如何看待物联网和日志记录，请注册参加我们即将于 5 月 6 日上午 11:00 PT 举行的[网络研讨会。](https://go.logdna.com/logging-in-the-internet-of-things)*

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>