# 平台工程挑战:安全性与开发体验

> 原文：<https://thenewstack.io/platform-engineering-challenge-security-vs-dev-experience/>

[](https://twitter.com/cpave3)

[Cameron Pavey](https://twitter.com/cpave3)

[Cameron 是一名在澳洲墨尔本生活和工作的全栈开发人员。他致力于理解质量代码、开发人员生产力和工作满意度的错综复杂的永无止境的旅程。](https://twitter.com/cpave3)

[](https://twitter.com/cpave3)[](https://twitter.com/cpave3)

随着公司的成长，他们的产品成熟，他们建立平台，但他们的挑战也在增长。

其中一个挑战是安全性和可用性之间不稳定的平衡，或开发者体验(DX)。

本文将列举一些这种斗争的例子，以及它如何影响团队。

您还将了解可能的解决方案，以及如何在不损害平台安全性或其他重要方面的情况下，为专注于产品的软件工程师简化流程。

## **有哪些典型的冲突？**

产品开发人员和平台开发人员之间经常会有优先级冲突。作为一名平台工程师，您希望为未来的工作建立一个安全的基础。您需要开发一个高质量、安全且可扩展的解决方案。

不过，产品工程师通常更接近面向客户的最后期限。他们可能觉得有必要——或者不幸地被鼓励——在测试和安全等事情上走捷径，以满足最后期限。这种情况比应该发生的次数要多得多。

面对时间压力，开发人员可能会做出对应用程序、平台或业务安全有负面影响的决策。例如，也许您的平台实施了[内容安全策略(CSP)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP) 规则。开发团队可能会无意中编写一些违反您的团队所配置的 CSP 的代码。在这种情况下，对于受到您实施的规则和安全护栏影响的开发人员来说，尽可能减少摩擦是至关重要的。

您可以做一些事情来简化开发人员的工作。首先，确保所有受新政策影响的开发人员都了解这些政策。缺乏知识是错误的常见原因。一旦开发团队了解了安全策略，他们就可以在工作中牢记这些策略。

接下来，记住错误是可能发生的。为了减轻这一点，使用适当的持续集成(CI)管道来自动化尽可能多的项目。

在 CSP 示例中，通过一点点初始设置，可以自动抓取您的应用并报告 CSP 违规[。自动化验证步骤可以大大降低出错的可能性。这不仅仅适用于 CSP 它与您想要实现的任何检查相关，以确保您的开发人员遵循特定的指南或标准。](https://www.jamieweb.net/blog/testing-your-csp-using-travis-ci-and-headless-chrome-crawler/#headless-chrome-crawler)

另一个潜在的团队间难题是第三方包中的漏洞。通常，开发团队会安装新的包。然而，根据你的业务结构，修复任何发现的漏洞可能会落到[平台工程](https://thenewstack.io/devops-is-dead-embrace-platform-engineering/)或安全团队的头上。试图手动管理会给你无尽的待办事项列表增加一项，并且会给开发过程带来更多的摩擦，这会降低每个人的整体 DX。与 CSP 违规一样，您应该能够自动执行此操作。

有许多优秀的服务专注于扫描代码库依赖，检测常见的漏洞和暴露(CVE)，并向您报告它们。使用它们可以让您专注于解决问题，而不是通过手动交叉引用[最新的安全建议](https://www.npmjs.com/advisories)和您的依赖项来浪费时间。

一个这样的服务是 [Snyk](https://snyk.io/) ，它与您的 CI 集成，并报告新发现的漏洞以及元数据，如严重性级别和建议的操作。

开发人员往往有太多的职责——修复错误、修补漏洞、添加新功能——以至于他们更喜欢阻力最小的方式。然而，这条道路可能充满安全问题。

考虑一个典型的网络安全问题，SQL 注入。注入攻击的发生通常是因为用户输入未经适当清理就被添加到数据库中，从而导致潜在的灾难性后果。

通过使用一个对象关系映射(ORM)库[，您可以很容易地缓解这个问题，同时提高整体 DX。这些库抽象出了编写原始 SQL 的需要，但许多库也在将值发送到数据库之前对其进行处理。](https://medium.com/@mithunsasidharan/should-i-or-should-i-not-use-orm-4c3742a639ce)

您可以通过帮助开发团队过渡到使用这些库来消除潜在的安全问题。在单个 ORM 上实现标准化而不是使用直接的 SQL 插入可以提高 DX，因为它为开发人员在代码库上插入和操作数据提供了标准的参考，并且提高了代码的一致性。

## **为什么这很重要？**

安全性和 DX 之间的平衡可能很棘手，但正确的平衡对于您的团队和产品的成功至关重要。考虑一个场景，其中安全性是您的产品中最重要的因素。您的应用程序是高度安全的，但是变化的速度已经急剧下降。特性需要更长的时间来发布，因为开发人员必须与护栏作战。做出改变既困难又昂贵，而且你的产品可能会变成“过时的遗留应用程序”

另一方面，当开发的速度和简易性是优先考虑的事情，而安全性和稳定性是次要的事情时，变化的速度可能会很快，但是引入新问题的速度也会很快。到处都是漏洞，安全漏洞出现的速度比你修复它们的速度还要快。代码库可能是一种快乐的工作，团队可能看起来富有成效，但问题将是一场噩梦。

在这两个极端之间取得平衡对于软件产品的长期生存能力至关重要。不要将其他部门或团队视为对手，重要的是要认识到每个人都在同一个团队中，对一个团队有益的事情可能对整个企业有益。

开发团队应该**希望**提高安全性并帮助平台团队改进。平台团队同样应该**希望**产品的开发体验尽可能无缝，这样阻力最小的路径就是开发人员应该遵循的路径。

通常，一个团队会认为某件事是“QA 问题”或“DevOps 问题”,并拒绝帮助解决它。这种逃避责任的行为可以通过找到一种均衡来缓解，在这种均衡中，当所有人一起工作时，所有人都会受益。

## **结论**

当开发人员在他们喜欢并发现有吸引力的系统上工作时，他们往往会做得最好。从长远来看，改善系统的开发人员体验是提高代码质量和员工满意度的有效方法，但是您不应该以牺牲安全性为代价。

类似地，当安全性被过分重视时，会导致用户和开发人员对系统不满意。这可能导致低劣的特性开发和变化的速度停滞不前。在这两个优先事项之间取得平衡是很棘手的，但如果你能做到这一点，你的团队将能够创造奇迹。

如果您使用 Kubernetes 来部署您的应用程序，并且已经感受到为每个开发人员配置本地集群以便他们能够以更高的生产效率工作的痛苦，那么考虑一下 [Loft](https://loft.sh/) ，这是一项通过提供安全的多租户环境而不影响 DX 的服务，使 Kubernetes 对开发人员来说高度可访问。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>