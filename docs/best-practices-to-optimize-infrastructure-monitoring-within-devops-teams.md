# 优化开发运维团队基础架构监控的最佳实践

> 原文：<https://thenewstack.io/best-practices-to-optimize-infrastructure-monitoring-within-devops-teams/>

[](https://www.netdata.cloud/)

 [奥德修斯·拉姆奇迪斯

奥德修斯·拉姆奇迪斯目前是 Netdata 的首席开发人员。之前，他是 balena.io 产品团队的一员，专注于边缘计算行业的竞争分析，同时还领导整个产品堆栈 1%的改进。在加入 Balena 之前，Odysseas 获得了帕特雷大学五年制电气工程文凭，在 Balena，他领导了一个创业 NPO，并在麻省理工学院的创新和创业训练营中获得了一等奖。奥德修斯是一个狂热的读者，并在 odyslam.me/blog.](https://www.netdata.cloud/) 开设博客

众所周知，“开发”和“运营”之间的界限已经模糊。传统上，系统管理员(或 sysadmin)负责维护可靠的操作，例如维护性能和安全性。另一方面，开发人员负责构建、编码和部署软件。

现在，随着企业 IT 环境变得越来越复杂，这两个角色实际上已经合二为一了。为了管理不断增长的基础架构需求，开发和运营团队认识到他们不能再在孤立的环境中工作，这导致了现代 DevOps 的发展。尽管如此，这两种工作职能对于业务连续性都是至关重要的，如果组织不满足开发人员和操作人员的需求，他们将处于巨大的劣势。

DevOps 的结合及其不断发展的角色，与雇佣具有最广泛技能的开发人员或增加更多团队成员来解决即将到来的挑战没有太大关系，而与将当前团队结合在一起更有关系。然而，即使许多公司已经进行了这种文化转变，开发人员仍然被繁琐的系统所困扰，这些系统剥夺了他们的时间和创作自由。为了绕过这些瓶颈和潜在的倦怠，DevOps 团队可以实施一些最佳实践，以使基础架构管理更加简单和直观。

这一切都归结于 DevOps 团队的监控能力，它甚至可以为最具技术性的团队成员提供可操作的见解，包括那些以前可能不需要监控组织 It 基础架构运行状况的人。

## 粒度可见性至关重要

如果实施得当，基础设施监控可以分为两大类:被动监控和主动监控。这两者都是确保系统以最高效率运行所必需的，而这只有在所有可用的计算机资源都被消耗、监控和分析以便业务目标能够实现时才能实现。这些目标包括从网站的可用性或正常运行时间到特定功能的响应时间。DevOps 团队应该以峰值效率为目标的原因是为了确定最佳的资源分配。如果团队过度采购计算机资源，他们会浪费未使用的计算能力，这会不必要地增加成本。另一方面，如果团队采购不足，那么就有可能无法实现业务目标，并造成金钱损失。例如，研究表明，每停机一秒钟，就会有一定比例的用户离开网站。

响应式基础架构监控完全是为了衡量和跟踪其最本质的方面，即运行应用程序的方面，并研究应用程序和底层生态系统之间的关系，以便在出现问题时做出响应。这可能是一项单调乏味的工作，但对于确保关键业务成果至关重要。

主动基础架构监控是开发运维专业人员更愿意花时间进行的监控类型。由于被动监控侧重于发生后的系统事件，因此主动监控使 DevOps 专业人员能够在问题发生前找到问题的根本原因。通过预测或监控过去的问题，团队可以在它们进一步危害生产系统之前解决它们。

DevOps 团队应该监控的关键基础设施指标包括随机存取存储器(RAM)、中央处理器(CPU)、网络和存储，这些都是应用程序正常运行的关键。通过密切监控这些方面，开发人员可以更好地了解他们的应用程序的最基本行为，并决定运行它所需的基础设施，因为如果开发人员不注意，成本很容易失控。

类似地，开发人员常常会突然意识到，由于设计缺陷，他们的应用程序没有按计划执行，或者消耗了比预期更多的资源。这意味着成本增加，特别是在弹性部署中，开发人员购买的不是具有特定硬件属性的特定虚拟机(VM ),而是可自动扩展的抽象虚拟机。

非常杰出的性能工程师 Brendan Gregg 概述了许多从 Linux 系统中获取核心指标的方法，以满足一个他称为[的框架，使用](http://www.brendangregg.com/usemethod.html)方法进行性能分析(利用率、饱和度和错误)。更有洞察力的 DevOps 专业人士会注意到，使用方法与监控的四个黄金信号有着共同的属性，即延迟、流量、错误和饱和度，这些信号由谷歌的网站可靠性工程师(SREs)创建，并在极具影响力的[谷歌 SRE 书籍](https://landing.google.com/sre/book.html)中介绍。

例如，要测量 CPU，开发人员可以使用以下信号:

*   延迟:CPU 调度的延迟
*   流量:CPU 利用率
*   错误:与 CPU 相关的错误(例如，出现故障的 CPU 数量)
*   饱和度:运行队列的长度

无论您的团队选择使用何种指标来进行被动和主动基础架构监控，关键是让开发运维团队能够尽可能细致地真正洞察其应用的性能，并提供数据来支持他们的发现。

## 实现无缝监控

通常情况下，尤其是在产品的早期迭代中，开发团队监督大部分操作(很讽刺，对吗？).虽然开发人员在设置基础设施或决定某些部署选项时可能会得到开发人员或 SRE 专业人员的帮助，但他们最终还是要负责监控他们的应用程序，并确保它符合业务目标。为此，简单易用的工具可以提高生产率，因为开发人员不需要关注监控工具的复杂性，而是关注应用程序的复杂性。如果您自己是一名开发人员，您可能熟悉尽可能少花时间来设置监控工具(它的警报和功能)的做法，这样您就可以做您想做的事情—编写代码和开发应用程序的功能。

尽管利用零配置监控工具可能很诱人，但是开发人员应该意识到他们的系统应该是高度可定制的，并且能够轻松集成到工具链中。找到能够很好地集成到现有流程中的工具可以让开发人员的工作变得更加容易。在这方面，包含应用程序压力和负载测试的持续集成/持续交付(CI/CD)管道非常有益。通过安装监控解决方案作为 CI/CD 的一部分，用户可以创建警报，以便在测试失败时向 CI/CD 管道发出信号。例如，如果 RAM 消耗超过特定数量，就会触发警报。

总的来说，有一种向抽象发展的趋势，人们普遍认为用户不希望自己在一个监控工具中设置所有的东西。易用性和良好的 UX/UI 设计已经成为监控行业的主要参与者，并接受了这些原则。今天存在的基础设施工具比 20 年前更加用户友好，这意味着更多的初级开发人员或开发人员可以使用它们。严格来说，监控整个堆栈现在已经不是一项高级技能了。市场上的新工具不仅具有简单的默认设置，而且它们只需要很少的配置，可以提供关于基础设施系统的全面见解。在这种情况下，一个系统越固执己见，越多的决策来自用户，越多的决策被产品本身采纳。

为了确保开发运维团队能够实现业务目标，实施易于使用和设置且维护时间有限的监控工具具有优势，并允许开发人员和运维人员保持一致。他们还确保开发运维团队对正在使用的基础架构有一个详细的了解，并能够根据情况的需要主动做出反应。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>