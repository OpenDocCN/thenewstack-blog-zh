<html>
<head>
<title>The New Stack @ Scale Podcast, Show 5: How to Scale Beyond Your First 50,000 Users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新的Stack @ Scale播客，Show 5:如何超越最初的50，000名用户</h1>
<blockquote>原文：<a href="https://thenewstack.io/new-stack-scale-podcast-cases-devops-managing-scale/#0001-01-01">https://thenewstack.io/new-stack-scale-podcast-cases-devops-managing-scale/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">“你的大部分瓶颈，尤其是在一个小网站、一个初创公司的初级阶段，都在SQL数据库级别，”体育网站<a href="http://bleacherreport.com/about" class="ext-link" rel="external ">看台报道</a>的工程副总裁Tung Nguyen 说。</p>
<p class="translated">在第五集<a href="/tag/the-new-stack-at-scale/" target="_blank"> The New Stack @ Scale </a>中，我们听到了Bleacher Report从一台虚拟机上运行的“糟糕”博客软件成长为每月吸引超过8000万独立观众的领先体育数字资产的不可思议的旅程。</p>
<p class="translated">Nguyen被《新书库》的主编Alex Williams和Fredric Paul拷问。Lee Atchison 也在场，他提供了他在New Relic(作为其主要云架构师和倡导者)的扩展经验，以及他在AWS的时间，在AWS，他创建了Elastic Beanstalk并领导团队管理亚马逊零售平台从整体架构到基于SOA的架构的迁移。</p>
<p class="translated">New Stack @ Scale 是我们的月度播客，由New Relic赞助，研究伴随动态服务和系统的各种问题。</p>
<p class="translated"><br/> <span class="media-direct-link"> <a href="https://thenewstack.simplecast.com/episodes/show-5-devops-and-managing-scale" class="ext-link" rel="external ">显示5:开发与管理规模</a> </span></p>

<p class="translated">Nguyen在Bleacher Report的故事始于2007年，当时每月有大约50，000名独立观众。</p>
<p class="translated">“在那个时候，50，000 uniques不是一个小数目，”威廉姆斯说。“那你是怎么做到的？”他问。</p>
<p class="translated">“非常混乱，”阮承认。“我的任务是建立一个工程团队，建立一个网站，而创始人却在那里试图获得风险投资。”</p>
<p class="translated">“当时，我们位于澳大利亚一家名为RimuHosting的公司的一台小型虚拟机上，”他说。“每天晚上，大约午夜时分，他们会重新启动系统，这将使我们的网站瘫痪大约30分钟。直到<a href="https://www.pingdom.com/" class="ext-link" rel="external "> Pingdom </a>出来我才真正知道这件事。然后Pingdom出来了，我连接了它，每天晚上，我都会在半夜收到一个页面。因此，我们很快解决了这个问题，并搬出了里穆霍斯汀。”</p>
<p class="translated">“有50，000个uniques，这是很大的规模，不算小，但还没有达到这样的规模，也不需要我们现在拥有的高可用性需求，”他说。“我和几家公司谈过，我相信Rackspace是其中之一。我当时交谈的另一家公司是Engine Yard，Engine Yard当时是一家初创公司——他们自己的冒险和他们自己的旅程恰好与我们的完全重合。”</p>
<p class="translated">Nguyen甚至不记得当时正在运行的博客软件Bleacher Report的名称，“但是，他们用这个可怕的软件获得了50，000个uniques。他们不得不将开发团队外包出去，我最终雇了几个人，把它带到了公司内部。”</p>
<p class="translated">“我们刚刚运行了这个类似WordPress的小博客，并开始开发网站的Rails版本。今天，我们仍然在Rails上运行面向用户的站点，但是有了不同的组件。它不再仅仅是一个大的组成部分——这是一个漫长的旅程，”他回忆道。"不管怎样，我们从一个大型的整体式Rails应用程序开始——这就是Rails 0.2天."</p>
<p class="translated">Nguyen说，一个挑战是一个列出常见可搜索网站标签的页脚，但它被证明包含“一个产生560个左右查询的Ruby循环”。“我把它减少到一个，然后缓存起来，然后突然每个人都喜欢，‘哦，哇，我们的网站真快。’"</p>
<p class="translated">艾奇逊也记得早期的铁路时代。“Rails非常适合快速、方便地启动和运行应用程序。但是高效？没有那么多。不是因为Ruby，而是因为它在优化SQL查询方面做得非常非常差，尤其是在早期。”</p>
<p class="translated">“这通常可以归结为非常简单的事情，”阮解释说。"你找出瓶颈，然后解决它们."</p>
<p class="translated">“这需要一些经验，”他继续说道。“我希望有一所职业学校来做这件事。我希望有一本书。我希望有一个会议。但不幸的是，你必须通过流血、流汗和流泪来学习。”</p>
<p class="translated">“我记得Ruby的基准测试是每秒40或50个请求。Python也在那里；Perl也在那里；PHP也在那里，”他说。</p>
<p class="translated">“所以，我只想重申这一点，Ruby本身并不慢，它只是取决于你想做什么，”他断言。“这取决于你想解决什么问题。先问那个问题；退一步，环顾四周。”</p>
<p class="translated">那么Bleacher Report在他们开始规模化的时候看到了什么？“我们需要扩张，我们需要建立一个销售团队，我们需要建立组织的其他部分，”阮说。“我们需要更多的数据来做出正确的决策。因此，我们开始在内部建立一个分析平台，因为谷歌分析无法处理我们试图做的事情。因此，我们开始分解应用程序，因为在Ruby on Rails应用程序中构建大数据收集器没有任何意义。”</p>
<p class="translated">“这大约从2009-2010年开始，”他继续说道。"那时我们有一个三人小组，最终，我们有了六个人。"</p>
<p class="translated">“我们的转变并不是从平台开始的，真的。我们对我们的组件进行了一些拆分，将其分为一个数据收集应用程序和一个内部分析工具。我们没有做Java他回忆道:“那时我们做了辛纳特拉。</p>
<p class="translated">“我们看了数据。我坐在那里，新的遗物，分析吞吐量通过我们的网站。吞吐量向我表明，我们的大多数请求实际上不是web请求；我们的大多数请求是API请求，交付JSON有效负载的只读API请求，大约70-80%的时间。所以，把你的时间和精力放在那个组件上是非常有意义的。所以，这就是我们决定要做的。”</p>
<p class="translated">“我们决定将Bleacher Report分成两个主要项目:主要的Bleacher Report monolith，它仍然做大多数事情，然后是API请求，它服务于我们吞吐量的70-80%，”他说。“这将是一个只读服务，它今天仍然存在。这件事极大地帮助我们扩大了规模，只需做出决定，我们应该如何打破这种局面。”</p>
<p class="translated">“我们没有立即完全采纳所有理想化的SOA原则，”他说。“还是那句话，这取决于你在哪里，你的公司在哪里，你的工程团队如何，以及各种各样的变量。”</p>
<p class="translated">“New Relic采取了非常相似的方法，”Atchison说，“在我们如何从我们的整体Rails堆栈转移到我们今天拥有的分布式系统中。”</p>
<p class="translated">“我们接受数据，将其转换成Java，这是我们第一个真正的服务。但从那时起，我们已经建立了一个完整的基础设施，一个完整的服务生态系统，因为我们一直在试图分离和分解这个单片Rails应用程序，”艾奇逊说。</p>
<p class="translated">“一个团队为了实现这一目标所承担的责任已经发生了很大的变化。现在你的开发团队担心规模，你的开发团队担心需要运行多少服务实例，它们应该在哪里运行，以及可用性问题，”他解释说。"你开始将这些额外的责任视为开发团队在许多方面的负担."</p>
<p class="translated">“它创造了一个环境，在这个环境中，您可以建立一个能够围绕扩展应用程序进行扩展的组织，”Atchison说。“从应用程序的流量角度谈论应用程序的扩展是一回事，但应用程序本身也是从它有多大、它在做什么、它提供的功能等角度来扩展的。”</p>
<p class="translated">“这种规模也可能是一个问题，”他说。“因此，这种向服务的转移可以缓解这种情况，因为你最终会创建一个更好的模型，在这个模型中，应用程序的一部分归各个团队所有，各个团队之间有很强的界限和障碍，以便在团队之间提供可靠的API和可靠的[服务级别argreements]。”</p>
<p class="translated">Nguyen和Atchison一致认为，扩展挑战似乎永远不会结束。“你解决了哪个问题并不重要，”Nguyen说，“它会以不同的方式，在不同的背景下重新出现。你只要坚持下去。”</p>
<p class="translated">“这些年来，我经历了从一项服务到，比方说，五项服务，八项服务，再到20项服务的转变，”他说。"所以，我们的橡皮筋也开始变得乱七八糟."</p>
<p class="translated">“很多人看到这种情况后会说，‘我喜欢组织事情，这是不对的，我感到不安。’但是你需要接受它。引用阿德里安·科克罗夫特的话来说，这实际上是互联网的模式。互联网实际上是一个非常有弹性的网络。但是互联网的问题是，你不可能描述所有的互联性，”Nguyen说。</p>
<p class="translated">“我不知道谷歌什么时候部署。我不知道雅虎什么时候部署，或者脸书什么时候部署，但它确实有效，”他总结道。“它之所以有效，是因为一般来说，你授权这些公司，或者像AWS一样授权这些小的、只有两块披萨的团队，来运营和拥有整个堆栈。”</p>
<p class="translated">“我只是想解决Bleacher Report的问题，它有大约20种不同的服务。为了做到这一点，我不需要一个检查互联网上每一件事情的一致性猴子。我不想成为政府。所以，我只打算把重点放在Bleacher Report的问题上。“我们的问题很大，”他说，“你所要做的就是建立系统来自动化这个过程。你不能用简单的流程和人来对抗他们。这是流程、人和自动化的结合。”</p>
<p class="attribution translated">新遗迹是新堆栈的赞助商。</p>
<p class="attribution translated">特征图片:<a href="https://www.flickr.com/photos/120600995@N07/14125947172/" class="ext-link" rel="external ">蛇与梯子</a>由<a href="https://www.flickr.com/photos/120600995@N07/" class="ext-link" rel="external ">杰奎琳·布朗</a>制作，授权于<a href="https://creativecommons.org/licenses/by-nd/2.0/" class="ext-link" rel="external "> CC GA 2.0 </a>。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>