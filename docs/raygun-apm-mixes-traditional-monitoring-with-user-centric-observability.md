# Raygun APM 将传统监控与以用户为中心的可观察性相结合

> 原文：<https://thenewstack.io/raygun-apm-mixes-traditional-monitoring-with-user-centric-observability/>

如何管理复杂的自行编排的微服务集群，而不使您的 DevOps 团队信息过载？随着现代应用程序建立在新的架构之上，我们解决的每一个老问题都会发现新的问题。这就是新一代应用程序性能监控(APM)工具发挥作用的地方，它将以客户为中心的应用程序可观察性与深度应用程序集成相结合，从而快速找到用户问题的根本原因。

APM 市场的新进入者正在使用可观察性的概念来更好地管理和洞察这种复杂性。APM 的可观察性意味着理解数据的深度，揭示可能观察到的异常模式的潜在原因。它还鼓励开发人员友好的方法——让越来越多地参与监控和操作任务的开发人员能够访问和轻松理解数据。

这款专为混合云时代打造的新一代监控和可观察性工具将全栈开发人员对应用及其底层基础设施的了解与由此带来的客户体验联系起来；帮助团队做出更好的运营决策，确定需要做什么以及何时做。此类工具提供了从最终用户到业务线软件的堆栈的可见性和洞察力，跨云工作并基于微服务构建。

## 新的市场进入者

APM 市场正在增长，工具来自各种各样的供应商，包括 IBM、微软和甲骨文这样的开发巨头以及 CA Technologies、Dynatrace 和 New Relic 这样的市场领导者。 [Gartner 预测](https://www.gartner.com/doc/reprints?id=1-4M8HYQA&ct=171214&st=sb)到 2021 年，企业将使用 APM 工具监控 20%的应用，而 2017 年这一比例为 5%。随着思科 2017 年收购 AppDynamics，也出现了整合。

但是在 APM 中有很多复杂性，从向应用程序添加监控代码，到解释常用的性能瀑布图。传统的 APM 工具提供了大量信息，但它是为运营团队而不是开发人员的需求量身定制的，这使得从报告到重构代码变得很困难。

监控工具现在已经到了一个转折点，我们开始从测量和监控转向了解我们在复杂的、自我编排的系统中观察到的事件对客户的影响。例如，Honeycomb.io 不谈论测量或监控，而是将其资源用于解释可观测性和讨论其上下文。Blue Medora 认为，数据是多维的，而不是平面的，性能指标必须包括上下文，才能通过它所描述的 it 监控集成服务真正提供洞察力。 [Raygun 的应用性能监控(APM)](https://raygun.com/platform/apm) 用于。NET 应用程序(很快会有进一步的语言支持)采用一种混合的方法来处理问题报告——将传统的监控工具与现代的可观察性实践相结合。

“我们分析跟踪数据，然后建立一个问题列表，”[ray gun 首席执行官 John-Daniel Trask](https://twitter.com/traskjd) 说。Raygun APM 没有生成一长串的问题，而是收集了数千个错误或潜在性能问题的实例，并专注于代码级别的潜在根本原因。

APM 的根源在于它提供警报的工具。只要警报不会让系统过载，不会开始制造自己的问题，比如误报，那么它们就很棒。这种方法提供了系统整体健康状况的视图，以及它为什么以这种方式运行的原因。

“我们看到 APM 有很多图表，人们必须建立不同的警报和类似的东西，我们想，‘你知道，一定有更聪明的方法’”，Trask 说。其结果是一个基于收件箱的方法，表面的问题，可以很快得到改善。一旦某个问题被标记为已解决，只有当它再次出现时，才会提醒开发人员。

可观察性提供了对代码的深入了解，突出了瓶颈和其他对性能的影响，并从用户的角度给出了性能的端到端视图。系统工程师和作者 [Cindy Sridharan 的描述](https://medium.com/@copyconstruct/monitoring-and-observability-8417d1952e1c)指出:“可观察性是监控的超集，结合了警报/可视化、分布式系统跟踪基础架构和日志聚合/分析，以提供对 IT 系统健康状况的更好的可见性。”

## 构建以用户为中心的 APM

基于错误报告和诊断的背景，Raygun 在 2015 年增加了[真实用户监控](https://raygun.com/platform/real-user-monitoring)。Trask 将错误报告描述为“就像有一个黑匣子飞行记录器”，这有助于了解为什么你的软件会出问题。真正的用户监控是非常不同的，正如 Trask 所说，“这就像试图理解航空公司的评级，我实际上想和谁一起飞？是谁给了我出色的表现？”

以客户为中心很有意义。如果用户无法完成交易，是应用程序的设计问题、性能问题还是后端服务问题？重要的不是整体服务表现如何，而是它是否以支持用户和业务的方式表现。失败的交易并不意味着一次操作失败，它意味着你失去了一笔销售，一个失望的客户不太可能回来。当只有一小部分事务失败时，您可能不会优先修复潜在的问题。但是，当这一小部分与大型购物车或特定国家的特定用户相关联时，解决这个问题会有很大的好处。

这一关注导致 Raygun 的下一步，即开发 APM 工具，于 2018 年底推出。客户要求在现有的 Raygun 工具上添加一些东西，以报告软件问题的方式为基础。帮助企业识别和修复目录中过期数据的 Hyperfish 是[的客户之一。](https://raygun.com/customer-stories/hyperfish)

“让我们的工程师能够随时使用遥测技术和工具非常重要。当闹钟在半夜响起时，我们需要很快知道它是重要的事情还是可以等待的事情。如果重要的话，软件中发生了什么。Hyperfish 的首席技术官和联合创始人克里斯·约翰森说:“我们能够做到这一点，是因为有了像 Raygun 这样的工具。

最初的支持是。NET 和 Azure 应用服务。NET Core、Ruby 和 Java 支持将持续到 2019 年。这是一组平台，应该涵盖最常见的现代开发用例。

在 APM 中采取以客户为中心的方法非常重要，因为您正在努力解决客户问题。如果一个进程阻塞了购物车中 15%的时间，随着时间的推移，您可能会损失大量的销售额。将这些信息构建到 APM 中是至关重要的:它允许您对问题进行优先级排序，并关注如何使服务更好地为其用户服务。Trask 将其描述为帮助工具传递价值，

“Raygun 会说，‘这是实际遇到问题或经历不愉快的用户数量’，但更进一步，他们甚至可以附上关于这些用户是谁的元数据。所以他们可以说，‘看，这是我们真正有问题的客户。’”Trask 说。

## APM Plus 可观测性

这是一种将熟悉的测量和监控工具与现代可观察性范例相结合的方法，在这种方法中，单个事件的健康或客户的体验与系统的健康一样重要，甚至更重要。这种方法是 ray gun APM 工具的核心；提供了一种理解事情发生原因的方法，以及如何降低再次发生的风险。将传统监控与可观察性相结合，可以更容易地将新方法引入开发人员和运营工作流。

其他 APM 供应商继续专注于测量性能和寻找代码中的瓶颈，而不是了解这些问题对用户体验有什么影响。选择加倍关注可观察性是为现代分布式应用提供有效操作策略的关键。虽然 AppDynamics 和 New Relic 等工具开始增加对微服务监控的支持，但它们仍然专注于解开和管理整体应用程序。

交付有效 APM 的关键是收集和管理大量数据，并将其交付给需要它的所有业务部门。IDC 负责 IT 基础设施和云实践的副总裁 Steven Elliot 称之为“一个有价值的实时运营数据的巨大来源，[…]一个企业管理方式的平视显示器。”这种模式很好地映射了 Raygun 以客户为中心的方法，以及在未来版本中使用机器学习技术对数据进行优先排序的意图。

给开发人员工具来理解他们代码中问题的影响，也开始打破组织内部的壁垒。当开发人员需要与他们产品的业务所有者合作时，这很重要。能够让有问题的客户知道自己的名字有助于企业保护重要客户。类似地，如果销售团队收到来自客户的问题报告，开发人员可以深入特定事务的记录，以了解可能的性能问题。

## Raygun 的现代工具包路线图

将 APM、崩溃报告和真实用户监控整合到一个可观察性和性能工具包中不会马上发生，但这是 Trask 产品套件的目标。

Trask 说:“我们已经在我们的产品中全面采用了这一理念，不仅仅将工程师视为我们的客户，而是考虑他们如何使用我们的软件来使他们的软件更好地为他们的客户服务。”。

Raygun 的 APM 工具和其他 APM 包的另一个关键区别是它的定价。一般来说，APM 工具是按服务器定价的。这种方法适用于为固定基础设施设计的传统应用程序，服务器数量固定。然而，这导致了云原生架构的问题，云原生架构可以自动扩展，按需部署新的容器实例。传统的计费模式会显著增加成本，同时运行数千个实例。相反，Raygun 使用按跟踪计费模式来降低成本。正如 IDC 的 Elliot 指出的，“最终，分析的目标是增强和加快问题的识别和解决。”让数据变得经济实惠只会有助于实现这一承诺。

同样的模型可以用来支持无服务器工具，在 Azure Marketplace 中有一个扩展来处理 Azure 网站中的自动缩放。集成是 Raygun 工具的一个关键元素，它链接到常见的开发工具和平台，如吉拉和 Slack。通过您的源代码控制环境，您可以直接从一个错误找到相关的方法。Trask 认为这是未来发展的一个关键领域，也是与其他应用指标来源整合的一个关键领域。

“我们还将开放更多的 API，让 Raygun 的数据进入其他系统，”他说。“我们已经有一些这样的 API，但是扩大它的可用性肯定会是一个胜利。我们将密切关注“功能即服务”等产品，看看我们能否在这些产品上支持 APM。”

在快速增长的市场中，Raygun 的工具是一个有前途的新进入者。云友好的定价模式和以客户为中心的方法可以很好地理解性能问题，尤其是在管理和监控典型的云应用程序时。与通用开发工具的集成也应该有助于 uptake，无论是在开发人员和运营社区，还是在寻求更深入了解其应用程序和用户的业务团队。

在这个播客中，Hyperfish 的联合创始人兼首席技术官克里斯·约翰森解释了他们如何使用 Raygun 实现云原生监控。

[征伐恐怖的云原生监视](https://thenewstack.simplecast.com/episodes/conquering-the-terror-of-cloud-native-monitoring)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>