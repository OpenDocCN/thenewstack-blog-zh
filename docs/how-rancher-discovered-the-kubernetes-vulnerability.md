# Rancher 是如何发现 Kubernetes 漏洞的

> 原文：<https://thenewstack.io/how-rancher-discovered-the-kubernetes-vulnerability/>

[事情很难看，但牧场主反击了](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back)

最近的 Kubernetes 漏洞( [CVE-2018-1002105](https://github.com/kubernetes/kubernetes/issues/71411) )的麻烦始于几年前，远在本月早些时候公开之前。2016 年，Rancher 用户抱怨他们在 Rancher 1.6 和[亚马逊的 ALB](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html) 发布时遇到的神秘错误信息和设置失败。最近，社区在八月份开始经历[与](https://github.com/rancher/rancher/issues/14931) [Rancher 2.1](https://github.com/rancher/rancher/wiki/Rancher-2.1) 类似的问题。

“这是一个相当低风险的漏洞，因为很可能有其他保护措施来保护你免受攻击，但总的来说，我们与 Kubernetes 社区的其他人合作来识别它，推出它，向每个人推出补丁，事情按预期的方式发展，”联合创始人兼销售副总裁 Shannon Williams 说。“我们鉴定了它。直到推出修复程序之前，它一直保持安静，然后每个人都有能力在上周真正快速地打补丁。”

在 kube con+CloudNativeCon North America 2018 的创始人兼主编 Alex Williams 主持的播客中，Williams 描述了 Rancher 的行动过程，以及在社区的帮助下，它如何堵塞了 Kubernetes 的安全漏洞。

香农·威廉姆斯说，风险的核心是如何通过利用漏洞“你可以获得你的特权并将其升级为管理员”。“大多数人都受到了保护，因为通常情况下，负载平衡器可以确保这种流量不会通过，并且漏洞不会被利用，”Williams 说。“但它就在那里，对于任何没有使用这种负载平衡器的人来说，肯定有风险。”

如上所述，Rancher 在几年前使用 Rancher 1.6 和 Amazon 的 ALB 发现了一些不寻常的活动。“这是一种搁置，我们没有注意到的东西，然后可能两个月前，突然，它重新浮出水面，”威廉姆斯说。“我们在 Kubernetes 上的 Rancher 2.0 中再次看到了它，一旦我们看到它，我们就想，‘你知道，那个 bug 不应该仍然存在于 ALB 中。ALB 现在相当稳定。因此，我们深入调查了一下，发现实际上存在一个潜在的漏洞，人们可以提升他们的权限。"

在没有低估 CVE·CVE-2018-1002105 带来的安全风险的情况下，威廉姆斯表示，该漏洞是一个“相当低风险的漏洞，因为很可能有其他保护措施来保护你免受攻击。”

“但总的来说，对我们来说，与 Kubernetes 社区的其他人合作来识别它，推出它，向每个人推出补丁，事情按照他们应该的方式工作，这种体验真的很棒，”Williams 说。“我们鉴定了它。在推出补丁之前，它一直保持安静，然后上周每个人都有能力快速修补。”

Williams 说，社区遵循了修复漏洞的典型路线，即发布补丁，并以“不同于任何其他开源项目的方式发布消息，在其他开源项目中，社区识别漏洞，并假设它是由某个非恶意的人识别的，它将在整个过程中逐步升级”。

“我们看到的是，每个人都非常认真地对待它。许多工程师致力于解决这个问题，一旦有补丁可用，通知就会非常有效地发送给每个人，”威廉姆斯说，“当我们发现它时，我们在 Rancher 中放置了一些东西来防止它，以确保它被阻止。因此，我们的客户已经受到了保护，但当补丁发布后，我们为他们提供了一个非常简单的机制来升级他们的部署，所以你知道，他们只需滚动和升级，他们就可以使用最新版本的 Kubernetes。”

[https://www.youtube.com/embed/PxcCUj262go?feature=oembed](https://www.youtube.com/embed/PxcCUj262go?feature=oembed)

视频

### 在这个版本中:

[1:23:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=1:23) 您对我们上周看到的 Kubernetes 漏洞的看法。
[3:43:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=3:43) 当你看到数据包被丢弃时，你的第一轮检查是什么？
[8:41:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=8:41) 这对于你来说是第一个 Kubernetes CVE 漏洞意味着什么？
[14:08:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=14:08)Rancher 的开发者体验和 Kubernetes 提供的内置体验。
[17:56:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=17:56) 随着 Kubernetes 的发展，不断变化的复杂性和实践。
[20:39:](https://thenewstack.simplecast.com/episodes/it-was-ugly-but-rancher-fought-back?t=20:39) 欣欣向荣的工具生态系统及其持续的成熟和巩固。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>