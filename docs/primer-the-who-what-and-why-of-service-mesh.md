# 初级读本:服务网格是谁，是什么，为什么

> 原文：<https://thenewstack.io/primer-the-who-what-and-why-of-service-mesh/>

如果你听说过服务网格——也许你已经注意到 [Istio](https://istio.io/) 似乎无处不在——你可能想知道你是否需要一个服务网格。从 Envoy 的创建者到 Tetrate 和 Aspen Mesh 的领导者(他们正在为技术分析师建立服务网格支持公司),这里有一个每个知情人都同意的信息:如果你对服务网格感到疑惑，你不需要它。句号。如果您已经达到了需要服务网格的规模和微服务成熟度级别，您将会积极地(也许是不顾一切地)寻找解决方案，服务网格的必要性将会非常明显。

“我认为我们有一种追逐闪亮物体的倾向，在某种意义上，X 公司做 Y，因此我必须做 Y，即使我没有 X 公司的任何问题，”开放服务网[特使](https://www.envoyproxy.io/)的创造者[马特·克莱恩](https://www.linkedin.com/in/mattklein123/)解释道。

服务网格解决了合理的问题——我们马上就要讨论这个问题。大多数公司都不会遇到这些问题，直到他们都在开发一个成熟的微服务架构，并且足够大到雇佣至少几十名开发人员。“这样的公司实际上是规则的例外，”技术分析师汤姆·佩特罗塞利解释道。“一般的银行没有大规模的集群。”

但是，虽然大多数公司现在不需要服务网络，但 Petrocelli 认为这是一个即将膨胀的市场，因为他认为在未来几年，拥有成熟的容器化应用程序的大规模公司的数量将大幅增加。

那么什么是服务网格呢？它解决什么问题？

## **可观察性、弹性和安全性**

服务网格是在大规模容器化应用程序中增加可观察性、弹性和安全性的一种方式。Tetrate 的首席执行官和 Istio 的创始人之一 [Varun Talwar](https://twitter.com/varungyan?lang=en) 解释说:“使用服务网络的部分吸引力在于你可以集三者于一身。

Talwar 解释说:“每个服务中都需要实现许多通用功能，比如监控、记录事件、跟踪请求、执行和加密所有出站呼叫、将流量路由到服务。在服务网格中，sidecar 代理连接到每个服务，并处理每个服务需要的所有这些标准功能。它被称为“网格”,因为 sidecar 代理处理应用程序中服务之间的所有通信，创建服务的网络“网格”。

有了 sidecar 代理处理所有普通任务，开发人员不再需要将这些功能编码到服务中。这让开发人员有时间从事其他工作。更重要的是，大型组织不再需要依赖单个开发人员来确保通信被正确加密、安全证书被轮换或日志记录被正确设置。控制平面提供的可观察性还使得调试通信问题以及获取通过合规性审计所需的信息成为可能。 [Aspen Mesh](https://aspenmesh.io/) 的首席技术官[安德鲁·詹金斯](https://www.linkedin.com/in/andrewjenkinsengineer/)解释道:“应用程序开发人员希望专注于业务逻辑，也就是让业务赚钱的东西。“他们不想一遍又一遍地实现证书轮换。服务网格意味着你只需要做一次，它就是你基础设施的一部分。”

服务网格由两部分组成:数据平面和控制平面。数据平面实际上实施服务网格并执行实际的流量路由，而控制平面具有用户界面，您可以在这里为数据平面设置策略，并通过它获得可观察性。

在某些情况下，服务网格的数据平面和控制平面组件是分离的，例如 Envoy(由 CNCF 托管的数据平面项目)和 Istio(由谷歌创建的使用 Envoy 但不由 CNCF 托管的控制平面项目)。詹金斯解释说:“你不能混合和搭配任何东西，但确实有一些混合和搭配在进行。”。 [Linkerd](https://linkerd.io/) ，另一个主要的开源服务网格选项，同时包括数据平面和控制平面。服务网格生态系统中的其他玩家包括 [Nginx](https://www.nginx.com/) 、 [Solo.io](https://www.solo.io/) 和 [HashiCorp 的 consult](https://www.consul.io/)。

公司处理创建处理通信和可观察性的标准化方法的另一种方式是通过客户端库。对于只使用一种或两种语言的小型应用程序，这可能是一种更简单的方法，可以确保所有的安全性、日志记录和通信代码始终以一致的方式包含在每个服务中。然而，在真实的企业场景中，服务是用多种语言编写的，这种技术很容易出问题。

## **服务网的未来**

“我认为最终你会在大多数应用中看到服务网格，”技术分析师 Petrocelli 解释道。“我无法想象一家银行实施基于集群的架构却没有服务网络。那太疯狂了。不仅仅是为了路由，而是为了网络层的加密和可观察性。”

随着越来越多的大型企业转向成熟的容器化系统，他们将寻找一个服务网格来保持这些应用程序的安全性和合规性。同时，记住服务网格技术仍然相当不成熟也是一个好主意。尽管 Envoy 基本上已经可以投入生产，但要正确启动和运行它仍然相当困难。另一方面，尽管谷歌做出了巨大的推广努力，Istio 还没有做好生产准备——这是 Petrocelli 和 Istio 的创造者 Talwar 都同意的事实。

随着服务网格变得越来越普遍，他们必须找到一种方法来解决各种问题，如如何安装升级，如何在多个部署中管理多个网格，以及如何解决学习曲线问题，包括成功的实施需要开发人员和网络工程师之间进行更多的合作，而这种合作在大多数公司中并不常见。

塔尔瓦解释说:“在服务网络方面还有很多工作要做，现在还为时尚早。”。“大多数人都在谈论价值，并明显被价值所打动，这很好，但仍有一些挑战需要解决。”

Aspen Mesh 是新堆栈的赞助商。

图片来自 Pixabay 的免费照片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>