# 工程经理需要问团队的 7 个可靠性问题

> 原文：<https://thenewstack.io/7-reliability-questions-engineering-managers-need-to-ask-their-teams/>

[新遗迹](https://newrelic.com/)赞助本帖。

 [马修·弗莱明

Matthew Flaming 在它有名字之前就开始做 DevOps，编写分布式 Java 系统，并在 90 年代末的初创公司中安装托管这些系统的服务器。他参与了从物联网云运行时到大规模数据平台的 SaaS 软件的设计和实施。目前，他是 New Relic 网站可靠性的副总裁，专注于 SRE 的实践以及规模和可靠性的技术、运营和文化方面。](https://newrelic.com/) 

这里有一个任何工程经理都会同意的说法:可靠性是复杂的。

现代软件团队面临着不断发展的体系结构的服务类别和层次上的边缘案例和变化。在带领团队进行日常消防工作的过程中，很难只见树木不见森林。但是作为管理者，我们知道我们的团队面临着相似的考验:缺陷和倒退、能力问题、运营债务和危险的工作负荷影响着我们所有人。

然后是规模的复杂性，这是我们第一手了解的。 [新的遗迹平台](https://newrelic.com/products) 包括 300 多种独特的服务和数 Pb 的 SSD 存储，每分钟处理至少 4000 万个 HTTP 请求，写入 15 亿个新数据点，处理数万亿个事件。该平台由 50 多个敏捷团队维护，每周执行多个产品发布。为了应对如此大的规模，工程团队必须灵活快速。他们的经理还必须确保他们的团队遵守支持这种复杂性和规模的可靠性流程。那么我们在新遗迹怎么做呢？

New Relic 的工程经理使用以下七个问题来确定他们的团队(或服务)是否符合我们可靠性最佳实践的基本要求。阅读它们，问问你自己:你的团队怎么样？

这些要考虑的问题也遵循 [下我们的指南](https://blog.newrelic.com/engineering/best-practices-for-setting-slos-and-slis-for-modern-complex-systems/) 为现代复杂系统 设置服务水平指标(SLIs)和服务水平目标(SLOs) [的最佳实践。在 New Relic，定义和设置 sli 和 SLO 也是我们站点可靠性工程(SRE)最佳实践的一个日益重要的方面。](https://blog.newrelic.com/engineering/best-practices-for-setting-slos-and-slis-for-modern-complex-systems/)

### 问题 1。你的部署和回滚是防弹的吗？

无论您是每月部署一次还是每小时部署一次，健壮而快速的部署和回滚工具对于运行可靠的软件都是至关重要的。您是否愿意在一周内每天都进行部署，并回滚至少一半的部署，以确保您的部署工具按预期工作——并让您团队的任何成员来做这件事？

如果您的答案是“不”，要么是因为您对您的工具不自信，要么是因为您有太多的辛劳，是时候在排练、部署或优化您的工具时投入更多的团队资源了。

### 问题 2。你最近参加过比赛日吗？

您的团队在快速 [解决事件](https://blog.newrelic.com/engineering/on-call-and-incident-response-new-relic-best-practices/) 方面的效率完全取决于准备。比赛日——在此期间，你将有害问题引入你的系统，看看你的团队如何解决它们——是测试团队运营服务流程的最佳方式。比赛日也有助于确保警报和仪表板得到正确配置。当你的团队增加一项新服务时，比赛日尤其有用，同时比赛日也是培养新团队成员和训练他们团队合作方式的好方法。

如果你在加入新的服务或团队成员后没有进行过比赛日，那你就过期了。具有讽刺意味的是，如果您的团队不经常遇到关键问题，这一点尤其正确——您遇到的事件越少，就越容易脱离实践。

### 问题 3。在全面生产推广之前，您能可靠地捕捉到回归吗？

您的团队是否准备好在客户看到回归之前，或者在回归影响超过 10%的客户之前，可靠地捕捉它们？

在将新代码或代码变更部署到生产环境之前，您团队的生产前环境应该准备好工具来捕捉主要缺陷、配置错误和重大性能退化。但是在现实中，预生产测试永远不可能抓住所有的事情，尤其是在大规模生产的时候。

为了限制任何进入生产的缺陷对客户的影响， [现代软件团队](https://blog.newrelic.com/technology/modern-software-company/) 经常在他们的部署过程中使用金丝雀或特性标志。金丝雀或特征旗也使事情出错时更容易快速反应；部分回滚往往比完全重新部署更快、更安全。部分回滚也降低了 [大规模重启问题的风险。](https://en.wikipedia.org/wiki/Thundering_herd_problem)

让您的团队研究使用这些类型的部署所需的技术或流程变更，并尽可能地为他们提供减少采用这些工具的摩擦的途径。

### 问题 4。你上次更新风险矩阵是什么时候？你有吗？

一个 [风险矩阵](https://en.wikipedia.org/wiki/Risk_matrix) 让你的团队清楚地了解你的软件中可能发生事故的区域及其潜在的严重性。本质上，它们是识别高可能性/高影响场景的关键方法，您应该在这些场景变成事故之前优先处理它们。风险矩阵还可以帮助您的团队确定哪里需要警报和事故操作手册，特别是对于具有中等或更高影响的事故。

因为您的系统总是在发展，所以重新审视您的风险矩阵以确保它们跟上发展是很重要的。你应该至少每八个月更新一次，但最好是在你添加新服务的时候。使用风险矩阵验证您是否有针对所有中等影响或以上风险矩阵条目的警报和操作手册。

### 问题 5。在您的每个服务层中，您有多少可用容量？

容量瓶颈是服务中断的主要原因，在没有足够可用容量的情况下运行会使您团队的系统更容易受到工作负载或延迟变化的影响，甚至会出现微小但明显的性能退化。

此外，您的团队是否有在线空闲容量的安全余量？在 New Relic，我们的可靠性专家建议团队拥有 30%的空闲容量，或足以覆盖他们拥有的每个服务 90 天的工作量增长。我们还确保为每项服务部署了至少 N+2 个冗余实例，即使它们不需要支持工作负载增长。重要的是要记住，你对自己能力的评估越不准确，你对自己的评估就越需要保守。不要忘记根据系统中的热点来测量可用容量，而不是平均值。

### 问题 6。你能防守限速吗？

你的团队准备好阻止一个坏人搞垮你的整个系统了吗？如果一些客户端开始生成太多的查询、发布或 API 调用，那么您必须能够有选择地减少或限制工作负载，这样您的服务才不会离线。

如果你的团队没有做好充分准备，你可能想投资自动过载保护。不过，至少，您的团队应该制定操作手册和手动控制措施，以减少您在事故期间无法处理的危险工作负载或数据。

### 问题 7。在接下来的 12 个月里，如果没有有意义的架构变化，您的系统能扩展吗？

在当今的现代软件架构中，伸缩拐点是最大的整体可靠性风险。达到转折点通常需要几个团队之间的大量工作或协作来解决问题。

与您的团队一起评估接下来的 12 个月。如果你认为没有架构或过程的改变你无法度过这一年，确保你所有的利益相关者都知道改变即将到来——并在为时已晚之前制定交付“必要工作”的计划。但是，在没有仔细定义之前，不要着手做“必要的工作”。

### 你表现如何？

如果你对这些问题中的任何一个回答“否”，请不要惊慌。但是也不要耸耸肩继续前进。

期望你的团队能够在一个季度甚至两个季度内正确回答所有七个问题可能是不现实的。但这不是放弃的理由。一步一步的改进，持续不断地进行，可以积累巨大的成果。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>