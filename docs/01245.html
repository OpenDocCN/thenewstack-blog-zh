<html>
<head>
<title>How the 'Y2K' Bug Returned on Jan. 1, 2020</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2020年1月1日“千年虫”是如何卷土重来的</h1>
<blockquote>原文：<a href="https://thenewstack.io/how-the-y2k-bug-returned-on-jan-1-2020/#0001-01-01">https://thenewstack.io/how-the-y2k-bug-returned-on-jan-1-2020/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">这在程序员中是不言而喻的——日期很难确定。世界上的程序员和系统管理员花费了数千亿美元来为人类从1999年过渡到2000年(“Y2K”)做准备，这是一项传奇的、基本上默默无闻的努力。但本月出现了新一轮与日期相关的故障，其中许多故障可以追溯到1999年执行的相同补丁。</p>
<p class="translated">或者像ZDNet <a href="https://www.zdnet.com/article/the-y2k-bug-is-back-causing-headaches-for-developers-again/" target="_blank" rel="noopener noreferrer external " class="ext-link">报道的</a>，“二十年前，一些开发者通过推迟到……现在来处理千年虫。”</p>
<h2 class="translated">1999年的幽灵</h2>
<p class="translated">简而言之，从1999年到2000年的变化在许多系统中不能正确地表示，因为在上个世纪编写这些系统的程序员给日期字段两位数(即“99”代表“1999”)而不是四位，从而节省了当时宝贵的内存空间。</p>
<p class="translated">一个解决方案涉及到一种叫做“开窗”的技术——根据一个硬编码的“关键年份”来确定两位数的年份属于哪个世纪。早在1999年，HPCWire就将其描述为“极具争议性”，引用一位专家的话说，使用该技术的计算机是“<a href="https://www.hpcwire.com/1999/03/19/common-y2k-quick-fix-last-decades/" target="_blank" rel="noopener noreferrer external " class="ext-link">等待爆炸的定时炸弹”</a></p>
<p class="translated">然而，据HPCWire报道，据估计，世界上80%的计算机都采用了这种解决所谓的“千年虫”问题的方法，因为另一种方法——将系统转换成包含日期的所有四位数字——需要进行繁琐的逐行修复。高德纳集团的研究员吉姆·杜根告诉他们，“这是一个创可贴，就像用木头和纤维板盖房子一样。你希望在它倒下之前，你已经在别的地方了。”</p>
<p class="translated">快进20年，伦敦经济学院的助理传播学教授Dylan Mulvin本月告诉《新科学家》，“即使在Y2K期间，<a href="https://www.newscientist.com/article/2229238-a-lazy-fix-20-years-ago-means-the-y2k-bug-is-taking-down-computers-now/" target="_blank" rel="noopener noreferrer external " class="ext-link">开窗也是所有可能的解决方案中最糟糕的</a>，因为它将问题一拖再拖。”但是顾问埃德·约尔登告诉HPCWire，这是一个有意识和务实的决定。“我们希望以正确的方式来做这件事……但我们没有时间，所以尽管这是一种快速而肮脏的方法，我们也别无选择。太可惜了。”</p>
<p class="translated">保罗·洛马克斯为沃达丰处理了千年虫问题，本月<a href="https://www.newscientist.com/article/2229238-a-lazy-fix-20-years-ago-means-the-y2k-bug-is-taking-down-computers-now/" class="ext-link" rel="external ">与《新科学家》</a>分享了他对在旧系统上工作的程序员的想法:“很明显，他们认为他们的系统到2020年将会长期闲置。就像60年代的人不认为他们的代码在2000年还会存在一样。"</p>
<p class="translated">Mashable的一份视频报告指出，20世纪60年代的内存成本<a href="https://mashable.com/video/wrong-about-y2k/" target="_blank" rel="noopener noreferrer external " class="ext-link">高达每比特1美元</a>——并计算出现代iPhone的4GB内存将花费320亿美元，“经通胀调整后为0.25万亿美元。”在那个世界里，只用最后两位数字来表示年份是有意义的。</p>
<p class="translated">到1999年，这种最初的心态变成了一个问题——但是窗口只是提供了一个临时的解决办法。2019年12月30日，退休的COBOL程序员拉里·麦克尼什(Larry McNish)在博客<a href="https://grumpyoldastronomer.com/y2kpivot.htm" target="_blank" rel="noopener noreferrer external " class="ext-link">中写道:“希望公司董事会高管当时意识到，使用关键年只是将他们的‘千年虫’问题推迟了几十年。”。“但随着人们退休、高管更替和公司合并，这样的信息往往会丢失。”</a></p>
<p class="translated">不幸的是，许多程序员认为2020年是合理的转折点。云平台提供商Fastly的工程师tatsu hiko Miyagawa<a href="https://www.newscientist.com/article/2229238-a-lazy-fix-20-years-ago-means-the-y2k-bug-is-taking-down-computers-now/" class="ext-link" rel="external ">告诉《新科学家》【that 2020年是1970年开始的世纪的中点——“Unix时间”开始计算已经过去的秒数。</a></p>
<h2 class="translated">Y2K年后</h2>
<p class="translated">因果总是很难确定——但2020年1月1日肯定有一些日期相关的问题。</p>
<ul>
<li class="translated">至少有一个推特用户抱怨说他们的保险公司发了一份日期为1920年1月2日的声明。</li>
<li class="translated">早在11月，Splunk就已经宣布，他们用于分析机器生成的大数据的软件的用户确实需要在1月1日之前安装最新的补丁，否则这些系统将变得“<a href="https://docs.splunk.com/Documentation/Splunk/8.0.0/ReleaseNotes/FixDatetimexml2020" target="_blank" rel="noopener noreferrer external " class="ext-link">无法识别日期包含两位数年份的事件的时间戳</a>”</li>
<li class="translated">开发者Rich Felker说<a href="https://twitter.com/RichFelker/status/1216736900628783104" target="_blank" rel="noopener noreferrer external " class="ext-link">他在测试网络时间协议的chrony实现时发现了一个日期相关的错误</a>。</li>
<li class="translated">甚至在职业摔跤视频游戏WWE 2K20中也出现了与日期相关的故障</li>
<li class="translated">考克斯电报<a href="https://twitter.com/lippard/status/1214258302298685440" target="_blank" rel="noopener noreferrer external " class="ext-link">显然发出了日期为1920年1月1日的账单</a>。</li>
<li class="translated">一位Perl博客作者还注意到，Perl的<a href="https://metacpan.org/pod/Time::Local" target="_blank" rel="noopener noreferrer external " class="ext-link"> Time::Local模块</a>中的<em> timegm </em>子例程——将时间转换为格林威治标准时间——会假设两位数年份在50年以内。“这很混乱，但符合人们目前对两位数日期的想法，”<a href="https://mojolicious.org/perldoc/Time/Local" target="_blank" rel="noopener noreferrer external " class="ext-link">解释了文档</a>，并补充道“只要有可能，就使用绝对的四位数年份。”所以在1月1日，这位博客作者发现了一个使用1970年的测试突然开始<a href="http://blogs.perl.org/users/tom_wyant/2020/01/my-y2020-bug.html" target="_blank" rel="noopener noreferrer external " class="ext-link">假设这一年是2070年</a>。</li>
<li class="translated">另一个开发人员报告了同一个模块的问题，在黑客新闻<a href="https://news.ycombinator.com/item?id=22045806" target="_blank" rel="noopener noreferrer external " class="ext-link">上写了一条评论“一些运行中的Perl开始返回奇怪的值，测试失败了。”</a></li>
</ul>
<p class="translated">但是有些故障比其他的更严重。《新科学家》报道称，波兰公司Novitus的数千台收银机无法打印收据。</p>
<p class="translated">市政府官员<a href="https://nypost.com/2020/01/06/nyc-wont-refund-drivers-impacted-by-y2k-like-parking-meter-glitch/" target="_blank" rel="noopener noreferrer external " class="ext-link">告诉纽约邮报</a>，一个与日期相关的故障也意味着纽约市的14000个停车计时器突然停止接受信用卡，尽管他们仍然坚持司机用零钱(或通过其官方智能手机应用程序)支付停车费。一位交通专员向该报抱怨说，这个故障“不是我们造成的”，尽管市政工人最终还是做了修复它的跑腿工作。《华盛顿邮报》报道称，“工作人员现在正忙着一个接一个地重新校准每一个电表。”。到1月6日早上，市政工人已经更新了9906个电表(近71%)，到本周晚些时候<a href="https://twitter.com/NYC_DOT/status/1214649047434309634" target="_blank" rel="noopener noreferrer external " class="ext-link">所有的电表都修好了。</a></p>
<p class="translated">对于总部位于桑尼维尔的Trimble公司来说，元旦也是一个大问题，Trimble公司出售PeopleNet电子记录设备，可以自动记录商用卡车的驾驶时间。该公司的一名前高管告诉Freight Waves网站，他交谈过的Trimble员工承认，一些设备的GPS系统时钟和服务器时钟之间存在差异，导致设备<a href="https://www.freightwaves.com/news/peoplenet-outage-a-2020-issue-former-trimble-exec-says" target="_blank" rel="noopener noreferrer external " class="ext-link">一次又一次地重启</a>。Trimble告诉该网站，其“一部分”客户受到了影响，并补充说，他们在1月1日当天结束前有一个软件更新可用。</p>
<p class="translated">至少有一名卡车司机告诉该网站，他已经回到了手工在纸上记录日志。“这让我想起了卡车运输的早期，”他说。“我想这对我的数学技能有好处。”</p>
<h2 class="translated">对补丁的赞美</h2>
<p class="translated">但是更重要的是什么事情没有发生——1999年也是如此。据英国广播公司报道，估计花费了3000多亿美元来准备千年虫问题——考虑到2000年1月1日发生的相对较少的混乱，这一努力基本上是成功的。</p>
<p class="translated">Mashable的视频称Y2K“可以说是对已经运行了几十年的全球计算网络的第一次大规模审计。”事实上，“9·11袭击后纽约市电信和交通的稳健性归功于为避免千年虫所做的大量工作。”</p>
<p class="translated">Mashable的视频指出，这个bug确实造成了一些后果——例如，韩国有1000台加热器停止工作，据报道，埃及的一些透析机也停止了工作。但是“2000年问题的持久寓意不应该是过度的恐慌，而是成功和必要的全球努力，以避免一个已知的问题。”</p>
<p class="translated">努力工作的程序员和系统管理员在潜在的故障发生之前就解决了它们，这一点已经成为历史。1999年元旦，一位名叫格雷姆·福勒的英国极客在英国广播公司关于千年虫的讨论页面上留下了一条评论，吹捧为准备这个bug所付出的巨大努力。“我们共同取得的成就相当惊人——整个事件没有发生任何爆炸，更像是呜咽。</p>
<p class="translated">“2000年问题不仅仅是炒作，尽管新闻界似乎希望如此。在大多数其他国家，人们会庆祝问题的解决……”</p>
<p class="translated">“一些程序员在这上面工作了很多年，”Y2K顾问和开发者Greg Sternberg本月告诉ZDNet。"坦率地说，他们是无名英雄。"</p>

<p/>
<hr/>
<h2 class="translated">WebReduce</h2>



<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>