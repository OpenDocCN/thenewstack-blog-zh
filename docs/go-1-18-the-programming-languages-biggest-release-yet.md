# Go 1.18:编程语言迄今为止最大的版本

> 原文：<https://thenewstack.io/go-1-18-the-programming-languages-biggest-release-yet/>

谷歌云对 Go 编程语言进行了新的更新，他们将其吹捧为该语言迄今为止最重要的版本——具有增强安全性和开发人员生产力以及提高 Go 性能的功能。

[史蒂夫·法兰克王国](https://www.linkedin.com/in/stevefrancia/)，谷歌云的产品&围棋战略主管，称今天发布的新更新——围棋 1.18——“具有里程碑意义”，并指出关键的新功能，包括对泛型的支持，是对全球数百万围棋开发者的巨大社区的功能请求的回应。

Go 1.18 中的关键更新包括前面提到的对泛型的新支持；法兰克王国说，fuzzing 将被集成到 Go 1.18 的标准工具链和 CPU 性能提高 20%以上。

停滞总是不好的，这同样适用于编程语言的新版本。星座研究公司的分析师[霍尔格·穆勒](https://www.constellationr.com/users/holger-mueller)说:“今天是 Go 语言的转折点，它获得了关键的新功能，最重要的是性能提升。“创新总是至关重要的，但它也意味着变化，Go 开发者社区将如何欣赏新版本仍有待定论。也就是说——Go 开发者对他们的语言非常专注和热情——所以反馈很可能是积极的。”

Go 于 2007 年由谷歌创立，旨在帮助开发者构建快速、可靠和安全的软件。这个目标保持不变，因为该语言保持六个月的发布周期。谷歌说，大约有 200 万围棋开发者。

## 仿制药的案例

“Go 语言有史以来最大的变化将在 1.18 中出现。法兰克王国在一篇博客文章中写道:“对于泛型来说，这一特定功能是过去 10 年来围棋中最受欢迎的功能。“我们真的很高兴能够为我们的用户提供它，让他们能够简化应用程序并提供更好的性能。”

[通用编程](https://en.wikipedia.org/wiki/Generic_programming)是一种计算机编程风格，其中算法根据稍后指定的类型来编写，然后在需要时实例化作为参数提供的特定类型。

“通过类型参数对泛型的支持允许 Gophers 增加他们代码的重用，” [Bryan Liles](https://www.linkedin.com/in/bryanliles/) ，VMWare 首席工程师，自称 [Gopher](https://go.dev/blog/gopher) 。“我已经看到了一些有趣的基于测试版的产品系列。仅这一项功能就能让 Go 在更多地方变得更有用，只需更少的输入。”

法兰克王国指出，事实上，泛型支持是最受欢迎的特性，也是这种语言诞生以来最大的变化。

“去年在我们的 Go 开发者[调查结果](https://go.dev/blog/survey2020-results)中，我们分享了那些认为 Go 缺乏关键特性的开发者，绝大多数人认为泛型是缺失的部分，”他在帖子中说。“有了 Go 1.18，新的和现有的 Go 开发者将能够利用泛型带来的生产力、性能和维护优势。我们已经开始看到 gophers 在短暂的测试阶段用泛型构建的新型库和项目，并期待这种创造力随着时间的推移而增长。”

大问题是，如果没有对泛型的支持，Go 用户就不得不显式定义每种类型，或者每种类型的行为，法兰克王国在接受新堆栈采访时进一步解释道。

“因此，考虑这个问题的一个简单方法是，如果你想写一个最小值函数——这是一个接受多个值并告诉你哪个值最小的函数，”他说。“你必须为整数写一次，为浮点数写一次。实际上，你必须为每一个整数和每一个浮点数写它。所以它最终会有一些重复的代码。”

然而这只是一个非常简单的例子。但是这个例子适用于很多领域，法兰克王国说。

“但是有了泛型的加入，你可以将所有的代码整合到一个特定的操作中，同时保留你从类型化语言中获得的所有安全性，”他说。“所以用户真的很期待能够有更多可读的代码。在许多情况下，更高性能的代码，具有 Go 一直提供的相同的[类型安全](https://en.wikipedia.org/wiki/Type_safety)。这对生产力来说是一个巨大的福音。这对性能是一个福音。”

## 工具链中的模糊

法兰克王国说，Go 1.18 的第二个重要里程碑是，它使 Go 成为第一个将模糊化纳入其标准工具链的主要编程语言。

“这将使我们能够让 Go 用户强化他们的应用程序，不仅是针对他们当前的代码库，甚至是随着他们的代码库的发展和依赖性的改变而提供保护，”他说。

法兰克王国在他的博客文章中解释道: [Fuzzing](https://thenewstack.io/fuzzing-old-testing-technique-comes-age/) 是一种漏洞测试，它向一个软件投掷任意数据以暴露未知错误，并正在成为企业开发中的一种常见测试方案。

现在，Go 是第一种无需第三方集成即可提供模糊支持的主要语言，允许开发人员以最小的开销开始构建更安全的软件。

Go 的模糊化方法为当前代码提供了额外的安全性，并随着代码和依赖关系的发展提供了持续的保护。

“随着对软件的攻击变得越来越普遍和复杂，漏洞检测是企业开发生命周期的重要组成部分，Go 的模糊化功能有助于简化这项工作，”法兰克王国写道。

Liles 曾说过 Go 是他最喜欢的编程语言，他也对这一新功能表示赞赏。

“不满足于一个巨大的功能，集成模糊测试需要一个新的水平，”他说。“边缘案例对于开发团队来说是一个巨大的问题。现在标准库支持在测试时生成输入来测试边缘案例。我以前从未见过编程语言中内置这种级别的支持，”Liles 告诉 New Stack。

“本地模糊化更进一步，成为真正领先的安全语言，”法兰克王国沉思道。

## 20%的性能提升和工作空间

与此同时，在苹果 M1、ARM64 和 PowerPC64 架构上使用 Go 1.18 的开发人员将获得高达 20%的 CPU 性能提升，这是因为 Go 1.17 的注册 ABI 调用约定扩展到了这些架构。

此外，谷歌表示，尽管 Go 模块几乎已被普遍采用，但在 2021 年的用户调查中，用户认为模块最常见的挑战是在单个回购中跨多个模块工作。Go 1.18 通过新的 Go 工作区模式解决了这一问题，这使得使用多个模块变得简单。

“一个较小的特性是引入了工作空间，允许在不修改`go.mod`文件的情况下更改模块参数。”Liles 说。"像这样的小的生活质量的增加将使得在团队中编辑代码更容易."

## 为什么用 Go 去？

也许 Go 最大的吸引力在于，它给开发人员带来了 Python 等动态语言的工作效率，C 和 C++等编译语言的性能，以及超越这些语言的安全性和稳定性。

“所以你会发现这对于开发者来说是一个真正的甜蜜点，在这里他们会感到富有成效，”法兰克王国说。“他们可以同时编写安全代码和性能代码。开发人员在开始使用 Go 时，会因为这三个原因而爱上它。”

## 云原生语言

谷歌是大规模编写软件的先驱之一，而 Go 是谷歌满足这种需求的语言。谷歌是大规模编写软件的先驱，无论是从跨大型团队协作编写软件的人数来看，还是从运行全球所有信息的程序的规模来看。

在追求这一目标的过程中，“我们发现了现有编程语言的挑战，”法兰克王国说。“特别是，它们不是为我们今天称之为云计算系统的现代多核系统而设计的。而且它们也不是为大群人分享而设计的。因此，这些语言通常写起来比读起来容易得多。对于 Go，我们非常重视支持并发性和跨多核系统的良好工作，非常重视网络和服务，非常重视可读性。Go 被广泛认为是最可读的语言之一。特别是泛型将会对可读性有更大的帮助。因此，我认为这使我们离最初的愿景更近了一步，即拥有一种语言，让编程再次变得有趣，并使它能够跨人跨系统地扩展。”

谷歌还指出，包括 Kubernetes 和 T2 Istio T3 在内的超过 75%的 CNCF T1 项目是用 Go 编写的，而在全球范围内，[有 10%的开发者 T5 是用 Go 编写的。Go 在最流行语言的堆栈溢出列表中排名第 14 位，在 2022 年顶级编程语言编码 Dojo 列表中排名第 8 位。有趣的是，去年 Go 甚至没有出现在编码 Dojo 列表中。](https://insights.stackoverflow.com/survey/2021#most-popular-technologies-language)

“我们的现代云基础设施以 Kubernetes 为核心，我们对 Istio 和 [Knative](https://knative.dev/docs/) 的大力支持形成了我们领先服务的基础，如谷歌 Kubernetes Engine (GKE)，我们的托管应用平台 Anthos，云功能和云运行，”法兰克王国写道。“谷歌广泛使用 Go 做各种各样的事情，从支持谷歌搜索的索引平台到支持 Chrome 1B+用户的服务器端优化，再到构建谷歌云的基础设施。”

## 安全是最重要的

法兰克王国说，fuzzing 的加入只是增加了谷歌的承诺，即鉴于对 Log4j T1 和 T2 heart bleed T3 漏洞的攻击，帮助保护组织的软件供应链。

他说，Go 旨在创建最安全的应用程序，尽可能降低风险。Go 应用程序编译成单一的二进制文件，没有任何本地依赖性。

法兰克王国写道:“Go 的依赖管理使用了行业领先的防篡改透明日志，内置工具可以确保你的依赖完全符合你的预期。”“Go 拥有原生加密技术，该技术被用于互联网的大部分领域，包括谷歌的关键组件。Go 甚至支持 distroless 容器，在那里不需要担心任何本地依赖。GCP、CI/CD 和 Artifact Manager 可以直接访问 Go 的漏洞数据库，并可以向您提供有关安全威胁的即时警告。”

基础设施副总裁兼谷歌研究员、加州大学伯克利分校计算机科学教授 [Eric Brewer](https://www.linkedin.com/in/eric-brewer-1031254/) 说，这其中的关键是理解和验证开源依赖链安全性的能力。

“Go 的 1.18 版本是重要的一步，旨在确保开发者能够构建最安全的应用程序，了解发现漏洞时的风险，并减少网络安全攻击的影响，”他说。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>