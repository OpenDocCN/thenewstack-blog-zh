# 公理:所有的可观测性数据，无需担心成本

> 原文：<https://thenewstack.io/axiom-all-the-observability-data-without-cost-worries/>

微软收购 Xamarin 后，该团队为微软开发了移动应用分析和崩溃报告服务 Xamarin Insights。NET 开发人员在思考他们下一步想构建什么。

尼尔·杰格迪什·帕特尔、[赛义夫·洛菲](https://www.linkedin.com/in/seiflotfy/)和[高德·阿洛特](https://www.linkedin.com/in/gordallott/)、之前也曾在 Canonical 一起开发 Ubuntu，他们决定建造他们当时希望拥有的东西，这成为了[公理](https://www.axiom.co/)。这是一个无服务器平台，能够存储和查询无限量的数据，以提高系统问题的可观察性。

“我们(在 Xamarin Insights)每天要处理数十亿次事件。我们有一个非常小的团队，试图做前端和建立一个产品，以及保持这些数据库启动和运行，”帕特尔解释说。

“我们一直在时间序列数据库方面遇到这个问题，从本质上来说，我们已经与更成熟的公司进行了昂贵的试验，我们已经完成了开源工作……我们正在修补像普罗米修斯这样的东西，我们正在做各种不同的事情。无论我们做什么，我们的服务都不会停止，数据库也不会停止。我们会花费大量时间担心规模、担心成本、担心查询的及时响应等。”

他们认为有三个核心问题:

*   如何快速高效地接收来自无数不同来源的数据，并使其可供查询。
*   如何便宜的存储，让用户不用担心存储哪些数据，保存多长时间。
*   以及如何有效地查询数据。

“无论数据是 10 秒还是 10 年前的，我们都希望能够随时启动查询，从这些数据中获取我们想要的信息，”Patel 说。

## 消除数据预算

他说，他们一开始做了力不从心的事情，但他们确实建立了一个高效的数据库，用于接收和即席查询，并且存储成本低廉。将它推向市场，他们试图锁定用户感受最痛苦的地方，这是有可观察性的。

“我们采访了一大群开发人员和工程经理，我们问他们，‘当你使用你现在拥有的工具时，你有什么问题？’他们都得到了数据预算之类的东西，或者关于可以产生多少事件、可以记录多少独特事件的预算，这取决于公司拥有的许可证，因为有附加成本，数据可以保留多长时间，需要对多少数据进行采样，”他说。

Axiom 的目标是消除那些因为成本而选择正确的数据进行存储的担忧。

“我们希望人们觉得他们可以从他们的系统中产生这些数据，而不用担心预算，不用担心控制和类似的事情，并且拥有他们需要的数据来解决手头的问题，”Patel 说。

他说，传统上有三个制约因素:

*   因为你必须垂直或水平伸缩来绕过查询限制。
*   **存储**——你有多少？你要付多少钱？有多快？
*   **计算**实际上能够快速接收和处理查询。

Axiom 把这三件事分开了。他说，摄取是用“运行起来非常便宜”的免协调容器来处理的。它不做采样。所有的数据进入 S3 或另一个对象存储。没有所谓的冷数据、存档数据或入库数据。所有的数据总是可用的。所有的查询都是通过无服务器功能完成的。

“它本质上就像一个混合的无服务器时间序列数据库，因为我们混合和匹配这种云原生架构，以便在我们需要时利用我们需要的东西，”他说。“因此，它使实际查询变得超级快速，而且超级高效，因为您只需为它实际运行的毫秒数付费。”

它集成了 PagerDuty 和 [Vercel](https://www.axiom.co/blog/vercel-integration) 。Logstash、Elastic Beats、Honeycomb 和 FluentD 等数据传送器可用于将日志、指标等直接发送到 Axiom。Elasticsearch 批量 API 还可以用于从一系列工具和服务中发送日志。

本月，该公司计划在 Axiom 内部发布分布式轨迹，并提供 OpenTelemetry 的支持。

它提供了一个点击式查询构建器，可以轻松地探索数据并构建数据的可视化，但它也提供了一种更强大的查询语言，Axiom Processing Language (APL)，可以提供更深入的见解。APL 提供了根据您的需求过滤、操作和汇总数据的灵活性。

[Axiom Playground](https://www.axiom.co/blog/introducing-axiom-playground) 让你在实时数据上试用 Axiom 的数据分析平台。团队可以利用其协作功能一起工作。

Axiom 的免费层配有 0.5 TB 的存储，基本计划提供 5 TB，每月 99 美元。

## 您的数据存储还是他们的

他说，长期的愿景是让摄取成为一个容易被遗忘的行项目，这样你就永远不会因为产生了多少数据而受到惩罚。

Patel 说，使用可观察性工具的公司倾向于使用一个以上的工具，但当开发人员出于成本考虑决定不发送某个跟踪或日志时，就会产生一个“黑洞”。

Patel 说:“你可以从 Axiom 中了解你在可观测性方面缺少什么，因为你可以盲目地向它发送数据，而不会感觉到你早上醒来时会有价值数千美元的成本。”

“我们真的想让人们进入那种无限制的思维方式，没有抽样，没有锦囊妙计，你只需发送数据，就可以查询。你可以在此基础上建立你需要的东西。

这家公司非常偏僻。帕特尔和阿洛特住在英国。Lotfy 住在德国。“我开玩笑说，基本上，在任何时间，我在哪里，总部就在哪里，”帕特尔笑着说。

它已经筹集了超过 700 万美元，由 Crane Venture Partners 牵头，包括 Xamarin 联合创始人兼前 GitHub 首席执行官 [Nat Friedman](https://www.linkedin.com/in/natfriedman/) 和 Heroku 联合创始人 [Adam Wiggins](https://www.linkedin.com/in/adam-wiggins-a7623845/?originalSubdomain=de) 的投资。

Axiom 最初是作为自托管提供的，现在仍然可以使用，尽管它也可以在云提供商上使用。然而，一些寻求更好地控制数据的用户更喜欢“[云部署](https://tomtunguz.com/cloud-prem-architecture/)”模式，在这种模式下，SaaS 供应商管理代码，客户自带存储。Patel 说，Axiom 也可以处理这个问题。

总部位于亚特兰大的 Speedscale 是一个用于 Kubernetes API 测试的流量回放框架，从去年年底开始使用 Axiom。

它跟踪两种不同的监控/遥测数据:自有云服务的数据和从客户部署中收集的数据。

“来自我们云服务的遥测数据属于我们，我们能够将它发送到任何地方。我们目前使用 Datadog。但来自客户环境的遥测数据属于客户，我们选择不将它发送到我们的云之外，”Speedscale 联合创始人兼首席执行官 Ken Ahrens 说。

“我们将客户数据导入我们自己的 AWS 帐户，并加载到我们自己托管的 Axiom。这使我们能够构建丰富的客户健康仪表板，同时将所有数据保留在内部。”

大约一年时间里，Speedscale 将这些数据加载到 AWS OpenSearch 中，后者由 Elasticsearch 管理。

“虽然它运行良好，但经常出现性能问题，而且大规模运行的成本越来越高，”阿伦斯说。“这一度超过了我们云账单的一半，所以我们知道我们必须做出改变。我们被介绍给了 Axiom 团队，他们声称有更好的性能，我们可以在自己的网络中运行它，这是一个业务需求。我们很快就完成了迁移，然后关闭了 Elasticsearch 集群，开了一个小派对。”

Speedscale 使用来自 Axiom 的数据来了解客户如何在其集群中使用其软件。

“一个大的用例是对我们所有的客户进行分析，以了解他们在产品采用之旅中的位置——登录、安装、发送数据、运行测试等，”Ahrens 说。“第二个用例是解决问题。当我们无法在基础设施上重现这些情况时，Axiom 中的数据可以帮助我们排除特定的错误和问题。我们还与 Axiom 团队一起工作，相互分享笔记、最佳实践和经验。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>