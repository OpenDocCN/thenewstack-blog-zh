# 容器和微服务如何协同工作以实现敏捷性

> 原文：<https://thenewstack.io/containers-microservices-work-together-enable-agility/>

企业首席信息官(CIO)过去主要从硬件的角度来考虑他们的 IT 资产，软件充当记录系统。今天，以应用程序为中心的方法的出现正促使许多人重新思考这一观点，将应用程序而不是机器放在第一位。

开源项目——从新技术公司到成熟的企业提供商——正在推动这种创新。这些项目是新堆栈经济的核心，也是自动化、可编程基础设施的基础。

当 IT 系统围绕客户机/服务器模式设计时，软件需要在单独的服务器上运行。采用这种方法，服务器激增。虚拟化带来了解脱，让服务器得到更有效的利用。

随着虚拟化带来更高的效率和可靠性，首席信息官们开始考虑如何加快应用程序开发，尤其是在互联网变得更加普及的情况下。

[cyclone slider id = " ebook-2-赞助商"]

虚拟化不是为了加速应用程序开发，也不是为了构建实时服务。那是一个复杂系统硬件的时代，应用程序开发过程建立在瀑布方法之上。应用程序开发耗时数月，应用程序的更新需要繁琐的规划和执行过程。

首先，许多人着眼于面向服务的架构(SOA ),它依赖于这样一个前提，即应用程序具有通过网络通信的组件。今天，SOA 可以被认为是微服务的先驱。

> “今天你不能把一个单一的售票系统集装箱化。但是，该应用程序的某些部分，如 DNS 服务、安全服务、网络服务，都可以容器化”——Ken Owens，Cisco

IBM 的 Jason McGee [在 DockerCon EU 2015 上说 SOA 错过了一些东西。它关注于接口，并定义了如何与服务对话，但是它没有定义团队应该如何组织。此外，它错过了如何包含交付生命周期。](https://thenewstack.simplecast.com/episodes/jason-mcgee-ibm-microservice-architectures-and-container-scale)

今天，有了[微服务](https://thenewstack.io/containers-microservices-two-peas-devops-pod/)，我们看到分解正在发生，团队也相应地组织起来。小团队正在处理许多小零件。现在有由 5 人、10 人或 15 人组成的团队在部分服务上工作。

McGee 说，在很大程度上，旧的方法是根据整体系统的构建方式定义的。界面和生命周期没有分离。它保持了时间的接近。它建立在 Java 之上，在版本化的环境中有一个特殊的栈。

面向服务的策略现在被更全面地看待。McGee 说，REST 和 JSON 允许服务协同工作，独立于团队的工作方式。该模型允许开发人员使用对任务或团队成员有意义的语言。一个团队使用的软件仍然占主导地位，但是有更多的多语言方法。

McGee 说，微服务反映了一种权衡。这种权衡体现在微服务带来的复杂性中。正在打包的微服务和容器需要一个工具和管理系统。

McGee 说，从根本上说，开发人员必须弄清楚这些服务如何找到彼此。然后是监控和可见性。你如何识别正在发生的事情？它成为一个映射项目。有多个故障点。它产生了不变的基础设施，并要求更全面地看待整个生态系统。

## 微服务的框架和基础

那些不得不构建可伸缩系统来满足不可预测的、有时很大的互联网流量需求的公司是第一个考虑这个问题的，他们求助于框架。McGee 观察到，如何交付服务的事实上的标准化已经从这些系统中发展出来。

但是开发者如何知道所有的方法呢？就像现在一样，现有的框架定义了过程，这迫使开发人员在决定改变框架时重新开始。它变成了一个进化问题。

标准化是关键，一些组织，如[云本地计算基金会](https://thenewstack.io/google-inevitable-future-container-based-architectures/) (CNCF)，旨在为更快的代码重用、提高机器效率、降低成本以及提高应用程序的整体灵活性和可维护性铺平道路。

CNCF 有许多成员公司支持这一想法，包括 Apcera、Apprenda、Cisco、Cloudsoft、ClusterHQ、CoreOS、Datawise.io、易贝、Engine Yard、Docker、谷歌、IBM、英特尔、Joyent、Mesosphere、NetApp、Portworx、Rancher、Red Hat、Twitter、VMware、Weaveworks 等等。

CNCF 着眼于流程编排层面，然后通过代码优先的方法定义 API 和标准，实现主机和服务的集成。在纽约的 core OS architecture 峰会上，谷歌产品经理 Craig McLuckie 谈到了为 CNCF 项目提供 Kubernetes，以及谷歌希望使软件成为管理容器的事实上的标准。

从谷歌的角度来看，基于容器的架构将成为需要构建横向扩展系统和服务的公司的标准。微服务方法是我们开始称之为“云原生计算”的基础。通过将应用程序分解成容器，小团队可以专门化并以简单明了的方式完成任务。

这种方法的细微差别反映在容器本身中，根据所需的资源，容器的范围会有所不同。可能会有不同的资源需求，例如更多的处理或 I/O。将它们分开打包可以更有效地利用资源。它还使得升级组件变得更加容易，而无需将应用程序作为一个整体来关闭。

随着企业越来越多地将其产品、服务和设备与互联网联系在一起，将会产生更多的数据，并随之产生新的使用方式。反过来，这将意味着如何开发应用程序的新思维。

框架对于这一演变至关重要，这些框架的不同方面也是如此。例如，这意味着需要根据业务需求开发调度程序。这也意味着将更多的细微差别或语义直接构建到架构本身中。

Mantl 是思科与 Mesos 生态系统一起开发的开源框架，提供来自服务的集成，如 Hashiworks 的 Consul 和 Vault。它是从 Kubernetes、Mesos 和众多支持微服务生态系统的开源项目中涌现出来的框架的代表。

Mantl 使用 DevOps 社区中的行业标准工具，包括[马拉松](https://mesosphere.github.io/marathon/)，Mesos，Kubernetes，Docker 和[跳马](https://www.vaultproject.io/)。Mantl 堆栈的每一层都允许在支持、峰值工作负载期间管理 Mesos 或 Kubernetes 集群，或使用 [Terraform](https://www.terraform.io/) 启动新虚拟机之间建立统一、紧密的管道。无论您是通过添加新虚拟机进行扩展以准备启动，还是在集群上部署多个节点，Mantl 都允许开发人员在一个中心位置处理 DevOps 堆栈的每一部分，而无需回溯调试或重新编译代码来确保开发人员所需的微服务在需要时发挥作用。

思科的 Ken Owens 指出，在通过自动化简化 IT 系统的过程中，障碍是熟悉的。如何连接不同的系统？您如何处理与数据安全和治理相关的信息安全策略？这就是容器出现的地方。容器允许开发人员和基础设施团队在内部、测试和开发环境中一起工作。

> 微服务反映了一种权衡，这种权衡体现在分布式服务带来的复杂性中。需要有一个工具和管理系统来管理正在打包的微服务和容器。

有一个主要的误解是，巨石不能被分解成容器或者是云原生的。从应用程序架构的角度来看，现在有独石，而且在一段时间内还会有独石。

“今天你不能把一个单一的售票系统集装箱化，”欧文斯说。“但该应用程序的一些部分，如 DNS 服务、安全服务、网络服务，都可以容器化。”

当考虑如何使用微服务时，调度器是系统中最重要的部分。从 Owens 的角度来看，最标准的调度集中在动物园管理员和马拉松的 Mesos。Kubernetes 适用于数据科学，提供更高速度的调度程序。

[cyclone slider id = " ebook-2-赞助商"]

调度器有两个方面:调度作业的功能，以及请求的效率和可用性。Cisco 在每组六个主要服务节点中至少有三个控制节点。这提供了 2 比 1 的比率—考虑到故障和持续高可用性。

这说明了我们将在未来一年听到的关于新兴微服务层的对话，以及您如何编排服务、调度程序、底层控制平面以及它们如何连接在一起。从本质上讲，它是一个新的编排堆栈，强调应用程序的可移植性和自组织容器等问题。

## 解决企业中的安全性和容器问题

创建他们自己的容器允许客户围绕一个标准容器进行编写。客户获得了多租户环境所需的工具，使他们能够控制公共云服务和内部环境中的复杂拓扑。

Apcera 是一个为企业部署容器的平台，包括安全性和策略增强。Apcera 的 Josh Ellithorpe 指出，在打包阶段这一切都是自动化的，并且对组件有精细的控制，如网络策略和资源分配，以便客户对其群集的安全足迹有一个总体了解。

此外，Apcera 还开发了一个语义管道，提供保证数据完整性的能力。例如，Apcera 技术充当数据库的代理。删除请求不会直接发送到数据库。Apcera 还提供了它所谓的“策略语法”，它专注于资源分配、网络控制、调度策略和授权。这触及了语义如何定义如何管理数据管道的核心。策略语法有助于描述基本的业务规则以及如何为组织部署应用程序。

Docker 图像有多个层。Apcera 检测框架并调用包管理器，包管理器有一个标记系统来描述依赖关系。当在 Apcera 中审计软件时，用户可以准确地看到那里有什么。为了全面理解，会捕获所有内容的审计日志。开发人员花更少的时间去考虑需要什么依赖。

他们的整个想法是在流程中注入透明的安全性，这样对开发人员来说就不可见了。开发人员只是连接到一个数据库，但是他们看不到正在执行的策略。业界现在意识到政策本身需要一个通用的语法。反过来，Apcera 现在正在公开提供这种语法。

## 结论

微服务反映了一种权衡，这种权衡体现在分布式服务带来的复杂性中。需要有一个工具和管理系统来管理正在打包的微服务和容器。今天的微服务平台和框架的根源来自运行软件的机器，这些软件曾被我们称为面向服务的架构。

微服务的出现可以被视为最早框架的演变，这些框架最初是由那些率先向外扩展为数百万用户提供服务的可编程动态服务的公司开发的。今天，这些先驱开发的方法是主流公司的基础，主流公司明白软件和人现在是他们整个组织的心脏和灵魂。

通过 Pixabay 的特征图像[。](https://thenewstack.simplecast.com/episodes/josh-ellithorpe-apcera-standardization-for-the-container-ecosystem)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>