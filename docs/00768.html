<html>
<head>
<title>Off-The-Shelf Hacker: Conversations with Hedley, the Robotic Skull</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现成的黑客:与机器人头骨赫德利的对话</h1>
<blockquote>原文：<a href="https://thenewstack.io/off-the-shelf-hacker-conversations-with-hedley-the-robotic-skull/#0001-01-01">https://thenewstack.io/off-the-shelf-hacker-conversations-with-hedley-the-robotic-skull/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">我的一个梦想一直是在表演和小规模演示期间与<a href="https://thenewstack.io/off-shelf-hacker-hedley-formerly-old-one-eye/" target="_blank" class="local-link">赫德利</a>、<a href="https://thenewstack.io/off-the-shelf-hacker-hedley-the-robotic-skull-speaks/" target="_blank" class="local-link">机器人头骨</a>、<a href="https://thenewstack.io/traveling-with-hedley-the-robotic-skull/" target="_blank" class="local-link">进行对话。对着一个头骨说话并让它以任何有意义的实时方式回答是相当复杂的。Alexa风格的响应是可能的，尽管它需要一个稳固的互联网连接。这并不总是可行的，在供应商赞助的当地酒吧演出中，坐在户外的露台桌旁。独立硬件人工智能(AI)机器视觉正变得相当成熟。赫德利的</a><a href="http://jevois.org/" target="_blank" class="ext-link" rel="external "> JeVois </a>机器视觉传感器就是一个很好的例子。人工智能演讲，不太多。</p>
<p class="translated">像其他会说话的机器人一样，我的解决方案是用赫德利的回答来“模拟”一场对话。我和他成了适时说台词的演员。</p>
<p class="translated">我们已经<a href="https://thenewstack.io/off-the-shelf-hacker-hedley-the-robotic-skull-gets-a-partial-maxillectomy/" class="local-link">介绍了赫德利的Arduino和颌伺服组合</a>以及最近添加的安装在他口腔顶部的音频放大器和扬声器。</p>
<p class="translated">最后一个主要部分是用于控制赫德利在交流中的话语的软件。我在9月<a href="https://thenewstack.io/off-the-shelf-hacker-creating-voice-jaw-data-with-a-processing-script/" target="_blank" class="local-link">日</a>报道了一个基线处理程序，但当时没有开发任何音频文件列表步进或按钮代码。</p>
<h2 class="translated">制作脚本</h2>
<p class="translated">在这个最新版本中，这个程序打开了一个预先录制好的WAV声音文件列表，当我和赫德利相互交谈时，它会一步一步地浏览这些文件。此外，声音在飞行中被分析，产生一个数字流，输入Arduino-jaw伺服子系统。声音文件可以使用麦克风和Audacity录制，也可以通过保存文本到语音命令行工具的音频输出来录制，比如T2的eSpeak T3。你可以在Linux笔记本上开发大部分代码，然后把所有代码都转移到Raspberry Pi上来完成按钮代码。或者，您可以使用处理版本3.4 IDE工具选项卡下的<a href="https://github.com/gohai/processing-uploadtopi" target="_blank" class="ext-link" rel="external ">“上传到Pi”功能</a>。这让您可以在笔记本上开发，并通过网络在Pi上运行。确保将音频列表文本和WAV文件放在Pi上的适当目录中。</p>
<p class="translated">这是在赫德利的树莓派上运行的代码。<br/></p>
<div id="crayon-6423116a63749771580524" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums translated" data-settings="show">)(这)(就)(是)(这)(些)(事)(,)(我)(们)(在)(这)(些)(事)(上)(没)(有)(什)(么)(可)(能)(看)(到)(这)(么)(的)(情)(况)(,)(只)(是)(这)(些)(事)(,)(只)(是)(在)(这)(些)(事)(上)(才)(有)(一)(个)(实)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)(验)( )(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(有)(些)(什)(么)(好)(的)(情)(情)(。 )(我)(们)(都)(没)(想)(到)(这)(些)(事)(,)(我)(们)(还)(没)(想)(到)(这)(些)(事)(,)(就)(是)(这)(些)(事)(,)(我)(们)(还)(没)(想)(到)(这)(些)(事)(。 )(这)(就)(是)(这)(些)(事)(,)(我)(们)(还)(没)(想)(到)(这)(些)(事)(,)(就)(是)(这)(些)(事)(,)(我)(们)(还)(没)(想)(到)(这)(些)(事)(。</td>
<td class="crayon-code translated"><div class="crayon-pre"><p class="crayon-line" id="crayon-6423116a63749771580524-1"><span class="crayon-e">import </span><span class="crayon-i">processing</span><span class="crayon-st">.</span><span class="crayon-i">sound</span>.*;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-2"><span class="crayon-e">import </span><span class="crayon-i">processing</span><span class="crayon-st">.</span><span class="crayon-i">serial</span>.*;</p><p class="crayon-line" id="crayon-6423116a63749771580524-3"><span class="crayon-e">import </span><span class="crayon-i">processing</span><span class="crayon-st">.</span><span class="crayon-i">io</span>.*;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-4"> </p><p class="crayon-line" id="crayon-6423116a63749771580524-5"><span class="crayon-e">Serial </span><span class="crayon-i">myPort</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-6"> </p><p class="crayon-line" id="crayon-6423116a63749771580524-7"><span class="crayon-e">SoundFile </span><span class="crayon-i">sample</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-8"><span class="crayon-e">Amplitude </span><span class="crayon-i">rms</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-10"><span class="crayon-e">float </span><span class="crayon-i">scale</span>=<span class="crayon-cn">1</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-12"><span class="crayon-e">float </span><span class="crayon-i">smooth_factor</span>=.<span class="crayon-cn">2</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-13"> </p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-14"><span class="crayon-e">float </span><span class="crayon-i">sum</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-15"><span class="crayon-e">int </span><span class="crayon-i">valpos</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-16"><span class="crayon-e">int </span><span class="crayon-i">sendpos</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-17"><span class="crayon-i">int</span><span class="crayon-h"> </span><span class="crayon-m">i</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-18"><span class="crayon-e">int </span><span class="crayon-i">playfile</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-19"><span class="crayon-e">int </span><span class="crayon-i">sendout</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-20"><span class="crayon-i">String</span>[]<span class="crayon-h"> </span><span class="crayon-i">lines</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-21"> </p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-22"><span class="crayon-e">int </span><span class="crayon-i">noframes</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-23"><span class="crayon-e">int </span><span class="crayon-i">playall</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-24"><span class="crayon-e">int </span><span class="crayon-i">lineno</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span>-<span class="crayon-cn">1</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-25"><span class="crayon-i">int</span><span class="crayon-h"> </span><span class="crayon-st">a</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-26"><span class="crayon-e">float </span><span class="crayon-i">dur</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-27"><span class="crayon-e">int </span><span class="crayon-i">incfile</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-28"> </p><p class="crayon-line" id="crayon-6423116a63749771580524-29"><span class="crayon-e">public </span><span class="crayon-e">void </span><span class="crayon-e">setup</span>()<span class="crayon-h"> </span>{</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-30"><span class="crayon-h">    </span><span class="crayon-e">size</span>(<span class="crayon-cn">100</span>,<span class="crayon-cn">100</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-31"><span class="crayon-h">    </span><span class="crayon-i">GPIO</span><span class="crayon-st">.</span><span class="crayon-e">pinMode</span>(<span class="crayon-cn">16</span>,<span class="crayon-h"> </span><span class="crayon-i">GPIO</span><span class="crayon-st">.</span><span class="crayon-i">INPUT_PULLUP</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-32"><span class="crayon-h">    </span><span class="crayon-i">myPort</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-e">new </span><span class="crayon-e">Serial</span>(<span class="crayon-i">this</span>,<span class="crayon-h"> </span><span class="crayon-s">"/dev/ttyUSB0"</span>,<span class="crayon-h"> </span><span class="crayon-cn">115200</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-33"><span class="crayon-h">    </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-34"><span class="crayon-h">    </span><span class="crayon-c">// read control text file for audio files and servo positional data</span></p><p class="crayon-line" id="crayon-6423116a63749771580524-35"><span class="crayon-h">    </span><span class="crayon-i">lines</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-e">loadStrings</span>(<span class="crayon-s">"/home/rob/hedleytheskull/roblist.txt"</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-36"><span class="crayon-h">    </span><span class="crayon-e">println</span>(<span class="crayon-s">"there are "</span><span class="crayon-h"> </span>+<span class="crayon-h"> </span><span class="crayon-i">lines</span><span class="crayon-st">.</span><span class="crayon-i">length</span><span class="crayon-h"> </span>+<span class="crayon-h"> </span><span class="crayon-s">" lines"</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-37"><span class="crayon-h">    </span><span class="crayon-e">for</span><span class="crayon-h"> </span>(<span class="crayon-i">int</span><span class="crayon-h"> </span><span class="crayon-m">i</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span>;<span class="crayon-h"> </span><span class="crayon-m">i</span><span class="crayon-h"> </span><span class="crayon-sy">&amp;lt;</span><span class="crayon-h"> </span><span class="crayon-i">lines</span><span class="crayon-st">.</span><span class="crayon-i">length</span>;<span class="crayon-h"> </span><span class="crayon-m">i</span>++)<span class="crayon-h"> </span>{</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-38"><span class="crayon-h">        </span><span class="crayon-e">println</span>(<span class="crayon-i">lines</span>[<span class="crayon-m">i</span>]);</p><p class="crayon-line" id="crayon-6423116a63749771580524-39"><span class="crayon-h">        </span>}</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-40"><span class="crayon-h">    </span>}<span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-41"><span class="crayon-h">    </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-42"><span class="crayon-e">public </span><span class="crayon-e">void </span><span class="crayon-e">draw</span>()<span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-43"><span class="crayon-h">    </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-44"><span class="crayon-e">if</span><span class="crayon-h"> </span>(<span class="crayon-i">GPIO</span><span class="crayon-st">.</span><span class="crayon-e">digitalRead</span>(<span class="crayon-cn">16</span>)<span class="crayon-h"> </span>==<span class="crayon-h"> </span><span class="crayon-i">GPIO</span><span class="crayon-st">.</span><span class="crayon-i">LOW</span>)<span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-45"><span class="crayon-h">     </span><span class="crayon-e">fill</span>(<span class="crayon-cn">204</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-46"><span class="crayon-h">       </span><span class="crayon-e">println</span>(<span class="crayon-s">"button pushed"</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-47"><span class="crayon-h">       </span><span class="crayon-e">delay</span>(<span class="crayon-cn">300</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-48"><span class="crayon-h">       </span><span class="crayon-e">if</span><span class="crayon-h"> </span>(<span class="crayon-i">lineno</span><span class="crayon-h"> </span><span class="crayon-sy">&amp;lt;</span><span class="crayon-h"> </span><span class="crayon-i">lines</span><span class="crayon-st">.</span><span class="crayon-i">length</span><span class="crayon-h"> </span>-<span class="crayon-h"> </span><span class="crayon-cn">1</span>)<span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-49"><span class="crayon-h">          </span>++<span class="crayon-i">lineno</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-50"><span class="crayon-h">          </span><span class="crayon-e">println</span>(<span class="crayon-i">lines</span>[<span class="crayon-i">lineno</span>]);</p><p class="crayon-line" id="crayon-6423116a63749771580524-51"><span class="crayon-h">       </span>}</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-52"><span class="crayon-h">       </span><span class="crayon-e">else</span><span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-53"><span class="crayon-h">          </span><span class="crayon-e">exit</span>();</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-54"><span class="crayon-h">       </span>}<span class="crayon-h">  </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-55"><span class="crayon-h">    </span>}</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-56"><span class="crayon-h">    </span><span class="crayon-e">else</span><span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-57"><span class="crayon-h">       </span><span class="crayon-e">fill</span>(<span class="crayon-cn">155</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-58"><span class="crayon-h">       </span><span class="crayon-i">playfile</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span>-<span class="crayon-cn">1</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-59"><span class="crayon-h">  </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-60"><span class="crayon-h">     </span>}<span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-61"><span class="crayon-h">    </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-62"><span class="crayon-h">    </span><span class="crayon-e">stroke</span>(<span class="crayon-cn">255</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-63"><span class="crayon-h">    </span><span class="crayon-e">ellipse</span>(<span class="crayon-i">width</span>/<span class="crayon-cn">2</span>,<span class="crayon-h"> </span><span class="crayon-i">height</span>/<span class="crayon-cn">2</span>,<span class="crayon-h"> </span><span class="crayon-e ">width*</span><span class="crayon-cn">0.75</span>,<span class="crayon-h"> </span><span class="crayon-e ">height*</span><span class="crayon-cn">0.75</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-64"><span class="crayon-h">                    </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-65"><span class="crayon-h">    </span><span class="crayon-e">if</span><span class="crayon-h"> </span>(<span class="crayon-i">playfile</span><span class="crayon-h"> </span>==<span class="crayon-h"> </span><span class="crayon-cn">0</span>)<span class="crayon-h"> </span>{</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-66"><span class="crayon-h">         </span><span class="crayon-i">sample</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-e">new </span><span class="crayon-e">SoundFile</span>(<span class="crayon-i">this</span>,<span class="crayon-h"> </span><span class="crayon-i">lines</span>[<span class="crayon-i">lineno</span>]);</p><p class="crayon-line" id="crayon-6423116a63749771580524-67"><span class="crayon-h">         </span><span class="crayon-i">sample</span><span class="crayon-st">.</span><span class="crayon-e">rate</span>(.<span class="crayon-cn">45</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-68"><span class="crayon-h">         </span><span class="crayon-i">sample</span><span class="crayon-st">.</span><span class="crayon-e">play</span>();</p><p class="crayon-line" id="crayon-6423116a63749771580524-69"><span class="crayon-h">         </span><span class="crayon-i">dur</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-i">sample</span><span class="crayon-st">.</span><span class="crayon-e">duration</span>();</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-70"><span class="crayon-h">         </span><span class="crayon-i">rms</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-e">new </span><span class="crayon-e">Amplitude</span>(<span class="crayon-i">this</span>);</p><p class="crayon-line" id="crayon-6423116a63749771580524-71"><span class="crayon-h">         </span><span class="crayon-i">rms</span><span class="crayon-st">.</span><span class="crayon-e">input</span>(<span class="crayon-i">sample</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-72"><span class="crayon-h">         </span><span class="crayon-i">playfile</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">1</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-73"><span class="crayon-h">         </span><span class="crayon-i">sendout</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">1</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-74"><span class="crayon-h">    </span>}<span class="crayon-h">  </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-75"><span class="crayon-h">  </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-76"><span class="crayon-h">    </span><span class="crayon-e">if</span><span class="crayon-h"> </span>(<span class="crayon-i">sendout</span><span class="crayon-h"> </span>==<span class="crayon-h"> </span><span class="crayon-cn">1</span>)<span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-77"><span class="crayon-h">       </span><span class="crayon-i">sum</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-i">sum</span><span class="crayon-h"> </span>+<span class="crayon-h"> </span>(<span class="crayon-i">rms</span><span class="crayon-st">.</span><span class="crayon-e">analyze</span>()<span class="crayon-h"> </span>-<span class="crayon-h"> </span><span class="crayon-i">sum</span>)<span class="crayon-h"> </span>*<span class="crayon-h"> </span><span class="crayon-i">smooth_factor</span>;<span class="crayon-h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-78"><span class="crayon-h">       </span><span class="crayon-i">myPort</span><span class="crayon-st">.</span><span class="crayon-e">write</span>(<span class="crayon-e">str</span>(<span class="crayon-e">int</span>(<span class="crayon-e">map</span>((<span class="crayon-e ">sum *</span><span class="crayon-h"> </span><span class="crayon-cn">700</span>),<span class="crayon-h"> </span><span class="crayon-cn">30</span>,<span class="crayon-h"> </span><span class="crayon-cn">85</span>,<span class="crayon-h"> </span><span class="crayon-cn">8</span>,<span class="crayon-h"> </span><span class="crayon-cn">3</span>))));</p><p class="crayon-line" id="crayon-6423116a63749771580524-79"><span class="crayon-h">       </span><span class="crayon-i">myPort</span><span class="crayon-st">.</span><span class="crayon-e">write</span>(<span class="crayon-s">'\n'</span>);</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-80"><span class="crayon-h">    </span>}</p><p class="crayon-line" id="crayon-6423116a63749771580524-81"><span class="crayon-h">    </span><span class="crayon-e">if</span><span class="crayon-h"> </span>(<span class="crayon-st">a</span><span class="crayon-h"> </span><span class="crayon-sy">&amp;lt;</span><span class="crayon-h"> </span><span class="crayon-e">int</span>((<span class="crayon-e ">dur *</span><span class="crayon-h"> </span><span class="crayon-cn">70</span>)))<span class="crayon-h"> </span>{</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-82"><span class="crayon-h">      </span><span class="crayon-st">a</span>++;</p><p class="crayon-line" id="crayon-6423116a63749771580524-83"><span class="crayon-h">      </span><span class="crayon-c">// print(", ");</span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-84"><span class="crayon-h">      </span><span class="crayon-c">// println(int(dur * 70));     </span></p><p class="crayon-line" id="crayon-6423116a63749771580524-85"><span class="crayon-h">    </span>}</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-86"><span class="crayon-h">    </span><span class="crayon-e">else</span><span class="crayon-h"> </span>{</p><p class="crayon-line" id="crayon-6423116a63749771580524-87"><span class="crayon-h">      </span><span class="crayon-c">// println("done");</span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-88"><span class="crayon-h">      </span><span class="crayon-i">playfile</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-89"><span class="crayon-h">      </span><span class="crayon-st">a</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-90"><span class="crayon-h">      </span><span class="crayon-i">dur</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-cn">0</span>;</p><p class="crayon-line" id="crayon-6423116a63749771580524-91"><span class="crayon-h">      </span><span class="crayon-c">// ++lineno;</span></p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-92"><span class="crayon-h">    </span>}</p><p class="crayon-line" id="crayon-6423116a63749771580524-93"> </p><p class="crayon-line crayon-striped-line" id="crayon-6423116a63749771580524-94">}</p></div></td>
</tr>
</table>
</div>
</div>

<p class="translated">像往常一样，我们开始初始化变量、常量和库。接下来，我们计算音频文件列表中的行数，以便在遍历列表时用作每个短语的索引。</p>
<p class="translated">进入主程序(draw)，我们需要检查按钮状态。没有注意到任何，它将只是播放第一个音频文件使用SoundFile函数。按下按钮将增加到下一个音频文件。您可以改变回放速度和其他参数，以获得您想要的声音。振幅函数为我们提供了音频文件的数字记录，然后我们可以在下一个语句块中的<strong> rms.analyze </strong>函数中引用它。<strong> Rms.analyze </strong>返回一个数字数据流，然后我们通过USB线将它发送到赫德利的Arduino Nano微控制器。Nano解释流并根据数据移动伺服系统，同时跟踪音频。</p>
<p class="translated">整个过程非常快。从赫德利嘴里发出的声音和他同步的下颌运动之间有一点小小的延迟。大多数观众可能看不到。</p>
<h2 class="translated">更进一步</h2>
<p class="translated">虽然<a href="https://processing.org/" target="_blank" class="ext-link" rel="external ">处理</a>程序运行良好，但仍有很大的改进空间。例如，我考虑过取消Arduino Nano控制的下颚伺服系统，直接从树莓Pi启动下颚。我不认为它会比在开始时添加一个对伺服库的引用，并重写代码以通过Pi上的通用(GPIO)引脚向伺服发送伺服角度(从0到30度)要多得多。倪星纳米将简化整体电源管理，甚至可能消除音频和下巴运动之间的微小滞后。</p>
<p class="translated">我想探索的另一个领域是接近实时的文本到语音转换和语音识别。对赫德利说一句话或一个短语，然后让他用自己合适的短语来回应，这不是很酷吗？我们可以从简单开始，让他根据我说的一两个关键词说一些短语。</p>
<p class="translated">我不确定处理是否能胜任这种近乎实时的工作。我们可能需要研究其他编程语言，比如c。我会随时通知你。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>