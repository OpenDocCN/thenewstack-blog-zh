# TNS 制造商亚历克斯·波尔维:码头工人、火箭和两个集装箱的区别

> 原文：<https://thenewstack.io/tns-makers-alex-polvi-docker-rocket-difference-two-containers/>

采访亚历克斯·波尔维的第二部分

[CoreOS](http://coreos.com)

，它将容器化、集群和容错功能融入到自动更新技术中。该公司将其产品称为“操作系统即服务”Alex 在采访的第一部分中说，“一切又回到了桌面上”，这是整个行业解决方案当前发展速度的结果。“我们正在重新建立关系网；我们正在重新进行存储；我们在重新做我们的数据库。我们正在解决这一切……”

莱克斯·威廉姆斯:网络的再造，存储的再造……这是如何开始出现的？

[亚历克斯·波尔维，《科瑞奥斯:新栈访谈》第二部](https://thenewstack.simplecast.com/episodes/alex-polvi-coreos-the-new-stack-interview-part-two)

亚历克斯·波尔维:他们正在简化，变得更容易被每个人接受。例如，对于一家公司来说，现在运行分布式存储设备是一件非常复杂的事情。容器代表了一种足够的运动，我们将看到它变得更容易被普通操作商店使用。这些事情会更容易。

集群是另一个例子。集群是一个已经存在了一段时间的复杂怪兽，只有最高级的操作工作才能做到这一点。我认为我们都将在我们的环境中运行小型集群，无论是三台服务器还是 30，000 台服务器。那会更容易理解。我认为可访问性是最重要的。它让所有这些概念更容易被公司理解。

这可以追溯到 Linux 在过去几年中发展的根源。克里斯·斯旺在《新堆栈》中写了这个关于 Linux 发行版概念如何变化的故事。他讲了很多关于 systemd 及其演变的内容。

他指出，许多人认为你宣布推出 Rocket 是对 Docker 的直接挑战，尤其是在 DockerCon Europe 前夕。他写的不是生态系统和风投资助的创业公司的政治；他正在研究 systemd，他认为 systemd 是技术争论的核心。他说，“一段时间以来，围绕 systemd 的邪恶战争一直在 Linux 世界肆虐。几乎系统上的所有东西都会受到系统上第一个进程的影响，以及它对启动的所有东西的影响。”

你同意吗，你不同意吗，或者你对这个论点的整个技术基础有不同的看法？

亚历克斯:我可能需要读一下这篇文章，才能知道他想说的是哪一部分。我对 systemd 的看法是:谁在乎？显然有人在乎；我不明白。systemd 存在的原因是为了引导 Linux 服务器；你需要做一些事情来启动它。systemd 对世界的看法是，“让我们为人们提供这些东西的一个好版本。”

> 这实际上非常类似于 Docker 和“电池包括在内，但可拆卸”类型的心态。这是一种产品思维。

“包括电池，但可拆卸”，是指你从产品的角度考虑问题。UNIX 哲学说，“从组件的角度来考虑事情”——组件是用来构建产品的工具，但不是产品本身。

> 这更清楚地表明 Docker 是一种产品，而不是我们用来构建产品的组件。

这是明确的划分。Docker 中的一些东西可以被分解出来，这样它们就可以用在其他人的产品中了吗？当然，但是 Docker 本身从根本上来说是一个产品，只是在它上面有不同的设计特征，而不是一套 UNIX 哲学工具。

对了，我觉得两者都需要存在。你需要有产品，供人们和公司使用——一个完整的解决方案。但是，您还需要所有的单个组件都存在。

**我会回头参考克里斯的故事。他没有说这两者需要共存，但他说，CoreOS，Red Hat 的 Project Atomic，和 Ubuntu 的 Snappy Core，都被定位为运行 Docker 的发行版。你同意吗？这是你在这里所说的，两者需要共存的一部分吗？这是否会让 Rocket 和 Docker 处于不同的位置？**

**亚历克斯:**(现在读故事，吃吃地笑)我刚刚第一次读到其中的一些。因此，有几件事情正在发生——我们应该深入哪一部分呢？我认为这完全取决于你从哪个角度看待这个问题。不同的工作需要不同的工具。Docker、Rocket 和 systemd 都需要存在，因为它们都有不同的用途。那么我们应该从哪里着手解决这个问题呢？

就在今天，[Lennart poeting](https://plus.google.com/+LennartPoetteringTheOneAndOnly/posts)发布了一篇关于 systemd 原生支持 Docker 映像的文章——systemd 现在可以运行 Docker 映像了。对于这部分讨论来说，这是非常及时的——systemd 拥有 Docker 拥有的所有功能，除了他们刚刚添加的这个简单的图像推拉功能。现在 systemd 和 Docker 看起来很像，这就更乱了。

**我不想在 systemd 上陷得太深，但它说明了目前市场上的一些困惑。**

Alex: 唯一应该关心 systemd 的人——或者不关心——是构建 Linux 发行版的人。如果你使用的是 Linux 发行版，那是因为你喜欢他们的设置方式。如果他们使用 systemd，而你喜欢 systemd，那么你应该使用那个。如果你喜欢别的东西，你应该使用选择了别的东西的 Linux 发行版。然而，结果是所有 Linux 发行版的构建者几乎一致同意 systemd 是实现这一目标的方法。也许负责 Linux 发行版的人不再很好地为他们的客户服务了。或者，也许 systemd 实际上是好的，我们现在只是在讨论一个宗教争论，而不是一个技术争论。

**Docker 有很多充满激情的论点，但你退后一步，从另一个角度看待它。我很好奇你看到 Docker 的出现是什么视角。**

**亚历克斯:**我们想要构建的系统利用了容器。我们启动 CoreOS 的原因是因为我们想从根本上提高互联网的安全性，我们通过更新来做到这一点。我们认为更新操作系统的最佳方式是自动为客户应用它。我们认为我们可以比单个 IT 团队更有效地集中管理服务器更新。

你如何构建一个可以自我更新的操作系统？您将应用程序打包到一个容器中；这样做是为了将应用程序依赖关系与主机依赖关系分开。这使我们能够在不破坏您的应用程序的情况下更新您的信息。这就是为什么我们需要一个容器作为整个故事的核心的技术要求。

在我们构建下一代操作系统时，我们不会构建已经存在的东西，也不会做得很好。我们早期选择的工具之一是 Docker。当我们在构建 CoreOS 的时候，Docker 在我们需要的时候出现了。Docker 构建了一个下载和运行容器的工具，这正是我们所需要的。

我们很早就加入了 Docker，在这个社区出现的时候为它做出了贡献。随着故事的展开，我们像包管理器一样使用 Docker。这几乎就像 RPM，或者 Debian 的 Dotdeb，甚至 Snappy。Snappy 和 Docker，当你把 Docker 当成一个包经理的时候，*就是*有竞争力。随着 Docker 的发展，它开始添加我们不需要的东西，并且没有修复我们需要的原始包管理的问题。

所以，我们的包管理器工作得不是很好，因为他们不仅跳过了一堆我们认为应该构建的东西，而且还添加了我们不再需要的特性。这促使我们发布一些东西，包括我们需要的功能，没有我们不需要的东西。我们基本上建立了我们想要的理想事物。

容器的一个重要特征，也是我们的价值主张所依赖的东西之一，是它可以与其他 Linux 发行版互操作。我希望铁路客户选择我们是因为我们的优点，而不是因为他们为 CoreOS 构建了他们的应用程序，而它只能在 CoreOS 上运行。互操作性的一个美妙之处是容器，因为无论是在 Rail 上还是在 CoreOS 上，它们运行起来几乎都是一样的。

我们认为需要围绕容器存在标准——围绕如何定义映像，以及容器如何运行——以便不同的供应商可以自由地构建它们——这是工作的最佳工具。除了获得安全方面的权利，我们用 Rocket 解决的另一个问题是标准化。

> 我们的动机是那些构建使用容器的工具的人，而不是那些试图用容器平台构建 web 服务的公司。

我们碰巧有一个容器平台来运行我们使用的一些随机基础设施，但这只是我们作为一个公司构建产品的实现细节。我们的产品需要一个单一的、可组合的容器版本。我们不需要有人递给我们 vSphere。

由于这些相互竞争的利益，是否存在可能破坏互操作性的碎片化问题？

**Alex:**Docker 容器格式和 Rocket 容器格式不能融合没有技术上的原因。我们 100%支持他们融合。我们希望这个标准是精心设计的。如果这个*坏了，我们不会坐以待毙。我们将发布我们认为设计良好的内容，这些内容已经被我们之外的许多人审查过，他们也认为是设计良好的。我们很高兴与 Docker 合作，努力提供互操作性。但我们不会因为它在那里就把它让给 Docker。我们希望它是好的——是一个定义良好的、可靠的、技术上构建良好的实现。*

虽然你对早期的开源项目抱有怀疑——随着时间的推移，它会变得更好——但在某一点上，你放弃了，而是构建了你想要的东西。我们等了大约一年半。也许我们应该等两年；也许我们应该等四年；我们认为在投资我们自己的工具集之前，我们已经给了它足够的时间。

告诉我们更多关于火箭的事情——自从它发射以来，你学到了什么？

亚历克斯:我认为我们学到的第一件事是:在任何情况下，你都需要管理压力。我们认为，我们没有大张旗鼓，没有提前做简报，也没有让很多媒体参与进来，这是在帮大家的忙。我的意思是，即使是你自己——你是那种我们通常会在宣布之前就着手处理这些事情的人。你也许可以担保，我们在宣布之前没有和你谈过这件事。那是因为我们没有预料到它会吹得这么大。我们在这方面得到的教训是:如果信息远离我们——就像人们开始在互联网上抨击“根本有缺陷”一样——这可能导致对任何人都没有帮助的讨论。这是一个很大的教训。

我不认为我们在实际交付或如何在博客上发布信息方面搞砸了。我想也许我们可以软化措辞，但没有人对我们所做的技术争论提出异议。我们有一个非常具体的技术论点，如果你真的读了细节并理解它，这个论点就成立。

**我实际上阅读了细节——我不能说我一定理解了一切。**

**亚历克斯:**(笑)对。

我很期待看到，“这是经过深思熟虑的吗？”这是经过深思熟虑的。

Alex: 说到底，技术论点成立。事情是这样的:第一，火箭有了自己的生活。这是一个健康的开源项目——很多分支，很多外部贡献者，发展非常迅速——这很好。我们还开始了关于标准化的讨论，我想这也是每个人都想要的。每个人都希望容器是可互操作的。

我们还在 Docker 项目中触发了一些优先级的重新排序。

> 这是一种非常粗暴的方式，但它确实发生了，这种竞争的存在对客户来说是件好事。

这让我想起了火狐和 Chrome。Chrome 发布的时候，我在 Mozilla，当时的感觉就像是，“怎么回事，伙计们？”第一，谷歌为 Mozilla 付费，所以存在商业关系。Mozilla Firefox 非常成功。Firefox 是金童，植根于一种良好的风气，“让我们夺回网络”，拥有非常敏锐、非常优秀的开发人员。但它有点迷失了方向。Chrome 出现了，做了所有人都知道应该做的事情，但出于某种原因，Mozilla 没有做。

最终结果是:网络变得更快了，网络标准变得更严格了，对用户来说也更好了，Firefox 和 Chrome 都存在于一个它们都可以共存的世界中——这是最好的工具。这就是我认为随着时间的推移会发生的事情:我们将继续投资于 Rocket，并使 Rocket 完全成为我们想要的样子，如果有一个地方 Docker 看起来完全像 Rocket，我仍然认为它们都存在是好的，因为如果有选择，这对最终用户来说更好。

**那里有兼容性吗？你将如何帮助用户理解两者的兼容性和互操作性？你对运行 Docker 和可能对 Rocket 感兴趣和考虑的人说些什么？**

**Alex:** 你对 Docker 说的是，“支持由社区定义的开放标准，而不仅仅是供应商。”使用我们的网络浏览器类比，它非常像网景。Netscape 最初并没有创建第一个 HTTP 协议，但他们是第一个以终端用户友好的方式实现它的人——就像我们谈论容器一样。如果我们称它为“网景网络”或“网景传输协议”，它现在会是一个有点不同的互联网。相反，在这个类比中，HTTP 与 web 浏览器本身是分离的，每个人都有公平的基础来构建与它互操作的最佳工具。这就是我们想要的。

我们想要标准化，然后是可互操作的工具。我想，我们将继续为此游说，直到它实现。我们的标准就在那里。可以采用。它就在那里。现在正在发生。是 Docker 采用的吗？不。有可能吗？毫无疑问。除了政治原因之外，没有任何理由不这样做。

**那么，火箭的下一步是什么？**

亚历克斯:让它棒极了(笑)。我们正在为生产就绪用例设计它，并解决 Docker 的所有生产就绪问题。我们认为，考虑到当前的技术水平，公司(关注安全性和可靠性的严肃的基础设施公司)将选择 Rocket。我们将继续沿着这条道路前进，并专注于注重生产的运营人员。

**对于您正在构建的安全性，您需要牺牲什么？**

Alex: 在安全性和易用性之间总会有一个折中。我们正在尽可能地减轻这种影响。但是，是的，有些事情。也许我们能做的最大的事情就是当我们在 CoreOS 内部实现这些工具时，为你设置安全性。但是，当您在组装模式下使用这些组件，而不是我们完整的端到端解决方案 CoreOS 时，您必须更加注意如何设置。

我们平衡它的方式是通过提供一些端到端的解决方案，为您照顾所有的安全意识，然后给你组件，同时通过良好的开发人员 UI 使组件中的安全性尽可能容易处理。

**您对 Docker 解决安全问题的方式有何看法？你引用他们开发产品；你认为 Docker 中的安全性会成为一种产品，还是会成为 Docker 整体的一部分？**

亚历克斯:我认为，我也希望，火箭已经开启了足够的对话，这些问题将会得到解决。同样，博文中的一句话是，“从安全性和可组合性的角度来看，通过一个单一的二进制文件运行的架构从根本上来说是有缺陷的。”那是台词。Docker 通过将它分解成一堆独立的工具来解决这个问题——这就是解决安全性和可组合性问题的方法。

> 我希望所有这一切的最终结果是 Docker 做到了，因为如果他们不这样做，它*就是*从根本上有缺陷。

幸运的是，所罗门(Hykes，Docker 项目的创造者)是一个思想开放的家伙。他现在在 Docker dev 上，谈论，讨论，并对将其分成一堆不同的工具持开放态度，因为我们认识到这是坏的。

**这让你置身于谈话之中？**

亚历克斯:没错。

**所以:2015 年。我们没有做过任何预测；我不认为我们真的会，除了说我们的重点将是分布式应用程序开发的想法，以及如何跨分布式基础设施和云服务以及多个数据中心管理应用程序。但是，这是一个非常高层次的观点。我很好奇你在 2015 年看到了什么——你对市场有什么特别的期望吗，你将关注什么，以及志同道合的人也将关注什么？**

**Alex:** 我认为 2015 年将是生产就绪型容器的一年。

是的，我在上面看到了你的推文。

**Alex:** 我真诚地认为，除了我们疯狂的基础设施小世界之外，它将最终得到清理并做好准备。我原以为 2014 年将是生产就绪型容器的一年，但这比我们预期的时间要长一点。现在我认为火已经点燃，而且正在燃烧。

**这会如何改变云服务的构成？**

亚历克斯:像 AWS 这样的云服务？

还有谷歌……如果我们能在几乎任何地方移动完整的集装箱呢？

亚历克斯:嗯，这已经是一场底部竞争了。他们现在在产品差异化方面有很多优势，它们不是一对一的。两种云之间完美的工作负载移动性仍然是一个遥远的世界。那是几年后的事了，天哪…每个云中都有容器，你可以到处移动所有东西，而你只是在为最便宜、最快的提供商付费？那仍然是一条出路，但那已经在望。这是毫无疑问的。

首先，云服务提供商可能都在幕后使用容器。我知道 Rackspace 使用一些容器。我知道谷歌使用容器；他们经常谈论它。我不知道亚马逊用什么，但他们都用容器来构建他们的东西。但就最终用户接受容器而言，在我的容器在亚马逊或谷歌上运行得一样好之前，这是一条出路，这样我就可以在它们之间无缝切换。

我们将寻求像您这样的人来帮助我们理解这些概念。我期待保持联系。

**亚历克斯:**我也是——年底的时候给我打电话。让我们再次讨论这个问题，看看我们是否得到了一个生产就绪的容器。

**听起来不错，亚历克斯。非常感谢您抽出时间与我们交谈。我们走了很多路。**

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>