# 什么是时间序列数据库，为什么需要它们？

> 原文：<https://thenewstack.io/what-are-time-series-databases-and-why-do-you-need-them/>

几十年来，[时间序列数据库(tsdb)](https://thenewstack.io/use-time-series-database/)已经在各种行业中普遍使用，尤其是在金融和过程控制系统中。然而，如果你认为你最近听到了更多关于他们的事情，你可能是对的。

[物联网(IoT)](https://thenewstack.io/what-does-it-mean-to-be-on-the-internet-of-things/) 的出现导致产生的[时间序列数据](https://thenewstack.io/time-series-data-care/)数量激增，促使对[专用 TSDBs 的需求。](https://thenewstack.io/why-use-a-purpose-built-time-series-database/)

此外，随着 IT 基础设施的不断扩展，来自服务器、网络设备和[微服务](https://thenewstack.io/microservices-101/)等各种来源的监控数据产生了大量的时间序列数据，进一步凸显了对现代 TSDBs 的需求。

虽然存在传统的时间序列解决方案，但许多都存在过时的架构、有限的可扩展性以及与现代数据分析工具的集成挑战。因此，新一代的时间序列数据库已经出现，在过去十年中发布了 20 多个新的时间序列数据库，特别是开源解决方案。

这些新的 TSDBs 采用现代架构，支持分布式处理和水平扩展，具有开放式 API，有助于与数据分析工具集成，并在云中或内部提供灵活的部署选项。

确保数据质量和准确性对于做出数据驱动的决策至关重要。时间序列数据可能“有噪声”,包含丢失或损坏的值。时间序列数据库通常提供清理和过滤数据的工具，以及检测异常和异常值的方法。

在这里，我们将探讨时间序列数据库的日益普及、与传统解决方案相关的挑战，以及现代 TSDBs 的特性和优势，这些特性和优势使它们成为处理和分析大量时间序列数据的理想选择。

## 什么是时间序列数据？

首先，让我们后退一步。什么是时间序列数据？

时间序列数据是以其基于时间的性质为特征的数据，其中每个数据点都与一个时间戳相关联，该时间戳指示它是何时被记录的。这与其他类型的数据(如事务性数据或基于文档的数据)不同，后者可能没有时间戳，或者可能不是按基于时间的顺序组织的。

如前所述，时间序列数据变得越来越普遍的一个主要原因是物联网设备和其他[流数据来源的兴起。](https://thenewstack.io/what-is-data-streaming/)传感器和互联设备等物联网设备通常会产生大量带时间戳的数据，需要实时收集和分析。

例如，智能建筑可能会收集温度、湿度和占用情况的数据，而制造工厂可能会收集机器性能和产品质量的数据。

类似地，云计算和大数据技术使得存储和处理大量时间序列数据变得更加容易，使组织能够更快地提取洞察力并做出数据驱动的决策。

促成时间序列数据流行的另一个因素是机器学习和人工智能的使用越来越多，它们通常依赖时间序列数据来进行预测和检测异常。

例如，[机器学习](https://thenewstack.io/how-machine-learning-works-an-overview/)模型可能会根据来自传感器网络的时间序列数据进行训练，以预测设备何时可能发生故障，或者检测环境条件何时超出正常范围。

## 时间序列数据是如何使用的？

有许多应用程序和行业通常使用时间序列数据，包括:

**物联网和智能建筑。**智能建筑使用传感器收集温度、湿度和入住率等环境因素的时间序列数据，以及能源使用和设备性能。这些数据用于优化建筑运营、降低能源成本和提高居住者的舒适度。

**制造业。**制造工厂收集机器性能、产品质量和供应链物流的时间序列数据，以提高效率、减少浪费并确保质量控制。

**零售。**零售商使用时间序列数据来跟踪销售、库存水平和客户行为。这些数据用于优化定价、库存管理和营销策略。

**电信。**电信公司使用时间序列数据来监控网络性能、发现问题和优化容量。这些数据包括关于呼叫量、网络流量和设备性能的信息。

**金融。**金融交易公司使用时间序列数据来跟踪股票价格、交易量和其他金融指标。这些数据用于制定投资决策、监控市场趋势和开发交易算法。

**医疗保健。**医疗保健提供者使用时间序列数据来监控患者的生命体征，跟踪疾病爆发并确定患者结果的趋势。这些数据用于制定治疗计划、改善患者护理和支持公共卫生计划。

**运输和物流。**运输和物流公司使用时间序列数据来跟踪车辆和货物位置，监控供应链绩效并优化交付路线。

**能量。**能源行业依靠时间序列数据来监控和优化发电、输电和配电。这些数据包括关于能源消耗、天气模式和设备性能的信息。

在这些行业中，时间序列数据对于实时监控和决策至关重要。它使组织能够检测异常、优化流程并做出数据驱动的决策，从而提高效率、降低成本并增加收入。

## 时间序列与传统数据库

收集和分析时间序列数据的应用程序面临着传统数据存储和分析中没有遇到的特定挑战。

在处理时间序列数据时，时间序列数据库比传统数据库和其他存储解决方案有几个优势。以下是一些主要优势:

### 高写入吞吐量

时间序列数据库旨在处理大量以高频率到达的输入数据点。它们针对高写入吞吐量进行了优化，这意味着它们可以快速高效地实时接收和存储大量数据。这对于生成大量流数据的应用程序(如物联网设备或日志文件)至关重要。

例如，每秒钟从数千台设备收集传感器数据的物联网应用需要一个能够处理大量写入并提供高可用性的 TSDB，以确保数据不会丢失。

另一方面，传统数据库是为事务性工作负载而设计的，并未针对写密集型工作负载进行优化。

### 自动缩减采样和压缩

时间序列数据是高维的，这意味着它具有多个属性或维度，如时间、位置和传感器值。它会很快消耗大量存储空间。有效地存储和检索这些数据可能需要大量的磁盘空间和计算资源。

TSDBs 通常使用下采样和压缩技术来降低存储要求，从而在不牺牲准确性的情况下提供更高效的存储。这使得存储大量时间序列数据更具成本效益。

下采样涉及以较粗的粒度将多个数据点聚合成单个数据点，而压缩涉及通过移除冗余信息来减小数据的大小。这些技术有助于降低存储成本和提高查询性能，因为需要查询的数据更少了。

### 专用查询语言

TSDBs 通常提供专门的查询语言，这些语言针对时序数据进行了优化。

这些语言，如 InfluxQL，支持常见的基于时间的操作，如窗口、过滤和聚合，并可以在大型数据集上有效地执行这些操作。这使得从时间序列数据中提取洞察力和执行实时分析变得更加容易。

### 基于时间的索引

时间序列数据库使用基于时间的索引来根据时间戳组织数据，这允许根据时间范围快速有效地检索数据。这对于需要在事件发生时做出响应的应用程序非常重要。

例如:一家金融交易公司需要能够对市场变化做出快速反应，以利用机会。这需要一个能够提供快速查询响应时间并支持实时分析的时间序列数据库。

传统数据库可能没有这种级别的索引，这会使基于时间的数据查询速度更慢，效率更低。

### 数据保留政策

时序数据库提供了管理数据保留策略的功能，例如在一段时间后自动删除或归档旧数据。这对于管理存储成本和确保数据只保留必要的时间非常重要。

### 可扩展性和高可用性

可伸缩性和高可用性对于处理大量时间序列数据至关重要。TSDBs 旨在跨多个节点进行水平扩展，这使用户能够处理不断增长的数据量和用户需求。除了自动负载平衡和故障转移，这些功能对于支持时间序列数据的高性能实时分析至关重要。

TSDBs 还可以提供高可用性，确保数据始终可以访问，不会因硬件故障或其他问题而丢失。

## 5 个流行的开源时间序列数据库

目前市场上有几种开源的 TSDBs。这些数据库提供了灵活性、可伸缩性和成本效益，使它们成为希望处理和分析大量时间序列数据的组织的一个有吸引力的选择。

这些开源的 TSDBs 在不断发展和改进，并且各有优缺点。选择正确的方法取决于具体的使用情形、数据要求和您组织的 IT 基础架构。

这里有五个流行的开源 TSDBs:

### 普罗米修斯

[Prometheus](https://github.com/prometheus/prometheus) 是一个开源监控系统，带有一个时间序列数据库，用于存储和查询指标数据。它旨在与其他云原生技术很好地合作，如 [Kubernetes](https://thenewstack.io/primer-how-kubernetes-came-to-be-what-it-is-and-why-you-should-care/) 和 [Docker、](https://thenewstack.io/docker-swarm-a-user-friendly-alternative-to-kubernetes/)，并具有一种强大的查询语言，称为 [PromQL。](https://prometheus.io/docs/prometheus/latest/querying/basics/)

### InfluxDB

[InfluxDB 的](https://github.com/influxdata/influxdb)统一架构结合了用于存储和查询数据的 API、用于提取、转换和加载(ETL)和监控的后台处理、用户仪表盘和数据可视化，使其成为处理时间序列数据的强大而通用的工具。

最初由 [InfluxData 开发的 InfluxDB 利用](https://www.influxdata.com/?utm_content=inline-mention) [Kapacitor](https://github.com/influxdata/kapacitor) 进行后台处理，利用 [Chronograf](https://github.com/influxdata/chronograf) 进行 UI 处理，提供了一个全面的解决方案，可以满足拥有复杂数据工作流的组织的需求。

此外，InfluxDB 的开源特性允许定制和与其他工具集成，使其成为一个灵活的解决方案，可以适应不断变化的业务需求。

### TDengine

这款开源 TSDB 旨在处理物联网设备和工业应用(包括联网汽车)产生的大规模时间序列数据。其架构针对实时数据接收、处理和监控进行了优化，允许其每天高效处理万亿字节甚至千兆字节规模的数据集。

[TDengine 的](https://github.com/taosdata/TDengine)云原生架构使其具有高度的可扩展性和灵活性，非常适合需要高性能、可靠的时序数据库用于物联网应用的组织。

### 时标 b

一个强大的开源数据库，旨在大规模处理时间序列数据，同时使 SQL 可伸缩。 [TimescaleDB](https://github.com/timescale/timescaledb) 建立在 [PostgreSQL、](https://thenewstack.io/from-a-fan-on-the-ascendance-of-postgresql/)之上，它被打包成 PostgreSQL 扩展，提供基于分区键的跨时间和空间的自动分区。

TimescaleDB 的主要优势之一是它的快速接收能力，这使得它非常适合接收大量的时间序列数据。此外，TimescaleDB 支持复杂的查询，使得执行高级数据分析更加容易。

### QuestDB

QuestDB 是一个开源的 TSDB，提供高吞吐量的接收和快速的 SQL 查询，操作简单。QuestDB 支持与模式无关的摄取，这意味着它可以处理来自多个来源的数据，包括 InfluxDB line 协议、PostgreSQL wire 协议和用于批量导入和导出的 REST API。

QuestDB 的一个主要优点是它的性能。它旨在以低延迟和高吞吐量处理大量时间序列数据，非常适合金融市场数据、应用指标、传感器数据、实时分析、仪表板和基础设施监控等用例。

## 结论

为特定用例选择合适的时间序列数据库需要仔细考虑数据库支持的数据类型。虽然一些用例可能只需要数字数据类型，但许多其他场景，如物联网和联网汽车，可能需要布尔、整数和字符串数据类型等。

选择支持多种数据类型的数据库可以提供一些好处，例如提高压缩率和降低存储成本。然而，还必须考虑到与使用这种数据库相关的额外复杂性和成本，包括数据验证、转换和标准化。

最终，正确的 TSDB 可以实现实时数据驱动的洞察力并改善决策，而错误的会限制组织从数据中提取价值的能力。随着时间的推移和时间序列数据量的持续增长，选择适合您组织需求的 TSDB 将变得越来越重要。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>