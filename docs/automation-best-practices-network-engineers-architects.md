# 网络工程师和架构师的 IT 自动化最佳实践

> 原文：<https://thenewstack.io/automation-best-practices-network-engineers-architects/>

[](https://avinetworks.com/)

 [埃里克·安德森

埃里克·安德森是 Avi Networks 的开发与自动化工程师和系统架构师。他在 CCNP CCNA 的实验室学习网络和通信管理，配置和维护服务器基础设施以及 IT/项目管理培训和实践。他在各行各业的公司担任过多年的开发运维工程师、网络管理员和系统架构师，最近在康卡斯特硅谷创新中心工作。Eric 喜欢承担自动化项目，并且是使用 Ansible 自动化网络管理任务的专家。他喜欢帮助客户实现网络基础设施的自动化。](https://avinetworks.com/) [](https://avinetworks.com/)

我仍然记得近十年前和朋友在当地酒吧的一次愉快的谈话。没人想到“自动驾驶汽车”的想法，正如其中一个人描述他对日常通勤的愿望，会这么快成为现实。然而，几家公司正在对无人驾驶汽车进行创新、测试和迭代，以使这一概念成为主流。在计算机历史上，技术趋势似乎第一次赶上了自动化的目标。

在 IT 部门，这一趋势正积极影响着企业网络。服务器虚拟化的出现为计算层的自动化创造了机会，最终导致了云计算和基础架构即服务现象。然而，自动化机会在企业网络中仍然是零星和孤立的。

面向 L2 的软件定义网络(SDN)和面向 L4-L7 网络服务的 L3(第二层和第三层)网络和网络功能虚拟化(NFV)对于许多 IT 部门来说仍然遥不可及，因为实施它们所需的技术或专业技能尚不成熟。但是，网络自动化不一定是一个全有或全无的命题。软件定义的应用和网络服务方法与脚本和编排工具(如 Ansible)相结合，实现了无需煮沸海水的网络自动化实用方法。在本文中，我将研究 L4-L7 服务中网络自动化的一些最佳实践，它们可以推动您的网络立即得到改善。

自动化的动机似乎显而易见，但值得回顾一下，以了解您想要实现什么，以及您将如何衡量您的成功。

## 提高对业务部门的响应能力

以应用为中心的企业依靠快速的应用交付来实现收入目标并保持竞争力。许多业务部门现在使用 CI/CD(持续集成和持续交付)流程来快速构建原型和部署应用程序更新。在这些操作环境中，网络团队无法花费数周时间来调配新的应用程序服务(如用于负载平衡的虚拟服务)或调试网络问题。

### 面向新应用架构的服务

许多企业的应用程序团队正在使用微服务架构开发分散的应用程序。在计算层，Kubernetes 等容器和容器编排平台支持基于微服务的开发。用不了多久，It 团队就会被要求支持这些应用程序的生产部署(在我交谈过的一些公司中已经是这样了)。支持这些应用程序而不尽可能自动化服务链是非常困难的，甚至是不可能的。

### 消除手动配置错误

将错误的池成员添加到错误的 VIP、无意中使应用服务器停止服务或配置不正确的服务器证书都是手动配置过程可能导致的错误示例。这些任务可以很容易地自动化，并在以后调试问题时节省大量时间，特别是在复杂的应用程序环境中。

### 解决人员短缺问题

IT 部门总是会面临处理请求的熟练技术人员的短缺。正如我的一位同事所描述的那样，他讨厌做一只“VIP 猴子”，把时间浪费在可以自动化的活动上，从而腾出时间来处理更紧急的任务。更重要的是，IT 领导者发现，IT 运营的速度和规模无法通过简单地扩大员工规模来实现。

### 确保跨应用程序的一致性

自动化配置任务是确保应用程序一致性的最简单方法。它使网络工程师能够将配置转化为代码，对配置进行版本控制，并确保系统配置总是从单一事实点中剔除。

## 多云和混合云使用案例

许多云和网络架构师正在有效地利用公共云环境作为其数据中心的扩展。他们希望在数据中心部署应用程序，然后在应对意外流量高峰时突然转向云，以利用灵活的容量，然后在流量恢复正常时再转回数据中心。

尽管实现网络服务自动化的原因可能各不相同，但一些基本的经验法则在各种环境中都是通用的。我在与同事的讨论中，以及在我参加的社交聚会上，使用并听到了这些最佳实践。

### 获得管理层的支持并制定自动化路线图

确保您的组织支持您的自动化目标。任何时候引入新的 IT 实践或程序，都是一种文化转变，需要应对潜在的组织阻力。这些人可以是不愿意改变或学习新工具的人，也可以是担心自动化会破坏标准操作程序和其他制衡机制的团队。这就是为您的自动化计划创建一个路线图的原因，它提供了一个增量的方法，使团队能够在小的成功的基础上，学习和纠正过程。

### 进行现场审计/调查

在开始自动化之旅之前，请确保您了解应用程序的类型及其互连方式，以及您需要支持的环境(VMware、公共云、裸机部署等)。)，以及应用程序的扩展要求，包括生产与非生产的差异。您还需要清点正在使用的网络设备及其供应商，因为这将对您选择的自动化工具产生影响。了解当前的应用程序发布渠道也很有用，这样您就可以了解必须满足的维护窗口和 SLA。现场调查还将通过避免潜在的地雷(也就是受行业法规约束的应用程序，如 PCI DSS)让您保持理智，您可能希望在您的第一次自动化齐射中跳过这些地雷，直到您有机会测试您的脚本。

### 评估您的自动化工具选择

在根据您在论坛上读到的帖子或朋友的推荐来实现工具之前，请花时间了解网络自动化工具的前景。它们的范围从 Python 和 Ruby 代码库到开源以及商业工具，如 Ansible、Chef、Puppet 或 Salt Stack。通过 PoC 流程，您可以了解支持自动化工具并为其预建了模块的所有系统和网络设备。例如，一些网络技术已经在 GitHub 中提供了 [Ansible 代码样本和自动化脚本](https://github.com/avinetworks/ansible-role-avisdk)。

## 选择完全支持 REST API 的基于软件的解决方案

当您不必被迫购买新硬件、配置新硬件然后进行部署时，自动化会容易得多。特别是，如果您希望自动化 L4–L7 应用服务，新的软件定义的负载平衡方法通过提供弹性服务结构来创建集中控制的负载平衡器的分布式池，从而实现端到端自动化。对于常见的负载平衡功能，可以使用这些自动化脚本的许多可翻译的剧本示例。选择能够以 REST APIs 的形式提供平台所有功能的技术，为自动化提供最好的基础。例如，这些平台可以帮助您实现开发人员自助服务，方法是设置一个门户来自动执行虚拟服务配置，自动创建和配置池，修改标题和请求，并以可移植的 YAML/JSON 格式捕获您的整个配置。

IT 的圣杯是自动化操作，以快速部署创新的新服务，推动资源的最有效利用，并提供最佳性能和理想的用户体验。随着我们的计算基础设施变得更加分散和复杂，自动化是不可避免的，并将渗透到 IT 的所有领域，从应用程序开发和测试，到网络配置、应用程序网络服务、安全性和监控。随着工具的改进和成熟，以及网络技术专家对他们的团队进行技能再培训，这些自动化方法肯定会给企业带来无与伦比的灵活性和可伸缩性。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>