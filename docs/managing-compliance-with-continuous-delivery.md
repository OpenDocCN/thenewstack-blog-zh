# 通过持续交付管理合规性

> 原文：<https://thenewstack.io/managing-compliance-with-continuous-delivery/>

[](https://www.linkedin.com/in/stephen-atwell/)

 [斯蒂芬·阿特韦尔

斯蒂芬开发产品是为了改善技术人员的生活。目前，他的重点是军械库的政策和合规产品。Stephen 拥有计算机科学工程学士学位，曾担任过网络管理员、软件工程师和产品经理。](https://www.linkedin.com/in/stephen-atwell/) [](https://www.linkedin.com/in/stephen-atwell/)

本文探讨了连续交付如何帮助组织维护法规遵从性，并讨论了如何使用回滚和渐进式部署等功能来加强对解决方案基础架构的控制。

它展示了如何改进代码部署，确保合规性，并在您的开发人员和运营团队之间维护一个健康、活跃的创新生态系统。

开发人员和 DevOps 团队经常受困于高度手动、容易出错和资源密集型的流程，这些流程并不总是符合各种法律法规的要求。

每个行业都有自己的一套法规和合规规则。例如，金融行业拥有广泛的监管机构和法规，例如:

*   联邦风险和授权管理计划(FedRAMP)，适用于云中的公司。
*   支付卡行业数据安全标准(PCI DSS ),用于规范接受在线支付的公司。
*   服务组织控制(SOC2)，有助于在组织的服务交付流程和控制中建立信任和透明度。

此外，一些通用法规，如欧盟通用数据保护法规(GDPR)和加州消费者隐私法案(CCPA)，适用于服务于地区或国际受众的组织。在完全部署之前，组织必须检查每个软件迭代是否符合这些法规。

金融等行业中不断变化的法规对于使用应用程序开发和部署整体系统的组织来说尤其具有挑战性。他们无法快速满足不断变化的法规遵从性要求，并且在更改应用程序的一部分时可能会面临延迟，这会减缓创新。

Monolith 应用程序的交付变得很有挑战性，因为你必须对每一个变化的整个技术栈进行符合性测试。

许多组织放弃了单一的应用程序，转而采用持续集成和持续交付(CI/CD)来应对法规和其他挑战。现代 CD 工具帮助技术团队快速(有时是自动)推出变更，以满足不断变化的法规要求，同时维护审计日志。

## 使用连续交付进行频繁更新

组织正在转向面向微服务的开发和部署模型。这种开发模型帮助他们的工程团队关注整个解决方案中的单个挑战，并快速解决它们。

因为每个团队维护一个单一的代码库，所以更容易管理和确保遵从。此外，如果出现任何问题，团队可以轻松地将他们的部署回滚到以前的合规状态。

一个典型的企业应用程序可能包含数百个称为微服务的小流程。在数百个不同的应用程序上验证法规遵从性检查比一个大范围的应用程序更容易管理。这是因为在部署检查期间，您可以轻松地锁定和管理不符合的流程。

如果某个微服务不合规，团队将只拒绝该微服务的部署，而不是整个堆栈。这种拒绝还会提醒负责微服务维护的开发人员确保他们的代码库符合要求。

有时在本地调试和运行解决方案在技术上是不可能的。例如，如果您的团队必须提供和分析您的应用程序生成的日志，那么在开发人员的机器上运行整个集群可能是不可行的。然而，为每个团队提供一个测试或开发环境在许可、硬件和人员配备方面是昂贵的。

相比之下，使用微服务，每个团队可以在本地运行他们的项目，确保合规性，然后推动部署。您的 IT 团队可以对每个版本进行部署检查，以批准或拒绝需要改进的版本。

在您通过了合规性检查之后，渐进式推广会将任何未检测到的问题的影响降至最低。渐进式部署将一部分流量导向微服务的新版本，而大部分流量继续使用旧版本。这允许您使用生产工作负载的子集来检查新版本，最大限度地减少任何未检测到的问题的影响。

当这些版本并行运行而没有出现问题时，您可以扩展新版本，并从旧版本重新路由剩余流量。如果您在部署过程中的任何一点发现问题，只需点击一次回滚即可将流量重新路由回旧版本。

持续交付可确保您的 IT 和合规团队掌握基础架构的每个版本。尽管公司主要使用微服务来孤立地测试和验证新功能，从而最大限度地减少占用空间并降低软件交付风险，但微服务也可以帮助您的团队在管理机构引入新法规时快速应用更改。

## 灵活性和可靠性

当您管理平稳的推出和回滚时，维护一个连续的交付管道可能是具有挑战性的。连续交付要求您测试和验证部署的功能和合规性。

当您的部署不符合生产服务级别协议(SLA)时，您应该能够将更改恢复到以前的工作状态。

渐进式部署和一键式回滚可帮助您控制开发运维渠道。渐进式部署可确保您的应用向您定义的目标受众推广。此功能帮助您的 IT 团队逐渐允许一组客户访问您的最新部署，确保一切就绪，然后逐步向您的其他受众提供最新部署。

这种交错发布的好处是，如果您的平台崩溃或发现任何 bug，您可以控制应用程序并快速将其恢复到工作状态。例如，一次点击回滚可以帮助您恢复最近对基础架构的更改，如 [Kubernetes](https://docs.armory.io/docs/spinnaker-user-guides/automated-rollbacks/) 。

使用像我们这样的工具，您可以控制回滚发生的时间。这有助于在生产中出现其他问题时防止不必要的回滚。

当您发现合规性问题时，您可以使用回滚将应用恢复到合规状态。回滚有助于避免无意中违反规则并招致罚款、吊销执照或其他监管措施。

## 控制连续交货

[持续交付](https://www.armory.io/learn/what-is-continuous-delivery/)的目标是为部署准备每一个代码提交。除了验证应用程序功能之外，您还需要对您的部署运行特定的策略验证，以确保安全性和合规性。

您还可以使用[开放策略代理](https://www.openpolicyagent.org/)编写定制策略。这些策略可确保合规性，并使您的合规性和 it 团队更容易检测部署中的危险信号。

您的组织可以编写自定义策略，以确保在将代码部署到生产环境之前，自动测试套件和安全扫描程序能够运行。这些策略包括但不限于安全漏洞、硬编码密码或连接端点、记录用户数据、打开不必要的端口等。

利用这一自定义策略功能，您可以控制允许将哪些映像部署到生产环境中，以及该工具应该拒绝哪些映像。此外，您可以强制执行大多数传统上由 Kubernetes Gatekeeper 实现的策略。

一些组织不允许开发人员访问某些生产日志。这种访问的缺乏减慢了部署过程，并且当出现生产问题时，开发人员不知道哪里出了问题。

## 结论

在本文中，我们讨论了应用程序在遵从和法规方面面临的挑战。Monolith 应用程序的开发和部署更有可能减缓应用程序的部署和发布，因为这使得对部署进行合规性、质量和法规检查变得非常困难，减缓了整个 DevOps 管道的速度，并使回滚基础架构更改变得非常困难。持续交付有助于克服这些挑战。

*立即联系 Armory，获得对您的软件交付实践的[免费评估](https://www.armory.io/demo-request/)，并了解您的组织如何从安全、可靠的部署中获益。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>