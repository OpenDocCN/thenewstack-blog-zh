# 您的基础架构准备好进行分离部署了吗？

> 原文：<https://thenewstack.io/infrastructure-ready-decoupled-deployment/>

这是一系列论文的最新条目，来自即将到来的

[KubeCon](http://events.linuxfoundation.org/events/kubecon)

和

[CloudNativeCon](http://sched.co/8K3m)

会议将于 11 月 8 日至 9 日在西雅图举行。

[](https://avinetworks.com/)

 [斯沃纳·波迪拉

斯沃纳·波迪拉是 Avi Networks 的产品营销部门主管，她负责创建信息、营销内容和产品宣传。在加入 Avi Networks 之前，Swarna 曾在 Mocana、Citrix 和 Symantec 等公司领导产品营销职能。Swarna 拥有圣克拉拉大学的电子和通信工程学士学位和 MBA 学位。](https://avinetworks.com/) [](https://avinetworks.com/)

正如 [Brendan Burns](https://twitter.com/brendandburns) 曾经[雄辩地解释](https://www.youtube.com/watch?v=WwBdNXt6wO4)的那样， [Kubernetes](/category/kubernetes/) 的构建前提是将大量[微服务](/category/microservices/)从高度关联、相互依赖的问题中分离出来，以便一个微小的变化不会导致连锁反应并使整个应用程序崩溃。

随着 Kubernetes 的采用率上升，我开始想知道我在 Twitterville 上的朋友是否和我们(我们的客户)有着同样的担忧。我在 Twitter 上发布了一个关于 Kubernetes 部署遇到的问题/顾虑的调查。最常见的答案是部署自动化和负载平衡。

该行业正从单一应用架构转向微服务架构，通过数百个微服务应用实现持续创新。虽然 k8s 可以帮助自动化部署、扩展和管理容器化的应用程序，但看到我最近的投票结果还是很有趣的(也很有说服力)。

## 部署自动化

当向数百个微服务交付持续更新时，有几个方面需要记住，以确保一个更改不会中断应用程序。

### 服务发现

一旦您有了一个微服务应用程序的多个实例，需要回答的主要问题是“我如何连接到一个特定的微服务？”或者“另一个服务如何消费特定微服务提供的服务？”无论目标实例驻留在 pod 中还是不同的 pod 中，服务都必须能够成功地找到它并根据需要发送请求，以确保无缝的用户体验。

### 负载平衡

要解决的下一个主要挑战是这些微服务的负载平衡应用流量。任何负载平衡解决方案都可以帮助您处理南北流量；您只需要确保与您的网络团队合作，设置路由规则，以跟踪从公共 IP 实例到负载平衡器的流量，并确保这些路由始终指向正确的负载平衡器。如果负载平衡器在高可用性设置中进行故障转移，您可能需要手动更新，或者编写脚本来更新路由规则，以更改从一台主机到另一台主机的下一跳。但是，这些微服务会在 Kubernetes 集群中的 pod 之间产生大量东西向流量。您将需要一个能够智能处理跨单元流量的解决方案。

### 多云流量管理

负载平衡的后续挑战是在多云环境中部署应用程序的能力。例如，我们应该能够在不同数据中心站点或公共云区域上运行的 OpenShift 集群中部署应用。这些站点之间的切换应该是无缝的，并且能够自动扩展应用程序和负载平衡资源。流量管理策略必须支持基础设施的异构性，并从 IT 运营中抽象出复杂性，同时无论应用部署在何处，都能提供一致的体验。

### 用于自动扩展的应用分析

一旦设置了所有的应用程序服务并部署了 Kubernetes 集群，下一步就是监控应用程序流量和性能。您需要测量的一些指标包括连接数、每秒事务数、用户类型、用户行为等等。您获得的洞察力越精细，您的 Kubernetes 部署就越高效。容器、微服务和 CI/CD 计划越来越受欢迎，因为它们自动化了服务交付。因此，扩展微服务应用也应该是自动的，不需要手动干预。您需要洞察流量模式，为微服务实例或负载平衡器定义自动扩展触发器，以规划峰值使用。

这些分析还可以帮助您了解引发连锁反应的特定故障源或特定微服务。这也将有助于您的故障诊断少了很多像“在豆荚(干草堆)中寻找一根针”的噩梦！

## 结论

推广您的微服务部署不应该成为一种折磨。Kubernetes 提供了自动化部署所需的所有工具。我们期待在 KubeCon 2016 上与您见面，就您的经历和关注的问题进行更多的交流。

专题图片:[列车车钩](https://en.wikipedia.org/wiki/Janney_coupler)，丹尼尔·施文摄影， [CC BY-SA 4.0](https://commons.wikimedia.org/w/index.php?curid=4784168) 。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>