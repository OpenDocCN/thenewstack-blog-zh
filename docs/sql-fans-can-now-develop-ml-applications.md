# 构建机器学习应用程序？从 SQL 开始

> 原文：<https://thenewstack.io/sql-fans-can-now-develop-ml-applications/>

开发[机器学习](/category/machine-learning/) (ML)应用程序需要一系列高级语言、不同的系统和编程工具，只有特定的开发人员才能使用这些工具。

但是现在普通的 ML 函数可以直接从广泛理解的 SQL 语言中访问。这对于面临人才短缺的组织来说，尤其有助于执行机器学习计划。

在本文中，我们将提供如何将机器学习工作流与可伸缩的 SQL 数据库集成的用例及示例，并展望未来这将如何促进进一步发展的机会。

## 新的数据库和硬件方法有利于机器学习

机器学习不是新的，SQL 数据库也不是新的，那么改变了什么呢？三件事。

 [亚当·普劳特

Adam Prout 负责监督 SingleStore 的产品架构和开发。他以联合创始人工程师的身份加入了 SingleStore，此前曾担任工程副总裁。Prout 在 Microsoft SQL Server 担任了五年的高级数据库工程师，领导内核开发方面的工程工作。Prout 拥有滑铁卢大学的计算机科学学士和硕士学位，是分布式数据库系统方面的专家。](https://www.memsql.com/) 

*   **分布式系统:**如今，SQL 数据库是分布式的，允许你使用更多的内核，拥有更好的并行性。总的来说，这使得更多的硬件能够同时处理一个查询，从而提供最佳性能。分布式系统可以扩展到数百个服务器或云实例，提供与单节点系统不同的性能竞争环境。
*   **新硬件:**现代 CPU 处理器硬件越来越复杂。例如，英特尔高级向量扩展模型，一种[单指令多数据](https://link.springer.com/referenceworkentry/10.1007%2F978-0-387-78414-4_220#page-1) (SIMD)的实现，在其第一次迭代 AVX-2 中广泛使用，新的高端处理器支持更高级的 AVX-512。简而言之，SIMD 允许处理器同时处理多个数据，从而提高处理器级的并行性。此外，GPU 可以通过同时协调多个内核来实现类似的并行性。
*   **代码生成:**代码生成通过将原始请求转换成机器代码，帮助优化数据库中的查询和定制功能，从而使其运行得更快。然而，代码生成的真正力量来自于生成针对特定查询优化的机器代码，避免了解释器的开销。解释器是一段代码，它可以运行任何查询，因此包含更多的通用指令，这对于给定的特定查询的性能来说通常不是最佳的。

从历史上看，传统数据库具有内置的快速功能。但这些都是有限的一套，很少有新的补充。通过代码生成，客户部署的任何新功能都可以从转换为机器代码中受益。本质上，具有有效代码生成的数据库代表数据库用户不断优化。

## 是什么推动了 ML 的炒作

毫无疑问，个人和公司都希望从他们的数据中获得更多，而今天的数据太大了，无法在人的层面上进行分析。机器处理或机器学习是收集洞察力的唯一途径。

机器学习通常涉及以计算密集型方式处理大量数据。在软件系统中拥有这些底层技术能力是机器学习的关键使能因素。

### 并行化

机器学习并不新鲜，但 ML 的并行化才是新鲜事。从历史上看，ML 一直专注于诸如 R 和 Python 之类的语言，它们:

*   灵活。
*   与 C++或 Java 等低级语言相比，相对容易学习，尽管仍然比 SQL 难学。
*   以单线程进程为主。

另一方面，SQL 已经:

*   历史上被认为灵活性稍差。
*   但是，易于学习并在企业中广泛部署。SQL 就像我们今天用英语问计算机一个精确定义的问题一样。
*   过去有多线程功能，但经常是单服务器执行。

如今，随着分布式 SQL 数据存储的发展，您可以将 SQL 作为数据访问语言的优势与可伸缩并行系统的性能和功能结合起来。

### 接近数据的处理

SQL 和 ML 进一步融合的另一个发展是，使用 R 和 Python 等语言，处理离数据更远了。数据从数据存储中提取，然后在外部引擎或数据应用层进行处理。Spark 支持对内存中的数据分布式执行 R 和 Python 代码，但这是暂时的，仍然需要数据源和结果的外部持久性。

对于 SQL 数据库，数据库本身存储数据并处理数据，因此通过使用 SQL 操作，您可以为了性能和可伸缩性而折叠堆栈。

## SQL 和 ML 的例子

有几种方法可以利用 SQL 和 ML。特别是，这些方法侧重于机器学习模型的操作化。这些方法并没有涵盖 ML 模型的所有实现，但是它们确实为实时应用程序提供了一组新的可伸缩性和性能。

### 用点积比较矢量

数学运算符 [**点积**](https://en.wikipedia.org/wiki/Dot_product) ，有时也称为**标量积**，比较两个向量并返回相似系数。 **DOT_PRODUCT** 不是一个新函数，但是在分布式 SQL 数据库中实现这个函数是新的，它提供了将这个函数与一个可操作的 SQL 数据库放在一起的能力。

如果没有协同定位功能，您将需要一个外部系统来匹配向量，然后在数据库中查找它们。更高效的方法是将最终的匹配步骤放在数据旁边。

**点积**的真实例子包括比较面部或图像识别的向量。同样，许多商品和服务的属性完全符合一个向量。考虑一下房子或汽车的所有属性，它们也可以很容易地转换成向量。

### 得分

开发机器学习模型通常是离线进行的，但评分通常是实时进行的，为现代应用程序提供了令人信服的商业价值。

使用正确的 SQL 数据库，ML 模型可以作为系统中的数据区执行，在同一表的同一行中提供原始数据点和 ML 结果点。

使用实时方法，评分发生在过程中，不需要第二阶段来运行和建立评分。因为分数一直都在，所以应用程序的复杂性大大降低，需要管理的总体流程也更少。

当与分布式 SQL 数据库结合使用时，该系统可以轻松扩展，以处理来自全球应用程序的最大输入工作负载。Kafka 等消息队列和 Spark 等执行引擎的高性能并行连接器带来了额外的好处。

### **自定义函数和程序 SQL**

另一个创新领域是增加了分布式数据库的可扩展性。在 Oracle 支持 PL/SQL 和 Microsoft 支持 T-SQL 的情况下，向数据库添加可扩展性并不新鲜。但是，向分布式数据库添加自定义函数和过程化 SQL 是一种新的方式，提供了一系列选项。这就是 MemSQL 的大规模并行 SQL(称为 MPSQL)的方法。

向还支持代码生成(包括可扩展性函数的代码生成)的数据库添加可扩展性，可以从计算资源中获得最大可能的性能。

例如，使用过程化的 SQL 函数，您可以在 SQL 中实现流行的 k-means 聚类算法。本[演示的第二部分](https://www.slideshare.net/MemSQL/gartner-catalyst-2017-the-data-warehouse-blueprint-for-ml-ai-and-hybrid-cloud)简单演示了 SQL 中的 k-means 聚类。

一旦将这些类型的函数构建到 SQL 数据库中，您就拥有了底层可编程性的优势。具体来说，您可以构建自定义函数来适应您的应用程序。其他数据库通常具有内置的自定义功能，但是无法更改或自定义它们。

拥有底层的可编程性比简单地拥有内置函数有更大的优势。这一点至关重要，因为所有数据都是唯一的，为了实现最佳优化，您需要能够进行修补。MPSQL 等编程方法提供了这一点。

## 继续使用 ML 和 SQL

展望未来，我们可能会看到数据库本身内部使用更多的机器学习。一旦有了数据，用户输入 SQL 查询，数据库自然会收集每个用户的更多信息。

这将推动易用性的进步。现在，如果你想合并 ML，你必须写所有的东西，但是没有什么比 SQL 查询更简单的了。

ML 和 SQL 将继续在许多方面和一系列框架上重叠。目前，我们有大量的 Spark、TensorFlow、 [Gluon](https://github.com/gluon-api/gluon-api/) 等。最终，行业将集中在更少的框架上，它们将被构建到数据库中。这种功能的融合将更易于使用，并为新的应用程序带来架构上的进步。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>