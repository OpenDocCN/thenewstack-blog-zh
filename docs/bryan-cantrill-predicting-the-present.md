# 布莱恩·坎特里尔:基础设施、开源和 Rust 的下一步是什么

> 原文：<https://thenewstack.io/bryan-cantrill-predicting-the-present/>

作为技术专家，我们部分地生活在未来:我们总是根据对未来的预测进行隐性押注。为了更好地理解我们对未来的预测，理解过去是有帮助的——尤其是我们过去对未来的预测。” —布莱恩·坎特里尔在 2022 年锡拉 DB 峰会上

如果你了解布莱恩·坎特里尔，你就会知道他的思维以神秘的方式运作，敢于做出伟大的事情。因此，坎特里尔对古老的新年预测实践的采用有点出乎意料，并产生了可预见的敏锐结果，这应该不会让你感到惊讶。

在太阳微系统公司(他 10 岁的女儿怀疑这是一个小型酿酒厂)近十年的时间里，坎特里尔和十几个基础设施技术专家同事养成了预测一年、三年和六年的习惯。他们犯了什么大错？惊人的正确？这对未来意味着什么？我们来看看。

*Cantrill 为 ScyllaDB Summit 精心制作了这个演讲，这是一个虚拟会议，旨在探索需要什么来推动大规模分布式数据集的即时体验。你可以在下面观看他的完整会话。*

*此外，立即注册(免费+虚拟)至* [*参加 ScyllaDB Summit 2023*](https://www.scylladb.com/scylladb-summit-2023/?latest_sfdc_campaign=7016O000001G3LO&campaign_status=&utm_campaign=smo%20new%20stack%202023-02-15%20scylla%20summit&utm_medium=social%20media%20-%20organic&utm_source=the%20new%20stack&lead_source_type=the%20new%20stack)*直播，届时将有来自 Discord、Hulu、Strava、Expedia、ShareChat、腾讯游戏、GumGum、iFood、Percona、ScyllaDB 等公司的工程师，以及 WebAssembly、事件流、云基础设施和其他对数据密集型应用至关重要的技术方面的行业专家。*

[https://www.youtube.com/embed/i4-u0SSG2bQ?feature=oembed](https://www.youtube.com/embed/i4-u0SSG2bQ?feature=oembed)

视频

## 回顾 2000-2007 年对未来技术的预测

以下是坎特里尔和他的基础设施技术同行们在 21 世纪初做出的一些较为著名的一年、三年和六年预测——与他们记录的完全一样:

*   *   六年预测，2000:“大部分 CPU 都是四核以上。”
    *   2003 年的三年预测:“苹果开发新的‘必备’设备:iPhone。数码相机/MP3 播放器/手机。”
    *   2003 年的六年预测:“互联网带宽增长到电视广播变得基本无关紧要的程度；以前的电视网开始网络广播。
    *   2005 年的一年预测:“垃圾邮件正在好转，不再是一个问题。”
    *   2006 年的一年预测:“谷歌因美国政府未经授权监视 Gmail 而尴尬。”
    *   六年预测，2006 年:“批量 CPU 仍然低于 5 GHz。”

这些预测中有许多抓住了趋势，但在时间上有些偏差。让我们依次回顾一下。

### 六年预测，2000 年:“大多数 CPU 都有四个或更多内核”

从 2022 年的角度来看，笔记本电脑将拥有六核或八核，这似乎是显而易见的。但到 2006 年，这还没有成为现实。把这个归档在“正确的趋势，错误的时机”下

### 2003 年的三年预测:“苹果开发出新的‘必备品’:iPhone。“数码相机/MP3 播放器/手机”

这个有先见之明的预测是坎特里尔自己的(是的，他确实预测到了“iPhone”这个名字)。但是他在一个不那么次要的方面有点不正常。他承认:

“我几乎是在拿自己做这个预测开玩笑，因为我觉得这个东西会很可笑，没有人会想要它。所以这个预测是正确的，但它也是非常非常错误的。”

### 2003 年的六年预测:“互联网带宽增长到电视广播变得基本无关紧要的程度；前电视网开始网络广播

当他的同事分享这一点时，坎特里尔想起了他的怀疑。现在很难相信我们曾经生活在一个你必须坐在电视机前才能了解突发新闻的世界。然而，在 2003 年，在网上获取新闻的概念似乎是一个不可能的未来。

### 一年预测，2005 年:“垃圾邮件好转，问题比去年少”

尽管难以置信，但 Cantrill 向我们保证，以前的垃圾邮件问题比现在严重得多。2005 年左右，感觉没救了。然而，它确实在 2006 年前后出现了转机——正如预测的那样。可能值得注意的是，这一精确的短期预测来自一位在邮件服务器上工作的技术专家，因此他与垃圾邮件问题密切相关。

### 2006 年的一年预测:“谷歌因美国政府未经授权监视 Gmail 而尴尬”

我们目睹了各种各样的丑闻，涉及政府未经授权访问大型服务，所以这个预测确实抓住了普遍的时代精神。然而，具体的细节被关闭。

### 六年预测，2006 年:“批量 CPU 仍然低于 5 GHz”

在你认为这是显而易见的之前，要知道在 2006 年时，还不清楚 Dennard scaling(晶体管越小越快的想法)何时会结束。但是，正如坎特里尔的同事预测的那样，它确实结束了——可能比预期的要早(大约在 2006 年、2007 年)。我们确实在不到 5 GHz 时达到了最高，更像是 4 GHz 甚至 3 GHz。

## 那又怎样？那错过整个“云计算”的事情呢？

当我们站在 2023 年的尖端时，为什么我们要回顾 21 世纪初的技术预测呢？坎特里尔的回答是:“关于他们，有趣的是他们告诉了我们很多我们当时在想什么。我认为预测告诉我们的是现在，而不是未来，这有点自相矛盾。”

回想起来，观察实现的预测类型最终比单个预测的命运更有趣。他们的长期预测往往比一年预测更准确。尽管一年的时间越来越近，但一年内可能发生的变化太多，很难预测。

更有趣的是这群基础设施技术专家所忽略的大趋势。“是的，我们预测了 Dennard scaling 的终结……是的，我们预测了 iPhone，尽管是嘲讽。但我们并没有预测云计算或软件即服务会在这段时间内在任何地方出现，”Cantrill 说。

然后，顿悟:“我们错过的事情是我们当时已经知道的事情扩大的结果。”他们的大趋势失误列表中充满了在 21 世纪初就在他们眼皮底下的技术——只是还没有！)的范围，挖掘他们的潜力，使他们真正转型。例如，他们低估了以下因素的影响:

*   *   *   互联网
        *   分布式版本控制
        *   摩尔定律
        *   开放源码

再来点色彩，以开源为例:做出预测的技术专家是开源的用户。他们开源了自己的软件。他们是开源的热情支持者。然而，根据 Cantrill 的说法，他们低估了它真正改变行业的力量，因为他们“没有完全理解一切都开源意味着什么。”

## 回到未来

那么，所有这些对过去预测的分析是如何影响坎特里尔对未来的预期的呢？

他不太关注将会创造出什么样的新事物，而更关注挖掘现有事物力量的进化。一些细节:

### 计算变得无处不在

Cantrill 的第一个预测是，强大的计算将变得更加广泛——不仅仅是将计算机移动到新的地方(物联网),还包括我们曾经认为是组件的 CPUs 例如，开放的 32 位 CPU 正在取代隐藏的封闭的 8 位微控制器。我们已经看到网卡上的 CPU(smart NIC)、闪存旁边的 CPU(开放通道 SSD)以及主轴上的 CPU(WD 的 SweRV)。

Cantrill 相信，这种计算激增将为硬件/软件协同设计带来新的机遇。(请参见“ [Bryan Cantrill 谈 Rust 和低延迟系统的未来](https://thenewstack.io/bryan-cantrill-on-rust-and-the-future-of-low-latency-systems/)”以了解关于该主题的更多详细信息。)

### 开放式 FPGA/HDL 是真实的

现场可编程门阵列(FPGA)是集成电路，可以在制造后进行编程，以完成任意任务。要更改 FPGA 的功能，您可以使用使用硬件描述语言(HDL)设计的比特流对其进行重新配置。

从历史上看，这些比特流完全是专有的，因此任何对它们进行编程的人都完全依赖于完全封闭的专有工具链。

[克莱尔·沃尔夫](https://www.clairexen.net/projects)改变了这一点。Wolf 对 Lattice iCE40 位流和其他位流进行逆向工程的出色工作打开了真正开放 FPGA 的大门:在 FPGA 中，您可以合成位流，您可以使用 100%开源工具将您要编程的内容合成到 FPGA 上。

坎特里尔认为这将是一个游戏改变者。正如拥有开源开发工具使软件开发大众化一样，FPGAs 也会发生同样的事情。随着工具链的开放，更多的人实际上可以合成比特流。

用坎特里尔的话说，“这东西太神奇了。当然，这不是所有问题的解决方案。但是，如果你有一个适合特殊用途计算问题，FPGA 可以为你提供一个快速简单的方法。”

同样，高密度脂蛋白也在开放，Cantrill 认为这也将是变革性的。

HDL 传统上由 [Verilog](https://ieeexplore.ieee.org/document/1620780) 和(后来的)SystemVerilog 主导。它们的编译器在历史上是专有的，语言本身也容易出错。但是在过去的几年里，新的、开放的 HDL 大量涌现；比如凿子，nMigen，Bluespec，SpinalHDL，Mamba (PyMTL 3)和 HardCaml。

其中， [Bluespec](https://bluespec.com/) 是 [Oxide Computer](https://oxide.computer/) 团队最感兴趣的，Cantrill 是该团队的联合创始人兼首席技术官。“正如我们的一位工程师所描述的那样，Bluespec 对于 SystemVerilog 就像铁锈对于组件一样。“这是一种更高层次的思考系统的方式，使用编译器中的类型来实际生成一个可靠的系统，一个可验证的系统，”Cantrill 解释道。

### 开源 EDA 正在成为现实

专有软件在历史上一直主导着电子设计自动化(EDA)，但开源选项在这个领域也开始崭露头角。

开源替代方案已经存在多年了，但是有一个特别的，KiCad 已经得到了足够广泛的支持，可以缩小与专业级软件的差距。KiCad(尤其是 KiCad 6)的成熟，再加上快换印刷电路板(PCB)制造/组装的兴起，已经允许了惊人的速度。现在，在几个小时内从构思到制造，然后在几天内从制造到发货是可行的。

Oxide 一直将 KiCad 用于其较小的电路板(原型电路板),但设想未来它可以将 KiCad 用于其较大的电路板——并且不再使用专有的 EDA 软件。

“这种专有的 EDA 软件具有专有软件所具有的所有问题。像许多商店一样，我们因为许可证服务器崩溃或许可证服务器需要重启而损失了时间…任何人都不应该因为许可证服务器停机而无法工作，”Cantrill 解释道

“我们现在在 KiCad 获得的质量是真正的专业级，这使我们能够在硬件上更快地迭代，从最初的概念到制造商只需几个小时。当制造商可以在几天内将电路板运送给你，而你可以在一周内将你脑海中的东西变成手中的 PCB，这是非常了不起的。这是一个全新的时代，”他说。

### 开源固件是(终于！)发生

Oxide 团队看好开源固件，就像他们看好 KiCad 一样。

Cantrill 说,“开源革命一直以来都非常重要。有开源数据库，有 [ScyllaDB](https://www.scylladb.com/) 和许多其他的，有开源系统软件，还有开源操作系统。但是固件本身已经对它产生了抵触情绪。”

结果呢？困扰其他专有软件的所有相同问题。它们需要很长时间来发展。当他们出来的时候，他们是有缺陷的。他们有安全问题。“我们知道开源软件是交付经济软件、可靠软件和安全软件的方式。坎特里尔说:“我们需要将这一点完全融入到固件中。

不过，他相信我们最终会成功的。最接近硬件运行的软件越来越开放，驱动程序几乎总是开放的。系统不可见部分的固件也越来越开放(参见[开源固件会议](https://www.osfc.io/))。这种趋势在 7 纳米 SOC 中较为缓慢，但它确实正在发生。唯一真正落后的是引导只读存储器。即使在假定的开放架构中，引导 rom 仍然是专有的。这是一个问题，但 Cantrill 相信我们很快会克服它。

### Rust 对于深度嵌入式系统来说是革命性的

最后但同样重要的是，铁锈。Rust 已被证明是系统软件的一场革命，这要归功于它丰富的类型系统、代数类型和所有权模型允许快速、正确的代码。Rust 出人意料的变小能力——加上它没有运行时间——意味着它几乎可以适用于任何地方。Cantrill 认为，凭借其安全性和表达能力，Rust 代表了 C 语言的一次飞跃——而且没有损失性能或牺牲尺寸。嵌入式 Rust 是软硬件协同设计潜力的最好例子。

氧化物团队成员是铁锈的忠实信徒。他们不使用菲亚特的 Rust，但他们发现 Rust 是满足他们许多需求的合适工具。

Cantrill 对 Rust 的个人看法:“作为一个做了 20 多年 C 程序员的人，Rust 无疑是自 C 以来系统软件中最大的革命，这是一件非常非常重要的事情。

“对于系统软件来说，生锈的重要性怎么强调都不为过。我很震惊——也很高兴——编程语言对我们系统软件来说是如此的革命性。很长时间以来，我们真正拥有的只是 C，然后是 C++的这个分支，好吧，我们就不去管 C++了。简单地说，我和 C++的关系不好。

“但是 Rust 解决了许多这样的问题，尤其是对于这种嵌入式用例。我们之前讨论过无处不在的计算机，Rust 允许我们进入那些非常小的空间。在 Oxide，我们开发了一个名为 [Hubris](https://hubris.oxide.computer/) 的新型嵌入式操作系统。调试器，恰如其分，叫做[谦逊，](https://oxide.computer/blog/hubris-and-humility)，我绝对鼓励人们去看看。”

## 将我们的现在平均分配给未来

最新一批预测中的技术并不新鲜。在某些情况下，它们实际上已经存在了几十年。但是坎特里尔认为他们都已经到达了一个转折点，他们已经准备好起飞，变得更加“平均分布”(这是对威廉·吉布森的名言[的肯定)](https://www.nytimes.com/2012/01/15/books/review/distrust-that-particular-flavor-by-william-gibson-book-review.html#:~:text=%E2%80%9CThe%20future%20is%20already%20here,up%20his%20own%20particular%20flavor.)

Cantrill 总结道:“我们相信，未来是硬件和软件共同设计的时代，我们再次非常具体地看到了这一点。事实上，所有这些技术都是开放的，这保证了它们能够存活下来。

“所以我们可以对时机吹毛求疵，但这些技术将会持续下去。他们可能需要时间来拓宽，但他们的轨迹似乎是可能的，我们非常期待将我们的现在均匀地分布到未来。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>