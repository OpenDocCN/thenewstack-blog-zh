# 什么是数据流？

> 原文：<https://thenewstack.io/what-is-data-streaming/>

在 10 月份参加 [Confluent](https://www.confluent.io/?utm_content=inline-mention) 当前的 2022 年会议之前，我对实时数据流了解不多。我是在最后一刻被邀请的，感觉就像掉进了火里。与该领域的专家坐下来讨论他们的专业话题，并有幸将他们的知识带给他人，这总是有点令人生畏，但同样令人满意。今天，它是实时数据流。

当我从 Current 2022 回到家时，我非常兴奋地说一切都是数据，我的朋友看着我，好像我疯了一样，但事实上，一切都是数据。数据是一个枯燥、笼统的术语，用来描述非常重要的(有时)有趣的信息。数据对个人和企业来说是独一无二的，但对所有人来说同样重要。数据是你在 LinkedIn 新闻订阅中的评论，你银行账户中的存款和存款，你祖母保存在 iPhone 上的最后一张照片。数据是你有密码的原因。

## 但是什么是数据流呢？

蒸汽并不新鲜，尽管它被认为是技术的前沿。它实际上已经存在了 10 到 15 年了。当时的游戏名称是欺诈检测。[数据流工程服务](https://www.linkedin.com/in/esammer/) [Decodable](https://www.decodable.co/) 的首席执行官 Eric Sammer 在谈到最初的用例时表示，“关键是欺诈检测。如果我能发现欺诈，我就能阻止它。

现在，流媒体似乎无处不在。全球定位系统、实时航班追踪、高频交易公司、网上银行。我记得 Lyft 开始的时候。那是 2013 年，我住在洛杉矶。有一天我打电话给出租车公司让他们来接我，第二天我坐在一辆车里，旁边的人前格栅上有胡子。还有一些影响日常生活的用例是我没有想到的。

例如，零售会话中的产品推荐。如果你在网上积极购物，额外的推荐可能来自实时流数据。

Sammer 解释说，现在的情况是，“他们实际上会根据你在之前的页面加载中搜索的内容向你显示推荐，”他进一步解释说，使用实时流数据的原因是，“因为他们正在购买一些东西，所以更相关。”

供应链物流也使用实时数据流，这是我这个普通消费者不会考虑的。COVID 给供应链和劳动力都带来了压力(这是我考虑的一部分)。集装箱运输和供应链也使用流动数据。

Sammer 解释道，“为什么旧金山没有苹果笔记本电脑？他们什么时候或者下一批货什么时候到？”在过去，信息延迟 24 到 48 小时是可以的，但是就像之前说的，那是过去的事情了。“这些是我们今天与客户一起解决的事情，就像，你知道，使之实时化，因为它具有喜欢下游某个人的实际价值。”

微服务和机器学习是[数据流](https://thenewstack.io/streaming-data-and-the-modern-real-time-data-stack/)的两个主要用例，不在本文中讨论。实时数据的一个大消费者是其他机器，这也是为什么技术栈与我们熟悉的其他数据系统的技术栈如此不同的部分原因。

## **流堆栈的挑战**

实时数据流不是一个超级快速的数据批处理系统——那是[微批处理](https://thenewstack.io/the-big-data-debate-batch-processing-vs-streaming-processing/)。微批处理是最快的批处理版本，批处理只需几分钟。流是一个完全不同的堆栈，数据流是实时的。全新技术的陡峭学习曲线提出了流媒体适应的一个大问题。

对于新的堆栈，Sammer 在几年前对从内部迁移到云进行了比较。

“当内置软件转移到云时，构建内置软件是很奇怪的，好吧，因为技术的种类发生了变化，是文件还是[[亚马逊网络服务](https://aws.amazon.com/?utm_content=inline-mention)' S3 桶]之类的，工作方式不同？是啊。

这并不像向太空发射火箭。但这意味着，就像一堆应用程序不能只是移植，它们不是现成的替代品，所以这是一个教育挑战。“纵观当今庞大的数据生态系统，公平地说，我们拥有大型提供商和主要生态系统，小型利基群体可以与之合作。每个人都有自己的位置，但肯定有一套最佳实践。

但是今天的流媒体就像 2010 年的大数据和 Hadoop 一样，对一些人来说是精通，对另一些人来说是未知。[Pinterest 的工程经理陈琴](https://www.linkedin.com/in/chenqin/)就流媒体改编的学习曲线与新堆栈分享了一点见解，“【工程师】需要学习如何使用[卡夫卡](https://thenewstack.io/apache-kafka-primer/)。他们需要学习如何使用像 [Flink](https://thenewstack.io/data-artisans-deploys-kubernetes-manage-enterprise-flink-stream-processing/) 这样的流媒体框架。他们需要学习如何对不同的服务进行 RPC 调用。”

这只是涵盖了开源工具。然后话题转到如何建模和查询数据，“您需要管理您的模式。请求看起来像什么？”以及其他一些模式和数据形状细节。然后是基础设施和工具细节。

## 静态与动态数据

一旦谈到这一点，Quin 就开始谈论静态数据和动态数据之间的区别。太多了。尤其是当没有一个挑战被抽象掉的时候。在一个更随意的解释中，Sammer 称流媒体栈与更熟悉的技术栈相比是“奇怪的”。

萨默也有同样的感受:教育一直很艰难。他甚至更进一步，希望流媒体社区能够满足更大的技术社区在堆栈和教育方面的需求。Sammer 说，“实时世界一直在试图教人们这方面的知识。实际上，我认为我们能教的东西已经达到了极限。我认为我们要做的是改变这些系统的工作方式，让它们对用户产生共鸣。为了让流媒体成为处理数据的主要方式，流媒体需要让更多的工程师能够使用，这样它就不再是博士级别的东西了。”

这就是为什么 Decodable 选择 SQL 作为语言，依靠技术社区对 SQL 的理解。

LinkedIn 的高级软件工程师 Ryanne Dolan 在对新的堆栈发表讲话时，确实对使用 SQL 表示了赞同，他说:“今天的趋势是在相同的语言结构背后抽象批处理和流，就像 SQL 一样。”

但到目前为止，还没有像 [Snowflake](https://www.snowflake.com/?utm_content=inline-mention) 或 [Databricks](https://www.databricks.com/) 这样受欢迎的大数据公司的流媒体比较，并且有一个空间，我想象未来几年将会出现一个。Sammer 希望这将是他的公司，decodable，因为他们目前确实适合其客户的角色，他解释说，“所以我们 Decodable 认为，你知道，客户不想要一系列开源项目。”

Sammer 认为，一旦有了一个“一致同意的”堆栈，极大地缓和了学习曲线，流媒体将向前发展得更快。

## **迟到数据**

晚到达的数据是在实时窗口之外识别的任何记录或数据。

多兰分享说，当人们第一次听说它时，他们会感到惊讶。我承认我是，但仔细想想，他补充道，我也同意，“当你每天处理数万亿个事件时，这并不是深不可测的，这并不是深不可测的，有一个可能会被错过。”

不过，这并不是迟到数据的唯一例子。Sammer 举了一个例子，有人在智能手机上执行了很多任务，在飞行中打开了飞行模式，然后一旦航班着陆，所有的任务都完成了。这对数据意味着什么？

让我们后退一步，考虑如何在批处理中处理这个问题，因为迟到的数据并不是一个新问题。

多兰打了一个很棒的比方。考虑流中的后到达数据与批处理中的后到达数据的最佳方式是考虑强类型编程语言与动态类型编程语言。“你知道，你可以从高层次上看，然后说，哦，我不用担心这种语言的类型。嗯，类型是有的。你只是在每一行代码中看不到它们，”他说。

他认为这是一个持续的挑战，“如果你不相信，如果你不相信，那就试着在一天中的任何时间运行你的批处理作业。[人们会说]不，我们这次只运行了这个批处理作业。它必须在这个时间之前完成，”他说。我可以证明这一点，因为我绝对不止一次遇到这个问题。

批处理有表面上表达的规则。流式处理涉及窗口、理论和高级概念，这就是它变得复杂的地方。想想看，Apache Spark 对迟到的数据进行水印处理，以便它可以维护到达的数据的状态，将其存储在内存中，并通过聚合迟到的数据来准确地更新它。Apache Flink 可以处理迟到的数据，但这些数据已经以 PDF 格式和收入报告一起提交给了首席财务官。这意味着什么呢？很复杂。

虽然没有真正的答案，因为流是动态的，持续的，不断变化的。就迟到的数据而言，问题不总是“什么时候发生的”，而是“这个事件什么时候完成？”

因为不同的蒸汽事件需要不同的结果。一家公司的 2022 年财务记录发生在实时交易中，但电子邮件活动的大量点击记录也是如此，但两种结果是不一样的。一口井最终会有一个日历截止时间，如果你错过了一些重要的事情，而另一口井没有，它会让你陷入困境。我收集了一些人对迟到数据的看法，每个人都有不同的答案。我问的每个人都是这个领域的专家。

## 最后

自当前的 2022 年以来，我一直想知道的一个问题是，用例是推动市场向前发展，还是一直存在，现在对 steaming 的更广泛适应允许它们走向公开。我从来没有真正想过很多数据或实时数据，但 2022 年后，我一直在思考这个问题。

在 Current 2022 上有很多人对流式传输和批量传输以及未来 3 年、5 年或 10 年传输数据的主要方式有看法。那里有很多人希望将流媒体视为处理数据的首选方式，他们正在努力推动这个行业的发展，但这不会马上发生。有如此大的扩展、成长和知识的空间。在接下来的几年里，我肯定会继续关注。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>