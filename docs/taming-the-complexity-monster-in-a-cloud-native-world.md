# 驯服云原生世界中的复杂性怪兽

> 原文：<https://thenewstack.io/taming-the-complexity-monster-in-a-cloud-native-world/>

[Twistlock](https://www.paloaltonetworks.com/prisma/cloud) 赞助本帖。想了解关于构建、发布和保护云原生应用程序的更多信息吗？立即注册参加 1 月 29 日举行的免费云原生实时虚拟会议。

云原生并不简单，至少与传统的内部部署相比是如此。当您进入云原生应用的世界时，您将面临一个不断变化的、几乎完全虚拟化的基础架构，以及一个由大量短暂、自由浮动的微服务组成的应用架构，这些微服务分别包装在由另一层虚拟化基础架构制成的精简容器中。乍一看，即使是管理基于硬件的整体应用程序的最基本策略，似乎也与云世界完全无关。

然而，所有这些复杂性实际上意味着什么，你能做些什么来管理它呢？在本帖中，我们将探讨新的复杂性的本质，以及管理和监控当今云原生应用的策略。

## 云基础设施是软基础设施

 [迈克尔·丘奇曼

在游戏行业发展迅速的早期，迈克尔开始担任编剧、编辑和制作人。在 20 世纪 90 年代从事捆绑软件行业期间，他开发了一个半自动系统，用于管理超过 15 种语言的本地化。他是 Fixate.io 的定期撰稿人，也是 Twistlock 的客座博主。](https://www.paloaltonetworks.com/prisma/cloud) 

传统的基于硬件的部署和云部署之间的第一个也是最明显的区别是基础架构的性质。在本地服务器上，操作系统位于裸机之上，IT 团队通常必须处理这两层。

当您在云中部署应用程序时，底层硬件通常是不相关的(一些基于硬件的专业服务除外，如基于 GPU 的处理和备份存储)。对它的实际访问是隐藏的，不仅仅是一个抽象层(例如操作系统)，而是几个抽象层。云服务提供商的 IT 人员是唯一能够访问底层云服务器硬件或位于硬件和可见云元素之间的大多数抽象层的一方。

## 服务贸易基础设施

您视为云服务客户端的云基础设施通常是一个丰富而复杂的平台和服务生态系统，旨在支持各种用途。这些用途包括从基础设施即服务(IaaS)、平台即服务(PaaS)到软件即服务(SaaS)。换句话说，所有可供您使用的云基础架构都是软基础架构。

如果您来自内部部署的世界，云基础架构可能看起来甚至不像基础架构—在许多方面，这是事实。事实上，不要把云看作基础设施，而是把它看作一个包含一组可用服务或服务包的抽象位置可能更有用。虽然抽象的位置和服务确实位于实际的基础设施之上，但是您无法访问该基础设施，因此它不属于您作为 it 从业者的职责范围。您在那里尽可能最有效地利用可用的服务和资源——简单地理解这一事实有助于降低处理云的复杂性。

## 重新定义应用:微服务

云原生应用程序的架构与典型的整体式桌面或基于服务器的应用程序的架构非常相似。[云原生应用](https://www.twistlock.com/resources/continuum-cloud-native-topologies/)一般分解为微服务。它们在独立的容器中运行，通常通过 API 进行通信。将这样的应用程序视为一组小型的、协调的应用程序，每个应用程序都服务于一个特定的目的，或者视为一个由松散连接且独立打包的组件组成的大型应用程序，也同样有意义。

然而，在这两种情况下，底层架构都可能基于少数几个基本计划中的一个或多个——通常，分解为功能定义的微服务(从数据库读取，获取用户输入等。)，或者作为更大的功能单元(数据库访问、处理表单等)的一部分组合在一起的微服务。).虽然基于微服务的架构乍看起来像是分散单元的随意集合，但重要的是要理解，在基于微服务的应用程序中，微服务和服务组的定义和组织可能比在等效的整体应用程序中更清晰。

## 重新定义应用程序:虚拟基础架构

同样重要的是，要认识到云原生应用不仅仅是微服务的集合。作为围绕微服务代码的相对较薄的包装的容器是软基础设施，但与代码本身一样是应用程序的一部分。它们通常包括微服务所需的操作系统服务的子集，以及与外部协调和监控系统交互所需的服务。

实际上，应用程序和基础设施之间没有明确的界限，由于包括容器操作系统在内的基础设施是虚拟化的，因此将基础设施中与容器相关的元素视为应用程序的一部分是有意义的。容器不仅仅是放置微服务代码的地方，它还是代码本身的基础部分。

## 复杂性成为现实的地方:编排和发现

集装箱是如何找到彼此的？你如何协调它们？你如何管理他们与外界的互动？诸如此类的问题触及了云固有复杂性的核心。如果您正在部署单个容器的成千上万个实例，您需要能够让它们工作，这意味着将它们与需要它们服务的应用程序的其他部分连接起来。

您需要一种方法来编排容器，组织和管理大型容器实例组，并使它们可供使用——由于单个容器实例的短暂性，这项工作变得更加复杂。云原生应用程序通常还需要与外部应用程序和服务进行交互，无论是在同一云环境内还是在云环境外。需要对这些交互进行管理，以便定位服务并为应用程序提供免受外部攻击的安全性。

## 管理混乱

如果没有一种有效的方法来编排容器或管理微服务之间或与外界的交互，云原生环境的复杂性很可能会变得完全混乱。然而，使用适当的工具，不仅可以控制复杂性，还可以将复杂性减少到一组可管理的交互，这些交互通过可以清楚理解和监控的渠道进行。

这些工具有两种通用类型，尽管这两组功能之间有一些重叠:编排工具和服务网格。结合使用，它们是驯服云固有复杂性的关键。

## 管弦乐编曲

最著名和最广泛使用的编排工具是 Kubernetes。它将容器实例分组到称为 pod 的单元中，再将 pod 分组到服务中。它处理对服务的请求，并将它们路由到适当的 pod 和容器映像，同时处理负载平衡和监控容器活动和健康等任务。它是高度可配置的，不仅是编排的工具，也是在合理的细粒度级别上管理容器的工具。

## 服务网格

Kubernetes 建立了一个管理容器和微服务的基础设施。服务网格，如 Linkerd 和 [Istio](https://www.twistlock.com/2018/12/18/istio-visualization-security-compliance-checks-twistlock/) ，管理微服务之间以及应用程序和外部世界之间的流量。服务网格充当代理，接收服务请求并管理服务发现。服务网格还可以管理与外部服务的通信，并处理认证和加密等任务。它们通常是基于规则的，可以进行配置以满足应用程序的特定需求。

## 监控云

准备好流程编排和服务管理工具后，驯服云原生应用程序复杂性的最后一步是监控它们的性能和安全问题。云服务提供商通常向他们的用户提供各种基本的监控工具和服务；外部监控服务可以提供额外的工具，并使用复杂的分析协调来自各种来源的监控数据。

当涉及到安全性时，这种深入的监控尤其重要。考虑到云环境的复杂性和云原生应用程序日常操作中涉及的交互，您需要主动监控各方面的安全问题。

这样，Twistlock 这样的服务就必不可少了。它可以跨多个云平台结合防火墙、监控、漏洞检测和合规性管理，并可以与云原生安全性集成。

云原生复杂度？这需要一些理解，也确实需要一些努力，但是是的，这是可以控制的。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>