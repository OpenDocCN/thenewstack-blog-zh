<html>
<head>
<title>Off-The-Shelf Hacker: Build a Sensor System to Watch the Backyard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现成的黑客:建立一个传感器系统来监视后院</h1>
<blockquote>原文：<a href="https://thenewstack.io/off-the-shelf-hacker-build-a-sensor-system-to-watch-the-backyard/#0001-01-01">https://thenewstack.io/off-the-shelf-hacker-build-a-sensor-system-to-watch-the-backyard/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">早在2016年，我使用裸露的ESP8266 WiFi板制作了一个<a href="/off-shelf-hacker-create-early-warning-detector-passive-infrared-sensors/" target="_blank">室外被动红外(PIR)传感器</a>的原型。他们工作得很好，尽管他们有点杂乱，我从来没有真正对结果感到高兴。当时，裸露的ESP8266板很难使用。将壁瘤塞进项目中，也不是很有趣，尤其是当试图将所有东西都装进一个紧凑的项目案例中时。我自己开发的客户机/服务器网络通信方案当然不是标准的或可移植的。</p>
<p class="translated">随着时间的推移，物理计算世界发生了很大的变化。</p>
<p class="translated">今天，我们将首先看看我的新的和改进的PIR码传感器的原型。我们将总结项目，探索各个部分，并讨论后续步骤。</p>
<h2 class="translated">全视之眼</h2>
<p class="translated">正如你所料，我们有一个家庭监控报警系统，所有的门上都有锁，以防止坏人进入。如果知道有人在凌晨3点正朝前门走来或者刚刚翻过后院的栅栏，难道不是很有帮助吗？我们会有一点额外的时间来举办一个不错的欢迎会。</p>
<p class="translated">不仅如此，如果我们可以记录对财产的“入侵”，特别是当没有人在家或在凌晨时，我们可能会看到可疑行为的模式，并能够采取适当的预防措施。</p>
<p class="translated">我最近从一家大型互联网供应商那里买到了几块新型的<a href="https://www.banggood.com/3Pcs-NodeMcu-Lua-WIFI-Internet-Things-Development-Board-Based-ESP8266-CP2102-Wireless-Module-p-1121409.html?rmmds=search&amp;cur_warehouse=CN" target="_blank" class="ext-link" rel="external "> NodeMCU WiFi板</a>。同一批货给我带来了几块微型5伏电源板。在过去的几年中，我还研究了MQTT的基础知识，这是一种简单而标准的方法，可以在机器之间传输数据，这些数据很容易在固件和应用程序中使用库来访问。</p>
<p class="translated">现在，随着电子产品的更新，对设备如何相互通信的更好理解，以及容易获得、易于使用的部件，也许我的高科技财产监控系统将成为现实。</p>
<h2 class="translated">简化你的原型</h2>
<p class="translated">该项目只有三个主要组成部分。节点MCU、PIR传感器和电源。在某些时候，我们会添加一个继电器来开关泛光灯。</p>
<p class="translated">NodeMCU基本上是一个裸露的ESP8266 model 12E模块，具有3.3伏稳压器和USB接口电路，所有这些都集成在一个易于使用的1英寸x 2英寸印刷电路板封装中。可以把ESP8266想象成一个内置WiFi的Arduino。使用任何当前的Arduino IDE都可以无缝编码，尽管在上传任何固件之前，必须将板类型更改为“NodeMCU 1.0 (ESP-12E模块)”。通用输入/输出(GPIO)引脚支持3.3伏或5伏逻辑，没有任何问题。它需要从USB电缆或电压输入引脚获得稳定的5.0伏电源。在这项工作中，我经常使用手机壁灯。</p>
<div id="attachment_6826076" class="wp-caption aligncenter"><img aria-describedby="caption-attachment-6826076" decoding="async" loading="lazy" class="size-full wp-image-6826076" src="../Images/442c421140260bd799b6f3cd996c35cf.png" alt="" data-id="6826076" data-original-src="https://cdn.thenewstack.io/media/2019/02/1b017cf5-nodemcu.png"/><p id="caption-attachment-6826076" class="wp-caption-text translated">NodeMCU板</p></div>
<p class="translated">我对这个小小的5伏手机墙疣又爱又恨。它们非常适合快速Arduino或Raspberry Pi的原型制作。使用标准USB转micro-USB电缆可以轻松地为项目供电。</p>
<p class="translated">另一方面，在一个已完成的项目中使用一个壁式电源插座，或者将它放在一个耐候的盒子里，这是一种拙劣的做法。你必须把它们插到某个地方的插座、电源板或延长线上。它们通常只能泵出1.0到1.5安培的电流。这对于一个树莓派3来说是微不足道的。当WiFi无线电发射时，ESP8266项目通常需要大约700 mA。钩在几个发光二极管等，我们可以很容易地运行在重负载下电流低，迫使复位或其他错误的操作。</p>
<p class="translated">幸运的是，从各种DIY零件插座中有各种各样的微型5伏电源可供选择。我从Banggood买了三包5伏2.0安培的电路板，价格不到10美元。它们将接受85到264伏的交流电输入。它们将可靠地提供5.0伏、2.0安培的连续电压和高达3.0安培的浪涌电流。这些电源非常适合为NodeMCU板供电。</p>
<div id="attachment_6826077" class="wp-caption aligncenter"><img aria-describedby="caption-attachment-6826077" decoding="async" loading="lazy" class="size-full wp-image-6826077" src="../Images/4c8f4e694b46c800997bce257c3e1498.png" alt="" data-id="6826077" data-original-src="https://cdn.thenewstack.io/media/2019/02/6fdbd773-5-volt-power-supply.png"/><p id="caption-attachment-6826077" class="wp-caption-text translated">5伏电源</p></div>
<p class="translated">对于这个项目，我只是将电源的输出连接到NodeMCU上的Vin和接地引脚。我在交流电源输入端使用了普通的日常灯线和插头。当需要把院子里的传感器放入它的永久性室外外壳时，我会简单地拔掉插头，把迷你系统接入后院的照明电路。因为传感器会24/7运行，所以我会让墙上的开关一直开着。</p>
<p class="translated"><a href="https://www.sparkfun.com/products/13285" target="_blank" class="ext-link" rel="external "> PIR传感器模块</a>是很久以前从Sparkfun购买的。它属于集电极开路类型，当检测到物体时记录低(0)值，当什么也看不到时记录高(1)值。我将传感器报警线布线到NodeMCU上的GPIO引脚10。负极传感器引脚接地，正极传感器引脚连接+5伏。</p>
<h2 class="translated">下一步是什么</h2>
<p class="translated">我很快会将MQTT添加到Arduino代码中。MQTT是在机器之间传输数据的成熟协议。它允许一对多和多对一的消息。它是轻量级的，可以使用库轻松集成到NodeMCU固件和服务器数据分析应用程序中。您只需在代码顶部添加一个对库的引用，然后在主程序循环中向下调用适当的函数。我已经在其他几个项目中成功地使用了它，效果很好。我们将在接下来的故事中回顾这段代码。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>