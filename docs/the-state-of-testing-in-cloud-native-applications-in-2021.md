# 2021 年云原生应用的测试状况

> 原文：<https://thenewstack.io/the-state-of-testing-in-cloud-native-applications-in-2021/>

[](https://www.linkedin.com/in/serkanozal/)

 [塞尔坎·奥扎尔

塞尔坎是桑德拉的联合创始人兼首席技术官。他在软件开发方面有超过 10 年的专业经验，是 AWS 认证专家，拥有分布式环境专利。他主要从事无服务器架构、分布式系统和监控工具方面的工作。](https://www.linkedin.com/in/serkanozal/) [](https://www.linkedin.com/in/serkanozal/)

[云原生架构](https://thenewstack.io/10-key-attributes-of-cloud-native-applications/)允许企业快速响应客户需求，根据业务需求调整运营，并专注于最重要的事情。它也使软件团队成为过程自动化和改进的拥护者。没有对快速创新的限制，他们可以频繁地以最少的辛劳做出高影响力的改变，并为企业带来非凡的价值。

不幸的是，你并不总能免费获得云原生架构的好处。

云原生应用程序暴露了新的故障域，并产生了管理更加高度分散的服务的需求。因此，企业需要测试他们的应用程序，以查明缺陷并发现 bug、错误或缺失的需求。测试还可以帮助他们评估应用的整体性能、兼容性、可扩展性等。

那么，测试云原生应用的最好方法是什么呢？在下一节中，我们将讨论一些可以用来测试云原生应用的策略。有关这些案例研究的更详细描述，请下载我们关于该主题的白皮书。

## 测试云原生应用的策略

持续测试策略可以节省时间和金钱。它还使企业能够构建更好的软件产品。要做到这一点，在系统问题导致更严重的问题之前识别并解决它们是至关重要的。

测试云原生应用有多种方法，但我们将重点关注四种常见策略:单元、组件、集成和端到端测试。

### 单元测试

单元测试包括检查可测试应用程序的最小部分，最好是单独检查，以分别验证每个组件，并确定每个部分是否按预期工作。单元测试有许多特征，例如:

*   他们跑得很快。
*   它们不贵。
*   它们不依赖于环境。
*   它们没有副作用。
*   它们很容易写。

![](img/ce88ac95de2de9d674244a279a1cc70e.png)

此外，单元测试适合于确定云原生应用中给定微服务的内部组件/模块的稳定性和可靠性。

### 组件测试

一旦对云原生应用中的所有组件执行了单元测试，就需要检查每个微服务是如何独立工作的。这是通过在每个微服务的代码库中运行组件测试来完成的。组件测试帮助您评估微服务的性能，并保证每个微服务作为一个整体一起工作，以满足业务需求。

### 集成测试

集成测试是一种检查每个微服务之间的交互和通信路径以检测问题的方法。这允许您确定服务是否有效地与它们自己和其他基础设施服务通信，以实现一些更大的业务逻辑。您还可以使用集成测试来检查新构建的功能是否与云原生应用的其他组件兼容。

### 端到端测试

端到端测试包括检查整个用户流以及移动云原生应用的各个部分。这确保了一切都按预期运行，并且没有高层的分歧。

端到端测试通常是最困难的，花费最多的时间，最昂贵，也最容易出错。为了避免浪费时间并保持低成本，一旦其他测试策略完成，端到端测试应该作为质量保证的最后一步来执行。

运行单元、组件、集成和端到端测试允许企业和软件团队清除和修复系统错误，从而构建伟大的软件系统。

在下一节中，我们将探讨在测试云原生应用程序时需要注意的一些因素。

## 在云原生应用中测试什么？

工程师们明白测试应用程序的重要性，以确保在投入生产之前一切正常。为此，团队应该问一些重要的问题，以确保他们的应用程序具有一定的质量水平。以下是您应该在云原生应用中测试的关键方面。

### 跳回

当您构建云原生应用程序时，您应该“为失败而设计”，而不是“为恢复而测试”

测试云原生应用的弹性将为您提供关于您的应用的重要信息，包括:

*   当某些功能出现故障或不可用时，应用程序如何处理用户请求。
*   高峰期的交通路线。
*   遇到故障后，应用程序需要多长时间才能恢复到全功能状态。

### 可量测性

一个典型的云原生应用程序应该在不降低性能的情况下，扩展或缩减以承受波动和动态的需求。为了保持这一点，您的团队需要检查当工作负载或需求增加时，应用程序是否能有效地扩展。他们还应该检查复制的服务是否可以共同完成任务。

### 功能

您的团队应该能够根据一些定义的规范来验证应用程序的各个方面是否正确执行和运行。下面是一些需要通过功能测试来检查的核心功能:

*   页面加载
*   登录功能
*   输入验证
*   输出验证
*   用户界面

软件测试的关键目标之一是在将应用程序推向生产之前，验证它是否具有足够的弹性、可伸缩性和功能性。当应用程序的性能低于预期时，您希望能够找出问题所在，并在导致停机之前修复任何违规行为。因为有些故障或问题是无法预料的，并且只有在部署应用程序后才会出现，所以企业需要采用现代方法来测试云原生应用程序中的意外故障。

## 测试云本机中的未知未知

无论您的团队对云原生应用进行了多少测试，预测生产系统中可能发生的每一个故障几乎都是不可能的。

虽然传统测试很有价值，但不足以识别部署应用程序时可能发生的意外故障。但是，以下策略有助于测试云原生应用程序中的未知内容:

### 混沌工程

混沌工程是一种主动的、故意的注入混沌的过程，通常是在受控的条件下，以计算出系统将如何响应。这样，您可以在投入生产之前发现可能的缺陷。

像[桑德拉](https://blog.thundra.io/serverless-and-chaos-engineering-is-it-possible)这样的第三方监控和观察工具允许你的团队在他们的系统上进行实验，并在潜在故障影响客户体验之前发现它们。

### 金丝雀部署

向一小部分用户逐步推出新的功能或特性是一种最佳实践，可以让您在向更多用户提供应用程序之前发现并修复错误。

### 可观察性

可观察性允许你通过观察系统的外部输出来推断系统的内部状态。通过可观察性，您可以获得不同应用服务如何通信的整体视图，以及事务如何在不同服务之间流动。这种洞察力使软件团队更容易了解系统行为，并在保持系统可用和健康的同时减少问题。

通过结合混沌工程、金丝雀部署和可观察性，您的团队可以构建准备好应对不可避免的灾难和意外事件的应用程序。

## 您应该多久测试一次云原生应用？

一些软件测试人员和开发人员认为，测试一个应用程序直到没有未被发现的缺陷或错误是可能的。虽然这听起来很符合逻辑，但是测试的七个原则中有一个声明了详尽的测试是不可能的。

当决定测试一个应用程序的频率时，你可以什么都不测试，测试所有东西或者测试软件的某个部分。然而，事实是，没有固定数量的测试可以适用于所有的应用程序。即使你的团队拥有世界上所有的时间，他们也不可能在一个高度复杂的应用程序中测试每一种可能的组合。

![](img/45207038d265553717996e36119f8035.png)

此外，在云原生应用中运行详尽的测试会成倍增加时间和执行成本。软件团队需要最小化测试成本，同时最大限度地利用他们的测试成果。

## 降低测试成本

在这一节中，我们将介绍一些减少失控测试成本的关键方法。

### 优化长期运行的测试

软件团队可以将他们的测试套件分成两组，而不是测试所有的东西:可以不经常运行的长时间运行的测试和可以在每次更改后运行的短时间测试。像成对测试和因果图这样的策略也有助于团队优化长时间运行的测试，并简化所需测试组合的数量。

### 管理零散的测试

降低测试成本的另一种方法是通过构建一个系统来检测和管理具有不可靠行为的测试，这些不可靠行为会妨碍其他测试的有效运行。不可靠的测试，通常被称为[片状测试](https://thenewstack.io/how-to-deal-with-flaky-tests/)，在相同的环境下会给出相互矛盾的结果(通过或失败)。它们还可能隐藏真正的错误，导致不健康的文化，减缓团队的进度，增加测试应用程序的总成本。

### 设定明确的测试目标

降低软件测试成本的最终策略是通过设定清晰的测试目标和需求。在测试过程开始之前，软件团队应就所有测试活动以及操作系统版本、平台和测试软件的设备的完整列表达成一致。这种计划的方法最小化了失败测试的机会，实现了有效的资源利用，提供了要完成的任务的定义范围，并允许团队更有生产力，并基于他们的风险级别来区分测试用例的优先级。

通过优化长时间运行的测试，管理不稳定的测试并设定清晰的测试目标，软件团队可以显著降低测试成本。作为奖励，他们将变得更加专注、高效，并最终改进他们的整体测试策略。

## 用自动化静态代码分析超越测试

已经在各种测试技术或策略上投入巨资的企业可以通过自动化静态代码分析将他们的测试工作提升到一个新的水平。

传统的测试技术无法覆盖所有可能的代码执行路径。然而，软件团队可以通过将静态代码分析作为他们每夜构建和持续集成的一部分来自动检查每一行代码。

静态代码分析通常被认为是分析代码的一种彻底的方法，也是避免与软件测试相关的许多令人头疼的问题的一种可靠的方法。它通过编写更好的代码，并在早期快速识别和修复代码错误，帮助软件团队加速软件交付，此时补救的成本最低。

组织需要利用多种工具和技术来确保其应用程序平稳运行。仅用传统的监控工具几乎不可能获得请求如何从一个组件流向另一个组件的概览。

*为了全方位了解您的系统，[从桑德拉助手](https://thundra.io/sign-up)开始。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>