# 现成的黑客:自动化庭院浇水的方法

> 原文：<https://thenewstack.io/off-the-shelf-hacker-a-methodology-for-automated-yard-watering/>

上周我们讨论了我朋友的 [OIP(输出，输入，处理)方法论](https://thenewstack.io/off-the-shelf-hacker-outputs-inputs-and-process/)，集中在输入和输出部分。本周，我们将利用这一见解，在指导我们设计、构建和运行“浇灌院子”物理计算项目的过程中迈出第一步。

让我们总结一下我们的输出和输入数据，以便有一个可能的流程的背景。

目标或输出是根据灵活的时间表自动给院子浇水。其他产出是在项目期间获得的知识和例子，它们将被转化为[现成的黑客](https://www.thenewstack.io/tag/Off-The-Shelf-Hacker)专栏和物理计算会议技术讲座。

输入包括希望使用区域和开/关时间的简单列表来设置时间表，能够手动打开水并在一段时间后停止，以及使用标准化技术，也称为最佳实践，以允许系统的未来扩展。更新系统状态并通过我的家庭网络与它交互也会很有用。

这些是系统的基础，也是系统应该如何运作的基础。下一步是开发一个流程。这是大多数极客兴奋的地方，通常是他们真正开始项目的地方。

我们怎样给院子浇水？

## 选择一个流程

给院子浇水很简单。

看看每天的浇水清单，意识到你需要浇水。将喷嘴放在软管末端。将喷嘴对准你要浇水的地方。打开它。移动软管以均匀浸湿该区域。当你认为你已经浇够水了，就把水关掉。对院子的不同区域重复上述步骤。

这是一种方法。

一个稍微复杂一点的方法是将你的每日饮水清单转换成一个连接在水龙头上的机械计时器的设置。然后，软管流到被压入地下的洒水器。在规定的时间，水打开并充满该区域。经过一段指定的时间后，水就关闭了。你需要几个这样的“区域”来照顾院子的各个部分。

那是另一种方式。

这些场景满足了我们对水的渴望。一个依靠你非凡的记忆力，另一个依靠机械计时装置。它们还包括或多或少遵循开/关周期列表的要求。最后，未来的扩张肯定是敞开的，因为我们可以疯狂地去家得宝，用信用卡从 [Banggood](https://www.banggood.com/) 或 [Spark Fun](https://www.sparkfun.com/) 购物。

有一百万种方法可以使用列表来实现我们给院子浇水的目标，这些列表可以在将来升级。挑一个就走。

我们 OIP 方法的这一部分，尤其是在商业环境中，可能会令人不知所措，并产生严重的后果。然而，我们必须勇往直前，选择我们的最佳道路，完成这项工作。我们会永远正确吗？大概不会。在选择流程时，知识、经验和灵感都会发挥作用。

## 挑流程还是挑零件？是啊！

已经有关于机器人和人工智能影响未来工作的讨论。我认为知道使用什么，什么时候使用，并以一种有用的方式将这些东西联系在一起，这是一种独特的人类特质。依我拙见，总会有工作给那些能创造好流程的人，尤其是在物理计算领域。

精心设计一个好的物理计算过程绝对是一门黑暗的艺术。你是否从规划出你想要每件事情如何工作开始，然后挑选零件？或者，您是否心中有零件，并利用您的知识、经验和行为意识来围绕零件塑造流程？答案很微妙，这增加了将非常重要的 1.0 版本放到演示阶段的乐趣。

比如给院子浇水就涉及到水。水压本身可以在机械计算机中用来开关阀门、记录时间以及在不同区域之间自动切换。传统的解决方案不会以这种方式使用液压原理，而是使用电子设备。漏水很乱。当然，实现一个易于编辑的计划表是不可能的。或许这是一个荒谬的例子。这种解决方案，在 19 世纪 80 年代的蒸汽朋克时代可能很有趣，实际上也很合适。所以我们用电子产品。

电子学意味着微控制器。知识和经验，再加上标准化产品，都指向使用 Arduino 或 Raspberry Pi 微控制器。

在这一点上，我将排除 Arduino，因为它的用户界面有限。按钮可能适用于输入和菜单。我们可以使用一个小的串行显示系统和状态信息。所有这些都很棒。这个解决方案正是我现在挂在车库墙上的。我不喜欢它，因为每次断电我都得重新编程。那个古董控制器上的备用电池从来没有正常工作过。绝对不能远程调节。我们会选最新款的树莓派。

一个闪亮的新[树莓皮零无线](https://www.raspberrypi.org/products/raspberry-pi-zero-w/)应该很好地满足了这个要求。使用一个简单的文本文件就可以很容易地实现建立/维护计划时间列表的要求。Raspberry Pi 还直接从程序控制通用输入/输出引脚(GPIO)。开关水有助于 Raspberry Pi GPIO 引脚的二进制特性。我们真的不需要任何连续可变的模拟能力来给院子浇水。输送水量的变化简单地由时间控制。

Raspberry Pi 还能够使用板载 wifi 无线电与我的家庭网络进行通信。网络连接、计时和断电后自动重启，为 Pi 作为我们的计算元素提供了论据。它运行 Linux，所以我们将能够使用各种编程语言甚至应用程序，比如 [MQTT](https://thenewstack.io/mqtt-protocol-iot/) 用于未来的增强。

最后，树莓 Pi Zero 无线模块可以从 [Adafruit 买到，价格只有区区 10 美元](https://www.adafruit.com/product/3400)。

无论使用哪种微控制器，都必须有一种方法来开关电动水电磁阀。为此，我已经订购了一个 [8 通道继电器板](https://www.banggood.com/BESTEP-8-Channel-3_3V-Relay-Module-Optocoupler-Driver-Relay-Control-Board-Low-Level-For-Arduino-p-1355824.html?rmmds=buy&cur_warehouse=CN)。董事会将接受树莓派的指令，并管理洒水器的水流。

树莓派和继电器板构成了系统的主要部分，以及现有的地下水阀和洒水装置。还将有壁疣来为一切供电，并有某种情况下保持系统在恶劣的车库环境中活着。没有空调，灰尘，甚至可能…虫子。

不要笑。在佛罗里达，出于某种原因，蚂蚁找到了进入电子设备的方法。然后它们会筑巢，让电线短路。啮齿动物造成了同样的混乱，只是它们啃掉了电线的绝缘层，有时会导致火灾。我目睹了这一切。有能力的现成黑客会考虑这些事情。

## 流程在哪里？

物理计算过程与这些部分交织在一起。过程决定零件，零件影响过程。我认为这种模糊性使得开发真实世界的项目变得有趣，并且经常是一个相当大的挑战。

请记住，小工具的第一个版本通常是最好的猜测。我们一起黑现成的东西，就会有实验，有发现，甚至有失败。我们希望从一开始就设计出最佳流程。在我们拥有可以握在手中的东西之前，我们不可能知道所有的细节和细微差别。然后我们必须调整事情，这就变成了一个反复的有机循环。

我们有一个基本流程。使用微控制器来管理文本文件，该文件根据设定的时间表打开和关闭 GPIO 引脚。断电后系统会保持时间并在正确的地方重启。编程将让我们手动打开水，然后在我忘记时再次关闭。最后，我们将使用内置的 Raspberry Pi 网络来远程调整系统。从这里，我们将建立和调整，以获得一个工作原型。

简而言之，这就是物理计算 OIP。

我在等零件，所以我们会很快回到这个项目。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>