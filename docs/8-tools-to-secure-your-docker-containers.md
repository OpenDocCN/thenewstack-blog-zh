# 保护码头集装箱的 8 种工具

> 原文：<https://thenewstack.io/8-tools-to-secure-your-docker-containers/>

多年来，Docker 容器受到了许多漏洞的攻击。因此，公司正在推出安全专用应用程序来帮助增强平台。当然，不仅仅是包装在容器中的安全性，或者帮助构建和运行它们的引擎。安全性从基础开始，从服务到最佳实践。

[瞻博网络公司](https://www.juniper.net/us/en/)的网络战略主管[詹姆斯·凯利](https://www.linkedin.com/in/jamesakelly/)说:“一个工具不可能做所有的事情并保护组织免受所有可能出错的事情的影响。Kelly 认为有许多考虑因素，其中包括可信执行的安全编码实践、构建签名、映像签名、发布管理、安全网络、下一代防火墙(NGFWs)的出入口和东西向深度数据包检查、高级威胁检测和预防、流量加密、访问控制列表、微分段、应用程序 API 身份等等。

在大规模应用中，安全性变得更加重要。对此，Kelly 坚持认为开发人员和管理员必须考虑“多租户、微分段、无边盘加密——服务网状加密方案的补充或补充——以及容器化的 NGFW 服务链。”

但是，开发人员和管理员可以使用什么样的[工具来增强他们的容器部署的安全性呢？让我们来看看。](https://thenewstack.io/top-10-tools-for-data-engineers/)

## 发展图像

围绕容器的最大安全问题之一是这些容器所基于的映像。如果你基于一个受损的映像来开发你的容器，将会造成严重的破坏。为此， [Alcide](https://www.alcide.io/) 的联合创始人兼首席技术官 [Gadi Naor](https://www.linkedin.com/in/gadinaor) 表示，“围绕它的最佳实践是构建一个包含构建工具的开发容器映像，特定语言工具链团队需要迭代他们的工程任务。通常你会从一个基本的操作系统映像开始，然后将相关的包添加到正在使用的运行时语言中。”

换句话说，在内部建立你自己的形象。这应该被视为容器部署的安全支柱。

## 海港

[Harbor](https://goharbor.io/) 是一个开源的容器注册表，当与 Red Hat 的 [Clair](https://coreos.com/clair/docs/latest/) 漏洞扫描器结合使用时，它还可以扫描您的图像以发现已知的漏洞。安装后，Harbor 将作为一个存储库，可以扫描任何上传的图像以查找问题。这种扫描器平台应该被认为是所有容器开发人员和管理员的必备工具。了解图像文件的问题可以确保部署安全可靠的容器。

在“[如何用 Harbor](https://thenewstack.io/how-to-scan-docker-images-for-vulnerabilities-with-harbor/) 扫描 Docker 镜像寻找漏洞”中了解如何用 Clair 安装 Harbor

## 基于角色的访问控制

除了使用安全映像，RBAC(基于角色的访问控制)应该是每个容器工程师都充分理解的工具。RBAC 通过本地角色和绑定来确定用户是否被允许对给定的项目执行操作。当您允许开发人员访问您的集群时，这意味着他们也可以访问 Kubernetes APIs。为什么这如此重要？根据 Red Hat 容器的主要产品经理 Scott McCarty 的说法，“当开发人员访问这些 API 时，无论是在开发中间接访问还是在生产中直接访问(用于故障排除)，基于角色的访问对于限制恶意或错误造成的损害变得至关重要。”

## 哈多林特

Hadolint 是 Haskell Dockerfile linter。同样，你可以 lint 编程语言，静态文件也可以 lint。但是为什么要在你的文档上做标记呢？简单:检查优化、编程错误、bug、风格错误、可疑结构和可能的失败。林挺你的 Docker 文件不仅会产生更干净的代码，而且没有错误和更小的 Docker 图像。更好的是，Hadolint 可以集成到您的 CI 管道中，因此代码的林挺可以自动完成。关于使用 linter，Naor 说，“它将推动这些用户发展他们的容器创作技能，同时保持对安全最佳实践的直接关注。”

## Snyk

Snyk 有助于在构建期间识别潜在的运行时应用程序风险。具体来说，Snyk 可以(当集成到 CI 管道中时)不断地发现并修复容器中的漏洞。Snyk 通过检查相关的操作系统包管理器清单信息来扫描操作系统包(每个映像),然后基于此信息，Snyk 分析关键应用程序二进制文件的映像，并将结果与其已知的漏洞数据库进行比较。与 Harbor/Clair 仅扫描图像漏洞不同，Snyk 还可以扫描您的 docker 文件(如果它包含在命令行中),以提供对您的基本图像的更详细的分析。

## 白源

[WhiteSource](https://www.whitesourcesoftware.com/open_source_scanning_software/) 是一个开源的安全性和许可证合规性管理平台，可以自动识别您的构建中的所有组件和依赖项。当使用 WhiteSource 搜索开源组件时，他们的浏览器插件将显示任何报告的错误、安全风险、不需要的许可证(由您配置的策略定义)、每个组件的新版本等等。通过使用像 WhiteSource 这样的工具，您可以对想要添加到容器构建中的组件做出更好的决定。

## Kubernetes 顾问

Alcide 提供了 [Kubernetes Advisor](https://www.alcide.io/kubernetes-advisor) ，这是一款多集群漏洞扫描器，可进行漏洞扫描的最佳实践和合规性检查，搜寻放错位置的秘密和过多的秘密访问，工作负载强化，Istio 安全配置，入口控制器的最佳安全实践，Kubernetes API 服务器访问权限等。一旦设置了 Kubernetes Advisor，您将通过一个易于使用的基于 web 的仪表板获得对您的 Kubernetes 集群的持续审计和合规性。

## 斯蒂拉

如果你想在你的 Kubernetes 生态系统中定义、实施和验证安全性，你可能会考虑 [Styra](https://www.styra.com/) 。Styra 结合了开源和专有解决方案，提供合规性防护栏，以简化安全应用程序的合规性。有了 Styra，您不必再将合规性硬编码到您的软件中。相反，您只需定义一次策略，然后随时随地执行它。Styra 包括一个内置的遵从性策略库、在提交之前监控和验证策略更改的能力、使用声明性模型来定义期望的状态和防止安全漂移，等等。

当然，有很多工具可以帮助您锁定容器安全性，但是这应该作为一个坚实的起点来帮助您开始。不要忽视从头开始构建安全容器的基础。当您向外扩展时，请确保通过使用强大的工具来扩展您的工作，以获得强大的结果。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>