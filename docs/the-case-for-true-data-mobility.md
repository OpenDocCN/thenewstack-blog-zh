# 真正的数据移动性案例

> 原文：<https://thenewstack.io/the-case-for-true-data-mobility/>

[](https://www.linkedin.com/in/ami-kleinman-972b52172/?originalSubdomain=il)

 [Ami Kleinman

作为副总裁，Ami Kleinman 全面负责产品设计、开发和质量。他的主要关注点是建立一个一流的开发组织，该组织坚持以质量为导向的敏捷开发过程，能够持续地按时交付产品。他在产品开发方面拥有超过 25 年的行业经验，包括在 EMC 和 IBM 等公司从事存储工作 15 年。在加入 Ionir 之前，Ami 曾在被 Veeam 收购的云数据保护初创公司 N2WS 担任副总裁，并在被 IBM 收购的存储初创公司 FilesX 担任副总裁。Ami 在英特尔的工厂自动化部门开始了他的职业生涯。Ami 拥有耶鲁大学的计算机科学学士学位和佛罗里达国际大学的 MBA 学位。](https://www.linkedin.com/in/ami-kleinman-972b52172/?originalSubdomain=il) [](https://www.linkedin.com/in/ami-kleinman-972b52172/?originalSubdomain=il)

当谈到生产环境中的存储支持时，在满足企业广泛采用云原生技术的需求的解决方案方面，进展较为缓慢。数据是有状态工作负载的心脏，在实现具有大量状态的工作负载随时随地工作的愿景的道路上，它似乎是一个不可逾越的障碍。借用 Kubernetes 的船的比喻(可能已经面目全非)，有状态工作负载的云原生是一艘搁浅在数据重力浅滩上的船。当工作负载受限于大量数据时，几乎不可能自由移动它们。

为了更好地了解供应商和社区需要弥合的差距，以便为生产中运行的有状态工作负载实现云原生的承诺，认识到客户 it 部门特有的多集群/多数据中心/混合云/多云现实非常重要。

这个分裂的世界有无数的原因。在最基本的层面上，不同的 Kubernetes 集群是由于开发/测试、试运行和生产环境的分离而产生的，或者是用于专用工作负载的集群。在更高的层面上，我们看到一些客户由于灾难恢复或位置原因，其私有云跨越多个数据中心。当然，许多拥有自己数据中心的客户也涉足公共云，以利用 IaaS 和 PaaS 服务创建混合云。最后，随着大型客户增加其在公共云中的 IT 足迹，我们看到越来越多的客户采用多云战略来解决供应商锁定、双供应商政策、监管约束、成本管理和位置等问题。

让事情变得更复杂的是，毫无疑问，在这个多云多集群的世界中，这些云本地孤岛之间的重要交互对于提高这些 IT 投资的有效性和最大化业务敏捷性至关重要。其中一些问题已经引起了主要行业参与者的极大关注。谷歌的 Anthos、微软的 Azure Arc 和 VMware 的 Tanzu 是一些更值得注意的努力，为客户提供跨所有云(私有云和公共云)的单一控制平面和单一基于 Kubernetes 的 IT 环境。

尽管如此，企业会发现很难从其庞大的云原生基础架构中获得敏捷性和商业价值。仔细研究后发现，目前常见的客户使用场景没有得到充分解决。一个典型的例子是，客户希望通过利用公共云中的资源来临时扩展工作负载的容量，以应对更高的峰值负载(“云爆发”)。这可能发生在新产品发布时，或者在假日销售季节。当需要同时迁移的工作负载数量很大时，例如客户希望在私有数据中心之间负载平衡工作负载，或者在公共云提供商之间迁移以利用成本效益和新技术时，这一难题会更加尖锐。紧急监管干预和其他类型的意外危机也需要敏捷性和快速移动大量工作负载的能力。

在数据中心和公共云之间移动云原生无状态应用程序在今天得到了很好的支持；它既简单又快捷。但是，移动具有大量存储的有状态工作负载的问题绝不是这样。仔细的计划、完美的执行和显著的提前期是成功的先决条件。业务敏捷性？算了吧！数据引力保证了没有什么是快速或容易的。问题的核心当然是不同云和数据中心之间的 WAN 连接，其带宽有限，延迟高，成本高。但是当涉及的数据量很大时，问题就变得复杂了——记住，通过局域网复制一 TB 的数据也不是一件好玩的事情。即使分配了不成比例的 WAN 带宽，移动具有大量数据的单个有状态工作负载也很困难，但是当需要同时移动多个工作负载以实现业务灵活性时，这个问题在物理上变得不可能，因为根本没有足够的带宽来并行运行作业。

现有的在广域网上的云和数据中心之间移动数据的技术使这个问题变得更加复杂。相当于复制命令的现代版本将基于卷快照复制数据，如 Linux 基金会的 OpenSDS 项目中所例示的。拷贝快照的问题是，快照在拍摄后就与生产数据不同步，并且仍然需要时间通过广域网传输。增量快照是一个复杂的过程，在拷贝最终快照之前，应用程序先离线，然后在接收端进行组装，最后在目标端启动应用程序。

当计划和完美地执行这个过程所需要的时间和精力被考虑在内时，更不用说 IT 部门所要求的提前通知了，一个糟糕的次优业务解决方案的画面就很明显了。灾难恢复和实时数据复制等技术也可用于通过 WAN 移动大量数据，但也有类似的缺点:在应用程序可以在目标端启动之前，必须通过 WAN 复制所有数据。此外，灾难恢复和复制产品通常在软件成本和带宽成本方面都很昂贵，因为它们往往占用大量带宽。最终结果是不可避免的:游戏，设置和匹配数据重力。

如果现有的技术解决方案不足以满足在云和数据中心之间移动有状态云本机工作负载以支持业务敏捷性的需求，那么好的解决方案会是什么样的呢？我支持“即时数据移动”方法，其核心原则是有状态工作负载和应用程序必须能够在即时数据移动操作开始后的几秒钟内在目标端启动。读取操作的数据必须按需从源卷中获取，因此无需在操作之前移动数据，而写入操作必须在目标本地进行，以减少延迟并最大限度地降低带宽要求。

这种方法可以将应用停机时间减少到几秒钟，因为应用会立即在目标端启动，从而提供无与伦比的业务灵活性，允许企业将他们的 IT 孤岛从负债转变为资产。这种方法还将减少每个单独的即时数据移动操作所需的 WAN 带宽，从而允许多个操作并行运行。此外，通过消除对移动性运营的大量提前通知的需求，它将为 It 组织带来不可估量的好处，并将移动性项目的规划和执行阶段减少到目前的一小部分。

不用说，即时移动技术将需要在优化与通过 WAN 获取数据相关的低效率方面进行大量投资。例如，使用重复数据删除等技术可以减少主数据中多达 50%的数据量。源和目标之间的共享重复数据删除引擎将优化数据访问，以便在本地而不是通过 WAN 获取目标上已经可用的数据。通过使用数据压缩，可以将数据量再减少 50%。

另一个已经显示出很大益处的技术是时间数据邻接，其中提取的数据不仅带来所请求的数据，还带来历史上在此后不久被访问过的数据，提供了极其有效的数据预读机制。同样重要的是要认识到，虽然有状态的应用程序可能需要非常大量的数据，但这些数据并不是统一访问的，应用程序的工作集只是应用程序数据的一小部分。一旦工作集在目标端完全可用，所有正在进行的应用程序 IO 访问都是本地的。当然，低强度的后台进程需要运行并获取所有未以按需方式访问的数据，以便将来的数据访问更有可能是本地的，并且最终所有数据都已传输到目标，不再需要 WAN 访问。

总而言之，如果云原生要实现其作为新行业范式的潜力，有状态生产工作负载就是云原生的未来。培育和支持生产工作负载必须成为行业和社区的优先事项。由于客户生产环境的性质跨越私有数据中心和不同的公共云，无缝移动有状态云本机工作负载是现有技术无法充分解决的挑战。这篇文章提出了一种即时数据移动方法，该方法利用广域网和数据优化技术通过广域网按需获取数据，同时在目标本地执行所有写入操作，从而使客户能够在几乎零宕机的情况下跨 IT 孤岛移动应用程序。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>