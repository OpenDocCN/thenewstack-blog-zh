# 教程:API 解释，使用啤酒和乐高

> 原文：<https://thenewstack.io/tutorial-apis-explained-using-beer-and-legos/>

当我开始学习前端 web 开发并第一次遇到这个术语时，“API”听起来像是某种精酿啤酒。然后，我艰难地发现，如果你去酒吧，试图订购一个 API，酒保会抛出一个“404:资源未找到”的错误。哦嗬嗬，我笑破了肚皮。

所以！API 是我们一直都在使用的东西。尽管它们无处不在，但是许多人——甚至是技术人员——对它们是什么以及它们是如何工作的理解非常模糊。严肃地说:让你的同事快速解释 API。如果他们能做的不仅仅是告诉你，“API 代表应用程序编程接口。它是允许软件应用程序相互通信的接口……”我会亲自给这个人买一杯啤酒。因为，说真的，我们大多数人真的不能有效地解释它，如果有的话。

让我们改变这一点。

### " A "代表申请。

这个术语的第一部分非常依赖于上下文。根据具体的用例，“应用程序”实际上可以指很多东西:整个服务器。整个应用程序本身及其所需的数据。或者只是 app 的一小部分。

让我们看看这些环境:服务器、整个应用程序、应用程序的较小部分。我们首先把网络想象成一个巨大的连接服务器的全球网络。互联网上的每一页都存储在这些远程服务器中的某个地方，即，位于远程的计算机，该计算机被优化来处理将该特定网站提供给你的浏览器的请求。

因此，如果你在浏览器栏中键入[www.github.com](https://www.github.com)，Chrome(或 Firefox 或 Safari yadda yadda)会向 GitHub 的服务器发送一个请求，后者会礼貌地发回所有必要的代码，以便在你的本地计算机上显示页面及其内容。当您的浏览器收到此响应时，它会解释代码并显示页面。

服务器作为 API:对于你的浏览器(也称为客户端)，GitHub 的服务器就是一个 API。这意味着每次你访问网页时，你都要与一些远程服务器的 API 进行交互。在这种情况下，API 与远程服务器不是一回事。相反，它是服务器接收请求和发送响应的一部分。

作为 API 的整个应用程序:在初始调用时，GitHub 服务器发送整个 web 应用程序:表示结构(站点的布局，外观)，加上网站的所有内容。表示部分已经设置好了，并作为 HTML 代码发送，由浏览器呈现。内容——网站中包含的动态信息——通常以 JSON 格式作为数据发送，然后呈现在页面的适当位置。

因此，如果我们在看一个典型的 GitHub 页面，呈现部分——比如顶部的导航栏，左边的用户照片和简历，中间的固定存储库——基本保持不变。但是那些代表每日 GitHub 活动水平的绿色小方块呢？这根据用户的贡献而变化。当我们将项目工作推送到 GitHub，然后去检查以确保它已被记入我们的个人资料页面时，API 会告诉我们的浏览器将今天的正方形涂成绿色，以及它应该使用什么样的阴影。然而，其他一切都保持不变。

不同种类的 API 允许我们的浏览器调用特定种类的信息，并只更新相关的数据——而不需要重新加载所有其他的东西，这一点没有改变。

作为 API 的应用程序部分:当构建一个 web 应用程序时，从预先存在的部分构建它要快得多，也容易得多(通常也更可靠)。如果你能想象得到，很有可能有一个库、预建平台或*“即服务”来提供它。

但是，这些组件如何相互交流，以便作为一个统一的应用程序一起执行呢？

### “P”代表协议，“I”代表接口

一个 API 的应用程序端可以有很大的不同，但是不管我们在谈论什么样的上下文，API 的最终工作是相同的:通信和协调。

API 或协议中的“P”指的是为其他软件设置商定的方法，以与给定的 API 对话，并从其请求/接收相关信息。

接口指的是 API 的中介方面，即使两个应用程序能够相互通信的实际功能。

因此，从根本上说，API 可以被认为是两个软件之间的一种协议或契约，是使它们能够接口并一起工作的“粘合层”。实质上，API 是在说，“如果你给我这个指令，我将执行这个动作/返回这个信息。”

隐喻时间:API 就像微型啤酒厂的啤酒龙头。每一个龙头对应一种特定的啤酒，所以当你拉下标有“波特”的龙头手柄时，你知道你的杯子会装满一杯浓郁的棕色大麦香味的啤酒，而“比尔森啤酒”会带来一杯淡而脆的黄色啤酒。同样，请求 API 输出的客户端知道要“点击”哪些数据才能获得想要的输出。举例来说，波特酒应该是从波特酒龙头里出来的，而不是黑啤酒或淡啤酒。同时，用户甚至不需要知道或关心水龙头内部发生了什么。你可以在不影响用户的情况下重新安排产品线或优化你的产品(你提供的 brew 或应用)，因为界面保持不变。

API 不仅仅是推出数据；他们也接受了。这就是我们的啤酒比喻不起作用的地方，因为啤酒只能单向流动。因此，让我们混合我们的比喻来说明数据是如何进入 API 的。想象一下那些给小孩子玩的形状分类玩具。形状像圆形、星形和三角形的零件通过适当形状的开口插入；一颗星星只能通过星形的洞进去。在 API 中，数据以定义的形式提供(想象一下，比如圆形或三角形)，并且只能通过相应的开口通过接口。API 需要某种格式，并将拒绝不适合的数据。不要试图将三角形数据放入方孔。因此，客户被迫根据 API 构建器的规范(即，协议)来组织输入，该规范设置了对交易的期望。

无论我们用什么比喻来解释它，API 都可以被认为是两个软件之间的一个协议或契约，它说:“如果你给我这个指令，以这种方式格式化，我将执行这个指定的动作或返回这个信息。”

### 作为产品的原料药

除了作为浏览器、服务器、软件和数据库之间信息交换的载体，API 还可以作为产品打包出售。例如，Weather Underground 出售其[天气数据 API](https://www.wunderground.com/weather/api) 的使用权。这是一组返回纯数据响应的专用 URL，在本例中，是最新的天气预报，供您链接到自己的应用程序并用于提供数据。只是事实，夫人:你没有得到 Weather Underground 在它自己的应用程序或网站上使用的演示材料。你可以自己构建自己的图形用户界面。

也就是说，您完全可以用浏览器向 API 发出请求，并查看结果数据，不管有没有 GUI。由于所请求数据的实际 HTTP 传输是以文本形式出现的，因此您的浏览器通常能够呈现响应。比如，你可以用浏览器直接访问 GitHub 的 API，甚至不需要访问令牌。这是你在浏览器中访问 GitHub 用户的 API 路径时得到的 JSON 响应——让我们来看看[我的](https://api.github.com/users/mgienow) :

```
{
  "login":  "mgienow",
  "id":  19556217,
  "node_id":  "MDQ6VXNlcjE5NTU2MjE3",
  "avatar_url":  "https://avatars2.githubusercontent.com/u/19556217?v=4",
  "gravatar_id":  "",
  "url":  "https://api.github.com/users/mgienow",
  "html_url":  "https://github.com/mgienow",
  "followers_url":  "https://api.github.com/users/mgienow/followers",
  "following_url":  "https://api.github.com/users/mgienow/following{/other_user}",
  "gists_url":  "https://api.github.com/users/mgienow/gists{/gist_id}",
  "starred_url":  "https://api.github.com/users/mgienow/starred{/owner}{/repo}",
  "subscriptions_url":  "https://api.github.com/users/mgienow/subscriptions",
  "organizations_url":  "https://api.github.com/users/mgienow/orgs",
  "repos_url":  "https://api.github.com/users/mgienow/repos",
  "events_url":  "https://api.github.com/users/mgienow/events{/privacy}",
  "received_events_url":  "https://api.github.com/users/mgienow/received_events",
  "type":  "User",
  "site_admin":  false,
  "name":  "Michelle Gienow",
  "company":  null,
  "blog":  "",
  "location":  "Baltimore, MD",
  "email":  null,
  "hireable":  true,
  "bio":  "Front-end web developer &amp; recovering journalist - I write web dev/JS/Node/Python @TheNewStack",
  "public_gists":  1,
  "followers":  11,
  "following":  2,
  "created_at":  "2016-05-24T16:33:09Z",
  "updated_at":  "2018-01-27T03:26:14Z"
}

```

因此，当你访问我的 GitHub 页面时，它调用 GitHub API 获取显示页面的表示代码(HTML/CSS ),并调用另一个不同的 GitHub API 获取我独有的数据。对于页面其他区域的内容，还有其他几个对其他 API 的调用。浏览器接收所有这些数据，然后知道将数据插入页面以生成最终的统一表示。

### 把所有的放在一起

基本上，任何可以从运行时环境中分离出来的软件都可以成为特定环境下 API 中的“A”。它本身可能也有某种 API。例如，假设您在代码中使用了第三方库。一旦合并到你的代码中，这个库就成为你的整个应用程序的一个永久的部分。然而，作为一个独特的软件，该库使用一个 API(它是预先打包好的，不用担心)来允许与代码的其余部分进行交互。

所以:API 可以是任何东西，真的。服务器、应用程序，甚至是可以买卖的产品。这就是为什么他们有点难以解释，即使对我们这些每天和他们一起工作的人来说。

也许定义 API 本质的最恰当的方式是使用乐高。乐高积木有一种通用的方式，通过一个积木上的小钉系统相互连接，并使这些小钉与其他积木上的凹槽相关联。这提供了一种简单和结构化的方式，允许所有部分以相同的方式咬合在一起。同时，棋子可能的组合也是无穷无尽的。类似地，软件可以使用 API 来连接我们寻找的信息和查看信息的界面，从而创建一个独特的服务组合，共同形成一个应用程序。

对于开发者来说，乐高的确是理解 API 价值的一种有益方式。有了 API，开发者不用每次写新程序都要从头开始。他们不再需要构建一个试图做所有事情的核心应用程序。相反，他们可以通过使用已经创建的可以更好地完成工作的部分来外包某些职责。所以 API 是软件开发的乐高积木:软件与其他软件通信的标准化工具，导致更快的构建和部署。谢天谢地，每个人都有更快的加载时间。

由 Behance.net 知识共享许可的 Michael Kulesca 制作的专题图片

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>