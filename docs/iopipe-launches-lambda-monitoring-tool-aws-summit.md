# 无服务器:IOpipe 推出 AWS Lambda 监控工具

> 原文：<https://thenewstack.io/iopipe-launches-lambda-monitoring-tool-aws-summit/>

在本周于纽约举行的 AWS 峰会上， [IOpipe](https://www.iopipe.com/) 现已发布其 Lambda 监控工具的 1.0 版本，并已成为 AWS 的高级合作伙伴。

IOpipe 建立在无服务器的前提上，即尽管仍有服务器，但它们对应用程序开发人员来说不再是一个问题。但是，监控和管理性能的需求现在存在于复杂的应用架构中，可能通过 API 调用第三方服务，利用内部微服务，并调用执行特定任务的小功能，而不是带来无服务器的 [NoOps 未来。](https://thenewstack.io/serverless-computing-growing-quickly/)

这就产生了对 IOpipe 联合创始人兼首席技术官 [Erica Windisch](https://github.com/ewindisch) 所说的“应用运营”的需求 Windisch 将于 10 月 8 日至 11 日在纽约举行的 Serverlessconf 上谈论调试和跟踪 Lambda 应用程序，他说使用 IOpipe 的理想方式之一是让代码编辑器和窗口与 IOpipe 并排运行。“开发工具和应用工具现在正在融合。

使用 IOpipe，您可以在代码编辑器中工作，并添加 IOpipe 无服务器框架插件或在您的应用程序中使用我们的装饰器。然后你可以在另一个窗口打开 IOpipe，把信息输入其中，”她说。

IOpipe 旨在提供一套监控和调试工具，允许更深入地了解调用无服务器工作流的每个 Lambda 函数时发生的情况。

联合创始人兼首席执行官[亚当·约翰逊](https://github.com/adjohn)概述了该产品的出发点:“我们一年半前开始，基本上是通过与尽可能多的 Lambda 用户交谈，”约翰逊说。“我们从他们那里得到的最大反应是缺乏可见性和工具。当然，对于许多无服务器的采用者来说，开发是有挑战的，但是有工具可以解决这个问题。但是，当你进入生产阶段时，没有一套很好的工具来监控你的无服务器应用程序，并在出现问题时弄清楚发生了什么。”

Windisch 表示，通过 IOpipe，用户可以更深入地了解可能发生的错误、错误的频率、内存泄漏及其持续时间，以及冷启动的时间长度，这是无服务器应用程序性能的关键指标。

“一个常见的情况是，当连接到存储时，您的应用程序中可能会出现错误。您可以使用 IOpipe 运行这些警报，以便轻松访问您的堆栈。你可以深入研究，看看有多少调用因为与数据库的连接错误而失败，”Windisch 说。

## 时间是最重要的

也可以在 IOpipe 管道中使用自定义指标。Windisch 给出了在 Kinesis 中为特定 Lambda 处理的记录数量设置指标的例子。这样，可能会变得很明显，例如，任何低于 500 条记录的 Lambda 处理都可以正常工作，但是当定期处理超过 500 条记录时，处理就会失败。这为开发人员提供了他们需要的信息，以便在问题出现时更快地进行调试。

Johnson 指出了图像处理的常见用例，其中无服务器可用于从对象存储中获取图像，运行额外的处理，如调整大小或 ML 分析，然后将结果数据和调整大小的图像保存到另一个对象存储桶。“联系 S3，依赖如此多的第三方调用，如谷歌或亚马逊的图像处理算法……它确实达到了一个令人担忧的阈值，因为有如此多的移动部件。我们刚刚发布了一个跟踪插件，这样你就可以跟踪这些调用的性能，可视化这些调用，跟踪这些调用在函数中花费的时间，这样你就可以看到时间花在了哪里，”约翰逊说。

洞察流程中每个步骤所花费的时间是一项关键的应用程序运营监控任务。Windisch 将冷启动描述为在无服务器环境中监控应用程序性能时开始的关键指标之一:

*“无服务器容器每 4.5 分钟到 4.5 小时回收一次，因此对于基本冷启动来说，这可能是 5 毫秒和 100 毫秒之间的差异。但是 Lambda 函数的大小也决定了冷启动需要多长时间，或者有很多依赖关系，有些语言比较慢，所以 Java 需要更长时间，因为它要先预热 JVM 容器。如果您正在引入第三方依赖项，它们必须在冷启动之前加载，因此我们试图提供所有这些的大量可见性。在 IOpipe 中，您可以通过冷启动进行过滤，并包括或排除它们，这样您就可以查看是否只有冷启动存在性能问题，或者是否每个调用都是冷启动。根据不同的用例，这可能是您需要解决的问题。亚马逊已经改善了冷启动时间，这将继续变得更好，并且影响更少的人，但例如，如果你正在寻找一个弹性搜索服务，在冷启动期间，你将连接到该服务，并将有初始化惩罚，所以冷启动会显著影响性能，最终影响你在亚马逊上的支付。”*

约翰逊说，在不使用 IOpipe 这样的监控工具的情况下，他看到一些公司努力收集有关 Lambda 流程的所有信息，将其记录到一个中心位置，然后每当出现错误时，就试图按时间范围查看日志文件。但在 IOpipe 中，用户还可以按项目对函数进行排序，并查看这些项目的错误和日志，或者按时间或函数名称查看。

“当我们问开发人员他们的开发、调试和生产工作流程是什么时，使用无服务器时会倒退好几步，因为您依赖于许多第三方服务。所以本地测试不是一个选择。许多人正在编写代码，如果有错误，他们需要编写日志代码，他们会打开五六个终端，跟踪五六个函数的日志，然后查看发生了什么，”Windisch 说。

“在 IOpipe 中，您可以在一个视图中看到所有这些，以及它们是如何相互影响的。它能让你将所有这些都触手可及。然后，您可以与您的 CI/CD 管道集成，以查看代码更改是如何随着时间的推移而受到影响的。它消除了在 Lambda 上来回迭代的需要，您不需要进入并添加打印语句，您可以确切地看到更改发生时发生了什么，而不是封闭您的代码并重复编辑-上传-测试的循环。”

## 无服务器的成熟客户群

Johnson 说，IOpipe 的大多数客户分为三类，反映了无服务器市场最成熟的部分。

首先是无栈初创公司:“这些 1-2 人的初创公司可以使用 AWS 技术构建令人敬畏的技术，并很快拼凑出令人敬畏的东西，”约翰逊描述道。

第二类是媒体公司，他们在经济上需要快速降低图像和多媒体处理的成本。约翰逊概述道:“有一堆媒体公司，既有你想不到的老牌媒体公司，也有新式在线杂志。传统媒体公司正在从传统上在数据中心的虚拟机上运行，转向公共云，并有意识地决定跳过容器，直接转向无服务器。他们正在创建媒体处理管道，这是非常突发的。当他们引入新的合作伙伴并通过 SLA 交付内容时，他们需要在很短的时间内处理整个媒体库，因此，使用无服务器，他们能够在一年多前投入生产，并显著降低他们的成本。”

第三组是更大的公司。Johnson 表示，这些客户已经通过一套用于业务逻辑任务的无服务器功能成熟起来，现在正转向使用无服务器的大数据处理:“这些企业开始使用 Lambda 处理 cron 风格的工作负载，清理虚拟机，清理 DNS 记录，这是 DevOps 团队通常会做的事情。这是我们看到的早期例子之一，但现在他们正在转向大数据转换和 ETL。例如，我们看到许多企业转向 Aurora，并使用 Lambda 进行数据处理。在任何批处理或消息队列中，都有一群工作人员在容器中运行，处理数据并将其放在某个地方。你需要非常善于知道你需要多少工人，或者你支付更多的钱来过度供应，或者你需要更长的时间(这是他们以前所做的)。由于 Lambda 将增加新的容器，他们只为他们需要的东西付费，而不必担心高可用性。这是显而易见的，所以我们看到了很多这样的使用案例。”

约翰逊说，在此之后，他希望看到企业转向使用移动和网络应用程序的无服务器。随着这个领域的成熟，IOpipe 希望与他们一起成熟。该团队已经计划成为无服务器的完整监控应用程序堆栈。最初，它们更多地是作为一种取证报告服务开始的，能够在事件发生后看到哪里出错了，但在 1.0 版本中，它们已经能够在编码环境中调试无服务器应用程序。有了像 tracer 插件这样的新工具，他们希望能够增加设置第三方调用性能阈值的能力。与 CI/CD 管道的集成也在他们的路线图上。

或许紧随其后的是一个自主环境，在这个环境中，不仅可以设置阈值警报，还可以创建 Lambdas 来触发如何响应这些警报。无服务器自主运营的未来即将到来。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>