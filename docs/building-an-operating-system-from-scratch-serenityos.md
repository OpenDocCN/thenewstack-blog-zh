# SerenityOS:从零开始构建操作系统

> 原文：<https://thenewstack.io/building-an-operating-system-from-scratch-serenityos/>

2 月初，编程播客“core ruthus”[探索了一个完全从零开始构建操作系统的独特项目](https://corecursive.com/serenity-os-with-andreas-kling/)——以及该项目是如何从一个非常个人化的旅程中成长起来的。

播客的主持人、开发者[亚当·戈登·贝尔](https://www.linkedin.com/in/adamgordonbell/)首先分享了构建 Windows XP 需要 2000 多名开发者的估计。然而，瑞典开发者[安德里亚斯·克林](https://twitter.com/awesomekling)启动了一个项目，要自己建造一个，编写贝尔所描述的类似于“我从小到大使用的 Windows 95 的另一个世界版本”

该操作系统的官方网站甚至将 [SerenityOS](https://github.com/SerenityOS/serenity) 描述为“给 90 年代用户界面的情书”，但是“具有定制的类似 Unix 的核心”。"

然而，正如 Kling 去年夏天向 Ars Technica 解释的那样，它完全免费于所有第三方代码，具有一个 shell 系统[,它自己实现了 Bash 中许多熟悉的实用程序](https://arstechnica.com/gadgets/2021/08/not-a-linux-distro-review-serenityos-is-a-unix-y-love-letter-to-the-90s/)——如 grep、find 和 sysctl。(它的电子表格软件是用 JavaScript 编写的。)

克林告诉贝尔，他喜欢用现代开发实践和技术重建旧的想法。(他注意到讽刺的是，“今天建立一个外观和感觉都像 2000 年的系统比那时容易多了。”)

一个 2019 年的视频甚至显示克林将经典的 1993 年视频游戏《末日》移植到他的操作系统上。一月份发布的操作系统更新[包含了经典的 1998 年视频游戏《半衰期》的移植。](https://youtu.be/DL-RCV5a-C4)

在他的 GitHub 简介上，克林把这个项目描述为试图让 Unix 再次变得有趣。

但这也是对编程的长期热爱的产物——以及一种根深蒂固的理念，即开发者应该有权访问他们正在使用的软件的代码。

## 操作系统项目是如何开始的

2011 年，克林在苹果获得了一个职位，他记得自己“有点痴迷于 WebKit 和 Safari 的工作”，长时间致力于性能优化和基准跟踪。克林的工作让他超越了浏览器，通过苹果公司的内部图书馆进行联网和图像解码等工作——“上下遍历堆栈。”

但是苹果也将 Kling 暴露在一个独特的环境中，因为该公司控制着它的整个堆栈——现在甚至制造自己的 CPU，以及自己的浏览器引擎、系统调用，甚至是 [Swift 编程语言](https://thenewstack.io/swifts-chris-lattner-on-the-possibility-of-machine-learning-enabled-compilers/)。在这个世界里，你组合在一起的组件不是黑匣子，但克林说，“只是你的一个同事为你制造的东西。”

这让他对开源代码产生了浓厚的兴趣。尽管他离开苹果时一直在使用 MacBook，但他回忆道，“我记得当我不能再拿出东西的源代码时，我真的很沮丧……现在我知道其他人的感受了。”

克林的思维过程大致是这样的:要查看你正在使用的软件的代码，你不必在苹果公司工作。

“我的理由是，如果你只是开始一个接一个地构建这些组件，最终你会拥有完整的堆栈，它会聚合在一起，”他告诉播客的观众。“所以这就是我开始做的事情。”

克林的 [Patreon page](https://www.patreon.com/serenityos) 详细阐述了他的计划:“我正在从零开始构建一个操作系统，基于我小时候对计算机的感觉。”(他补充说，在发现使用 Slackware 的 Unix 的乐趣之前，他是在 Windows 3.11 上使用 Visual Basic 长大的。)

但是他的项目还有另一个更私人的动机。

## 残留的梦想

“在 2018 年完成为期三个月的毒瘾康复计划后，我开始建立 SerenityOS，让自己保持忙碌，”克林的 GitHub 简介上的[常见问题解释道。他从青少年时期就认识到了一种模式。克林告诉贝尔:“如果没有什么能让我集中注意力，我就会酗酒或吸毒。”。](https://awesomekling.github.io/faq/)

克林承认，进入大型科技公司会带来更高的薪水，“如果你有更多的钱，你就可以购买更大、更危险的药物。”但是离开康复中心后，他遇到了同样的问题。“我真的很难想出一些事情来做，”他告诉播客听众。

然而，没有任何干扰，头脑清晰，“我觉得我正处于一些严肃的生产力的边缘，”克林在播客中回忆道。"如果我有东西可以让它沉下去的话"

因此，他在一个租来的廉价小屋里住了六个月，只是为了追寻他从十几岁开始就梦想的从零开始编写自己的操作系统。“你甚至可以找到我小时候在新闻组的旧帖子，请求帮助我写像 boot loader 这样的东西，”他说。

克林将他的精力投入到这个雄心勃勃的新操作系统建设项目中，以回到他以前的样子——回到他那时所关心的东西。在播客上，他称之为治疗，这是一种有趣的努力，以健康的方式填满了日子。

“我选择 SerenityOS 这个名字是因为我想永远记住[宁静祷文](https://en.wikipedia.org/wiki/Serenity_Prayer)，”克林去年春天在[的博客文章](https://awesomekling.github.io/I-quit-my-job-to-focus-on-SerenityOS-full-time/)中解释道。“当时我很担心我的未来，我认为这个名字会帮助我走上正轨。”

克林在他的播客采访中详细阐述了这一决定。“我当时的想法是，我需要做一些又大又漂亮的东西，让我想留下来。”

而该项目的贡献者也有同感:“他们只是想为自己做点什么，做点美好的东西。我认为这给了我们一种我喜欢的纯粹的目标。”

克林的博客[将](https://awesomekling.github.io/I-quit-my-job-to-focus-on-SerenityOS-full-time/)这个不断增长的社区描述为“充满活力”，并补充道，“说这是一次惊人的旅程是一种保守的说法，然而在许多方面，我们仍然只是刚刚开始。”

克林说这个项目现在有 600 多名贡献者。这个月，他宣布了另一个里程碑:操作系统的 Discord 服务器[现在有 5000 名成员](https://twitter.com/awesomekling/status/1491005663509884929)。

贝尔在采访结束时问克林是否找到了回到他上瘾前所享受的那种精力的方法。程序员回答说:“我从来没有像最近这样觉得自己如此真实。”

## 做你自己

克林在 YouTube 上分享了他的一些编程会话。“一开始我对此非常不舒服，”他在去年的一篇博客文章中回忆道。“但我坚持了下来，因为我喜欢做自己，让人们看到我的感觉，而不是戴上面具，假装一切都很好。”

本月早些时候，Reddit [上的一位评论者问](https://www.reddit.com/r/programming/comments/simv95/comment/hvbazqm/?utm_source=reddit&utm_medium=web2x&context=3)这个项目是否可持续:“如果他有了一个女朋友，结果发现她喜欢一个有可靠收入的男人，会发生什么？”

克林回应说，他没有一个具体的长期计划，并表示他甚至拒绝了企业赞助商，“因为我不想推广任何我不亲自使用的东西……但即使所有人都离开了，我仍会在这里继续工作。”

此外，他[补充](https://www.reddit.com/r/programming/comments/simv95/comment/hvbgjz7/?utm_source=reddit&utm_medium=web2x&context=3)，“我结婚快 10 年了，我的妻子是我最大的支持者！她甚至逼我辞掉上一份工作，这样我就可以把全部精力放在 SerenityOS 上。”

克林的[帕特里翁账户](https://www.patreon.com/serenityos)也显示有 282 名赞助商每月捐赠 1399 美元。克林去年 5 月报道称，GitHub 赞助商(和 PayPal)每月会多给你 600 美元，外加 YouTube 每月 150 美元，以及宁静主题商品每月 100 美元。

那篇博文还宣布他将辞去工作，全职在 SerenityOS 上工作。“这还不足以完全养活我和我的家人，但这已经足够接近了，我决定是时候抓住机会，看看会发生什么！”他写道。

然而还有一个更大的影响。在一月份他的 YouTube 频道上的一个视频中，克林回忆起在 YouTube 上讲述他的故事是如何促使其他人伸出手来分享他们自己的故事和挣扎的，他对此表示赞赏，因为分享是康复过程中的一个关键部分。

该视频的结尾提醒所有正在为类似问题挣扎的人，“你应该知道，世界上有数百万人曾经经历过你的处境。如果你决定不再那样生活，他们可能会帮助你。”

克林补充说，他们知道如何去做，“因为有人向他们展示了如何去做。”

贝尔本月在《黑客新闻》上发表了他对克林的坦率的赞赏:“安德烈亚斯如此坦率地讲述宁静号的幕后故事，这是对他的大力支持。我觉得我们在科技领域没有谈论某些事情，这是可以改变的。”(对此克林[回应](https://news.ycombinator.com/item?id=30215883)，“我绝对喜欢谈论更多我们彼此隐瞒的事情。”)

贝尔补充道，“我喜欢编程，尤其是兼职项目，可以成为一种治疗手段的想法。”

* * *

# WebReduce

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>