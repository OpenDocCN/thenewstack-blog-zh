# MongoDB 5.0:无服务器、实时重共享、时间序列数据

> 原文：<https://thenewstack.io/mongodb-5-0-serverless-live-resharding-time-series-data/>

NoSQL 数据库系统提供商 [MongoDB](https://www.mongodb.com/cloud/atlas/?utm_content=inline-mention) 本周在该公司的用户大会 MongoDB.live 上发布了 MongoDB 5.0，推出了一些[预期的](https://thenewstack.io/perconas-predictions-for-next-weeks-mongodb-5-0-release/)功能，如实时重新共享，以及其他几个功能。

距离 MongoDB [发布 MongoDB 4.0](https://www.mongodb.com/evolved#mdbfourzero) 已经过去了三年，距离该公司的托管产品 MongoDB Atlas 的首次亮相也过去了五年，现在 MongoDB 5.0 通过 MongoDB 无服务器预览版让用户可以做得更多。MongoDB 的云产品副总裁 Andrew Davidson 解释说，无服务器预览是该领域更大趋势的一部分，并且将继续下去。

“转向云计算中的“即服务、声明式、完全托管:这是数据库的未来，这是毫无疑问的。MongoDB 将始终能够在任何地方运行，这是我们价值主张的一个关键部分，但通过对其进行完全管理，并且只是云中的一个神奇端点，您可以实现的价值要高得多，”戴维森说。“除了成为托管数据库服务之外，我们还将提升到另一个抽象层，这样人们甚至不必在资源管理和容量规划层面进行思考，让一切变得更像是我打开空调，在月底收到一份电费账单，我认为数据库的这种转变最终肯定会成为常态。”

Davidson 继续说，他认为无服务器模型仍处于早期阶段，但对于现在的开发人员来说，它将成为使用数据库的主要方法，其中不仅基础设施，而且未来的容量规划都由数据库提供商而不是开发人员来处理。

除了预览无服务器，MongoDB 5.0 的引入还增加了许多其他功能，最显著的包括实时重新共享和原生时间序列，以及版本化 API 的引入——该公司表示，这将帮助开发人员让他们的应用程序经得起未来考验，以及多云部署的隐私控制。

时间序列数据是简单地按时间顺序索引的数据点序列，它带来了轻松快速地执行许多功能的能力，否则作为开发人员，您可能需要自己处理这些功能。Davidson 说，现在，MongoDB 为您处理所有这些。

“你总是可以在 MongoDB 中做这些用例，但你必须处理一些认知负荷，弄清楚如何让它工作，”他说。“现在，我们使它具有超高的性能，这是完全自然的:您只需接受所有这些数据，然后您现在可以执行窗口函数，以所有针对时间序列类型查询优化的方式读取这些数据。”

MongoDB 5.0 的另一个主要特性 Live resharding 解决了数据库通过分片进行水平伸缩的能力中的一个关键问题，分片将数据库分成更小的部分，并将它们分散在多个节点上。为此，用户必须选择一个分片密钥，这个选择充满了他们当时可能没有考虑到的后果。

该公司此前曾写过[选择正确分片密钥](https://www.mongodb.com/blog/post/on-selecting-a-shard-key-for-mongodb)的重要性，指出“如果你选择了错误的分片密钥，你完全可以毁掉你的集群的性能”，而且这是“单向跳伞；如果做错了，就需要使用正确的分片策略将数据迁移到新的集合中。”通过实时重新共享，用户现在可以弥补过去的错误，MongoDB 将在后台处理数据重新分配，而不会导致停机或要求用户进行复杂的迁移。

为此，戴维森说:“现在，通过实时重新共享，你可以对碎片键进行更改，MongoDB 将对数据进行所有后端同步，从本质上将其适当地移动到所有正确的碎片，并给你一个关键部分来翻转到这个新的键上，这只是让碎片不再是一扇单行道，意味着你不必担心‘哦，我的上帝，如果我做出错误的选择，我就完了。’这使得向前发展和利用分片变得更加容易，因为它本来就是为了扩展而构建的。"

虽然这些功能构成了 MongoDB 5.0 的主旨，并且在本地软件和 MongoDB Atlas 中都有提供，但这个最新版本还有几个可用的[功能](https://www.mongodb.com/new)，您可以在网站上了解这些功能。

*更正:本文之前的版本称 MongoDB Atlas 于三年前首次亮相。它于五年前首次亮相。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>