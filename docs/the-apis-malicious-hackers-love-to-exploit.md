# 恶意黑客喜欢利用的 API

> 原文：<https://thenewstack.io/the-apis-malicious-hackers-love-to-exploit/>

[](https://www.linkedin.com/in/b69ca/)

 [乔恩·华莱士

乔恩·华莱士在系统管理和安全领域拥有超过 20 年的技术经验。作为一名顾问、技术专家和首席技术官，Jon 曾与一些大型组织合作，设计和实施保护其公司资产的解决方案。在 Instart，Jon 帮助公司就企业的安全产品传达信息和愿景。](https://www.linkedin.com/in/b69ca/) [](https://www.linkedin.com/in/b69ca/)

尽管应用程序接口(通常称为 API)自 web 编程出现以来就一直存在，但它是 web 开发人员的基础工具。API 可以节省时间和资源，同时提供更好的最终用户体验，使它们越来越受欢迎。[programmable web](https://www.programmableweb.com/news/apis-show-faster-growth-rate-2019-previous-years/research/2019/07/17)发现，在过去的四年中，每年都有超过 2000 个应用程序接口被添加到他们网站的目录中。未来三年，API 滥用将成为破坏企业 web 应用的 [最常见的攻击载体](https://www.gartner.com/en/documents/3834704) 。

API 使用的增加很大程度上是由于最近移动应用的流行。与传统网站不同，原生移动应用管理设备上的用户界面，并根据 API 请求数据，从而使开发者更频繁地使用它们。类似地，AJAX 驱动的网站只刷新网页的特定部分，而不是整个页面，使用 API 来运行，近年来越来越受到青睐。

但是，每一个伟大的机会都伴随着高风险。随着 API 越来越受欢迎，针对它们的威胁也越来越多。许多组织面临着越来越复杂的攻击，不仅针对他们的网站，还针对他们的 API。

不幸的是，黑客越来越擅长利用公司的 API 来获取敏感的用户信息，如姓名、位置和金融交易。例如，在 2018 年 9 月脸书的一次入侵中，黑客使用旨在供开发人员通过社交媒体公司创建应用程序的 API 来访问 5000 万用户的个人信息，如姓名、性别和家乡。

那么，您能做些什么来确保您的公司不会成为类似攻击脸书事件的受害者呢？以下是黑客喜欢利用的漏洞，以及可以帮助您保护 API 安全的五种做法:

## 未经验证的 API

如果有人想访问你的 API，应该要求他们先注册一个帐户。建立这样的要求允许您对 API 请求进行身份验证，并限制拥有 API 密钥的合法用户的访问。这样，您的团队可以跟踪单个帐户是否发出了大量请求，并且通常能够防止这种类型的系统滥用。例如，你需要注册成为一名开发者，并获得一个针对谷歌 API 的密钥。这是一个简单但必要的安全步骤。

## 不安全的 URL

不安全的 URL 很容易被利用。为了保护你的 API，你的团队应该做的最重要(也是最简单)的事情之一就是在你的 URL 中使用 HTTPS 而不是 HTTP。HTTPS 对用户和服务器之间发送的信息进行加密。这种方法保护敏感信息，如支付信息、用户名和邮寄地址。

当应用程序使用 HTTP 与 API 通信时，所有流量都可以在旅程中的任何一点被拦截和读取，例如您的互联网服务提供商或机场无线接入点。如果攻击者能够拦截流量，他们就可以窃取身份验证凭据、访问令牌或其他敏感信息。

## 返回太多数据的 API

您的团队应该始终对传入的请求实施最大字段大小和允许的字符。但同样重要的是，你不要忘记检查你的系统发送回来什么。

例如，在一家服装公司的移动应用程序上搜索产品目录可能会产生 10 到 100 个结果。如果您的返回有成千上万个结果，那么您返回的数据太多了——这表明有问题。这可能是一个简单的 web 应用程序缺陷，或者是攻击者欺骗您的应用程序返回超出其应该返回的内容的证据。例如，攻击者可以创建一个特殊的请求，返回公司网站上所有可用的商品，以及商品的具体细节，如供应商和原始价格。反过来，这些信息可能会被卖给竞争对手。

确定一个 web 应用程序的响应是相当容易的，返回数千条记录来响应一个产品搜索肯定是不正常的。通过监视输入和输出，很容易确定应该自动阻止哪些响应。

## 易受 SQL 注入和远程命令执行攻击的 API

SQL 注入和远程命令执行攻击不仅仅发生在网站上。大多数传统的网络攻击表现为 API 攻击。许多 API 调用会导致后端的数据库调用，因此仅用您的代码来检查恶意请求是不够的。您的团队需要监控 API 负载，比如 JSON 或 XML 标记，以及查询字符串、HTTP 头和 cookies。

您可以在后端通过代码或 API 网关来实现这一点。然而，拥有 web 应用程序防火墙(WAF)提供了另一层保护来发现和阻止常见的攻击。大多数 WAFs 都有特定于 API 的规则集，开源和商业解决方案都存在。

## 没有额外保护层的 API

跨用户和跨客户 API 可以返回更广泛的数据集，因此您应该为它们设置额外的保护级别。我建议加强一个额外的因素来认证这些类型的敏感请求(比如客户端证书)。同样，只允许从公司总部访问某些 API 可以降低风险。如果只有有限的用户需要这个 API，那么您可以限制对特定 IP 范围或 ASN(他们来自的网络)的访问。

对于开发者和最终用户来说，API 都是一个优秀的工具。因此，随着 API 的使用不断增加，it 团队必须确保它们的安全性。正如一些公司已经认识到的那样，未能保护您的 API 可能会导致灾难性的后果——如品牌声誉受损和大量客户流失。这五个小步骤可以由您的团队轻松实施，以防止违规、保护用户数据，并在未来为您的公司省去大麻烦。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>