# 对于集装箱来说，家就是裸机所在的地方

> 原文：<https://thenewstack.io/for-containers-home-is-where-the-bare-metal-is/>

[](https://diamanti.com/)

 [查克里·内卢里

查克里·内卢里是迪亚曼蒂的首席建筑师和创始工程师。Chakri 专门从事集装箱化、网络化和仓储。他是 Kubernetes 的积极贡献者和 FlexVolume 的创建者，flex volume 是一个用于 Kubernetes 存储的定制插件框架。在加入 Diamanti 之前，Chakri 曾在 Dell/EMC、Cisco 和 Veritas 任职，拥有 Birla Institute of Technology and Science 的计算机科学学士学位。](https://diamanti.com/) [](https://diamanti.com/)

不可否认，硬件虚拟化是过去 25 年中最伟大的数据中心创新之一，您会发现今天大多数全球 2000 强企业数据中心都在运行虚拟机。

但这并不意味着你应该在虚拟机上运行你的容器。VMware 首席执行官[帕特·基尔辛格希望你继续使用他的虚拟机](/vmware-ceo-a-virtual-machine-is-still-the-best-place-to-run-kubernetes/)，他在最近的 VMworld 大会上宣扬了这一点。不要上当。是时候回到未来，拥抱你的裸机服务器了。您将节省资金，提高性能，并将服务器占用空间减少一半以上。

容器和微服务架构基于虚拟化的承诺，支持从底层操作系统中抽象出应用程序，这使得软件可以作为一组小的、可组合的部分来开发和部署。

金融、能源、媒体和其他主要垂直行业的企业现在敏锐地意识到容器化应用程序可以提供的巨大灵活性、效率和上市速度优势，并非常积极地进行大规模数字化转型。当您已经有了在整个组织中都有深厚专业知识的基础架构时，这一切看起来似乎很简单。

但是，尽管容器技术被认为是虚拟化 2.0，但有一个比 2000 年代中期的虚拟化基础设施更好的地方来运行企业级 Kubernetes 环境。它被称为裸机。

基本论点很简单:遗留基础设施不是为容器使用计算、存储和网络资源的方式而设计的。

也就是说，虚拟机目前没有被容器完全取代的危险；事实上，容器不太适合虚拟机的独特用例。然而，对于 VMWare 的业务来说，显然存在很多风险。随着云原生生态系统的扩展，我们将看到更多的基础架构和工具替代品进入市场，取代 VMware 产品。

在刚刚过去的 VMworld 大会的分组讨论中，VMWare 积极地将 vSphere 定位为 Kubernetes 环境比裸机环境更好的基础，基于以下优势:

1.  资源整合
2.  隔离
3.  操作简单

对于虚拟机可以提供的应用程序隔离类型，几乎没有争议。事实上，这是在 VM 上而不是在容器中运行应用程序的主要原因之一。然而，没有提到资源使用效率，这是一个明显的疏忽。

容器消耗的 CPU 和内存资源远远少于虚拟机所需的资源，相比之下，虚拟机所需的资源要多得多。在裸机上运行的容器比基于虚拟机的容器更有效地利用系统资源。基于虚拟机的容器环境中的平均资源利用率可能低至 15%。相比之下，专门构建的裸机堆栈，如 [Diamanti](https://diamanti.com/) 可实现高达 90%的平均资源利用率。

此外，当在虚拟机上运行容器时(这实际上创建了两个虚拟化层的堆栈)，容器到容器的“嘈杂邻居”效应经常发生，这很难调试。这使得几乎没有选择，只能将每个虚拟机的容器数量限制为一个，而像 Diamanti 这样的裸机容器平台可以支持八倍的数量，同时保证每个容器的性能和 IOPS。

当我们在迪亚曼蒂运行最近的[白皮书](https://diamanti.com/wp-five-reasons/)的数据时，很明显裸机在我们可以统计的几乎每个材料指标上都击败了虚拟机。

1.  管理简单。由于基于虚拟机的容器环境需要管理更多层，因此裸机故障排除和支持更加简单，从而降低了运营成本。
2.  在裸机环境中，单个容器的计算和 I/O 性能提高了 30%。
3.  密度。裸机环境中每台服务器的容器数量远远高于基于虚拟机的环境。
4.  利用率和效率。更高的利用率意味着更小的数据中心占地面积、更低的电力和冷却成本，以及进一步降低管理费用。
5.  性能。单个容器比虚拟机具有更高的计算和 I/O 性能。

我将结束对每个客户来说都很重要的一个问题:成本。全球 2000 强企业每年在 VMware 许可成本上花费数百万到数千万美元。将新的容器化工作负载转移到裸机可以减少年度运营支出。最终甚至可能为零？我们走着瞧。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>