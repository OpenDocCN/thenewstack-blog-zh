# 无服务器迁移策略:在进行迁移之前需要知道什么

> 原文：<https://thenewstack.io/serverless-migration-strategies-what-to-know-before-making-the-leap/>

这篇文章是探索无服务器基础的系列文章的第三篇。请每周一回来查看更多的分期付款。

无服务器承诺消除许多与 IT 维护和运营相关的繁重工作，因此与组织不得不为容器编排和微服务平台所做的工作相比，第三方承担更多与服务器维护相关的管理工作。使用无服务器平台节省了资源，部分原因是允许组织对服务器的使用使用按使用量付费的模式。

迁移到无服务器资源也有正确和错误的方法。在做出决定之前，请记住以下几点。

## 不要在意语义

在 [DevOps](https://en.wikipedia.org/wiki/DevOps) 上的团队成员可能听说过无服务器，并希望探索如果他们迁移到该平台，它可能会给他们的组织带来什么，起初可能会对无服务器的真正含义感到困惑。因为它的名字并不意味着例如“无服务器”应用实际上运行在服务器上。

“无服务器”一词的使用至少可以追溯到 2012 年，当时[肯·弗洛姆](https://www.linkedin.com/in/kenfromm/)在一篇名为[“为什么软件和应用的未来是无服务器的”的读写论文中使用了这个词 2016 年，Symphonia 的合伙人兼联合创始人迈克·罗伯茨(Mike Roberts)在马丁·福勒(Martin Fowler)的网站上发表了一篇开创性的博客文章，文中给出了一个更精确且仍适用的定义。他写道，无服务器架构是“包含第三方‘后端即服务’(BaaS)服务的应用程序设计，和/或包含在‘功能即服务’(FaaS)平台上托管的短暂容器中运行的定制代码。”](https://readwrite.com/2012/10/15/why-the-future-of-software-and-apps-is-serverless/)

“通过使用这些想法，以及相关的想法，如单页应用程序，这种架构消除了对传统的永远在线的服务器组件的需求，”罗伯茨写道。无服务器体系结构可以从显著降低的运营成本、复杂性和工程交付时间中获益，但代价是更加依赖供应商和相对不成熟的支持服务

上面的定义描述了许多供应商提供的无服务器产品，包括亚马逊网络服务(AWS)提供的无服务器产品，该产品使用非常广泛，提供 BaaS 和 FaaS 服务。其他无服务器产品包括[云功能](https://cloud.google.com/functions/)(谷歌)[iron worker](https://www.iron.io/platform/ironworker/)(iron . io)[Manta 功能](https://www.joyent.com/manta)(Joyent)[open whish](https://new-console.ng.bluemix.net/openwhisk/)(IBM)[PubNub BLOCKS](https://www.pubnub.com/)(PubNub)和[无服务器 Docker](https://github.com/bfirsh/serverless-docker) (Docker)。

## 知道你没有进入什么

如上所述，无服务器的优点在于它能够允许组织通过将服务器和相关的基础设施管理任务外包给第三方来节省资源。例如，一个开发团队负责创建应用程序，而无服务器提供商则在异地服务器上完成所有的数据维护工作。

“无服务器的易用性最初可以提高开发人员的效率，因为无服务器计算使开发人员远离处理基础设施，这样他们就可以专注于为单一功能构建代码，”[云学院](https://www.linkedin.com/in/albertqian/)[的产品营销经理](https://cloudacademy.com/)Albert Qian说。

无服务器提供商还允许组织根据其需求扩大或缩小规模，同时不再担心冗余的服务器容量。“无服务器架构让云提供商能够处理管理服务器和扩展以满足需求的负担。钱说:“把无服务器看作是平台即服务(PaaS)的一种抽象，你所要做的就是上传你的代码，所以当你需要扩大或缩小一个功能时，你只需要扩大这个功能。”。“因此，您不需要扩展整个系统、容器或应用程序。另一个真正的好处是，无服务器通过设计具有内置的容错和高可用性。”

因此，依靠第三方完成许多操作和数据管理任务可以节省资金。“无服务器的最大优势之一是它提供了更低的总拥有成本。钱说:“有了 FaaS 作为你的计算层，你只需为调用函数付费，而且是在它们运行的时候。”。成本节约非常显著，尤其是对于利用率较低的工作负载，因为您只需为处理请求所需的计算资源付费，而无需为等待请求的空闲服务器付费

但是，通过将服务器管理移交给第三方，您的组织也放弃了相当大的控制权，这是在考虑是否以及何时迁移到无服务器时的一个关键考虑因素。

“无服务器很快流行起来，因为它解决了资源管理问题。对于不想承担维护服务器责任的小公司来说，这是完美的，” [Raygun](https://raygun.com/) 的高级开发人员 Jeremy Scott 说。“由于维护责任较少，您可以完成工作，而且比使用自己的[服务器基础架构]更便宜。但这也是它的局限性所在:当你移交责任时，你也移交了控制权和访问权，这使得对你的服务的监控和分析变得相当困难。”

这样，在无服务器平台上运行的微服务和容器的分析能力就会成为一个问题。“你必须了解你的软件，否则就要冒着做出没有数据支持的商业决策的风险，”斯科特说。因此，如果您使用无服务器，那么在某些情况下，您需要将监控添加到客户端，如应用程序或浏览器，或者您可以尝试将异常处理添加到无服务器功能中

虽然具有挑战性，但将分析软件应用于无服务器部署仍然是可行的。例如，在无服务器函数中的异常处理的情况下，如果可以将函数包装在 try-catch 中，然后发送 https API 请求，那么可以使用错误报告客户端，例如 Raygun 提供的客户端。

然而，对于基于 API 的服务，监控控制几乎肯定会丢失，而“下一个最好的选择是观察 API 的行为，”Scott 说。

在决定什么可以移植到无服务器基础架构时，计算性能较低是无服务器部署的一个缺点。“无服务器功能有[个硬限制](https://docs.aws.amazon.com/lambda/latest/dg/limits.html)。云学院的钱说:“任何需要超过 3GB 内存的东西都必须重新设计，否则就无法运行。”。“重要的是要确保团队了解局限性，并且他们拥有知识、经验和足够的[培训](https://cloudacademy.com/library/)来确定最适合任何给定工作负载的技术。当涉及到架构时，无服务器或任何新技术的“酷”因素有时会掩盖批判性思维，结果可能是功能的意大利面条式混合，而不是连贯的应用程序。”

## 安全清单

与监控和分析一样，在无服务器基础架构上保护您的数据也是一项挑战，因为将服务器管理和控制交给第三方会带来明显的影响。

例如，无服务器运行时环境不是标准化的，并且“被运行它们的云所着色，这使得一般地保护它们更加困难，”[Aqua Security](https://www.linkedin.com/in/raniosnat/)的营销副总裁拉尼·奥斯纳特说。

“对于无服务器，我要说有几个关键的安全问题，”奥斯纳特说。

在进行迁移时，某些安全检查尤其重要。Osnat 说，例如，在无服务器功能中使用的潜在易受攻击的代码，“需要在使用之前解决”，同时还必须使用强制控制来阻止违反策略的 FaaS 功能的部署。

虽然如上所述具有挑战性，但组织需要确保他们采用的无服务器平台在运行时监控数据行为，以便检测异常，”Osnat 说。

云学院的钱说，当迁移到无服务器时，多租户挑战也可能出现。“即使客户工作负载被隔离在虚拟机或容器中，也可能存在安全问题，尤其是当应用程序处理敏感数据时，”钱说。一个客户代码中的潜在错误会影响另一个应用程序的性能，从而影响客户服务和应用程序质量

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>