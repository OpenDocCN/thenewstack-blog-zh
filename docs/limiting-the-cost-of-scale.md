# 限制规模成本

> 原文：<https://thenewstack.io/limiting-the-cost-of-scale/>

这是 10 月 24-28 日 KubeCon + CloudNativeCon 系列文章的一部分。

在过去的 10 年里，我们看到了 Kubernetes 和微服务的流行，产生了更多通常从未使用过的数据。随着我们使用的技术变得越来越复杂，可观测性数据的数量已经翻了一番[，在某些情况下甚至翻了三倍](https://chronosphere.io/learn/new-study-uncovers-top-observability-concerns-in-2022/)。

这些数据中的大部分被储存起来，以备“下个月用得上的时候”然而，这些数据大部分在下个月甚至明年都不会变得有用。存储这些未使用的数据的成本是巨大的。但是没有这些数据的代价是不是更大？为了让企业能够在不降低成本的情况下存储所需的数据，我们[限制规模成本](https://thenewstack.io/7-ways-to-reduce-cloud-data-costs-while-continuing-to-innovate/)至关重要。

## **在哪里存储所有额外的数据**

当我们谈论持续增长的[指标的平均数量](https://thenewstack.io/what-is-data-observability-and-why-does-it-matter/)时，我们指的是服务器指标、应用性能监控、网络数据、传感器数据、事件、点击和许多其他类型的分析数据。这就是时间序列数据库(TSDB)的用武之地，因为它们针对带有时间戳的数据或时间序列数据进行了优化。时间序列数据只是随着时间的推移而被跟踪、监控、缩减采样和聚合的测量值或事件。

## **准备秤台**

在寻找高度可伸缩的时间序列数据库时，您应该研究和评估许多标准。选择开源软件应该是一个明显的起点。它更有可能已经过全面的故障排除，通常更可靠，更好地保证技术独立性，并且具有很高的安全性。更不用说更容易找到熟悉它的工程师。

一旦你决定使用一个开源的时间序列数据库，你必须确定你的关键标准。例如，多租户是一个关键驱动因素吗？或者确保高可用性或成本效益？除了这些因素之外，您还需要什么功能——全面而真实的文档？对历史数据进行下采样以实现更高效的存储？在研究应该使用哪种解决方案之前，这些是您必须能够回答的基本问题。

## **选择最具伸缩性的时序数据库**

一旦您确定了您的业务需求，做好尽职调查并充分测试可能影响扩展效率的关键指标的潜在解决方案是非常重要的。例如，查询或接收性能是否存在瓶颈？该解决方案如何实现高效压缩？随着规模的扩大，资源使用情况如何变化？比例因子如何影响资源？

关注扩展因素—要注意的最佳特征是线性扩展，这意味着如果资源翻倍，系统的容量也会翻倍。不幸的是，这在分布式系统中很少见。大多数系统都有一个缩放系数，这意味着如果您将资源加倍，您只能获得 30%的额外能力。从系统和预算的角度来看，资源使用都是一个决定性因素。规模大可以很快导致成本大，但也不尽然。

## **对象存储与本地文件系统**

云中的对象存储是新方法，而通过本地文件系统存储是传统方法。随着 AWS 的兴起，对象存储最近才成为一种选择，这使得它非常便宜。但是，当然，这两者各有利弊。

对象存储是无限的、持久的，并且(通常)对于存储数据来说是廉价的——您只需为您所使用的东西付费。然而，它比本地存储慢得多。它比本地文件系统有更高的延迟，这意味着网络带宽可能成为瓶颈。数据传输和数据检索成本也很高。

与对象存储不同，本地文件系统没有这些隐性成本。这是实现真正良好的读取性能的最佳选择，提供了超快速(几乎即时)的备份，而这只有在本地文件系统上才有可能。

本地文件系统还允许积极地改变(合并)数据，以在磁盘上实现更好的压缩。但也有一些缺点:它每千兆字节的价格较高，大小有限，需要时需要调整大小，而且还需要额外的耐用性保证。然而，许多云提供商如 Google、AWS 和 Azure 在使用他们的磁盘时确实提供了额外的可用性保证。

了解您的扩展需求背后的驱动因素以及您正在寻找的指标将有助于您决定以上哪一个是最佳路线。但是，对于大多数情况，本地文件系统设置为出色的读写性能提供了最佳选择。

## **押注简单可扩展的未来**

经济高效的可扩展性的关键是简单和透明。引擎盖下发生的魔法越少，使用的组件越少，效率就越高。这不仅是关于硬件资源的有效利用，也是关于工程师理解和维护软件所需的工作量。

监控应该尽可能地为每个需要的人所用。然而，市场上的许多解决方案在处理移动组件和额外的依赖性时都很复杂。对于任何寻求时间序列数据库解决方案的企业来说，提供高可伸缩性和可用性的性能、简单性和可靠性应该是首要考虑的因素。

无论您选择哪种开源时间序列数据库解决方案，其文档都应该包含清晰的提示，例如基于所提供的资源量和工作负载量的扩展集群组件或建议以及性能预期。一个好的解决方案应该不断改进其系统和流程，以响应客户反馈和性能报告。

了解满足企业数据扩展需求的重要性能指标将有助于您找到最佳解决方案。基于他人的需求盲目挑选解决方案不会。

*要了解有关云原生话题的更多信息，请参加 10 月 24 日至 28 日在底特律举行的 KubeCon + CloudNativeCon 北美 2022(和虚拟)会议上的云原生计算基金会和云原生社区。*
![](img/25bc05722c52e80806074bddd7e413fd.png)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>