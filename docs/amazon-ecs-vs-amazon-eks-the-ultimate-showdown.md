# 亚马逊 ECS 大战亚马逊 EKS:终极对决

> 原文：<https://thenewstack.io/amazon-ecs-vs-amazon-eks-the-ultimate-showdown/>

[](https://www.linkedin.com/in/serkanozal/)

 [塞尔坎·奥扎尔

塞尔坎是桑德拉的联合创始人兼首席技术官。他在软件开发方面有 10 多年的专业经验，是 AWS 认证专家，拥有分布式环境专利。他主要从事无服务器架构、分布式系统和监控工具方面的工作。](https://www.linkedin.com/in/serkanozal/) [](https://www.linkedin.com/in/serkanozal/)

云提供商提供广泛的产品来实现可扩展性，同时加快移动速度并最大限度地降低成本。作为云基础设施领域的领导者，AWS 包含超过 175 种服务和产品，涉及广泛的计算、网络、数据库、存储和安全领域。

本文将重点介绍微服务和云架构的两大特色 AWS 武器:[亚马逊弹性容器服务(亚马逊 ECS)](https://aws.amazon.com/ecs/) 和[亚马逊弹性 Kubernetes 服务(亚马逊 EKS)](https://aws.amazon.com/eks/) 。这两种服务都支持各种计算选项，并具有丰富的集成点来与其他 AWS 服务协作。但是，这些服务在设计和操作上存在着重大差异。当[为您的容器工作负载](https://blog.thundra.io/container-workloads-on-aws-azure-and-google-cloud-platforms)比较提供商时，您需要考虑您的系统架构、业务需求和整体工作负载复杂性。不过，在本帖中，我们将重点关注 ECS 与 EKS 的对比。

让我们探索一下这两种服务的历史和思维模式，看看哪种服务能提供更好的性能。

## 亚马逊弹性容器服务

Amazon ECS 是一个容器管理服务，旨在运行、停止和管理集群上的容器。容器被定义为“任务定义”的一部分，由云中的 ECS 驱动。Amazon EC2 实例适合长时间运行的任务，而 AWS Fargate 适合无服务器任务。下图总结了 ECS 的工作方式:

ECS 从容器注册表开始存储图像。ECS 基于任务定义管理容器和服务，并在基础设施上运行它们。通过其易于使用的 API，您可以创建安全可靠的微服务应用程序，并在 AWS 上运行它们。

## 亚马逊弹性 Kubernetes 服务

亚马逊 EKS 是 AWS 的托管 Kubernetes 服务，用于在 AWS 基础设施上运行和认证 Kubernetes。EKS 提供了一个托管的 Kubernetes 控制平台，以可靠和安全地定义 Kubernetes 工作负载。您可以连接来自各种 AWS 计算服务(如 EC2 或 Fargate)的节点来运行 Kubernetes 工作负载。下图显示了 EKS 的工作原理:

当您使用 EKS 创建新的 Kubernetes 集群时，它会在受管 AWS 基础设施中建立控制平面和 Kubernetes API。这允许您使用本地 Kubernetes 工具部署工作负载，包括但不限于 kubectl、Helm、Kubernetes Dashboard、Terraform 或 Kubernetes Operators。

现在，让我们先看看这两种服务的相似之处，然后再深入研究它们的不同之处。

## 共享根

ECS 和 EKS 都是 AWS 的托管服务，专注于容器和微服务应用。因此，它们共享一些架构和 AWS 相关的特征。三个基本特征如下:

### 服务架构

托管服务是云基础架构中使用的一种方法，用于消除运营服务的负担，让您专注于核心应用程序。ECS 和 EKS 都是 AWS 中的托管服务，因此您不需要监控和操作它们。换句话说，您可以假设 ECS API 始终是可靠的、高度可用的，并且是可访问的。类似地，Kubernetes 控制平面和 API 将一直运行，甚至自动更新到最新版本。无需在基础设施层面进行监控或操作；然而，如果您正在寻找一种解决方案来监控您在 ECS 和 EKS 上运行的应用程序，请查看一下[桑德拉](https://www.thundra.io/)的监控功能。

### 计算平台

使用 ECS 和 EKS 可以管理容器的运行位置。在这两种服务上，您可以选择 AWS 中以下计算选项中的一个或多个:

*   **AWS Fargate:** 适合无服务器应用
*   **EC2 实例:**适用于在虚拟机上运行的应用程序，具有广泛的选项和容量
*   **AWS 前哨:**适合在本地运行的应用程序
*   **AWS 本地区域:**适用于应该更接近最终用户运行的应用程序
*   **AWS 波长:**适合低延迟移动边缘应用

计算平台的决策基于成本、性能、高可用性和可靠性。上述计算平台在管理复杂性和财务承诺方面有很大的不同。了解 EC2、Fargate 和 Lambda 之间的[差异是为您的组织选择合适的计算平台的重要一步。](https://blog.thundra.io/getting-it-right-between-ec2-fargate-and-lambda)

### 安全性

AWS 身份和访问管理(IAM)是 AWS 安全访问服务和资源的解决方案。您可以创建用户和组，并为他们分配权限。由 IAM 管理的细粒度访问控制系统可供 ECS 和 EKS 使用。通过 IAM，您可以限制谁可以使用和访问 ECS 任务或 Kubernetes 工作负载，并确保这两种服务中的容器化微服务是安全的。

AWS 为 ECS 和 EKS 提供了几乎相同级别的服务体系结构、计算平台和安全功能。这些特性确保了这两种服务的可靠性、生产就绪性和安全性。

尽管有很多相似之处，这些服务还是有一些根本的不同。让我们来看看哪一个在上面。

## 主要差异

就设计和操作而言，ECS 和 EKS 有四个基本区别:

### 定价

在云中运行应用程序不是免费的，但是有办法降低成本。在 ECS 和 EKS 中，您将为工作负载使用的资源付费。换句话说，您将为运行 ECS 任务或 Kubernetes pods 的 EC2 机器付费。但是，ECS 和 EKS 的主要区别在于使用 ECS 不需要额外付费。另一方面，您将为您拥有的每个 EKS 集群支付每小时 0.10 美元。这意味着您每个月要为运营的每个 Kubernetes 集群支付将近 72 美元的额外费用。虽然这看起来很少，但是如果您计划拥有多个集群——比如为每个团队成员或可用性区域——额外的费用将会增加。

在定价方面，如果您打算小规模开发微服务选项，那么使用 ECS 不会增加您的成本。但是，如果您准备好了 Kubernetes 级别的可伸缩性，那么额外的 72 美元与您的 EC2 成本相比就不算什么了。

### 简单

与整体应用相比，微服务和分布式应用的开发、部署或操作并不简单。如果您正在寻找创建微服务的简单解决方案，ECS 是最佳选择。这是一个简单的 API，无需复杂的抽象就能创建容器化的工作负载。另一方面，Kubernetes 本身是一个控制平面，能够运行容器化的工作负载，而 EKS 是另一个层，用于在 AWS 基础架构上创建 Kubernetes 集群。因此，与 ECS 相比，在 EKS 上构建、部署和管理应用程序需要更多的专业知识和运营知识。

### 轻便

云中的可移植性正在以最小的中断从一个云提供商转移到另一个云提供商。可移植性的关键是云提供商之间的互操作性。当谈到我们的最终比较时，ECS 是 AWS 的专有技术，而 EKS 是基于开源的 Kubernetes。

如果您在 ECS 中开发应用程序，从长远来看，您可能会遇到供应商锁定问题。除非是 POC 级别的项目，否则在另一个云提供商——比如 Azure Container Instances——定义整个架构是一个全新的项目。

但是，如果您将应用程序设计为在 Kubernetes 上运行，那么您可以在任何其他 Kubernetes 集群上运行——包括其他云提供商、本地设置或您的笔记本电脑。EKS 的 Kubernetes，或者说增加复杂性的抽象层(如前一节所讨论的)，现在可以帮助您打包容器并快速迁移到另一个平台。

### 社区支持

在选择新的编程语言或框架时，要寻找的一个关键特征是社区支持和资源。在这方面，与 ECS 相比，开源的 Kubernetes 具有无可争议的优势。ECS 的社区援助有限，但 AWS 可以在出色的公司支持下解决问题。EKS 经营 Kubernetes 的三大优势是:

## 摘要

ECS 和 EKS 都是 AWS 提供的可靠且有竞争力的集装箱管理系统。尽管我们已经讨论了它们的共同根源和关键区别，但是选择哪一个取决于您的团队和项目。虽然这是每个组织需要自己做出的决定，但有一些指导原则可以帮助您做出决定。

在三个基本条件下，EKS 是更好的选择。第一种是如果您正在开发和操作大型项目，其中许多团队成员将同时处理几个部署和产品。其次，当多云或混合云选项摆在桌面上时，EKS 是更好的选择。最后，如果你的团队中已经有了 Kubernetes-native 应用程序和 Kubernetes 专业知识，EKS 就是最终的赢家。

另一方面，如果您正在寻找一个免费的控制平面和易于使用的 API，ECS 是一个更好的选择。此外，如果您是容器化和微服务的新手，或者如果您有一个小团队，并且希望快速采取行动，减少需要管理的事情，那么您应该选择 ECS。最后，如果您希望一个 AWS 本地解决方案能够轻松地与其他 AWS 解决方案集成，ECS 是您的最佳选择。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>