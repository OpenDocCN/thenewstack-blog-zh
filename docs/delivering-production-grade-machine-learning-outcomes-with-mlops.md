# 借助 MLOps 交付生产级机器学习成果

> 原文：<https://thenewstack.io/delivering-production-grade-machine-learning-outcomes-with-mlops/>

由于机器学习(ML)模型的部署平均需要 90 天或更长时间，企业正在探索 MLOps 以提高部署速度、可靠性和成功率。

## 什么是 MLOps？

正如 DevOps 将软件开发与运营联系起来一样，MLOps 将机器学习的两个不同领域联系起来:机器学习模型的开发和在生产中操作它。将这些领域联系起来需要合适的团队，以及围绕持续集成和部署的自动化流程，从而引入 DevOps 的各个方面。MLOps 还需要数据科学家、基础设施专家和[数据工程师](https://thenewstack.io/data-engineer-critical-role-for-data-success/)之间的广泛合作。

## 机器学习的最后一英里问题

 [尼克·霍德克

Nick 是 Cribl 市场战略和竞争情报高级总监。](https://www.linkedin.com/in/nick-heudecker/) 

建立机器学习能力的企业关注两件事:

*   数据科学家的招募和培训。
*   为机器学习识别合适的商业案例候选。

虽然重要，但这些只是任何企业的第一英里问题。只要数据科学家有足够的相关数据来训练和测试算法，建立预测模型就是一个简单的迭代过程。该模型及其支持代码只是大规模部署和操作机器学习所需的整体组件中的一小部分。

必须克服几个最后一英里的问题。数据收集和验证、部署基础设施、观察模型的性能、模型分析和调试——以及其他组件——对于在企业中成功部署 ML 至关重要。

如今，这些任务都留给了数据科学家，而成本是巨大的。将 ML 模型投入生产平均需要大约 90 天，只有 11%的公司持续在不到 7 天的时间内部署(来源:Algorithmia 的 [2021 年机器学习企业趋势](https://info.algorithmia.com/tt-state-of-ml-2021))。根据同一来源，大多数数据科学家还报告说，部署过程占用了他们 25%的时间。

为什么需要这么长时间？将各种信息整合在一起远远超出了数据科学家的典型技能范围。他们不是软件工程师，也不是基础设施和运营专家，但是部署生产质量服务需要这些角色提供的专业知识。

使生产问题复杂化的是模型衰退。在传统的软件应用程序中，应用程序的代码决定了它的行为和输出。这种行为通过测试得到了验证。在机器学习系统中，数据决定模型的行为。在现实世界中，模型使用的数据会偏离训练数据，从而产生不可靠的结果。由于数据在训练数据和部署之间存在偏差，模型的性能会随着时间的推移而下降，而且通常没有什么解释。这意味着当数据偏离预期时，必须不断地观察和重新训练模型。不断重新部署的需求加剧了部署时间方面的早期挑战。

## 可观测性和 MLOps

正如传统的应用从监控向可观测性发展一样，ML 系统也必须采用同样的可观测性能力。通过收集和存储 ML 系统发出的所有日志和指标，数据科学家和 I&O 工程师可以通过主动询问系统行为，快速确定性能问题的原因。传统的监控解决方案在这方面存在不足，因为它们仅支持有限数据量上的预定义控制面板。

在 ML 系统中驱动可观察性的另一个因素是理解为什么一个给定的结果会发生，即使数据是正确的。从刑事判决到简历过滤，ML 系统中的偏见具有巨大的社会影响。基于自动算法做出决策的企业必须能够证明为什么以及如何达到给定的结果，并且这不是偏见的结果。能够提出关于 ML 系统行为的问题是必要的，这就是可观察 ML 系统发挥作用的地方。

## 构建 MLOps 团队

有效的 MLOps 团队是[跨职能的](https://www.youtube.com/watch?v=20h_RTHEtZI)。它包含来自五个不同角色的技能和能力:

### 数据科学家/机器学习研究员

数据科学家或 ML 研究员负责使用算法和数据的组合来发现和创建模型。

### 数据工程师

数据工程师配置和维护支持应用程序和信息系统的数据基础设施和管道。在过去的三年中，这一角色发生了显著的变化，在许多企业中扩展为一项独立的职能。你可以在这里阅读更多关于数据工程角色[的信息](https://thenewstack.io/data-engineer-critical-role-for-data-success/)。

### 基础设施和运营工程师

I&O 工程师，也称为 DevOps 工程师，有时也称为站点可靠性工程师(SREs)，负责基础架构和数据的可靠性和弹性。在生产环境中，这些角色通常负责部署和监控机器学习模型及其使用的数据。

### 生产部经理

确定客户需求和机器学习的商业案例，并管理产品的交付是产品经理的职责。这个角色的参与通常是创建一个成功且集成良好的机器学习应用程序的决定性因素。没有产品管理，许多 ML 项目仍然是不相关的实验室项目。

### 商业利益相关者

简单地说，涉众是对 ML 部署的结果感兴趣的人(或一组人)。这通常是项目预算的来源。

## 机器学习管道

随着一个跨职能团队到位，以资助，开发和部署模型，重点转向[ML 管道](https://towardsdatascience.com/ml-ops-machine-learning-as-an-engineering-discipline-b86ca4874a3f)。ML 管道的想法来自于数据管道的数据工程概念。数据管道连接数据源和目的地，并在依赖关系图中定义数据转换。在许多情况下，这是传统提取、转换和加载(ETL)的发展，因为它可以超越批处理，成为流和基于事件的消费模式。数据管道也是自动化的，将数据工程师从重复、多余的工作中解放出来。

大多数 ML 环境依赖于手工过程，这是有充分理由的。今天的机器学习工作流由几十种工具组成，每种工具都有自己的语言、用户体验、性能特征和技能组合假设。这些工具使用的数据同样多种多样，驻留在数据仓库、对象存储和特征存储中。

这就是 DevOps 影响力为 ML 部署带来价值的地方。鉴于机器学习管道中使用的工具数量，持续集成测试必须在一系列工具中实现自动化——确保每一步都验证其输入和输出，并且下一步可以使用前一步的输出。这个过程必须是可重复的，这就是模型和集成代码的版本跟踪的来源。理想情况下，应该有允许我们对数据进行版本控制的解决方案，但是用于培训的大量数据通常使这变得不可能。对于如何实现机器学习的数据版本化，目前还没有达成共识。

与其他*Ops 趋势一样，MLOps 吸引了厂商和最终用户的关注，它需要的不仅仅是技术投资。它需要组织中不同部门之间的协作，以确保用机器学习解决正确的问题。技术提供了与强大的团队合作管理和观察已部署的机器学习项目的环境。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>