# 芭蕾舞演员:一种用于云计算的编程语言

> 原文：<https://thenewstack.io/ballerina-a-programming-language-for-cloud-native-computing/>

芭蕾舞者编程语言 诞生于如何编写企业服务总线(ESB)的挫折，ESB 是一种旨在连接不同企业应用程序的软件。

“很长一段时间以来，我们一直致力于改进我们的 ESB 配置语言，寻找发展它的正确方法，”该语言的创始人、[Sanjiva Weerawarana](https://twitter.com/sanjiva)、 [WSO2](https://wso2.com/) 的首席执行官兼创始人说道。然而，最终很明显，使用数据流作为集成隐喻的传统方法并不适合。“我越来越清楚这不是正确的模式，”Weerawarana 说。“配置方法不够强大，无法实现我们想要的集成编程方式。”

“当你使用 DSL 语言时，总有一些时候你不得不编写一些本机代码，你最终会跳到 JavaScript 或 Java 或其他一些语言，然后你就会有这种不连续性，” [说](https://www.youtube.com/watch?v=oy8hMTmgpJ8&amp;list=PL7JOecNWBb0LKW0GVjYep50YeNp2bF4K3&amp;index=5) WSO2 首席技术官[Paul Fremantle](http://pzf.fremantle.org/)。

现有的编程语言也没有做到这一点。它们不是为轻松处理集成任务而设计的，比如引入外部资源。这项工作留给了驱动程序和客户端库，开发人员需要做额外的工作(以及潜在的错误和性能问题)。

眼下的问题是，随着越来越多的人转向云原生模型，程序员正在做的事情发生了根本性的转变。这个领域中很少有应用程序是独立的实体。许多组织正在转向微服务方法，在这种方法中，各个组件相互通信以提供服务。所有这些分解导致了更多的端点，可以通过 API 访问。Freemantle 说:“我们正在构建的应用程序越来越多地不再存在于一台机器中。

为了创作芭蕾舞剧，Weerawarana 借鉴了 WSO2 经常用来完成客户端部署的工具，即序列图。Weerawarana 领导了构建这种语言的工作(他有编写语言的经验，甚至在大学教授过这方面的课程)。最终，该公司建立了一个由 60 名开发人员组成的团队来实现这种语言(“Ballerina”这个名字来自 Weerawarana 对芭蕾舞如何紧密协调的着迷，从而产生了任何良好的企业集成都应该渴望的优雅流动)。

芭蕾舞演员将网络服务视为一个一流的概念，可以轻松集成到该计划的所有其他方面。“因此，这是一种理解这些网络概念的完整编程语言的事实意味着，作为一名开发人员，你仍处于该领域，”弗里曼特尔说。Ballerina 不仅仅是集成任务的领域特定语言(DSL)。它实际上是一种成熟的编程语言，Weerawarana 可以预见它将在未来十年取代 Java。

Weerawarana 预测，从长远来看，将不再需要 ESB 和应用服务器等中间件工具。例如，ESB 的路由功能要么使用 Ballerina 之类的语言嵌入到代码中，要么由 Kubernetes 之类的编排引擎或 Istio 之类的服务网格软件来承担。

最近，WSO2 在三藩市举行了第一次用户大会， [Ballerinacon](https://con.ballerina.io/) ，与会者了解了 Ballerina 可能是世界上第一种云原生编程语言。

以下是 Ballerina 的六个特性，这些特性使它成为一种面向云原生计算的编程语言。

## **1。内置容器支架**

Ballerina 可以为运行云原生格式的程序做许多基本准备，这对于已经知道他们的程序将有什么执行环境的开发人员来说是一个时间节省器。可以对代码进行注释，以便编译器自动创建 docker 文件，并将其打包在一个映像中，然后可以作为容器运行。因为编译器可以完成所有这些额外的工作，所以开发人员可以更快地构建和测试多次迭代。

Ballerina 还为 Kubernetes 开源容器编排引擎提供了一个库，如果您希望通过一个命令来协调多个程序的操作，这将非常方便。

在这里了解更多。

## **2。无服务器友好型**

芭蕾舞女演员已经得到了许多无服务器平台的支持，包括 [OpenWhisk](https://openwhisk.apache.org/) 和 Bitnami 的 [Kubeless](https://github.com/kubeless) 。

Ballerina 由 OpenWhisk 平台原生支持，WSO2 本身运行一个托管的 OpenWhisk 服务，称为 [WSO2 无服务器解决方案](https://wso2.com/solutions/serverless/) 。从 OpenWhisk 命令行，你上传你的函数，服务编译它并把它放在一个容器中。该服务提供实际需要的资源，随负载自动扩展。

Kubeless 提供了一种使用 Kubernetes 将芭蕾舞演员程序作为无服务器功能进行管理的方法。Kubeless 为该函数设置了一个定制的资源定义，因此它可以由 Kubernetes 管理，并且可以通过 Kubeless 命令行访问。

Ballerina 的一个有趣的方面是，任何功能都可以变成 API 端点，实际上使每个功能都成为自己独立的微服务。反过来，这为集成操作打开了单一语义域的使用。这允许您生成一个可用于开放 API 网关的 Swagger 文件。

在这里了解更多。

## **3。可观察性**

默认情况下，Ballerina 程序是可观察的:Ballerina 支持基于微服务的日志记录、跟踪和度量。默认情况下，Ballerina 生成的二进制文件会抽取这些数据，而不是添加额外的库。除了配置终端客户端来解释和显示数据之外，用户不必为可观察性特性做任何额外的事情。

商用的 [蜂巢](https://www.honeycomb.io/) 软件，用于系统调试，由开源的 [普罗米修斯](https://prometheus.io/) 时序监控，是两个可以轻松配合芭蕾舞者程序的平台。对于跟踪，生成的数据已经符合 [OpenTracing](http://opentracing.io/) 模型。就形象化而言，它与非常吻合。日志数据可以很容易地被 [麋鹿栈](https://www.elastic.co/elk-stack) 消化或写出到平面文件中。基于 SQL 的数据库系统有各种连接器，并且有一个用户 API 供开发人员创建自定义指标。

在这里了解更多。

## **4。在有或没有服务网格的情况下工作**

由于许多微服务相互通信的性质，服务网格在这种操作中的作用变得越来越重要，它负责服务发现(微服务在动态系统中相互发现)和身份验证等任务。芭蕾舞演员很适合这样的环境。

如果你决定使用像 [伊斯蒂奥](https://istio.io/) 这样的发球网，芭蕾舞演员会表现得很好。你只需要通过创建一个单独的 YAML 文件来手工注入一个 sidecar。这对于添加特定于 Istio 的服务(如虚拟服务网关)非常有用。这里的想法是，网络功能可以由 Istio(用于控制层)和 Envoy(用于数据层)处理，同时让 Ballerina 负责业务逻辑本身。

然而，作为集成语言编写的 Ballerina 毕竟也可以执行服务网状职责，提供内置功能，如服务发现、可观察性和多协议支持。它还可以支持控制或数据平面逻辑必须封装在代码本身中的情况。在这里了解更多。

## **5。使用流式 SQL** 轻松进行流处理

越来越多的今天的数据来源不仅仅是静态的。通常这样的素材一产生就被收集，从诸如 [阿帕奇卡夫卡](https://kafka.apache.org/) 的流处理系统。

芭蕾舞演员能够通过执行复杂事件处理(CEP)来处理流数据。它通过流 SQL 的一种变体来实现这一点，流 SQL 是大多数开发人员都知道的 SQL 的一种变体，具有用于处理时间窗口内的事件集合的扩展。您可以设置一个包含必需字段的表，然后执行一个 forever 块，这意味着它会在刷新数据时不断重新评估数据。

在芭蕾舞演员中，网络事件是本地的、一流的概念。开发人员可以建立带有丰富注释和过滤器的服务端点和服务客户端。此外，JSON 和 XML 等流行的数据交换格式是它们自己的数据类型，允许开发人员直接针对数据进行编程。

了解更多 [这里](https://www.youtube.com/watch?v=zLauHjq75Mc&amp;list=PL7JOecNWBb0LKW0GVjYep50YeNp2bF4K3&amp;index=12) 和 [这里](https://www.youtube.com/watch?v=WvgGPQAvHok&t=0s&index=11&list=WL) 。

## 6。内置安全性

Ballerina 还内置了安全性，在 IDE 中实现了一组安全检查，并带有一个安全意识编译器。编译器进行静态分析，检查代码是否有明显的缺陷，比如可能的缓冲区溢出。

还有运行时分析。每个函数都有内置的安全注释。当被调用时，@sensitive 注释将只接受可信的数据。例如，这可以防止 SQL 注入袭击。@污点注释将标记任何被认为不可信的计算。

在这里了解更多。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>