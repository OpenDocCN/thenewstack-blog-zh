# 构建 Kubernetes 平台时需要考虑的 5 件事

> 原文：<https://thenewstack.io/5-things-to-consider-when-building-a-kubernetes-platform/>

现代应用程序开发团队需要完全托管的自助式平台。最近[向 Kubernetes](https://thenewstack.io/why-kubernetes-has-emerged-as-the-os-of-the-cloud/) 的转变见证了许多团队争相获得基于编排工具构建的平台。对[内部开发平台](https://thenewstack.io/platform-engineering-the-ultimate-guide/)的需求是由大型工程团队通过定制工具来满足非常具体的技术、流程和人员需求，例如，优步的 [Devpod](https://www.infoq.com/news/2022/12/uber-devpod-remote-dev-env/) [和 Zalando 的](https://www.infoq.com/news/2022/12/uber-devpod-remote-dev-env/) [Sunrise。这种方法绝对值得效仿，但是对于很多工程团队来说可能遥不可及，因为构建平台的成本很高，并且不是所有软件团队的实际期望。](https://platformengineering.org/talks-library/sunrise-zalandos-internal-developer-platform)

首席技术官的职责是平衡技术考虑和业务目标。你为你的产品提供竞争优势的责任根植于工程任务，但通常作为业务成果的一个功能表现出来。一条通往生产的道路通常不会转化为明显的商业利益。

以下是首席技术官办公室的优先事项清单。这份简短的列表是根据与几位经验丰富的技术主管和新角色人员的讨论而编制的。一些假设:容器是事实上的应用交付机制。Kubernetes 的使用被认为是强烈的，或者已经在使用。云本地技术构成了他们的大部分渠道。

1.  **流体 app 输送**

应用程序平台必须能够为开发团队提供高速度。高速度源于两个因素，即快速的应用交付和短的开发周期。短的开发周期来自于减少开发人员的认知负荷和对 CI/CD 等现代实践的本地支持。应用程序平台必须支持从源代码开始构建工作流。这些平台还必须能够在任何远程试运行实例上以可重复的方式支持应用程序的部署。如果它能够整合团队现有的工作流，如触发测试和更新远程容器注册，将会得到加分。

2.  **多语言支持**

一致性是应用程序平台的标志。该平台必须支持按需可重复和可再现的构建。提升平台体验的是跨所有语言和框架扩展同质体验的能力。无论团队使用何种语言，保持相同的体验都有助于支持当今能够以任何编程语言创作服务的需求。如果平台支持本地构建过程以实现这一点，那么扩展和定制这一构建过程的能力是平台成功的关键因素。当软件工程团队有一些特殊的需求，并且必须遵循复杂的或者难以置信的特定步骤来产生他们的容器映像时，这个因素就变得突出了。

除了少数例外，现代应用程序都是数据驱动的。平台必须代理应用程序和相关数据服务之间的连接和消费，以便为开发人员提供承诺的效率。容器的使用使这稍微变得复杂，更不用说在 Kubernetes 上编排它们了。通过采用服务网格或服务代理策略来减轻这一负担是解决这一问题并使其平台更具吸引力的常见方式。

3.  **内置证券**

与传统工作负载相比，集装箱化环境的安全保护方式非常不同。由于容器工作负载及其构建基础架构(共享内核、权限、网络行为等)的短暂性，保护工作负载的传统方法将不起作用。因此，为使用容器和容器编排器而构建的平台必须考虑所有这些变化。一个基本的最佳实践是利用包含所有必需依赖项的编译后的二进制文件。构建过程还应该拥有一个指令，去掉应用程序运行不需要的所有组件。该平台所扩展的安全性也应该扩展到构建精益映像之外。该平台必须有助于保持集装箱登记的安全。定期扫描图像被认为是一种重要的增值。签署所有图像正迅速成为一种最佳实践。在协调部署的平台组件之间建立零信任架构，对提高工作负载的安全性大有帮助。

4.  **可调抽象**

Kubernetes 的巨大成功，以及其操作的复杂性，迫切需要对其进行抽象。进入的高壁垒，加上详尽的接口，需要一个抽象来帮助促进 Kubernetes 在整个组织中的采用。只是重申一下，不是所有的团队都可以“多干活，让别人少干活。”抽象 Kubernetes 原语以使开发人员体验更好的能力是该平台目的的核心。

打造固执己见的平台有时会适得其反。开发人员的经验是软件工程团队中技术需求和部落细微差别的脆弱组合。对于软件工程团队来说，能够定制一个平台来适应他们现在的需求，并随着他们未来的工作流程而发展，这对于继续使用一个工具是至关重要的。一个平台能够提供铺设好的路径，而且能够敏捷地适应软件工程团队的这种需求，那么成功的可能性就更大。

开源平台在这方面得分很高，尤其是那些具有模块化架构的平台，其中一个组件可以替换为团队认为合适的其他组件。

5.  **外在因素**

技术能力领域之外的几个重要特性对平台的成功起着至关重要的作用。其中最重要的是工具周边社区的力量。任何成功的开发工具都会在开发人员中拥有忠实的追随者。这个工具的许多优点都来自这种认知盈余。采纳者可以期待实践者的支持和指导，以及大量以分散方式传播的知识。

许可和责任等商业因素有时也会发挥作用，尤其是在要求严格合规的垂直行业。在这些情况下，附属于商业实体在成功采用这些平台方面发挥了作用。

## 平台示例

一个很好的起点是从市场上已有的众多解决方案中选择一个来满足您组织的需求。提供抽象来改善开发人员在 Kubernetes 上的体验的可用工具的一些例子是:

*   [red hat open shift](https://www.redhat.com/en/technologies/cloud-computing/openshift)——一个大规模构建、更新和部署应用的统一平台。
*   [weaver works GitOps](https://www.weave.works/technologies/gitops/)——一款免费开源的持续交付产品，可以在任何 Kubernetes 上运行应用程序。
*   Gimlet–一个基于 GitOps 的开发者平台，建立在事实标准之上。
*   [epi nio](https://epinio.io/)–安装到任何 Kubernetes 集群中，将您的应用从源代码带到部署。
*   [Cloud Foundry kori fi](https://github.com/cloudfoundry/korifi)—面向云原生工作负载的 Cloud Foundry 体验。
*   [D2IQ](https://d2iq.com/)——更容易大规模构建和运行 Kubernetes。
*   [kube first](https://kubefirst.io/)——一个完全自动化的开源应用交付和基础设施管理 GitOps 平台。
*   [qo very](https://www.qovery.com/)–在 AWS 中轻松复制您的基础设施并创建类似生产环境的平台。
*   [Acorn](https://www.acorn.io/)——Kubernetes 的简单应用部署框架。

## 结论:自我评价

鼓励您在开始选择一个平台以在 Kubernetes 中实现卓越生产之前，创建一个对您和您的组织最重要的因素清单。下面是一个清单样本。

您从这样的练习中得到的评估有望使您更容易找到一个优化的平台来满足您的工程团队的需求。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>