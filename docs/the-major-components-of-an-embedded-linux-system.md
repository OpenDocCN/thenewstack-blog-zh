# 嵌入式 Linux 系统的主要组件

> 原文：<https://thenewstack.io/the-major-components-of-an-embedded-linux-system/>

这是将 Linux 用于嵌入式系统系列文章的一部分。要获得本系列的其他文章列表，请查看

[the introductory post](https://thenewstack.io/an-introduction-to-using-linux-in-embedded-systems/)

.

约翰·博尼西奥

约翰是 Linux 基金会的 Linux 讲师。

本文概述了 Linux 系统的主要组件，并描述了这些组件之间的交互。它将解释术语并描述看起来非常基础的细节，因为它不需要大量的专业知识。

每个 Linux 系统都有许多主要组件。这些组件中的一个，引导装载程序，在技术上是在 Linux 之外的，并且经常不被提及。其余的组件都是软件元素，它们共同创建了完整的 Linux 系统。这些组件是:

*   引导装载程序
*   核心
*   根文件系统
*   服务
*   应用程序/程序

## **引导程序**

当计算机启动时，在执行一些初始设置后，它会将引导加载程序加载到内存中并运行该代码。(术语“boot”来自短语“靠自己的力量振作起来”这是一个笑话，因为你当然不能靠自己的力量站起来。引导加载程序的主要工作是找到操作系统的二进制程序，将二进制程序加载到内存中，并运行操作系统。在我们的例子中，这是 Linux 内核。

bootloader 在这一点上完成了，它在 RAM 中的所有代码和数据通常都会被操作系统覆盖。在计算机复位或重启之前，引导程序不会再次运行。

嵌入式系统中的引导程序不同于典型的笔记本电脑、台式机或服务器计算机。一台典型的 PC 通常首先引导进入我们所说的 BIOS，然后运行 Grub 作为引导装载程序。嵌入式 Linux 系统的引导使用 Das-UBoot 或简称 U-Boot 作为引导装载程序。

## **内核**

一旦引导程序将 Linux 内核加载到内存中并运行它，内核将开始运行它的启动代码。该启动代码将初始化硬件、初始化系统关键数据结构、初始化调度程序、初始化所有硬件驱动程序、初始化文件系统驱动程序、安装第一个文件系统以及启动第一个程序等等。

Linux 内核的主要工作是启动应用程序，并在这些应用程序(或程序，在 Linux 中通常这样称呼)之间提供协调。Linux 内核并不知道所有应该运行的程序。所以 Linux 内核只启动一个程序，并让这个程序启动所有其他需要的程序。第一个程序叫做 init 程序，有时简称为“init”。请注意，第一个程序不需要位于名为“init”的文件中，但通常是这样。

如果内核找不到 init 程序，内核的目的就没有了，内核就崩溃了。

嵌入式系统的 Linux 内核的主要区别在于，它是为在不同的 CPU 架构上运行而构建的。除此之外，内核的运行方式与典型的 PC 是一致的，这也是它的优势之一。

## **文件系统**

在 Linux 中，内核将程序分别加载到内存中，内核希望这些程序存储在组织成文件和目录的某个介质上。这种文件和目录的组织称为文件系统。与许多操作系统一样，Linux 有介质上的文件系统(实际存储在存储介质上的数据)和文件系统驱动程序(知道如何解释和更新介质上的文件系统数据的代码)。

在 Linux 中，这种介质通常是硬盘。然而，嵌入式系统通常没有硬盘，所以介质可以是其他硬件设备，如 SD 卡、闪存，甚至 RAM 等等。

与 Windows 不同，Linux 文件系统与目录而不是驱动器号相关联。文件系统可以与任何目录相关联，甚至是路径中的下几层目录。这种将文件系统与目录相关联的操作称为“挂载”Linux 首先从一个名为`/`(斜杠)的空目录开始。在 Linux 启动期间，最顶层的文件系统与这个目录相关联(或者挂载到这个目录)，并且该文件系统的所有内容都出现在`/`下。这个最顶层的文件系统称为根文件系统。

Linux 系统希望根文件系统以某种方式布局。所以这个文件系统是特殊的，不能只是一些随机的目录和文件。这就是像`bin`、`sbin`、`etc`等目录的来源。

我们将在以后的文章中更详细地讨论文件系统。这里的要点是 Linux 寻找第一个程序，这个 init 程序，驻留在文件系统中。在内核可以启动 init 程序之前，需要预先创建根文件系统，并将其挂载到“/”。

因为嵌入式系统有不同的硬件限制，所以 Linux 嵌入式系统通常使用特殊的文件系统格式，而不是台式机或笔记本电脑上使用的典型的 EXT3、EXT4、btrfs 或 xfs。

## **服务**

当内核找到、加载并运行 init 程序时，该程序负责启动系统的其余部分。在这一点上，内核不再主动运行，而是在所有运行的程序之间协调硬件的共享。

有许多不同的 init 程序可用。无论选择哪一个 init 程序，该程序都将启动系统有用所需的所有必要服务和应用程序。这组服务包括设置网络、安装附加文件系统、设置图形环境等等。

在 Linux 下，服务只是在后台运行的程序。Linux 人习惯上称这些服务为守护进程或守护程序，尽管我最近很少看到这个术语。

## **应用/程序**

init 程序还负责启动常规程序。这些程序确实有用户交互。嵌入式系统通常只有几个用户程序，有时只有一个。在嵌入式系统中，这套程序使设备做它应该做的事情，例如，显示地图和路点，监听麦克风，或显示录制的电视节目列表。可能性是无限的。

## **总结**

因此，总而言之，当嵌入式计算机启动时，Linux 系统将执行以下步骤:

*   进入引导加载程序
*   跳进内核
*   挂载根文件系统
*   加载并运行 init
*   加载并运行后台服务(或守护程序)
*   加载并运行应用程序

这些步骤中的每一步都调用系统中需要的组件。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>