# SRE 提示为黑色星期五做准备

> 原文：<https://thenewstack.io/sre-tips-to-prepare-for-black-friday/>

[Gremlin](https://www.gremlin.com/) 赞助本帖。

 [奥斯汀·冈特

奥斯汀从事大规模云技术已经超过十年。他领导 Gremlin 的技术产品营销团队，利用业余时间冥想、训练和与他的猫 Franklin 一起玩耍。](https://www.linkedin.com/in/austingunter/) 

为黑色星期五或任何高峰流量事件做准备是负责构建、部署和运行生产工作负载的工程团队正在进行的项目。

由于新冠肺炎的原因，现场可靠性工程师(sre)和工程团队今年可能会呆在家里，而不是在办公室里与队友一起做准备工作，因此我们需要在家里的工作站完成同样的工作，我们还将召集作战室，管理可能出现的任何事件。

以下是 Dropbox、亚马逊和网飞等公司的客服人员为这个假期高峰流量所做的准备。

## 回顾过去的事件

回顾过去的事件是了解您的系统以前是如何失败的一种强有力的方法；并将让您深入了解系统在生产中的实际表现。有了这种洞察力，您在发生停机时会更有信心。此外，它还会给你一份问题清单，供你向你的团队提问。

1.  我们是否根据任何新的代码更改验证了对过去事件的修复？为了防止失败，重新修复过去的错误以确保代码和配置更新的可靠性是很重要的。
2.  我们是否准备好了适量的基础设施和正确的自动扩展规则来处理流量激增？
3.  我们测试了应用程序关键路径的可靠性了吗？验证我们的应用程序的核心功能将在压力下执行，这将对我们公司的底线产生巨大的影响。

## 了解你的“问题服务”

识别“问题服务”的实用方法是询问您的团队“人们避免为哪些服务编写代码？”一旦你有了这些服务的清单，你就可以开始研究如何确保这些服务不会在大日子里引起任何麻烦。

稍微挖掘一下，看看这些服务是如何失败的，以及系统的其余部分是如何响应的。一旦理解了给定服务的故障模式，可靠性机制就变得更加明显了。这项服务需要更多的冗余吗？它有自动缩放的问题吗？到上游服务的连接是否有点脆弱？

## 运行远程防火练习来测试你的观察能力和操作手册

消防演习是验证人员和流程的计划事件。具体来说，它旨在指导团队在特定问题出现时采取适当的措施。像业务连续性计划一样，消防演习应该是我们事件管理准备工作的一个常规和预期的方面。

现在我们在家工作，重要的是我们要做一次彩排，以确保我们有信心在感恩节期间结束在客厅解决事故之前找到流程中的差距。我们的警报设置是否正确，或者我们是否收到了非问题警报，而错过了真正问题的警报？我们的仪表盘能否为我们提供正确的数据，以便我们能够快速解决事件？我们的操作手册是最新的、完整的、准确的吗？

## 为整个公司制作一份关于该事件的单页报告

事件管理中一个比较耗时的要素是确保每个人都在同一页面上。发布一个关于流量峰值的公司 wiki 页面，并在您的组织内共享，将在发生中断时节省宝贵的时间。

以下是您可以包括的主题的起始列表:

1.  为什么你预计会出现流量高峰，你估计它会持续多久。
2.  所有待命人员的联系信息和轮换日历的链接(这首先应该易于访问)。
3.  已知的系统故障点，如潜在的瓶颈或单点故障。这使得组织中的每个人都能留意潜在的问题。
4.  检查主数据库查询计划和任何预期的查询模式更改，包括这些查询在正常情况下运行需要多长时间。
5.  缩放界限和已知的容量限制，例如 Lambdas 上的容量限制。
6.  服务上运行的混沌工程实验的结果。

## 用混沌工程重现过去的事件

有时我们认为我们对过去的事件有一个解决办法，但我们从来没有真正去测试这个解决办法是否有效。这可能有很多原因:工具不足，在生产中测试的犹豫，或者甚至是懒惰。但这是混沌工程的一个核心用例。因为混沌工程使工程师能够精确地、反复地重现混乱的生产条件，所以我们经常可以重现导致重大事故的原因，并验证修复是否有效。

## 平静的黑色星期五

有一句关于 2020 年的名言:“愿你生活在有趣的时代。”但是当涉及到我们的随叫随到的轮换和系统行为时，我们更希望事情是乏味的和可预测的。我们希望上面的列表可以帮助你的团队准备一个充满快乐顾客和大量与你所爱的人在一起的黑色星期五。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>