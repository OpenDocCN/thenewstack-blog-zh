# 当 CI 与 CD 相遇:自信交付

> 原文：<https://thenewstack.io/when-ci-meets-cd-deliver-with-confidence/>

根据 DORA 的 DevOps 2019 报告的[状态，精英执行软件团队按需部署，每天将多个代码部署到生产中。与](https://services.google.com/fh/files/misc/state-of-devops-2019.pdf) [2018](https://services.google.com/fh/files/misc/state-of-devops-2018.pdf) 的调查结果一致，2019 年，精英群体对高、中、低表现者的总体比例几乎增加了两倍。这些发现表明，卓越交付对所有企业都至关重要，并且可以通过正确的执行、技术和文化来实现。

本文将分享团队如何通过理解潜在的交付瓶颈来提高他们的 DevOps 能力，以及持续集成/持续交付(CI/CD)平台如何改变以鼓励更快、更好和更安全的软件交付。

## 持续集成是瓶颈

[持续集成(CI)](https://harness.io/blog/continuous-integration/what-is-continuous-integration/) 的目标是生产一个打包的工件，准备部署到服务器或机器上。工件可以是容器映像、WAR/JAR 文件或任何其他可执行的打包代码。CI 自动化了从代码提交到打包工件的过程，这意味着部署频率取决于开发人员迭代到下一个候选发布工件的早、快和频繁程度。

那么，持续集成的挑战在哪里呢？

### 测试

 [蒂芙尼·雅克哈

Tiffany 是 Harness 的布道者，其使命是帮助工程师和团队通过现代技术的适用实践、故事和内容更快地交付更好的软件。她是持续交付基金会的大使，喜欢在 SpringOne、Red Hat Summit 和 DevOps World 等会议上发表关于软件交付的演讲。她还拥有佐治亚理工学院的计算机科学硕士学位。](https://www.linkedin.com/in/tiffanyjachja/) 

测试仍然是 [CI/CD 管道](https://harness.io/blog/continuous-delivery/ci-cd-pipeline/)中最耗时的过程之一。测试可能需要几个小时才能完成，这会中断开发和交付的流程。

根据[Harness Continuous Delivery Insights 2020 报告](https://harness.io/continuous-delivery-insights-2020-ebook/)，CI/CD 管道的平均测试时间为四个小时。对于许多组织来说，关键的挑战是在测试套件上达到可接受的测试覆盖率、自动化和维护水平。

通常，最常见的加速措施是引入自动化测试。但是，这仅适用于我们的 CI 服务器和测试的性能。

测试驱动的智能是下一个现代软件交付能力，用于扩展 CI 管道的构建和测试阶段。CI 总是以有效的方式将新的开发变更集成到现有的代码库中。这意味着开发人员需要在每次启动或触发 CI 流程时利用他们的测试和代码。因此，代码和测试作为人工智能(AI)和机器学习(ML)测试智能的输入。使用这些数据，像 Harness 这样的软件交付平台可以根据几个派生的输出来确定运行哪些测试，比如代码更改和测试添加或修改。

### 维护和配置

今天，许多系统正朝着低代码或无代码的能力发展，以实现跨功能和一流的交付。有三种与 CI 服务器维护和配置中的瓶颈相关的注意事项需要考虑:

*   脚本或重要的配置需求:这些需求需要专业开发人员在 CI 平台的限制下工作。在面向服务的架构中，不需要代码的 CI 平台和解决方案通常更加灵活和持久，而脚本可能会减慢或破坏交付过程。
*   服务不稳定问题:自托管或手工解决方案可能没有这种级别的支持。
*   向 CI/CD 扩展:缺少 CI 和 CD 之间的一流集成，导致更多的脚本编写。

### 开发者体验

CI 是关于改进开发工作流程的。然而，CI 可以很快变成一个反过程。此时，开发人员必须维护和排除由于 CI 服务器导致的构建失败，花费时间导航和理解用户界面，或者等待缓慢或暂停的构建完成。

今天，统一平台为开发人员提供了从代码到可测试工件的更快更好的方法。通过 API 的 CI 服务器功能提供了与 ide 集成的新方法，允许开发人员将他们的管道定义为代码，并触发他们的 CI/CD 流程，所有这些都在他们的开发人员环境中完成。考虑通过统一工具来改善开发人员体验的新方法。

## 实时实验

对于竞争环境要求客户满意和通过软件服务获得稳定收入的组织来说，变化是现实。这些组织需要在产品开发生命周期中快速接受客户反馈的能力。开发人员促进产品竞争优势的一个常用工具是使用功能标志。以下是功能标志的一些常见使用案例:

*   降低风险:渐进交付降低了部署风险。特性标志可以是您的 IT 治理策略的一部分，使团队能够通过一个托管实体来控制特性的可见性。只有当你准备好了，你才能上船。
*   生产环境中的测试:使用特性标志来设置关于谁可以控制新特性的定制规则。
*   用户反馈:社交平台和零售商是首批采用 A/B 测试来了解消费者行为，以优化参与和购买的人。特性标志提供了一种新的方法，可以在产品中用用户子集开发和测试新特性。
*   实时变化:[特性标志](https://harness.io/blog/feature-flags/what-are-feature-flags/)可以隐藏代码或行为，而不必重新部署应用程序的新版本。

实时实验是关于拥有数据和反馈来做出交付决策。特性标志可以帮助开发人员减少长时间特性开发的反馈循环。

## 交付之路:加速的成本

借助 CI/CD，团队可以轻松地从每月一两次部署增加到每月 30 次。这种速度可以带来成功和庆祝，并提供一个围绕 DevOps 文化和建设精英表演团队的焦点。心理安全很重要。每个团队都需要解决软件交付过程中潜在陷阱或问题的自主权和能力。

然而，云计算的本质是成本通常是团队部署频率的函数。当谈到业务成本时，六位数或七位数的云账单往往会成为一个令人苦恼和羞愧的领域。将团队带到相同的可见性和理解水平可以促进无羞耻文化。

需要克服的一个挑战是如何深入了解云成本。如今，许多平台，如 Kubecost、Cloudability 或 Cloud Cost Management by Harness，都可以提供适当规模的工作负载、预算和提醒团队云资源模式和使用情况的功能。

## 统一:精英表演的真相

精英 DevOps 绩效的真相是，任何团队都可以通过正确的流程和技术取得成功。这篇文章分享了一些提高 DevOps 性能的注意事项。工具和工作流的统一允许开发人员管理软件交付的所有方面——通过 CI、CD、验证、功能标志和云成本管理——以实现简单、智能和可扩展的交付模型。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>