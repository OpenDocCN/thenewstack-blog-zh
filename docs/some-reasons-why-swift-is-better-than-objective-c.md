# Swift 优于 Objective-C 的一些原因

> 原文：<https://thenewstack.io/some-reasons-why-swift-is-better-than-objective-c/>

Swift 于 2014 年由苹果公司发布，被描述为 ob active-C，但没有 C，反应不一。对于现有的 Objective-C 开发人员来说，这是一个“谁需要它？”，而对于千百万努力学习目标 C 的人来说，这是一股清新的空气。这里我举几个案例来说明为什么我觉得 Swift 作为编程语言比 Objective-C 优越。

目标-C 已经有将近 25 年的历史了，最好由那些有 C 思维的人来编写。例如，将文本分配给一个字符串需要一个指向 NSString 的指针，这是一个内置类型:

|  | 

ns string *str=@“你好”，；

 |

这意味着你真的需要了解指针和内存分配。现在，ARC(自动引用计数)的引入简化了内存分配，因为以前您必须手动进行分配，使用 retain 来分配内存，并确保使用 release 来释放内存。Objective-C 2.0 还引入了更简单的文字语法，因此可以使用更简单的代码来代替冗长繁琐的方法调用。这两个都将 true(是)赋给 NSNumber。

|  | 

ns number *my bool number=【ns numbernumberWithBool:是；

ns number *my bool number=@是；

 |

## 这么多文件！

标准 C 有不同的编译单元，每个编译单元通常有一个扩展名为. h 的头文件和一个扩展名为. C 的 C 文件。m not .c .其他编程语言比如 Java，C#，甚至 JavaScript 当然还有 Swift 只用一个文件管理。

使用头文件的原因是当你访问另一个文件中定义的变量、类型或函数时。的。c 或者。m 文件有函数体，但是头文件是声明函数的地方。必须读取单独的头文件会降低编译速度。Swift 只有一个声明。

## 迅速发生的

Swift 从其他语言中精选了许多最佳特性。选项类似于 C#中的可空类型。变量声明类似于 Pascal，只是 var 适用于每个声明。总的来说，这是一种非常优雅的语言，一些特性显示了一些非常好的想法。简化的语法增强了可读性。除非您想在一行中包含多个语句，否则不需要用分号来分隔语句。

最好的快速改进之一是使用控制流语句，如 if、for、while 和 do-while。在 C 和许多其他语言中，语句后的块可以是一条语句，也可以是大括号内的块。程序员经常被警告说，单个语句，而不是大括号内的语句会导致问题，2014 年发生了一个真正的大错误 [OpenSSL Goto error](http://www.wired.com/2014/02/gotofail/ "Link to Wired.com") 。

|  | 

if(err=sslhashsha 1)。 更新(&amp； hashCtx 、&amp；signed params)！=0)

gotofail；

转到 失败；

 |

尽管有缩进，(这不是 Python)第二个 goto 总是被执行，因此跳过了大量的检查并危及 SSL 加密。它在 iOS 7.0.6 中得到修复，但如果在 Swift 中编码，它会导致编译错误。除了 switch 语句，所有其他控制流特性都需要大括号，并且不允许使用单行语句。

所以这是可以的

|  | 

如果 我&lt；9{

打印 ( 【你好】 )

}

 |

但这不是，而且会产生‘预期的{ after if condition’错误。

|  | 

如果 我&lt；9

打印 ( 【你好】 )

 |

## 静态或动态

Swift 为 iOS 开发带来了类型安全，因为 Objective-C 的动态特性意味着编译器不能依赖于在编译时知道方法的类型。有利的一面是，你可以在运行时向现有的类中添加方法，并改变实例的类型，但这些都是有代价的；运行时代码必须对选择器实现进行额外的检查，这就增加了额外的代码。由于静态类型化，Swift 编译器可以优化调用并直接调用方法或使用虚拟表(vtable)。

## 返回带有元组的数据

Objective-C 不直接支持元组。这是一种将两个或三个值集中在一个地方的方法。有点像结构，但更简单。Swift 增加了元组，这里有一个字符串和一个 Int。

|  | 

vara:(String，Int)=(【大卫】， 40 )

 |

可以通过位置访问各个部分，因此 a.0 的值为“David ”, a . 1 的值为 40。

元组真正的得分是在函数的返回值中。对于计算多个值或者返回一个错误代码的函数来说，能够返回多个值是非常方便的。下面的示例演示如何实现 findpos 函数，该函数搜索提供的数组并返回位置。返回的元组是可选的元组，因此它可以检查空数组，并在这种情况下返回 nil。

| 

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

 | )(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(有)(些)(什)(么)(情)(感)(呢)(?)(我)(们)(都)(不)(知)(道)(了)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(是)(有)(什)(么)(情)(感)(呢)(?)(我)(们)(还)(不)(知)(道)(,)(我)(们)(们)(还)(不)(知)(道)(,)(我)(们)(还)(有)(些)(什)(么)(好)(的)(情)(感)(。( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( )( ) 【如果】值)(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(。 )(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(。 )(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(。 )(我)(们)(都)(没)(想)(到)(这)(些)(事)(,)(我)(们)(就)(是)(这)(些)(事)(,)(只)(是)(这)(些)(事)(,)(只)(是)(这)(些)(事)(。)(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(。  |

“if var b =”语法意味着如果对 findpos 的调用返回一个非零值，那么它声明一个变量 b 并将返回值赋给它。
find pos 的返回值是一个可选的元组，但是要访问该元组，必须将其解包。这是通过“if var b”完成的，因此 b 包含未包装的元组，而不是可选的。

这可能需要一点时间来理解。考虑这个替代代码，而不是“if var b”。

|  | 

varb=find pos(45，数组)

ifb！=nil{

ifb！。找到{

打印 ( b ！。位置)

}

}

 |

这里 b 有一个可选元组的值，为了访问元组部分，它需要从可选元组解包。您可以通过添加感叹号来手动完成此操作。允许您访问基础元组成员。但是这不是好的编程，因为它需要两个解包。因此使用“if var b”或“if let b”。如果返回值从未改变，则使用“if let b”。

## 用线串

Swift 字符串是 Objective-C 的一个重大改进。不用担心使用可变或不可变的字符串类型，如果你想要一个字符串，你可以使用 var 来声明它，或者使用 let 来声明不可变。连接字符串就像
一样简单

|  | 

varmyStr=“我的名字是”

myStr+=【大卫波顿】

 |

什么不那么明显，我甚至不用声明字符串类型。编译器推断它是=右侧的字符串。

Swift 字符串支持完整的 Unicode 字符集，甚至可以在 switch 语句中使用，但这两者在 Objective-C 中都不可用。

## 结论

我的目的并不是抨击 Objective-C，它是一种非常成功的编程语言，因为已经有许多应用程序是用它开发的，只是为了展示 Swift 如何在它的基础上进行改进。我把 Objective-C 看做一台手动割草机，在那里你会流汗很多，但它能完成工作。相比之下，Swift 就像一台电动割草机，将减少所需的工作量。它也有更好的保护，所以你不能切掉你的手指。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>