# Devs:是时候考虑将 IPFS 作为 HTTP 的替代品了

> 原文：<https://thenewstack.io/devs-its-time-to-consider-ipfs-as-an-alternative-to-http/>

我与[星际文件系统](https://thenewstack.io/interplanetary-file-system-could-pave-the-way-for-a-distributed-permanent-web/) (IPFS)的大部分对话都以它与区块链技术公司的关系开始和结束。虽然在利用 IPFS 协议的去中心化特性托管基于区块链的游戏和 NFT 的媒体资产方面有很大的效用，但是它的效用超出了 Web3 的实现。IPFS 内置的去中心化功能适用于任何应用程序开发，并且有可能改变 web 应用程序的构建和扩展方式。

## 关于 IPFS 的快速复习

这个被隆重命名的“星际文件系统”最初是由[协议实验室](https://protocol.ai/about/)创始人[胡安·贝内](https://juan.benet.ai/)构想的，作为 HTTP 寻址内容的替代方法。HTTP 基于到文件位置的路由。理论上，该位置的文件每次在浏览器中加载时都可能不同。IPFS 地址指向一个特定的可加密验证的文件，这意味着该文件的修改版本将使用不同的地址引用。

其中一种方式是地址永远不会改变，即使内容暂时不可用。公司 A 可以托管 IPFS 地址的内容，但后来倒闭了。如果公司 B 出现并托管相同的内容，该地址将返回相同的结果。如果在一段时间内没有包含该内容的节点可用，则该内容将变得不可用，直到托管该内容的节点联机。

协议实验室浏览器和平台生态系统负责人 Dietrich Ayala 在接受新堆栈采访时表示，“IPFS 和 HTTP 之间的主要区别之一是，当 HTTP 中出现 404 时，只有一方可以为原始 URL 提供服务。更改文件名会破坏 HTTP 地址。对于 HTTP，提供数据的一方是数据可用性的上限；但是对于 IPFS，一方提供数据只是一个起点。随着存储数据的节点越来越多，可用性和弹性也越来越高。”

## 为什么从 HTTP 转向 IPFS？

面对这里提到的所有挑战，为什么开发人员会考虑使用 IPFS 而不是坚持使用 HTTP 堆栈呢？Ayala 说:“全栈开发人员当前的端到端工作流非常复杂。“这需要一系列的服务。在发布到 IPFS 的工作流程中，有一个获得即时满足的机会。如果一切正常并且您的节点可用，您可以将您的应用程序添加到您的本地节点，给某人一个地址，他们就可以立即加载它。这与需要注册域名和更新 SSL 证书非常不同，或者可能 NPM 模块在部署时中断，一周后您的代码在本地工作，但仍然无法分发。当你自己出版时，你能得到的即时满足感真的很强大。”

协议实验室为您提供了一些工具来开始使用 IPFS。你可以通过他们的桌面应用程序运行一个节点，或者使用 IPFS 的 Go 实现通过 T2 的命令行界面运行一个节点。用 ipfs 构建可以使用 [js-ipfs](https://js.ipfs.tech/) 结合 Node.js，或者通过被称为 [Kubo](https://github.com/ipfs/kubo) 的 IPFS 的 Go 实现。还有一个 sidecar [IPFS 集群](https://ipfscluster.io/)分布式应用程序，允许轻松地将文件部署到多个节点，在部署应用程序时提供即时扩展。

## 采用 IPFS 面临的挑战

IPFS 听起来像是一个伟大的解决方案，解决了网络的许多基本限制，但它也听起来有点好得难以置信。我问 Ayala 关于收养的挑战。他强调了几个核心问题，从 HTTP 作为一种协议的成功开始。

“HTTP 是我们呼吸的空气。这是我们现在用来和其他电脑交流的所有东西。AJAX 和 REST APIs 确实巩固了计算机对计算机的通信，而不仅仅是人对人的通信，是通过 HTTP APIs 进行的。当你要求 2800 多万开发人员重新评估整个 OSI 堆栈以及网络应用程序如何工作时，这真是一个有趣的挑战。”

## 提高加密素养

加密教育是采用像 IPFS 这样的新协议的另一个挑战。开发人员和用户很少会在日常生活中使用哈希。“如果你下载 Linux 发行版，”Ayala 解释道，“你可能对看到 MD5 散列很熟悉，你可能会也可能不会实际验证散列是否匹配。除了这种情况，你还需要处理散列吗？您可能会编写一些代码来将密码保存到一个没有明文存储的数据库中。除了这两种情况之外，它不是开发人员日常体验的一部分。对于 IPFS，这是我们解决任何地方的数据问题的核心。”

这种可验证性对开发者和用户都有影响，并且最终是位置数据存储在 IPFS 方法中不再重要的原因。如果有人从一张照片开始，编辑那张照片，然后在 HTTP 世界中重新发布，就好像它是原始的一样，这取决于被修改的像素数量，人眼可能无法区分它不再看同一张图像。从核查的角度来看，IPFS 将把修改后的图像视为新事物。

“在错误信息和虚假信息的时代，这很重要，”阿亚拉说。“在开发人员如何处理数据、他们如何进行加密验证，以及最终用户如何思考拥有自己的数据意味着什么方面，我们需要克服很大的教育障碍。”

## 后 HTTP 时代的数据所有权

这给我们带来了采用 IPFS 的第三个障碍，这也是协议之间的另一个根本区别。

Ayala 说，“如果你通过 IPFS 加载一个网站，它会存储在你的 IPFS 节点中。你拥有它，直到你决定不再想要一份拷贝。当今网络的工作方式是，一个网站的所有组件都存储在你的浏览器缓存中，但浏览器并不把浏览器缓存当作属于你的东西。发布者设置的 cookie 决定了是否从浏览器缓存中删除某些内容。这是我们对应用程序分发模式的一个重大改变。”

在开发由用户决定是保留还是清除网站应用程序数据的模型时，存在一些潜在的挑战。随着新功能的推出或漏洞的修复，用户应该会看到采用新版本的巨大好处，但 IPFS 允许旧版本继续存在。另一方面，当网站删除内容或使部分内容不可用时，用户可能不会从他们的 IPFS 节点清除数据，以保持对开发者不再支持的内容的访问。

## 协议实验室和 Igalia 解决浏览器问题

采用的另一个挑战是网页浏览器的设计方式。浏览器基本上被设计为 HTTP 协议和请求-响应安全模型的载体。浏览器权限和隐私是围绕 HTTP 设计的。这是使像 IPFS 这样的新协议的采用变得简单的核心挑战之一。

由于这种限制，Protocol Labs 聘请了在构建浏览器技术(包括 MathML 和 CSS Grid)方面拥有 T2 经验的 web 咨询公司 Igalia。Igalia 花了一年时间重构 Chromium 代码库的某些部分，以包含对非 HTTP 协议的支持。阿亚拉说:“我们与 Igalia 合作，修复了不同浏览器之间的大量 web 兼容性错误，这样 origin 安全模型应用于本地主机地址的方式就可以保持一致，这样 web 开发人员就可以知道他们的代码是浏览器兼容的。”

基于 Chromium 的 Brave 浏览器是首批直接集成 IPFS 的浏览器之一。Brave 的集成主要集中在安全模型和如何进行权衡。

Ayala 告诉我，“勇敢的安全团队之前已经评估并审核了整合。“他们已经支持 Tor 了。IPFS 模式与 Brave 中的 Tor 整合非常相似。一旦用户启用该功能，Brave 就会下载一个 IPFS 节点，旋转该节点并将其作为单独的二进制文件运行，通过进程间通信来回发送消息，并将内容流回 web 渲染引擎。”

在撰写本文时，这种对协议支持的改变还没有出现在 Chromium 的发布版本中，但预计很快就会出现。Igalia 在浏览器中扩展协议支持的工作已经超越了 IPFS。解决了 IPFS 集成到浏览器中所面临的一些挑战，从根本上改变了浏览器与非 HTTP 协议交互的方式，这在理论上意味着现有的协议以及即将发明的协议都将受益；并且可能有更快的采用途径。与此同时，IPFS 为 Chrome 和 Firefox 提供了[扩展](https://docs.ipfs.tech/install/ipfs-companion/)，并在 Opera 和 Brave 中提供了原生支持。

## 看一看 IPFS

如果你因为在自己的工作中没有看到区块链的使用案例而推迟了对 Web3 技术潜力的研究，我鼓励你看看 IPFS。虽然它可以与区块链技术配对，但它是一个独立的点对点协议，有可能解决许多真正的挑战。

难以与更广阔的互联网建立可靠连接的地区可以通过运行 IPFS 节点来创建本地冗余。它还提供了一个可行的解决方案来提高灾难性停机时的恢复能力，这是政府和基本服务部门可以更好地准备的事情。正如 Ayala 所说，“我们现在正处在一个十字路口，我们有一些现成的技术，允许开发人员首先为他们的用户服务，而不是首先为特定国家的特定公司服务。对于互联网用户来说，这是一个巨大的机会，他们可以利用满足他们需求的东西，而不是一刀切的协议或平台。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>