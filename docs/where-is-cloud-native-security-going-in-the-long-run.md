# 云原生安全长远何去何从？

> 原文：<https://thenewstack.io/where-is-cloud-native-security-going-in-the-long-run/>

重要的事情先来。正如帕洛阿尔托网络公共云首席安全官[马修·奇奥迪](https://www.linkedin.com/in/mattchiodi/)最近指出的，许多[云原生安全问题都是我们一直未能妥善处理的老安全问题](https://thenewstack.io/five-cloud-native-security-concerns-in-2021/)。也就是说，我们还必须处理新的安全问题。随着越来越多的工作负载迁移到云并采用云原生开发模式，从长远来看，将需要一种新的安全方法。这些包括保护应用程序编程接口(APIs 导航新的云本机安全指标和文化；转向机器学习和开源软件。

为了更好地了解是什么推动了这些长期的安全趋势，以及如何最好地使安全性适应云原生架构，我们采访了[约翰·莫雷罗](https://www.linkedin.com/in/john-morello)、[帕洛阿尔托网络公司](https://www.paloaltonetworks.com/cloud-security?utm_content=inline-mention)产品副总裁。Morello 是云原生安全领域的著名专家，是美国国家标准与技术研究所(NIST) [容器安全指南](https://csrc.nist.gov/publications/detail/sp/800-190/final)的合著者，也是云原生安全初创公司 Twistlock 的前首席技术官，该公司于 2019 年被帕洛阿尔托网络公司收购。以下是他要说的话。

## API 安全性成为关键

早在云原生计算出现之前，API 就被广泛用于程序之间的连接。如今，它们是我们将微服务和容器联系在一起的最常见方式。毫不奇怪，即使我们使用它们来传输数据和连接服务，黑客也将 API 作为吸取数据和引入恶意软件的目标。事实上，API 已经成为一个长期的安全问题。

“与其说 API 本身存在固有的不安全性，还不如说它是最薄弱的环节。但这往往是攻击者的目标，因为它们被设计成可编程访问的，”Morello 解释道。“它们还为某些人提供了一种更有趣的攻击面，让他们可以探索并找出除了它的预期用途之外，它还可以做什么。”

此外，Morello 继续说，应用程序正在从一种开发模式过渡，在这种模式下，应用程序的各种组件之间的大多数通信都是内部的，而不是通过网络暴露给我们今天所拥有的。现在，他说，“微服务和分解的应用程序是我们要去的地方，这些单独的组件被明确设计为通过网络协同工作。因此，他们在网络上暴露了更多的内部机制。”

[John Morello，Palo Alto Networks–API 安全基础知识是一回事，但更大的需求是什么？](https://thenewstack.simplecast.com/episodes/john-morello-palo-alto-networks-api-security-basics-are-one-thing-but-what-is-the-greater-need)

这种开放性对于今天基于云的世界来说非常方便，但是，Morello 观察到“攻击面比以往大得多。如果你没有一个好的安全模型，也没有合适的工具来保护这些微服务，你会更容易受到攻击。”

正如 Morello 指出的，滥用 API 所需的技能水平要低得多，这也没有任何帮助。如今，“API 通常是公开的，只是一个 HTTP 接口，经常交换 JSON。在过去的几年里，我们一直在处理某种 C++、C 妥协或缓冲区溢出。理解、调试和最终开发所需的技能水平相对较高。然而，如果你看到微服务和应用程序上公开的大量 API，所有这些都很容易被发现。这并不是说新的模式不好，只是总会有对一切和安全的权衡。现在的一个权衡是，你让它更容易被发现。”

不管你使用哪种 API，你都可以做一些事情来防止 API 成为你软件的门户。其中包括:

*   **实践良好的 API 卫生。API 应该设计有认证、访问控制、加密和活动监控。API 密钥必须受到保护，不能重复使用。**
*   [**使用认证令牌**](https://auth0.com/docs/tokens/access-tokens) **。**使用可信身份支持这些，并使用它们来控制服务和资源访问。
*   **使用标准 API 安全框架。**其中包括[开放云计算接口(OCCI)](https://occi-wg.org/) 和[云基础设施管理接口(CIMI)](https://www.dmtf.org/standards/cloud) 。
*   **使用加密和签名。使用 TLS 加密传输中的数据。[要求签名](https://thenewstack.io/4-essential-tools-for-protecting-apis-and-web-applications/)来补充用户认证。**
*   **识别并修补软件漏洞。**一如既往，保持您的子程序和组件的安全补丁。
*   **使用** [**配额节流**](https://thenewstack.io/tutorial-how-to-rate-limit-google-cloud-functions/) **。对你的 API 被调用的频率设置配额，并跟踪它的历史使用情况。**
*   **使用** [**API 管理**](https://thenewstack.io/how-to-improve-cloud-native-api-management/) 支持 API 安全方案。
*   **使用一个** [**API 网关**](https://thenewstack.io/5-ways-to-succeed-with-an-api-gateway/) **。**这些使您能够认证流量，控制和分析 API 的使用方式。

## 云计算未来的安全指标

综上所述，正如 Morello 明智地观察到的，“你不能把安全当作事后的想法。组织从中吸取的最大教训是在应用程序的生命周期中嵌入安全性的重要性。云原生应用的构建和部署方式为我们提供了一个独一无二的机会，让我们能够以一种前所未有的全面方式实现这一目标。”

为了确保所有这一切都像我们希望的那样长期安全地运行，Morello 强烈建议我们使用 [DevOps 指标](https://thenewstack.io/6-devsecops-metrics-for-devops-and-security-teams-to-share/)。但是，您不能让自己“被大量的工具、术语和功能所淹没。我总是告诉人们，至少从安全的角度来看，最重要的衡量标准可能不是环境中漏洞的数量，因为总会有漏洞。即使你的工作做得很完美，也总会有漏洞…关键的衡量标准是，“这些漏洞在你的应用程序中存在多久？你补救的速度有多快？"

使用这些数据，您应该寻找“在漏洞被发现后修补或补救的同时”。理想情况下，你希望看到这种趋势随着时间的推移而下降，”他说。“我经常告诉人们，理想的情况是无论你的冲刺周期是多少，你知道，就同时修复漏洞而言，150%是一个很好的目标。这样，您应该能够说出这个或下一个，您将在应用程序中发现漏洞时纠正它们。如果您做得很好，并且在开发过程的早期就这样做了，并且在应用程序中重新部署了这些修补程序，那么当漏洞被发现时，您将真正走在漏洞曲线的前面。”

想一想，莫雷罗继续说道，“如果你看看新闻里的大功勋。这些漏洞很少是因为一些惊人的技能。”在绝大多数情况下，人们受到危害有两个原因。他们拥有不安全的配置，这些配置被认为是糟糕的实践，但仍然在环境中持续存在。或者他们在许多情况下已经知道了漏洞，而这些漏洞在过去几年已经知道了，并且在环境中持续存在，没有得到补救。"

Morello 继续说道，“如果您不解决安全的两个真正核心的方面，即阻止漏洞和软件以及阻止不安全的配置和基础架构，您将永远处于落后状态。客户希望谈论最新的深奥的内存注入攻击或一些 CPU 缺陷。但是，在大多数情况下，他们有几十台机器存在多年的严重漏洞。注意你能解决的问题，因为攻击者会先攻击那些容易的漏洞。”

## 通过开源和机器学习更加安全

继续，Morello 还认为“开发人员驱动的安全性不仅仅是在构建过程中检查和发现漏洞和配置问题，它实际上使您的开发人员能够有效地对安全工具进行编程，利用他们用来本地构建应用程序的相同工件，而无需他们做额外的工作。”

这意味着认识到“当你看着今天的现代应用程序堆栈时，你真的可以说开源已经赢得了整个堆栈。”因此，自然地，Palo Alto Networks 使用开源作为其自己程序的基础，使用“Red Hat 的 [Universal Base Images (UBI)](https://developers.redhat.com/products/rhel/ubi) 等技术作为我们的基础层。”帕洛阿尔托网络公司也为 [Docker](https://www.zdnet.com/article/what-is-docker-and-why-is-it-so-darn-popular/) 和[Red Hat open shift](https://www.openshift.com/try?utm_content=inline-mention)做出了贡献。“总体来说，我们在开源社区做了很多工作。”

Morello 承认他从 2000 年到 2014 年在微软工作，在那里有很多关于开源的辩论。但他说，如今对他们的客户来说，没有争论。“他们使用正确的东西来尽可能加速他们的业务，这就是开源。”

具体来说，Morello 谈到了用于 T2 Kubernetes T3 的轻量级容器运行时 CRI-O T1。随着 [Prisma Cloud](https://www.paloaltonetworks.com/cloud-security?utm_content=inline-mention) 的最新发布，CRI-O 受到了和 Docker 一样的保护。Morello 说:“就像运行时支持一样——基于漏洞和合规性策略进行阻止——我们增加了为 CRI-O 进行定制合规性检查的能力，以进行 CRI-O 特定的合规性检查。这实际上评估了支撑您的 Kubernetes 集群的 CRI-O 环境的安全配置。”

简而言之，如果你喜欢在运行 Docker 时获得的 Prisma 云安全，现在你可以在一个完全没有 Docker 的环境中获得同样的保护。

展望未来，使用开源工具，Morello 说“我们将能够有一个更加自动化的运行时防御方法。安全性总是关于深度防御和多层次。这意味着您需要运行时防御、良好的漏洞管理和构建过程的卫生。”

其中一些将来自于“能够对你的应用程序进行无人监督的机器学习(ML)”。因此，当您将应用程序部署到 Prisma Cloud 保护的环境中时，它会自动学习诸如“给定图像的正常行为模式是什么？它运行的流程是什么？“流程树是什么样子的？”"

使用这些数据和开源 ML 工具，Prisma Cloud 会自动使用这些数据和工具来创建一个最低权限的方法，以允许应用程序在运行时执行操作。因此，即使将来有一些漏洞，只要我们定义了那个模型，我们知道那个模型说什么是正常的和允许的，客户试图运行的任何东西都将被自动阻止，而不必创建额外的手动规则，Morello 说。

“现在真正无与伦比的挑战是，”Morello 总结道，“如何在用于保护这些环境的软件中创建一个学习级别，以便尽可能少地打扰人类操作员，并且只针对真正需要人类干预的事情。”

这听起来像科幻小说吗？不是的。帕洛阿尔托网络公司使用开源和 ML 来保护我们越来越复杂的云计算程序。我们还没到那一步，但我们已经在路上了。

特征图像 par Antonio López de Pixabay。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>