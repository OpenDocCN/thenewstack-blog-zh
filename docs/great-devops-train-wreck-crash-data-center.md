# 伟大的 DevOps 列车残骸即将撞向您的数据中心

> 原文：<https://thenewstack.io/great-devops-train-wreck-crash-data-center/>

[](https://www.linkedin.com/in/sumeetsingh1)

 [苏米特·辛格

苏米特·辛格是 AppFormix 的 CEO 和创始人。在启动 AppFormix 之前，Singh 启动了微软的 Windows Azure 网络团队，该团队负责 Azure 数据路径，包括虚拟机管理程序 vswitch、物理网络以及由 Azure 提供的 VPN (Brooklyn)和 DC 到 DC 的连接服务。](https://www.linkedin.com/in/sumeetsingh1) [](https://www.linkedin.com/in/sumeetsingh1)

如果你知道灾难即将发生，你会说些什么，对吗？

好吧，我看到一个来了，我拉响警报。根据我听到的对话，说“DevOps 中所有有趣的技术问题都解决了”正变得危险而时髦。我们有码头工人。我们有 Kubernetes。我们有 OpenStack。它们很稳定，而且部署广泛。剩下要做的就是流程转型，教导乏味的企业 IT 团队如何使用新新 IT。”

这是胡扯，很危险。我们 DevOps 社区需要集中精力——而且要快——解决威胁敏捷方法的进步和采用的一系列问题。

## 正在发生什么

主要由容器驱动的 DevOps 革命正在对企业数据中心提出新的强大需求，这些需求将打破为单一应用程序时代设计的基础架构和政策。如果我们不作为一个社区共同努力，为 DevOps 时代构建新一代工具，性能将达不到预期，然后我们都会读到关于 DevOps 如何失败的文章。

好消息是，我们可以解决这个问题。有三个方面需要注意。如果我们很忙，我们可以为 DevOps 的全新基础架构和流程需求做准备。以下是需要解决的问题:

*   开发人员/操作员工作区自动化
*   短生命周期带来的基础设施压力
*   从金属而不是主机操作系统进行管理

让我们依次看一下每一个。

## 自动化紧急情况

瀑布为软件开发人员和基础设施运营商提供了充足的时间，让他们在服务级别、需求加载和每个应用的独特配置要求方面达成一致。在 DevOps，这是窗外的大部分。

迭代周期如此之快——美国运通曾表示，DevOps 使可比时期的部署迭代次数增加了 40 倍。在敏捷环境中工作的开发人员和操作人员不能再依赖部落知识和文化规范来管理两者之间的关系。我们需要自动化共享工作空间的工具，开发人员和运营人员可以实时一起使用这些工具来查看软件是如何部署、使用和管理的。

您不能像我们在瀑布中所做的那样，只是制作一个应用程序，然后将它扔出围栏，并期望 ops 让它在生产中跨所有加载和操作环境工作。协作是关键。两个团队需要在不进入对方领域的情况下达成一致。如果没有这些工具来监控生产环境并与开发人员和运营人员共享这些信息，我们将会陷入盲目。

## 基础设施不匹配

让我们谈谈短的应用程序生命周期。在敏捷环境中——尤其是容器是计算方案的地方——应用程序可以在几分钟内有效地创建和销毁。我们当前的监控工具依赖于日志和其他操作系统级别的数据。收集和分析这些信息需要几分钟时间。为此，我们根据分析结果增加了操作员干预的时间。

当容器生命周期只能持续几分钟时，这些监控方法就会失效。更直截了当地说，一个使用时间比它试图修复的东西的寿命还长的工具是没有用的。我们需要实时工作的工具，或者接近实时工作的工具。此外，我们需要在没有人工干预的情况下自动调整应用性能，使用智能规则根据动态变化的规则来改变应用的管理方式。

所有这些意味着我们需要基于规则的应用程序编排自动化。人类需要被完全排除在循环之外。

让我们进一步复杂化:您可能不知道一组特定的容器在基础设施中的什么地方运行，也不知道那个节点上还运行着什么。即使是私有基础设施，在某种程度上也可能是共享环境。

聪明人正在研究解决这个问题的工具，包括我们自己的工程团队。流行的开源工具如 [Zabbix](http://www.zabbix.com/) 和 [Nagios](https://www.nagios.org/) 依赖于人工生成的静态预配置。像 DataDog 这样的新一代工具设计有灵活的模式，允许应用程序发出被监控的操作系统级性能信息，为自动化异常检测迈出了第一步。关于异常值和异常检测如何工作的描述，请查看 Homin Lee 今年在 OSCON 的[演讲。](https://www.youtube.com/watch?v=mG4ZpEhRKHA)

诚然，这是一个良好的开端。但是，正如我们接下来将看到的，我们需要深入操作系统。我们需要了解和管理处理器层面发生的事情。在 DevOps 环境中，系统是动态的。工作负载是动态的。管理这种双变量环境的唯一方法是使用能够基于策略自动执行动态分配并实时执行的软件。我们依赖的所有旧工具都基于静态阈值。

因此，我们所缺少的是，没有人能够不断地提供不断变化的基础架构和应用程序环境的上下文。我们需要能够动态实时监控的软件。

## 金属管理

前两点说明了为什么这一点如此重要。当前的监控技术依赖于来自主机操作系统的数据。不幸的是，主机操作系统对处理器级别发生的事情有一个危险的有限视角。

这就是为什么这很重要。用户将容器化的应用程序部署为 pod。这些 pod 被部署到服务器，这些 pod 中的容器在每个节点上的单独线程上执行。这留下了许多在操作系统下可能发生的不好的事情。今天的监控工具是“自上而下”工作的也就是说，他们查看应用程序的意图，或者开发人员在策略中描述了应用程序满足其 SLA 所必需的资源。

但是，要在 DevOps 环境中取得成功，操作员需要知道自上而下和“自下而上”发生了什么。自底向上意味着监视和控制，从线程级别开始，向上查看在那里运行的容器和 pod。这不是一个非此即彼的情况。我们两者都需要。

英特尔正在努力应对自下而上的挑战。他们的 [RDT 技术](http://www.intel.com/content/www/us/en/architecture-and-technology/resource-director-technology.html)公开了计数器，允许软件在线程级别智能地监控和管理容器的资源消耗。我们的团队已经整合了 RDT，其他人也会。

## 这都是关于环境的

即将到来的 DevOps 数据中心事故与环境息息相关。在这些动态环境中，应用程序和基础架构都在不断变化。基于使用静态阈值的核心技术的监控工具在这个世界上毫无用处。开发人员和运营商需要能够从自下而上和自上而下的角度了解应用程序和共享基础架构中发生的情况的工具，这些工具需要实时动态地自动调度容器和 pod。没有这种全景背景，火车将会出轨。

我们把我们的未来押在解决这个问题上，其他人也一样。如果更多的聪明人忙于解决这个问题，我们都将受益于让我们的行业适应新的编写和运行软件的方式。

Docker 是新堆栈的赞助商。

专题图片:公共领域 A. Provost 的《[凡尔赛铁路事故](https://en.wikipedia.org/wiki/Train_wreck#/media/File:A._Provost_-_Versailles_-_Railroad_Disaster.jpg)》。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>