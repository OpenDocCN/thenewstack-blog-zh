# 多云业务连续性架构师指南

> 原文：<https://thenewstack.io/the-architects-guide-to-multicloud-business-continuity/>

[](https://www.linkedin.com/in/satish-ramakrishnan-07810)

 [萨迪什·拉玛克里希南

萨迪什是 MinIO 的高级技术主管。他在公共云提供商(包括 AWS 和 Google 云平台)上开发以数据为中心的 SaaS 服务方面拥有深厚的专业知识。在加入 MinIO 之前，他是 Ahana 的工程副总裁和 Reltio 的工程执行副总裁。作为康卡斯特的副总裁，他创建了硅谷创新实验室。](https://www.linkedin.com/in/satish-ramakrishnan-07810) [](https://www.linkedin.com/in/satish-ramakrishnan-07810)

现代基础设施都是关于可用性的。

*   考虑一个在线抵押贷款业务。供应商有 30 秒的时间向潜在买家提供报价，否则另一家供应商将赢得客户的业务。

*   对于在线零售商来说，感恩节和新年之间的几周占了他们年收入的 25%。

*   客户期望企业 SaaS 提供商提供的服务级别协议通常比云基础设施提供商保证的要高得多。

其共同点是，基础架构的中断可能会导致数百万美元的收入损失和/或客户流失，甚至可能意味着一年是盈利还是亏损。

## 数据中心将会崩溃

这一普遍真理与地点无关。无论解决方案是在内部(或托管中心)还是在云中运行，都是如此。

内部解决方案有专用的硬件，但是维护足够地理隔离的冗余太昂贵了。公共云通过提供多区域可用性在一定程度上缓解了这一问题；但是由于有共享服务，它们仍然会下降——平均每年下降几次。

我们的客户经常痛苦地不断了解到，如果您的解决方案依赖于几个服务和/或组件，并且大多数都是如此，那么只需要其中一个服务和/或组件关闭，您的应用程序就不可用。你的可用性取决于最薄弱的环节。

## 备份是不够的

备份是灾难恢复的一种解决方案。然而，目标是首先避免灾难。

随着数据量的不断生成，任何大中型公司恢复完整数据集所需的时间都会让运营人员做噩梦。从备份中恢复绝对是最后的手段。

当今的世界是关于业务连续性的。应用程序需要在任何时候都可用，几乎不中断运营。

硬性要求是能够故障转移到另一个提供商，这可能是另一个公共云供应商或另一个内部目的地。

## 数据存储带来了不同

所以，现在要选择一个数据存储。外面有这么多，你怎么做决定？

以下列表概述了我们根据与客户的数百次讨论得出的建议，每个客户的目标、资源和能力稍有不同:

### 避免应用程序锁定

供应商锁定从定义上限制了您的选择，并包含了备份和恢复战略的架构。避免它，不是不惜一切代价，而是几乎不惜一切代价。供应商锁定要求您将应用程序保留在单一供应商平台(公共或私有)上，并消除了跨云故障转移的选项。您的应用程序工作负载需要是可移植的——换句话说，确保它建立在事实上的行业标准 API 之上。当事情进展顺利时，人们很容易变得自满，但这是投资解决问题的时候。

历史上充满了这样的例子。

### 避免云锁定

从一个供应商迁移到另一个供应商很困难，但迁移到另一个数据中心更困难，无论是私有云还是公共云。即使您不想切换，而只想添加另一个云，这也同样具有挑战性。

现在是时候重新审视你的应用程序，为不可避免的事情做准备了。这可能需要能够在竞争对手的云上运行，或者在内部运行相同的工作负载。不管怎样，最初的基础是 S3 和库伯内特。虽然 S3 需要成为你的起点，但 Kubernetes 将使它无缝衔接。发展这些肌肉。

### 提升硬件灵活性

考虑到锁定的业务连续性总是会产生硬件异构性。这意味着选择一个可以跨基础架构无缝运行的数据存储，无论是在服务提供商、托管和/或本地数据中心。这还要求能够移动依赖于多种驱动器类型(包括 NVMe、SDD 和硬盘)的工作负载。在这里，对象存储的优势再次超越了商用硬件。擦除编码将 HDFS 等传统商店的驱动器数量减少了至少 50%，而不牺牲任何可用性。

### 打造整体便携性

当应用程序移动时，数据存储不是堆栈中唯一需要移动的项目。

应用程序的可移植性始于容器化。您的工作负载应该完全在容器内部运行。是的，您需要持久性，但是通过在容器中拥有完整的应用程序堆栈，包括存储，可移植性变得非常容易管理。

### 选择轻便快速的

根据定义，可移植的应用程序是轻量级的。例如 MinIO 大约 100MB，其中一半是图形控制台。这意味着它可以像 Redis 或 Elastic 一样适应用户空间。轻量也快。不总是这样，但在极简设计中是这样的。通过更少的妥协和 CPU 级优化，您可以继承在更多地方运行更多工作负载的能力。

### 可扩展性设计

您的数据将会增长。重要的是，您的存储性能要相应地扩展。对象存储的可伸缩性属性是众所周知的，并且没有任何性能下降。恢复到另一个位置的能力，甚至是 Pb 级的能力，是设计良好的实施的基准。

### 努力提高运营效率

拥有出色的开发经验只是战斗的 10%左右。剩下的就是管理和操作生产环境。

消费者应用程序如此受欢迎的原因是因为它们易于使用。那么，为什么企业应用程序如此具有挑战性呢？这是因为让事情变得简单实际上是相当复杂的。

大多数开发运维团队将大部分时间花在管理数据存储上。他们真正想要的是:

*   一些简单的东西，他们可以设置和忘记。
*   为高级用户提供命令行界面(CLI)并实现自动化的东西。
*   支持标准 API 的东西，这样应用程序可以自然地与特殊的连接器交互。
*   它还有一个图形用户界面，允许执行临时任务，并使新的和初级资源能够快速增加。
*   具有开箱即用的监控功能。
*   易于与其他企业身份和访问管理以及监控工具集成。
*   它具有通知功能，可以与流行的端点进行即时集成，但可以轻松扩展。

如果您想要云中的业务连续性，请设计操作简单性。

### 通过多云复制确保业务连续性

数据需要跨云可用。就可用性和连续性而言，这是问题的核心。

让我们从简单的东西开始。你必须能够很容易地复制桶。这是赌桌。但是，您应该能够复制到任何兼容的对象存储。这就是标准接口的不同之处。对于简单的东西，你不应该被锁在里面。

但是，要真正实现业务连续性，您需要站点或群集复制。您应该能够设置主动-主动或主动-被动配置。你不应该局限于拥有两份拷贝。您应该能够根据业务需求复制到任意多个站点。而且应该是相同的过程——简单且一致。

您还应该能够建立一个与您的业务需求相联系的复制策略。您应该能够选择优先级是跨群集的实时可用性还是写入性能。前者要求保证对象作为单个同步操作在所有集群上持久化，否则写操作将返回失败。在后一种情况下，保证对象被持久化到主数据存储，并且操作被排队等待异步复制到所有其他集群。

## 摘要

现代企业没有休息日。真正的数据可用性确保 it 不必如此。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>