# 蜂巢 CEO 慈善专业分享客户痛苦

> 原文：<https://thenewstack.io/honeycomb-ceo-charity-majors-on-sharing-customer-pain/>

[旗语](https://semaphoreci.com/)赞助本帖，由[旗语 CI/CD](https://semaphoreci.com/) 平台为您带来。

 [沃伊泰克·奇乔

沃伊泰克正在 Semaphore 把营销和客户关系联系起来。在职业上，他喜欢与现代技术的创造者和动摇者密切合作。在业余时间，他写并表演口语诗。](https://semaphoreci.com/) 

[Charity Majors](https://twitter.com/mipsytipsy) 是 [Honeycomb](https://www.honeycomb.io/) 的首席执行官和联合创始人，Honeycomb 是软件工程师在生产系统上探索代码的工具。在共同创立 Honeycomb 之前，梅杰斯在脸书担任生产工程经理，是 Parse 的第一位基础设施工程师，还在林登实验室担任了几年的操作和数据库工程师，从事支持第二人生的基础设施工作

在这次采访中，我和 Majors 谈到了让开发人员随叫随到的重要性，可观察性驱动开发的概念以及团队中的软件所有权。

**你总是强调你来自“运营”领域，而不是“开发”领域。在你的一次谈话中，你提到“软件工程师花了太多时间在精心伪造的环境中查看代码，而没有足够的时间在真实世界中观察它。”另一方面，运营人员需要处理真正的停机和错误，但是他们不能真正拥有从开发人员那里得到的东西。你在扩展软件和领导团队方面有很多经验——那么你对在开发和运营团队中培养软件所有权的最佳实践有什么建议？**

有几个核心原则需要掌握:之后，您可以在实现细节上随心所欲地创新。首先，您需要授权您的工程师拥有他们代码的整个生命周期。这意味着每个编写代码的人都必须能够部署和回滚他们的代码，并且能够在生产环境中实时观察和调试他们的代码(通过他们的工具)。第二，你必须努力调整激励机制，以便行动或变革的任何影响或后果都能够在行动或变革后尽快由实施行动或变革的人首先体验到。

如果你仔细想想，原因很明显。做出改变或采取行动的人确切地知道他们刚刚做了什么或交付了什么，以及为什么，并且应该对预期的改变有一个好的心理模型。这在他们的头脑中会保持几秒或几分钟的新鲜，但很快就会消失。几个小时后，他们会比那些头脑中没有这个模型的队友多一点点线索。几天后，它不见了。完全不熟悉代码的人(例如，您的运营团队)可能更不知道变更是什么以及应该发生什么。因此，发现意想不到的后果或错误的最佳时间是在它发布后的第一天，而发现它的最佳人是编写它的人 T2。从那以后，一切都在走下坡路。

我们都挖出过我们意识到几个月前一定运出的虫子，没人知道为什么。如果工程师们在每次部署时，利用他们的肌肉记忆去查看并比较实际发生的情况和他们预期会发生的情况，会节省多少时间呢？

第二部分的强力实现也是最好的:让你的软件工程师为他们自己的代码待命。他们都需要学会体验后果。小小的痛苦是大自然最伟大的老师；这是你如何发展良好的直觉和建立反射。

你碰了一个炉子，它烧伤了你的手指，你不想再碰它了。你提出了一个你觉得不确定的问题，你的寻呼机响了——同样的事情。通过将自己暴露于因果过程的结果部分，你正在发展你的直觉肌肉。从来不把自己暴露在这些系统之外的开发人员对现实世界的影响是出了名的无知，这是很危险的。

当我两三年前开始谈论这个的时候，每个人都像这样，“哦，你不能让软件工程师随叫随到。他们会退出的！”有些人可能会，但好的人不会。我们别无选择。我们的系统已经变得如此庞大和复杂，如果你让一个人编写和部署代码，然后让另一个人为它的错误被传呼并试图调试它，这可能需要*几天。这实际上是不可能的。向用户提供高质量体验的最佳途径是你能够迅速发现问题。因此，您需要构建这些紧密、良性的反馈循环，让编写代码的人能够在产品中实时观察它，并修复他们自己的错误。但是，如果我们要让每个人都随叫随到，我们就要对轮流值班的人负责——随叫随到一定不能糟糕。你不得不定期地计划或牺牲睡眠、健康或个人生活，这不可能是严重影响生活的事情。*

行动组的人有自虐行为的可怕历史。我完全理解为什么软件工程师对被要求加入随叫随到的操作人员感到不安。但答案不是让两倍多的人痛苦和失眠——而是利用良性反馈循环，让这个系统对每个人都更公平、更好。

没有人应该忍受那种糟糕的随叫随到的轮换。我现在 30 多岁了，我也不能再那样做了——但是没有人应该这样做。系统不一定是那样的。他们只有在年复一年地陷入这种可怕的状态后才会变成这样，在这种状态下，没有人有背景或有权解决真正的问题，所以每个人都只是用他们拥有的任何工具进行管道胶带和猴子修补，而你们都只是试图将自己的手塞进漏洞。这不是“修复”任何东西，我不希望任何人忍受这种待遇——无论是开发人员还是运营人员。保持你的系统整洁有序，易于理解，当它变得麻烦时，偿还技术债务。利用 SLA 并设计您的系统，使其在大多数类型的故障下都能正常降级。无情地删除警报。如果有人被吵醒——无论如何——并且事后检查，就认为这是紧急情况。

所以这不仅仅是开发和运营团队之间的“对话”和沟通？

![](img/f046c8e978501fd4ee23b73166899559.png)

慈善专业

除非你付诸行动，否则光说不做。不，我说的是现实世界的因果机器，驱动人类行为的动机和后果。我们通过重复养成习惯，当我们感到痛苦时就改变它们。疼痛不一定是难以忍受的…只是这里或那里的针刺。你不必把手指放在热炉子上来学习课程。这种反馈循环正是我们想要的。我们希望让人们接触到足够多的负面后果，让他们很快学会做什么和不做什么，随着时间的推移，这将形成对他们系统的丰富直觉。

**但这也包括双方额外的学习时间，对吗？**

当然，绝对的。这就是为什么经理们有绝对的责任记住运营工作和基础设施工作和功能工作一样“真实”，技能组合一样困难和有价值。你知道，可靠性不仅仅是放在沙发垫上的东西，在各种功能之间——你必须投入真正的专注、学习和发展。

你的行动人员是你最好的盟友和资源，如果你足够幸运的话。如果你正在学习可操作性，他们通常很乐意提供帮助，因为他们很高兴看到你对他们的领域感兴趣。每个人都与此有关:经理、主管、产品人员、运营和开发人员。

在你的一次谈话中，你提到“系统的健康状况并不能告诉你很多关于请求的健康状况”，你建议“只要对你来说有商业意义，就在质量上投资。”当我们把这两者加在一起时，我们可能会说，就软件的用途而言，你真的是以用户和业务为中心的。不仅仅是软件和基础设施本身。 **你是否认为如今，随着软件部署和维护的多层化，我们过于关注工具而不是软件的结果和目的？**

我一次又一次地从我们的[ [蜂巢](https://www.honeycomb.io/)]用户那里听到的是，“所有供应商总是承诺的事情，你们这些家伙实际上都做了。”人们已经习惯了被小贩欺骗。供应商会当面坚持说，你只需“投入几十万美元，就能得到一个可靠的系统。”

事情永远不会是这样的。魔术永远是哑巴，是最小公约数；使工具强大的东西被锁在你的大脑里。永远对魔法保持怀疑；总是好得不像真的。

作为应用程序开发人员，系统的健康与您无关。您不关心是否有三分之一的基础架构在技术上出现故障，您关心的只是“我的代码能执行吗？每个请求都能成功吗？”理解基础设施不是你的工作。您的工作只是处理请求级别的事情，如超时或重试。

人们总是被大量的 9 所困扰，但是 9 对你的客户来说并不重要。你可以拥有五个 9 的可靠性，但仍然会有客户对你的产品不满意。你也可以只有两个 9 的可靠性，拥有非常满意的客户。关键是要理解你的用例，你的需求，并为你的用户体验设定一个合理的 SLO。质量、延迟、错误率是用户快乐的粗略代表，但它们与用户快乐不是一回事——这是一个重要的区别。如果您不必关心高可用性，您就不应该关心，因为这会增加成本和复杂性。尽可能少的去关心那些你绝对需要关心的事情，因为关心是很难的。

软件栈目前完全是一场灾难，我在这里不是为此找借口。忽略一个闪亮的新工具，取而代之的是，使用你能想到的最简单、最知名的东西，并尝试重用工具，而不是引入新工具。让软件服务于目的，而不是相反。

**但是你认为现在还缺少工具创意吗？**

当然了。我们将需要一个工具来帮助我们跟踪我们所有的工具，不是吗？开玩笑，但只是一种。世界在变化，总是需要新的工具。现在有一个有趣的转变，转向一个系统生态系统，其中最突出的事实是它们的分布性，这需要一种全新的生活方式。

这是暴露现有监控和度量以及日志解决方案中的漏洞的一部分，并推动了对可观察性的更新理念的需求。可观察性是指从事件的角度检测和构建一个世界的视图，所以你可以推理这些巨大的分散的分布式系统的内部，而不必登录或运行 **ssh** 或**strace**——你可以简单地从外部询问，并了解内部发生了什么。对于一个你需要问的大多数问题都是新问题和未知的世界来说，这很关键。你的仪表盘只会回答你预先预测、预先汇总和配置的问题，而你需要不断地询问关于未知的全新问题。

Honeycomb 是这一次的第一个工具，完全是分布式系统的原生产品，存在于可观察性世界观中。许多技术上的分支都是从这个可观测性的技术定义中衍生出来的。您必须拥有任意宽度和结构化的事件，并且必须能够对原始事件运行灵活的读取时聚集查询。预聚合和索引是被禁止的*——它们将你锁定在一组已知的未知数中。跟踪只是事件之上的可视化视图，因为排序是自然存在的。你将会看到更多这样的系统，因为这种方法比传统监控更友好、更简单、更强大。*

 *当我们创办这家公司时，我们一遍又一遍地被告知这是一个已经解决的问题，在这个领域没有什么新的东西要做，一切都在控制之中。我们知道这是假的，因为每个人都讨厌他们的监控工具，包括我们——你不会讨厌一个工作出色的工具。现在，你看看这个空间，每个人都在模仿我们的语言，声称他们也有可观察性，他们正在追踪特征，进行收购，试图建立我们开始的单一真理来源:原始的任意广泛的结构化事件，通过有序化获得痕迹意识。

我不是什么杰出的天才。我在脸书，开始大规模应用它的工具来解决我们在 Parse 平台上的问题，我看到它每天都在为我们带来变革。它大大减少了我们调试问题的时间。像谷歌和脸书这样的公司曾经领先我和你这样的人好几光年，但这种差距正在像岩石一样下降。越来越多的人在开发过程中越来越早地遇到了分布式系统的问题。

你提到了这两个经营规模非常大的大品牌。你认为会有越来越多的公司需要解决谷歌和 Facebooks 所面临的问题吗？

是的，我知道，因为分布式系统的复杂性是越来越多的系统的最显著特征，这种情况在公司发展的越来越早的时候发生，当它们越来越小的时候。这些范例在产品方面响应了实际需求，但是它们在基础设施方面制造了许多复杂性和债务。我们只是需要更好的工具来处理它。

**你关注可观察性和可观察系统带来的商业价值。你提到了一个叫做奇数的概念。我知道这是为了好玩，但是如果我们能更仔细地看看这个:可观察性在软件开发周期中什么时候开始？怎么才能嵌入进去呢？**

我开始说它是一个笑话，但后来我注意到越来越多的人开始谈论可观察性，并就此写文章。我认为这反映了一种真正的需求。例如，单元测试在你的笔记本电脑上运行，就这样。有太多的东西他们不测试也无法测试，比如网络跳数、部分降级、第三方服务等等。当他们运行时，没有人对他们的测试有足够的可观察性或监控，所以他们没有发现。这是一件非常微小的事情，我们只需要尽可能早地将工具、流程和技术与生产环境互动。我们只需要放弃对代码的这种控制感，接受有太多我们不知道或不理解的东西，我们所能做的就是把它放在现实环境中观察它。

可观察性驱动的开发是指你永远不会接受一个拉请求，除非你能回答这个问题:“我怎么知道这是否可以？”从你第一次写代码的那一刻起，它就加入了一个可操作的上下文和意义。测量两次，切割一次。使用可观察性来决定一个东西是否值得制造，你是否装运了你认为你装运的东西，并在每一步和每一阶段验证你对生产的假设和猜测。

在你题为“[发货软件不应该可怕](https://charity.wtf/2018/08/19/shipping-software-should-not-be-scary/)”的博文中，你写道:“部署软件是你拥有的最重要的软件！换句话说，让部署工具成为您的技术工具集的一等公民。”在 [Semaphore](https://semaphoreci.com) ,我们从客户那里得到了很多反馈，告诉他们如何快速、灵活地进行 CI/CD。另一方面，我见过一些公司在周五手动完成每月一次的部署。你认为是什么阻碍了公司对软件的运输和维护进行适当的投资？是文化的问题吗？他们手头有多少时间？或者过于关注软件特性对业务的贡献，而不是软件可靠性的贡献？

这是运营的本质:你如何向你的用户提供价值。它是你的软件团队的心脏。如果你不发货，你写什么都没用——它就在某个地方；这对你的笔记本电脑没有任何好处。我真的很喜欢 Jez Humble、Gene Kim 和 Nicole Forsgren 的书 [" [Accelerate:精益软件和 DevOps 的科学:构建和扩展高性能技术组织](https://www.amazon.com/Accelerate-Software-Performing-Technology-Organizations/dp/1942788339)]，这本书表明速度和你的运输代码的错误是相互加强的。速度越快，错误越少。工程团队和工程师有太多的功能障碍，你可以通过润滑车轮和让每个人更快地行动来解决；但是没有自信是做不到的。现在，人们用他们没有收到传呼的时间来代表信心——因为这是他们所能得到的最好的。所以你自然不会想把一堆东西直直的运过去，因为你还没有得到足够的时间对它有信心。如果你有其他获得自信的方法，如果你能看看你知道你改变了什么，并与旧的方法进行比较，那么你会获得更多的自信来保持马达运转。

**如何在行业内增加这种意识？**

它始于向人们展示他们的痛苦是可以解决的。它在画连接。外面的每个人都会坐在那里，喋喋不休地谈论所有这些关于他们工作的恼人的事情，然后你只需要向他们展示什么可以通过什么来解决。你必须一遍又一遍地讲述这个故事，你必须让其他人也讲述这个故事，因为每个人都会对一个不同的故事产生共鸣。我不是一个非常抽象的思想家。除非你说得很具体，否则我不懂，所以我是个讲故事的大粉丝。

**你对随叫随到很了解，但对“无服务器”这个词却有一种模棱两可的感觉，所以我忍不住问你这个问题:当你运行一个无服务器的基础设施时，谁应该随叫随到？**

你总是对你的软件的可用性负责。你可以试着把责任推给其他人，但那是行不通的。我说了算，就算亚马逊倒下了。这实际上是让人们意识到操作与堆栈中的任何位置无关。这是责任的问题。这是关于责任是运输软件的“如何”。如果你在卖软件，你就做运营。这有很多不同的表现形式，但我认为过于纠缠于细节会分散人们的注意力，因为如果你在发布软件，你应该尊重运营。你应该对它有足够的了解，让你的用户开心，而且随时待命不应该是痛苦的——不应该影响生活。

我从 17 岁开始就随叫随到。现在在蜂巢，我们没有专门的操作人员。我们有两个有操作背景的人，但是他们现在运送产品，他们只是提供咨询，他们帮助所有其他工程师跟上速度。我们有一个轮岗，所有的工程师都参加，每个季度没有人被叫醒超过一次，我们发展得非常快。

**也许这是一种同理心驱动的事情，只要开发者与客户有更多的直接接触？**

没错——这是一件大事，这就是为什么开发人员需要随叫随到。

我们现在已经完成了一个完整的循环。

是的——我们又回到了起点，我喜欢这样。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>*