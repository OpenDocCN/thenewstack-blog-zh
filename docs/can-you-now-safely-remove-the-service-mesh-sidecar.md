# 你现在可以安全地移除服务网边车了吗？

> 原文：<https://thenewstack.io/can-you-now-safely-remove-the-service-mesh-sidecar/>

服务网格已经成为管理容器、虚拟机和 Kubernetes 环境的基础层。没有它，可观察性和监控、日志记录、路由，当然还有安全性将比现在更加困难。边车是服务网络的关键组成部分。它将微服务连接到不同的分布式容器和虚拟机，或者更准确地说，将微服务互连到不同的分布式容器和虚拟机。它还通过服务网格为连接 Kubernetes 环境中的微服务提供关键功能，在许多方面充当网关。

但是，如果我们能够消除服务网络中的边车，会怎么样呢？更重要的是，你为什么要这么做？

[Solo.io](https://www.solo.io/) 和谷歌推出了 Istio Ambient Mesh，公司代表称这是业内首个提供边车或无边车架构的服务网格。

对于 [Istio](https://thenewstack.io/solo-io-istio-is-winning-the-service-mesh-war/) 来说，服务网络的边车组件多年来一直工作得非常好， [Idit Levine，](https://www.linkedin.com/in/iditlevine/)solo . io 的创始人兼首席执行官——Istio 的主要工具提供商——告诉新堆栈。然而，Solo.io 一直在寻找方法来改善服务网和边车的结构。事实证明，谷歌也在做同样的事情。Levine 说:“我们基本上都在试图找出如何让 Istio 更容易使用，甚至更安全一点，”同时提供相同的功能，但同时解决用户遇到的一些困难。

莱文说，在过去的六个月左右的时间里，Solo.io 和谷歌一直在合作开发“下一个版本的 Istio，我们相信这将是未来的发展方向”。

除了降低运营团队使用 Kubernetes 服务网格的复杂性之外，消除边车一直是改善连接、降低延迟和节省成本的一种方法。然而，“你可以做到这一点的方法是有限的，而且仍然是安全的，” [Louis Ryan](https://www.linkedin.com/in/louis-ryan-2a8408/) ，谷歌云[首席工程师](https://thenewstack.io/google-cloud-stops-monster-ddos-attack/)告诉新的堆栈。“我们所做的是找到一种方法来做到这一点，同时以一种真正重要和有意义的方式保持服务的所有最佳安全属性。我们不认为边车有什么固有的问题，但它们确实代表了操作上的挑战。”

然而，[企业管理协会(EMA)](https://www.enterprisemanagement.com/) 的分析师 Torsten Volk 在一封电子邮件回复中告诉新堆栈，这并不是第一次尝试提供无边车服务网络。沃尔克说，一种新的架构，其中侧柜是可选的，取决于用例的具体要求，也刚刚与[纤毛](https://cilium.io/)一起可用，用于集装箱网络和安全。Cilium 使用 Kubernetes 定制资源通过 Linux 内核直接编程代理。沃尔克说，Linkerd“走了一条不同的路线”,只使用 Kubernetes 控制平面进行服务发现，但依赖于独立的基于 sidecar 的代理来运行。

Istio 环境网格与基于边车的 Istio 部署完全兼容，边车或无边车部署都由 Istio 控制平面管理。solo.io 和谷歌表示，随着环境网格的增强，Istio 成为“第一个服务网格”，以一致的控制平面提供两种模式。此外，Solo.io 和谷歌表示，有了 Istio Ambient Mesh，整个服务网格上的平台或策略管理功能不会丢失，特定于应用程序的安全性和应用程序卸载功能不会丢失，应用程序或基础架构团队也不需要立即学习新的编程语言。

Solo.io 和谷歌能够做到这一点，是因为 sidecar 在服务周围创建了一个安全边界，确保对进出服务的流量执行策略，”谷歌的瑞安在一封电子邮件回复中写道。挑战在于保持相同的边界，同时将这些策略的复杂性放入网络中，以便使 sidecar 远程化。Ryan 说:“通过在 L4 引入强大的零信任网络，我们可以通过强制所有流量在到达服务之前经过一个路点代理(远程边车)来维持工作负载的边界。

Volk 同意 Istio sidecar less 版本有可能保持安全性，但他表示，警告仍然存在，例如当特定情况下可能会发生潜在的“嘈杂的邻居”问题，因为 CPU 密集型应用程序工作负载集在同一节点或集群上相遇，需要 Kubernetes 调度程序“在不知道应用哪个应用程序策略的情况下”做出扩展决策，Volk 说。经验不足的用户可能会引入配置错误，从而导致与缺乏流量分离相关的合规性问题。“此外，如果出现故障，多个应用程序可能会受到影响，”Volk 说。对于依赖于运行时注入自定义代码的应用程序来说，仍然需要 Sidecars，例如，完成事件触发的配置更改或实施特定于上下文的安全要求

![](img/80fa6adcfc3f64d015030e2a410150ff.png)

Solo.io 和谷歌表示，Istio 环境网格将在三个方面改善 Istio 用户的整体体验:

*   该公司表示，启用无侧柜架构，将代理功能从 pod 级移动到节点级，以提高整体应用程序性能，并将计算和内存开销减少 10 至 20 倍。
*   提高应用程序的透明度，以简化操作，促进系统升级和新应用程序部署到网格中。
*   一个新的可选安全元素 PEP(“策略执行点”)的可用性，该公司表示提供第 7 层安全检查。

## 允许边车

如上所述，用户还可以选择在边车模式下使用 Istio 服务网格，因为有一个公共控制平面可以用于边车或环境模式。Solo.io 产品营销战略负责人布莱恩·格雷斯利(Brian grace ly)在一封电子邮件回复中说:“这给整体环境带来了一致性。“我们允许在每个群集或每个命名空间的基础上部署 sidecar 或 Ambient 模式，因此用户可以将体系结构与其应用程序需求最好地匹配起来。”

Gracely 解释说，出于安全和/或合规性原因，一家受监管的公司可能更喜欢在数据路径的任何地方都不能有任何共享资源(如代理)的一组应用程序使用 sidecar 模式。“但他们也可能有一套应用程序(如营销应用程序)，可以使用环境模式，没有任何问题，”格雷斯利说。其他服务网格提供 sidecars 或 sidecars-less，它们通常会根据您选择的数据平面让您自带控制平面(如果它们支持多种模式)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>