# 数据库和 Kubernetes:采用分布式思维

> 原文：<https://thenewstack.io/databases-and-kubernetes-adopting-a-distributed-mindset/>

根据定义，云原生系统是分布式的——但是根据本期播客嘉宾的说法，要在其上安全有效地运行[数据库](https://thenewstack.io/category/data/),需要的不仅仅是有针对性的技术，还有思维的转变。

在这一集的 New Stack Makers 播客中，蟑螂实验室的首席产品宣传员吉姆·沃克和高级技术内容经理米歇尔·吉诺(Michelle Gienow)讨论了分布式系统如何给数据库带来新的挑战，在 Kubernetes 上有效运行数据库所需的范式转变，以及对 Kubernetes 用户的新调查结果。

该播客由《新堆栈》的特写编辑希瑟·乔斯林主持。

[数据库和 Kubernetes:采用分布式思维](https://thenewstack.simplecast.com/episodes/databases-and-kubernetes-adopting-a-distributed-mindset)

根据 Walker 的说法，本质上，在当前的云原生生态系统中，数据库有三种使用方式。首先，有一种“提升和转移”类型，其中数据库运行在一个容器和一个服务上，这是一种与遗留系统最接近的用例。

接下来是“移动和改进”，这是一种从过去遗留下来的方法。这些解决方案采用了遗留数据库系统的一层，并按照云原生原则对其进行了改造。在这些情况下，最典型的是，存储层也是分布式的，并且数据分片可能是自动化的。

最后，沃克称之为“重新设计和重建”,这是蟑螂实验室和其他一些公司采用的方法。它基于从头开始重新构建数据库系统，使之成为云原生的概念。

“最大的挑战之一是，还不是每个人都认为是分布式的，”沃克说。“这些分布式原则和分布式思维有助于人们理解云原生的真正价值。”

文化变革的挑战阻碍了许多组织进行云原生转型，也适用于数据库，Gienow 回应道。

“很多人对这项新技术感到兴奋，但随后他们会把自己对事物运行方式的假设以及他们一直以来的工作方式带到这项新技术中，”她说。“他们试图像这样与线性方式紧密结合，但失败了。或者如果它没有失败，他们不得不为了使用它而与自己的进程作斗争。”

她补充说，在这种情况下，“他们没有获得他们想要的利益。他们没有获得节省或速度，事情没有更快。因此，我认为，在你能够跨越那个事件视界并得到它之前，会有很多挫折。”

Kubernetes (K8s)最初并不是为有状态工作负载而建立的，有状态工作负载是一种数据丰富的应用程序，可以保存来自以前事务的信息。然而，8 月份由蟑螂实验室和 T2 红帽发布的一项研究发现，超过 200 名 IT 专业人士在 T4 的基于 Kubernetes 的系统上同时运行无状态和有状态应用。

调查显示，像 StatefulSets 这样的创新使得在 K8s 上运行有状态的工作负载变得更加容易——但是许多团队仍然在挣扎。46%的受访者认为有状态工作负载是他们在 Kubernetes 上有效设计和部署的主要挑战，这是最常提到的问题。

然而，Walker 乐观地认为[持续的创新](https://thenewstack.io/databases-operators-bring-stateful-workloads-to-kubernetes/)将使需要在 K8s 上运行数据密集型应用程序的开发人员的生活更加轻松:“随着 Kubernetes 社区的成熟，我认为事情会变得容易得多……我们需要简化所有这些东西。”

我们的客人说，这并不意味着用一个数据库解决方案来统治所有人。沃克对合并的想法不屑一顾，称之为“荒谬”

“是的，从逻辑上讲，将所有内容放入一个数据湖中进行处理可能是有意义的。从生理上来说，这毫无意义，”他说。“想象一下，一个分析查询将在全球多个不同地区运行，你真的想让它发生吗？你将会在不同云提供商之间的出口成本上被杀死。如果你真的想在不同的云提供商之间运行这个东西呢？

Gienow 补充道:“整合的整个理念与云原生的整个概念直接相反:小型自治团队运行小型松散耦合的工作负载。拥有 Kubernetes 意味着我的微服务可能需要 Postgres。你可能想要 [MongoDB](https://www.mongodb.com/cloud/atlas/?utm_content=inline-mention) 和 [Redis](https://redis.com/?utm_content=inline-mention) 。我们的一些用例需要性能。有些我们只需要 20 分钟，它们就会蒸发掉。

“理想情况下，没有什么能完成所有这些事情，所以我们确实有能力将正确的工具应用到正确的工作中，然后有这个数据网格层来为我们处理它。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>