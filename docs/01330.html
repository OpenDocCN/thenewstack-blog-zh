<html>
<head>
<title>GitHub Dumps REST Calls for Facebook's GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub转储脸书GraphQL的REST调用</h1>
<blockquote>原文：<a href="https://thenewstack.io/github-dumps-rest-graphql-api/#0001-01-01">https://thenewstack.io/github-dumps-rest-graphql-api/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p/><div id="attachment_1473618" class="wp-caption alignright"><img aria-describedby="caption-attachment-1473618" decoding="async" loading="lazy" class="size-medium wp-image-1473618" src="../Images/b3617fe298f6bda9c3483e2714da04d6.png" alt="The GraphQL data map" data-original-src="https://thenewstack.io/wp-content/uploads/2016/09/Screen-Shot-2016-09-27-at-6.34.16-PM-300x264.png"/><p id="caption-attachment-1473618" class="wp-caption-text">`</p></div>
<p class="translated">为了简化网站的远程查询服务，GitHub正在将其API(应用程序编程接口)从REST调用转移到脸书的GraphQL API。</p>
<p class="translated">在该公司最近的用户大会上，GitHub平台工程经理<a href="https://www.linkedin.com/in/kyledaigle" target="_blank" rel="noopener noreferrer external " class="ext-link"> Kyle Daigle </a>解释说，该公司在扩展其基于REST的服务时遇到了一些问题，给关注预算的开发人员和管理人员带来了很多痛苦。</p>
<p class="translated">自从第一个用户向GitHub提交代码以来，该公司在过去的九年里呈指数级增长。据GitHub首席执行官兼联合创始人克里斯·万斯特拉斯称，现在<a href="https://octoverse.github.com" target="_blank" rel="noopener noreferrer external " class="ext-link">每天有超过10，000名新用户</a>提交他们的第一个代码。</p>
<h2 class="translated">REST API</h2>
<p class="translated">根据一篇宣布切换的博客，REST API负责GitHub数据库层60%以上的请求。这部分是因为，就其本质而言，超媒体导航需要客户机反复与服务器通信，这样它才能获得所需的所有信息。</p>
<p class="translated">用REST检索请求的数据可能需要多次API调用，尤其是在移动应用程序上。那很贵。因此，设计团队正在寻找一种方法来获得更细粒度的数据回报。</p>
<p class="translated">第二个问题变得很明显，因为该公司的服务扩展到满足其需求，超过600万用户拥有25万个应用程序。REST API没有提供他们需要的功能，包括保证用户提供的参数的类型安全，生成客户端补丁，以及为他们的代码生成文档。</p>
<p class="translated">此外，Daigle解释说，当有必要对REST API进行更改时，他们发现很难知道谁会受到影响，从而导致不必要的后果。</p>
<h2 class="translated">测试</h2>
<p class="translated">稍微调查一下就发现有很多可用的工具。他们认为一个好的测试项目应该是在评论上实现表情符号反应。Daigle说，“一两个人花了一两周的时间”来创建一个概念证明，用于评估工具。</p>
<div id="attachment_1473621" class="wp-caption aligncenter"><img aria-describedby="caption-attachment-1473621" decoding="async" loading="lazy" class="wp-image-1473621 size-large" src="../Images/b8f18c8bf5297a36f08e5bbaef49fa18.png" alt="GraphQL uses object-oriented programing to target data requests and reduce calls to the server. " data-original-src="https://thenewstack.io/wp-content/uploads/2016/09/Screen-Shot-2016-09-27-at-6.37.56-PM-1024x568.png"/><p id="caption-attachment-1473621" class="wp-caption-text translated">GraphQL使用面向对象编程来定位数据请求并减少对服务器的调用。</p></div>
<p class="translated">他们发现的工具之一是GraphQL，这是脸书在2012年开发的，用来解决自己的移动应用问题。<a href="https://twitter.com/dlschafer" class="ext-link" rel="external ">脸书软件工程师、GraphQL的联合创始人丹·斯查费</a>表示，该团队摒弃了旧的顺序检索数据的方式，创建了一个新的地图，展示了他们希望如何在粒度级别上使用数据。</p>
<p class="translated">通过在您的代码中定义对象，您可以发出一个请求来获取您的前三个存储库的名称、它们的星号总数、分叉数、观察器数和开放问题数。</p>
<p class="translated">GraphQL查询代码:<br/></p>
<div id="crayon-6422cecacaf90157490507" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<pre>{
 
<span class="crayon-h"> </span><span class="crayon-e">viewer</span><span class="crayon-h"> </span>{
<span class="crayon-h">    </span><span class="crayon-e">login</span>
<span class="crayon-e">    </span><span class="crayon-e">bio</span>
<span class="crayon-e">    </span><span class="crayon-e">location</span>
<span class="crayon-e">    </span><span class="crayon-i">isBountyHunter</span>
<span class="crayon-h">         </span>}
}
</pre>
</div>
</div>

<p class="translated"><br/>返回结果:<br/></p>
<div id="crayon-6422cecacaf95574199625" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<pre>{
<span class="crayon-h"> </span><span class="crayon-s">"data"</span>:<span class="crayon-h"> </span>{
<span class="crayon-h"> </span><span class="crayon-s">"viewer"</span>:<span class="crayon-h"> </span>{
<span class="crayon-h"> </span><span class="crayon-s">"login"</span>:<span class="crayon-h"> </span><span class="crayon-s">"octocat"</span>,
<span class="crayon-h"> </span><span class="crayon-s">"bio"</span>:<span class="crayon-h"> </span><span class="crayon-s">"I've been around the world, from London to the Bay."</span>,
<span class="crayon-h"> </span><span class="crayon-s">"location"</span>:<span class="crayon-h"> </span><span class="crayon-s">"San Francisco, CA"</span>,
<span class="crayon-h"> </span><span class="crayon-s">"isBountyHunter"</span>:<span class="crayon-h"> </span><span class="crayon-i">true</span>
<span class="crayon-h"> </span>}
<span class="crayon-h"> </span>}
}
</pre>
</div>
</div>

<p class="translated"><br/>这种在粒度级别请求数据的能力将工作流从解析大量JSON blobs的限制中解放出来，实现了各种新的可能性。</p>
<p class="translated">Daigle的团队发现GraphQL文档简洁，实现服务器也很简单。来自博文:</p>
<p class="translated"><em>利用我们在支持REST API方面的经验，我们迅速实现了现有的服务，以便与GraphQL协同工作。这包括设置日志记录请求和报告异常、OAuth和AuthZ访问、速率限制以及提供有用的错误响应。我们测试了我们的模式，以确保的每个部分都有文档记录，我们编写了linters，以确保我们的命名结构是标准化的。</em></p>
<p class="translated">然后他们进行了测试。戴格尔只有一个词来形容他们的反应:哇。</p>
<h2 class="translated"><strong>实现GraphQL </strong></h2>
<p class="translated">由于GitHub是GraphQL的第一个外部商业用户，脸书与GitHub工程师密切合作推出了该产品。在前进的基础上，每个GitHub新项目都将建立在GraphQL上，该团队正在努力改造当前的功能以与GraphQL一起工作。</p>
<p class="translated">斯查费说，GraphQL令人兴奋的一部分是它给GitHub带来了很多变化。斯查费说，在过去，一旦一个特性被发布，REST API就必须被添加进去。现在，GitHub工程师正在努力将旧功能迁移到新的GraphQL API平台上。</p>
<p class="translated">Daigle解释说，新的项目功能(也在GitHub Universe上推出)是使用REST API构建的，但GitHub工程师构建了GraphQL对象，以便使未来的转换更容易。他说，GraphQL花了几个小时来构建，但REST API花了“长得多的时间”他说，他们很高兴能转向这种新的协议。</p>
<p class="translated">“我不希望这成为对REST的谴责，”Daigle说，“但我们现在有不同的需求，GraphQL可以为我们解决。”</p>
<h2 class="translated">想参与进来吗？</h2>
<p class="translated">GitHub工程师正在寻找希望参与其中的社区成员。早期接入计划现已推出，他们正在寻求集成商的反馈。Daigle警告说，这是一个测试版，可能会有错误。</p>
<p class="translated">新的GitHub社区(也在GitHub Universe上推出)将用于跟踪反馈。</p>
<p class="translated"><img decoding="async" loading="lazy" class="aligncenter wp-image-1473695 size-large" src="../Images/2d173efff731cc3d162673fbbec75dd0.png" alt="screen-shot-2016-09-27-at-6-36-06-pm" data-original-src="https://thenewstack.io/wp-content/uploads/2016/09/Screen-Shot-2016-09-27-at-6.36.06-PM-1024x577.png"/></p>
<p class="translated">GitHub工程团队还创建了两个新的开源项目来实现GraphQL:</p>


<p class="translated">哇，真的。</p>
<p class="attribution translated">专题图片:GitHub平台工程经理Kyle Daigle解释团队对他们的第一次GraphQL测试的反应。由T.C. Currie拍摄。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>