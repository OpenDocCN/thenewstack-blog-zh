# 无服务器的 12 因素应用第 5 号:构建、发布、运行

> 原文：<https://thenewstack.io/the-serverless-12-factor-app-5-build-release-run/>

Stackery 赞助了这篇文章。

*这个[系列文章](https://thenewstack.io/12-factor-app-1-why-serverless-version-control-is-critical/)探讨了我们需要做些什么来遵循一个 [12 因素 App](https://12factor.net/) 的设计需求，以便于开发和维护。请每周查看未来的分期付款。*

12 因素应用程序易于维护，更重要的是，使用起来很有趣。

好玩？

是的——作为一名程序员，工作的乐趣很大程度上来自发布工作代码。一个成功的 12 因素应用程序是这样的，它能使第一次发布在生产中工作的代码变得容易。

12 因素模型中的第五个因素是关于应用程序开发的关注点和阶段的分离。

## 动词 （verb 的缩写）构建、发布、运行:严格分离构建和运行阶段

 [托比·费

Toby 是 Stackery 的社区开发人员。她的角色和经历结合了软件工程师、作家和技术讲师的工作，用新兴工具构建有趣的项目，并与世界分享她的发现。在加入 Stackery 之前，Toby 是 NWEA、瓦卡萨和新遗迹公司的工程师。](https://www.stackery.io/) 

像前面的一些需求一样，这是一个相对难以搞砸的需求，但在使用类似亚马逊 Web 服务(AWS)控制台的东西来部署无服务器功能(Lambda)时，这并不隐含。

在无服务器的情况下，运行时的改变是完全没有意义的——你的代码会在需要的时候启动，而不是在其他时候。因此，您不需要管理启动或关闭(或重启)，所以在运行时没有什么特别的事情可以让您的代码工作。我们只需要担心构建和发布，因为那些阶段是需要人工监督的！

当您只是将代码复制粘贴到 Lambda 仪表板中时，构建和发布阶段的分离并不明显。对于 NodeJS 应用程序来说，构建并不是一个特别有意义的概念，但是即使对于其他语言来说，也没有任何独立的“构建阶段”

然而，如果您使用 AWS CloudFormation，您将明确地分离构建阶段——要运行 CloudFormation 部署，您将在一个可以有意义地回归和探索的点上“发布”代码。

## 但是有一个问题

这给我们带来了一个问题，这个问题没有在 12 因素模型中列出，但肯定会影响无服务器:在开发期间的预构建阶段，您不应该仅仅为了查看您的代码工作而执行完整的发布。

“开发”阶段在本原则涵盖的任何内容之前进行。然而，不言而喻的是，你不需要做其他三件事来第一次看到你的代码工作。

这不是 12 因素设计原则的一部分，因为在无服务器之前，这是一件“嗯，咄”的事情。当然，你需要能够破解应用程序代码。当然，您需要一个“开发”环境，它出现在阶段化和测试之前。

好吧，为什么这是无服务器的问题？这是因为无服务器需要的不仅仅是功能，所以要看到你的功能真正工作，你需要它们在云中运行

这导致了开发和发布步骤之间的混乱，开发人员进行完全部署(并等待 10 分钟！)来查看他们的代码是否工作。

为了深入了解这个问题，请看内特·塔加特和萨姆·戈尔茨坦在 Stackery 博客上对开发者工作循环的探索。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>