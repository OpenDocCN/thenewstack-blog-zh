# Atlassian 利用脸书对网络改革的反应和想法重建 HipChat

> 原文：<https://thenewstack.io/atlassian-rebuilds-hipchat-using-facebooks-react-idea-web-reform/>

回想起来，“React”可能是脸书创新的页面渲染库的一个不恰当的名字。在短短一年多的时间里，它被证明是 Web 开发人员武库中最积极的补充，改变了整个 JavaScript 项目被考虑和规划的方式。

反应如何的最新迹象。JS(现在一般称为“React”)正在重新定义 Web 项目开发，它来自 Atlassian。它在 2012 年 3 月收购了社交协作应用 HipChat，此后的大部分时间里，它都让开发人员专注于更新其移动应用。Web 版本一直萎靡不振，直到几个月前，开发团队意识到 React 不仅可以让他们从头开始，还可以在几天内构建一个全新的 Web 应用原型。

“反应真的很简单。Atlassian 开发者 Rich Manalang 周二在他公司的博客中写道:“公共 API 可以在一天内记住。“一旦您构建了第一个组件，就很容易构建下一个组件，并确信它会正常工作。”

## 观点的改变

当[脸书的开发商去年推出全球](https://thenewstack.io/javascripts-history-and-how-it-led-to-reactjs/)时做出了反应。JS，他们立刻受到了网络社区派系的抨击。有些是因为在 JavaScript 中使用 HTML 代码作为标记，但大部分是因为公然违反了 MVC 架构的原则。反对者说，如果你改变了一个模型所基于的数据，你必须对其相应的视图进行修改。视图必须保持最新。

这个原则对于运行在服务器上的本地应用程序来说非常有意义。但是当它在网络上运行时，它不能扩展。

React 最初的目标是克服这个规模问题，数据模型可以被数万个同时输入有效地改变。与其他框架不同，React 不会生成客户端 AJAX 代码来实时重新呈现每个微小的变化，而是在页面的服务器呈现和客户端呈现之间生成一个抽象层。对模型的更改反映在服务器端，但只有两个渲染之间的差异被发送到客户端。

脸书现在表示，这种抽象将网络渲染的计算复杂度降低了两个数量级，从矩阵乘法问题 **O(n ³ )** 到加法问题**θ(n)**。就像近年来网络服务提供商的某些创新一样，开发人员发现 React 实际上可以解决一个比最初设计时更大的问题:网络应用和本地应用之间的功能差异。

## 陈述命令

原生应用是更好的应用。至少这是越来越多越来越少使用浏览器的移动平台用户的看法。原生应用只是更流畅。他们对用户输入的反应更快。它们包含用户可以像触摸有形物体一样触摸和操作的视觉元素。用户不必像 20 世纪 80 年代的会计应用程序那样浏览这些元素。

HipChat 的开发者从 2012 年春天就知道，他们必须整合新母公司的设计指令。正如 Manalang 所说，他的团队已经研究了使用 jQuery 重写 HipChat 现有客户端代码的前景，并得出结论，他们冒着“使现有 Web 客户端实际上变得更差而不是更好”的严重风险。

Manalang 说，吸引他们做出反应的是其服务器端的文档对象模型的内部呈现。

“大多数网络应用程序遭受的最昂贵的操作是改变 DOM，”他写道。React 的方法是维护 DOM 的虚拟表示，这允许它计算 DOM 中的差异，以便它只改变 DOM 中实际需要更新的部分。这是巨大的利益！”

尽管脸书在早期强调 React 坚持 JavaScript 是一种美德，但事实是，它有些不同。事实上，它包含了一种被称为 JSX 的标记语法(之前被反对者嘲笑的部分)，类似于一种嵌入式 XML，但实际上是重新编译成更纯粹、更长形式的 JavaScript。

这种差异使开发人员能够实现声明性代码，这是一种在 Web 出现之前更占主导地位的编程风格，它与为移动应用程序构建本机代码更加并行。声明式风格指定了变化是什么，并期望底层库执行该声明。相比之下，当 Web 扎根时，命令式风格变得很普遍(有些人会说是口语化的)，对模型进行每一次变更或“突变”的指令都更加明确和迭代；并不假设任何解释器或库知道如何自己完成任务。

Atlassian 开发团队成员 Dave Elkan 在给新堆栈的一封电子邮件中说:“React 的声明式模型意味着我们总能知道给定一组特定数据的 UI 状态。“结合单向数据流的[脸书]流动模式，我们有能力创建一个组件，并通过修改底层数据来更新其用户界面。React 只是负责剩下的事情。”

命令式风格对于一些人来说可能更容易学习，然后利用，但是它根本不能很好地扩展。更重要的是，iOS、Android 和 Web 平台都希望有一个函数来呈现元素并以不同的方式利用资源，使用针对每个平台的特定需求而特别设计的明确说明的方向。

## 和其他人一起抽象网络

声明式风格更加含蓄。Manalang 说，这一优点为 Atlassian 开发跨平台可重用的组件提供了可能性。HipChat 从一开始就建立在本地平台上，这使得它的编程模型从一开始就更具声明性。正如 Atlassian 的 Elkan 告诉我们的，这一事实使他的团队能够像 Web 框架一样采用 React，而不必改变为原生应用程序创建的编程模型。

在上周的一次内部开发者大会上，[脸书宣布](https://www.youtube.com/watch?v=KVZ-P-ZI6W4)它正在创建 React Native，这是一套库，使得为 React 在网络上编写的代码更容易被重新用于 Android 和 iOS。React Native 可能会帮助其他处于 Atlassian 之外的公司调整其现有的网络平台，以适应更具声明性的模型，这种模型也更容易应用于原生应用程序。

脸书最新声明的长期影响还有待考虑。到目前为止，脸书在建立一个开源平台，在新的和令人兴奋的环境中分发应用程序方面，比其热情的支持者所希望的要成功得多。但是就在 [W3C 宣布 HTML5 已经有效完成](http://www.fierceenterprisecommunications.com/story/html5-declared-done-w3c-begins-mission-transition/2014-10-30)的四个月后，一种替代的、有吸引力的 Web 编程模式出现了，它可能会把它推到一边:一种既更容易实现又适用于 Web 之外的平台的方法。

Atlassian 的 Dave Elkan 说:“[React]不仅使我们的 Web 应用程序更加健壮，而且还大大提高了代码的可维护性和可测试性，因为只需进行一次更改，然后打包到我们的本地客户端中。“我们已经将消息面板嵌入到下一版本的原生 Windows 和 Linux 客户端中，以期将来扩展到其他地方。”

这听起来更像是一个计划，而不是反应。

通过 Flickr Creative Commons 的特色图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>