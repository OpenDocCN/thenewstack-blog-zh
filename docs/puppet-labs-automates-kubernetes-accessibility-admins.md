# Puppet Labs 为 DevOps 自动化 Kubernetes

> 原文：<https://thenewstack.io/puppet-labs-automates-kubernetes-accessibility-admins/>

一年之内可以改变这么多，即使对于企业来说也是如此。

早在二月份，Puppet Labs 首席执行官 Luke Kanies 告诉新的 Stack ,他认为 Docker 在企业中的快速采用本质上是一种错觉。“没有哪种技术能在企业中传播得如此之快。我不在乎它有多棒，”卡尼兹说。“你不会将目前生产中的数百万工作负载突然换成一个完全不同的部署包、运行时等等。”

快进近一年，Puppet Labs 发现自己正处于调整其工具以用于集装箱化环境的位置。周三，该公司宣布为 Kubernetes 发布一个模块，该模块将使编排环境能够通过木偶代码的方式进行管理。

## 程序员的傀儡

人们普遍认为 Puppet 是系统管理员用于配置管理的自动化工具，而 Chef 是为开发人员做同样工作的工具。今年早些时候，[VB Insight](http://venturebeat.com/2015/07/20/chef-is-for-developers-puppet-is-for-admins-there-thats-settled/)的一份高级报告试图将永久环氧树脂应用于这一区分，认为 Chef 使开发人员能够进行实验，而 Puppet 试图防止管理员犯错。

Puppet Labs 在英国的高级软件开发人员 Gareth Rushgrove 是 Kubernetes 支持的关键人物，他彻底颠覆了配置自动化的整个主题，有效地证明了 Puppet 应该是开发人员的选择，因为他说，“它是一种编程语言，尤其是现在，可能比几年前更是如此。”

Rushgrove 认为，在过去的几年中，Puppet 已经获得了开发人员期望从语言中获得的工具和支持的类型和水平。“我认为区别在于，它是一种声明性语言，而不是一种通用语言。但你因此可以做的事情是非常强大的，”他说。

确实有一些编程语言是声明性的，所以 Puppet 的声明性语法不应该将其排除在考虑之外。Rushgrove 解释说，声明性语法使一个操作者(由你决定是否称此人为“开发人员”)能够声明支持容器平台的系统的期望状态。从那里，插件将允许在后台对 Kubernetes 的配置进行更改。

“配置管理不仅仅是管理磁盘上的资源和文件；拉什格罗夫说:“随着时间的推移，这是高层次的管理原则。“我们的客户和用户往往是对流程更感兴趣的大型组织。我们正在努力构建工具，让他们能够从手动流程中获得他们想要的控制，而不必让这些流程是手动的。”

他说，在大型组织中，包含服务管理和配置管理的过程随着时间的推移逐渐演变，并且经常变得相当混乱。Puppet 试图承认这些过程的价值，他说这些过程获得了“许多来之不易的智慧”

但是如果任其自生自灭，组织将通过各种关口、签署和各方之间的移交来发展这些过程——可以想象，移交可以是自动化的，但是没有任何真正积极的效果。这种传输不仅在硬连接时效率低下，而且与容器编排的理想不相容。安全控制有助于组织维护正在进行的流程的所有权和授权，同时确保圆珠笔不直接参与流程。

## 面向非管理员的 Kubernetes

Rushgrove 指出:“我们通常看到的是，它不是管理员为以前他会手动完成的事情编写代码，因为它是代码，因为你有中间工件，它成为团队和小组交互的东西，而不仅仅是个人。您远离了系统管理员的个人刻板印象……通过拥有中间工件，您可以引入来自软件开发实践的东西——比如持续集成、单元测试、代码审查。你建立了一个共享的模型，一个描述这个模型的共同责任。”

该模型可以反映一个随时间推移的进化系统——不仅仅是平台的最佳固定状态，还可以反映给定特定条件下该状态的预期变化。这是在 Puppet 中通过将这些条件声明为动态变量来实现的(管理员已经知道了)。有了新的 Kubernetes 平台，这些变化可以随着时间的推移自动呈现给 Kubernetes。

值得注意的是，Kubernetes 在自己的文档中被描述为理想状态系统。“Kubernetes 建立了健壮的声明性原语，用于维护用户请求的期望状态，”其中一页写道。“我们认为这些原语是 Kubernetes 的主要附加值。自动重启、重新调度和复制容器等自我修复机制需要主动控制器，而不仅仅是命令式的协调。”

Gareth Rushgrove 认为 Kubernetes 的优势在于这些原始。在周三发表的一篇公司博客文章中，他认为 Kubernetes 对配置任务的处理毕竟没有消除对配置管理的需求。

Rushgrove 写道:“有些人将配置管理(以及像 Puppet 这样的工具)视为管理主机绑定资源(如文件、服务、包、用户或组)的一种方式。“Kubernetes 引入了更高级别的原语，如 pod 和复制控制器，旨在使分布式和可扩展系统的管理变得更加容易。据说，有了这些新的原语，您不再需要配置管理了。但是配置管理实际上是一个更广泛的学科，可以正式追溯到 20 世纪 50 年代。”

他的陈述先于一个使用 YAML 的傀儡代码的例子，合并了同样使用 YAML 的 Kubernetes 代码的相同元素。这样，任何熟悉 Kubernetes API 的人在用 Puppet 代码表达原语时，都不需要学习一种全新的表达方式。“所以你越了解 Kubernetes，”拉什格罗夫告诉我们，“你就越能使用这个模块。”

更重要的是，他认为自动化 Kubernetes 的傀儡脚本有可能被另一类用户使用——这些人不是 Kubernetes 专家，但可能只对解决短期业务问题感兴趣。作为这方面的一个例子，Rushgrove 展示了经典的 Kubernetes 留言簿示例——它生成了一个简单的、负载平衡的 Web 应用程序和服务器——被重新呈现为木偶代码，作为一种证明语法变化实际上很少的方式。

他解释说，对留言簿应用程序的简单调整将使第二类用户能够进行简单的调整，例如，对复制控制器的容器数量进行调整，而不必先咨询专家用户。“所以你的团队中有不同的人，都能够使用 Kubernetes 上的大型应用程序，但并不是所有人都必须是这方面的专家。他们只是在某种业务层面上使用你创建的界面。”

Docker 是新堆栈的赞助商。

通过 Pixabay 的特征图像

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>