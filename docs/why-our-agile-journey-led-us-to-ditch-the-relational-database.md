# 为什么我们的敏捷之旅让我们抛弃了关系数据库

> 原文：<https://thenewstack.io/why-our-agile-journey-led-us-to-ditch-the-relational-database/>

[](https://www.linkedin.com/in/jeff-needham/)

[Jeff Needham](https://www.linkedin.com/in/jeff-needham/)

[Jeff 是 MongoDB 医疗保健行业解决方案的负责人，在大大小小的组织中拥有 20 多年的 IT 经验。在加入之前，Jeff 作为 Aetna/CVS Health 的架构和架构医疗保健解决方案高级总监，负责推动 Travelers Insurance 的传统转型和传统现代化工作。](https://www.linkedin.com/in/jeff-needham/)

[](https://www.linkedin.com/in/jeff-needham/)[](https://www.linkedin.com/in/jeff-needham/)

近 170 年来，Travelers Insurance 一直是美国商业、财产和意外伤害保险的顶级承保人之一。虽然保险行业传统上有大约 20 种不同的用例，但在过去十多年里，我们见证了数据需求的演变。

作为一名高级架构师，我看到了构建功能的需求，这些功能要求我们使用静态数据，然后是动态数据，最后是消费数据。大约在同一时间，我们的董事会要求旅行者以新的方式利用技术来重新设计我们制造和销售产品的方式，以提高我们公司的生产力和效率。

显而易见，软件会减少瓶颈，这意味着我们需要更好地构建和交付软件。虽然我们认为自己是敏捷狂热者，并希望我们的团队使用微服务尽可能自给自足和独立，但我们没有在某一天醒来，突然改变。在我们最终用文档数据库替换底层关系数据库之前，我们花了几年的时间进行迭代，这将使我们能够获得使用微服务的价值，并提高我们开发人员的生产力和速度。

## **通过运营数据存储变得更加敏捷**

最初，我们的目标是为我们的经纪人构建一个单视图应用程序，当时他们正在登录一个用例所需的 12 个不同的服务。继续阻碍我们的是关系数据模型。让我解释一下。

在现代软件开发实践中，人们期望你用两三句话的业务特性来构建软件。游戏的名字是不要走得太深，要不断迭代。这与传统的瀑布方法有很大不同，在传统的瀑布方法中，在编写一行代码之前，您需要花六个月的时间来完成需求分析。对于瀑布方法，这很好，因为为了创建数据库对象，您将知道最终状态。然而，如果您遵循敏捷方法，您就无法做到这一点，因为没有办法从三句话的业务需求中构建数据模型，并且您必须不断地重做您的数据库。

我们在 2014 年推出了单视图应用程序。此时，它仍然依赖于 ETL，有一个单一的代码库以及一致的集成挑战。但是我们现在每年部署五次软件——这对我们来说很重要——而且人们看到了使用我们的应用程序带来的业务影响，在内部引起了轰动。我们意识到，为了让我们的工程团队能够交付业务目标所必需的软件，我们最终需要脱离关系数据库。

### 旅行者的 RDBMS 增长

## **再见表，你好 JSON！**

我们决定使用 MongoDB 的文档数据库完全致力于我们的内部转换。然而，为了在这一巨大变化之后取得成功，我们知道我们必须做的不仅仅是学习如何针对不同的数据库进行编程。对于一家除了关系数据库之外从未使用过任何东西的公司来说，这是一个巨大的变化。这是一项技术变革，要取得成功，旅行者还需要经历一场文化变革。

当我们的开发人员在构建软件时，我们花时间与许多其他群体的人建立关系，并在我们的旅程中带着他们。我们这样做是为了确保我们可以利用他们的专业知识，并消除噪音。我们教每个团队如何在 JSON 中建立数据模型，而不是关系数据库中僵硬的表和行。对于许多人来说，这是一次大开眼界的经历，他们现在明白了这是如何影响我们的团队将软件交付到产品中的速度的。

很快，由于我们的开发团队能够更快地将功能交付到生产中，业务产品所有者的积压工作开始减少。这验证了我们的技术选择，并开始了动力飞轮。随着我们的业务部门正在做的事情在内部传开，我们开始看到对我们的结果感兴趣的其他团队的兴趣大幅上升。

## **好了，现在微服务来了**

尽管我们的开发人员在我们的第一次发布之前对 MongoDB 毫无经验，但他们仍然能够在八周内交付生产，同时消除了 600 多行代码，时间和预算都很有限。很好，对吧？

此外，提供的反馈是，文档数据模型有助于消除繁琐的数据映射和建模工作，他们习惯于从关系数据库进行数据映射和建模。这意味着我们的开发人员可以在高优先级项目上分配更多的时间。

当我们在 2017 年夏天首次开始使用 MongoDB 时，我们有两个产品系列。一年后，已经发展到 120 个集合，部署到生产中，每天编写 1000 万个文档。现在，每个团队都能够拥有自己的依赖项，拥有自己的专用微服务和数据库，从而为应用程序和数据库更改提供单一管道。这些变化，加上没有花费在重构数据模型上的时间，使我们能够将部署时间从几小时甚至几天减少到几分钟。

## **设定未来创新的步伐**

最后，如果你在关系中做得好，你会有很多表，如果你对数据建模得当，即使是最简单的用例，你也会有很多对象。一旦我们确定我们的数据库正在减慢我们的速度，我们就知道是时候改变了。

我们最初决定从关系数据库转向实验性应用程序，最终对公司产生了深远的影响，MongoDB 成为软件开发事实上的标准。我们发现，我们真的可以拥抱精益产品思维，并让我们的开发团队成功实现我们最初的目标，即显著缩短从业务需求到生产交付的时间。

*对 JSON 中的数据建模感兴趣，但是不知道从哪里开始？查看我们的* [*白皮书*](https://www.mongodb.com/collateral/why-the-document-data-model?utm_source=the_new_stack&utm_medium=paid_media_content) *或参加我们每周一次的* [*网络研讨会系列*](https://www.mongodb.com/webinars/getting-started-webinars?utm_source=the_new_stack&utm_medium=paid_media_content) *。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>