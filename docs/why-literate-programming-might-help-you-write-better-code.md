# 为什么有文化的编程可以帮助你写出更好的代码

> 原文：<https://thenewstack.io/why-literate-programming-might-help-you-write-better-code/>

这似乎是显而易见的，但是代码不仅仅是为机器写的:它也是为人写的。忽视这一事实会导致问题。

“我父亲的一个朋友告诉我，有一次他在工作中遇到了一些非常可怕的代码。Okta 的解决方案工程师 jol Franusic 通过电子邮件告诉新的堆栈。这名男子“被激怒了，他决定找出是谁写的代码，这样他就可以给那个人一点颜色看看。”

烦人，是的。但最重要的是:原来这是他的代码。

这种情况简洁地概括了开发人员的一个常见但痛苦的经历:理解他人的工作(不管这个人是过去的你还是真实的他人)。虽然有几种不同的方法来解决这些问题，但有一种方法特别有效，尽管经常被忽视:[识字编程](https://en.wikipedia.org/wiki/Literate_programming)。

## 什么是识字编程？

识字编程是一种[编程](https://thenewstack.io/category/development/)的方法，其中代码使用自然语言和源代码一起解释。这不同于相关的实践，如文档或代码注释；在那里，代码是主要的，注释和解释是次要的。然而，在有文化的编程中，解释和代码本身具有同等的价值。

“文档从根本上与代码脱节，”Franusic 指出。通常，“文档是由不从事代码工作的人编写的。代码和文档之间的这种距离使得真正理解代码在做什么变得更加困难。”

这强调了什么使得有文化的编程特别有价值:它是获得代码更大透明度或清晰度的一种手段。

自从 80 年代早期由计算机科学家唐纳德·克努特(Donald Knuth)开发出来，现在是斯坦福大学的荣誉退休教授，人们很容易将识字编程视为更早的计算时代的遗迹。

然而，它的出现应该提醒人们，现代软件工程的先驱们所面临的挑战实际上与今天没有什么不同:毕竟，每个人都希望编写干净、清晰的代码，人们可以在以后的阶段理解并与之交互。

识字编程在一些社区(如统计)中拥有受众，这一事实清楚地表明它仍然有价值。唯一的问题是，工程师们是否错过了其他好处？

## 新方法的发展

在此之前，有必要回顾一下识字编程出现的时代。在 Knuth 首次推出后的几年里，它吸引了一个由工程师和计算机科学家组成的小而忠诚的团体。

[塔夫茨大学(Tufts University)计算机科学教授诺曼·拉姆齐(Norman Ramsey](https://www.linkedin.com/in/normanramsey/) )向 New Stack 讲述了他在为一家美国政府承包商工作的一群工程师担任技术主管时，是如何发现有文化的编程的。

“我们与空军签订了合同，交付一些验证软件，我们交付的东西背后的数学非常复杂，”他说。"即使在那个时候，写下数学的标准是特克斯."(TeX 是 Knuth 在识字编程前几年开发的排版系统。)

项目核心的复杂数学让 Ramsey 和他的团队学会了编程。这是因为文化编程的本质允许你在源代码旁边的文本中“展示你的成果”。简而言之，它帮助你理清思路，理清方法。

然而，虽然 WEB——Knuth 的第一个文化编程工具——是用 Pascal 语言编写的，而 CWEB(也是由 Knuth 和数学家 [Silvio Levy](https://www.msri.org/people/staff/levy/) 一起创建的)是用 C 语言编写的，Ramsey 和他的团队为空军交付的项目必须用 Ada 语言编写。

这导致 Ramsey 开发了 Spidery WEB，这是一种允许工程师“漂亮地打印”的工具，也就是说，“排版时看起来很好”，正如 Ramsey 所说，使用的语言超出了以前文化编程社区关注的语言。

拉姆齐的工作，然后，有助于使识字编程更加可见和可及。他太谦虚了，没有明确地说出来，但是听他将自己的工具构建方法与 Knuth 的进行对比是很有趣的。他说，Knuth 的特点是“当他创建一个工具时，他创建它来解决他所有的程序”，而相比之下，“我的工作的完全特点是创建工具来允许人们进行有文化的编程。”

继蜘蛛网之后，Ramsey 开发了 noweb，这可能是最受欢迎的工具之一，它允许人们以独立于任何特定编程语言的方式进行有文化的编程。

“它的主要优势，”该项目网站上的文字声称，“是简单性、可扩展性和语言独立性——与其他文化编程工具相比，这一点尤其明显。”

这个故事是工程实践在我们可能认为是现代计算机科学的早期发展的一个有趣的快照:具有不同动机和兴趣的不同个性的混合在一起工作，以发现新的做事方法。

今天，我们往往会忽略技术创新的这一方面，但我们应该记住，正是这种独创性和背景运气的结合——正确的地点，正确的时间——推动了变革。

## 今日识字编程

拉姆齐在 20 世纪 90 年代较少参与文学编程。他停止了对工具和想法的生态系统的贡献。这主要是由于他作为一名研究人员的工作；他在关注新的问题。但他也注意到，在那十年间，一个“相对繁荣的用于文化节目的新闻组”逐渐被搁置了。

然而，最近它的影响可以在广泛的工具上看到，如 [Jupyter Notebooks](https://thenewstack.io/jupyter-notebooks-the-web-based-dev-tool-youve-been-seeking/) 和 JS-Doc，一个用于注释 JavaScript 源代码的标记工具。Haskell 语言也提供了一种文化编程的模式；顺便说一句，这是 Franusic 第一次遇到它的方式。

也就是说，值得注意的是，一个有文化的编程“纯粹主义者”可能会反对给这些工具贴上标签——它们缺乏对代码和文本之间关系的控制水平，而这种控制水平是真正符合 Knuth 最初的愿景所需要的。

然而，撇开纯粹性不谈，很明显，一系列不同的实践——通常植根于协作和共享——正受益于 Knuth 和 Ramsey 等人在八九十年代所致力的理念。

Franusic 有自己的故事，可以证明它在一个相对较新的领域中的价值——开发者福音和关系。

在通信工具公司 Twilio 担任[开发者传道者](https://thenewstack.io/4-forecasts-for-the-future-of-developer-relations/)时，他发现自己写了很多包含代码的博客文章。“我发现自己一次又一次遇到的特殊问题是，同时编写代码和描述代码的散文是多么困难，”他在新堆栈中写道。

“我写代码时的典型工作流程如下:写点代码；2.开始写一篇关于代码的博文；3.用散文描述一部分代码；4.在用散文描述代码的同时，发现改进代码的方法；5.修复代码，转到步骤 3；6.重复直到我完成。

他指出，这个过程“相当痛苦，因为它必然要求在两个文档都被编写的同时保持它们的同步。写了一篇博文，然后发现博文中的代码和发布在 GitHub 上的代码不同步，这是非常令人沮丧的事情！”

通过使用文化编程，他能够解决这个问题；因为代码和叙述在同一个地方，任何同步问题都消失了。

虽然这可能是一个有点边缘的案例，但有趣的是，在现代开发人员内容和开发人员福音的世界中，有文化的编程如何找到新的相关性——这对于 80 年代以研究为导向的计算机科学家来说是完全陌生的。

然而，尽管拉姆齐说，在他今天的课程中，识字编程对学生来说是“隐藏的”，但他指出，“我们给他们的很多材料——特别是家庭作业——我都是作为识字程序准备的。”他说，这是因为，“我可以保证他们看到的代码是实际运行的代码。”

法语写作和拉姆齐的教学之间的相似之处值得注意。他们证明，有文化的编程不仅可以在编写代码时提供一种有用的方式来组织自己的想法，还可以确保对某些东西将为其他人工作的信心。

## 文化统计程序设计

也许今天你能找到有文化的编程的最常见的地方是统计学和数据科学。

这种方法通常被称为有文化的统计规划，特别有用，不仅因为复杂的数学是统计规划的一部分，而且因为需要分享代码和澄清统计规划如何交付其结果。当你考虑到统计计算是研究环境中经常发生的实践时，这也是特别有意义的。

如上所述，Jupyter 笔记本是一种特别受欢迎的工具，可以被视为识字编程的重新文本化。虽然你可能没有意识到——无论是该项目的[维基百科页面](https://en.wikipedia.org/wiki/Project_Jupyter)还是其[主页](https://jupyter.org/)都没有提到文化编程——承认一个你可能每天都在使用的工具的秘密历史在某种程度上是很重要的。

它帮助你认识到隐藏的问题和促成它产生的想法，甚至可能有助于与他人建立某种形式的团结。反过来，这可以鼓励对工程实践和方法进行更多的自我反思。

此外，它强调了一个事实，即他们是由人；它们不是以自然生成的工具和库的形式出现在我们面前。

Franusic 将新的书库指向他最喜欢的 Jupyter 笔记本库之一，由谷歌的斯坦福研究员兼工程总监 [Peter Norvig](https://www.linkedin.com/in/pnorvig/) 负责。“如果你还没有看过这些笔记本，我鼓励你仔细阅读它们，了解一个有文化的项目有多吸引人。”这也让你想知道 Franusic 对即将发布的[谷歌新编程语言 Carbon](https://thenewstack.io/google-launches-carbon-an-experimental-replacement-for-c/) 了解多少。

他们真的是；每一个都是一种解决问题的叙事，以一种不仅仅是“展示你的作品”(你的数学老师可能曾经告诉过你)的方式结合了编码和讲故事。在笔记本中，诺维格也能够解释他为什么做他所做的事情。它们是建立在人、问题和代码三位一体之上的微型戏剧。

## 为什么识字编程没有更普及？

尽管有文化的编程似乎已经在统计计算的世界里找到了一个家，Ramsey 告诉 New Stack 为什么它不一定是一种应该到处使用的方法。

“我们了解到的一件事是它非常昂贵，”他说。“所以你花时间试图弄清楚什么样的情况下花费是合理的。其中之一是人们正在构建相对较小、复杂的内核，这些内核将被广泛共享。”

Franusic 附和了这一观点。“一旦我写了一个有文化的程序，我发现很难重构，或者对那个程序进行大的改动。因此，考虑到这一点，我只会在相当确定自己已经‘完成’时，才开始编写一个有文化的程序。”

换句话说，它根本不适合今天的许多工程环境，尤其是那些强调速度和规模的环境。那么，这是否意味着除了统计和数值编程之外，它对今天编写代码的人没有什么可教的呢？

## 为什么识字编程在今天如此重要

尽管这种方法有明显的缺点——它的成本，一旦程序被写出来就缺乏可变性——有文化的编程对于在许多不同环境中工作的软件开发人员来说是一种非常强大的技能。正如 Franusic 在 Twilio 写博客的经历所展示的，它可以帮助你把讲故事和写代码放在一起。

他对它的价值特别明确:“学习有文化的编程会让你成为更好的程序员。它还会帮助你写出更好的代码，这是你未来的自己会非常感激的。”

拉姆齐用更有分寸的语言回应了这种情绪:“它真的迫使你在编码前思考。”

这种强制的自我反思的价值是不可低估的。是的，有文化的编程应该帮助你写出更好的代码，但是它也会鼓励你思考你为什么要做你正在做的事情。为什么是这个而不是那个？ *为什么我这样做而不是那样做？*

虽然您可能不会突然开始在日常工作中使用有文化的编程，但是探索一种可以给您带来编程新视角的工具绝对是一件好事。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>