# Git 的另一种方法:将提交捆绑到逻辑组中

> 原文：<https://thenewstack.io/another-way-to-git-bundle-commits-into-logical-groups/>

另一种使用 [git](https://git-scm.com/) 分布式版本控制系统的方法最近一直在讨论中。她认为，这种方法是由 UX devo PS 云平台 [Render](https://render.com/) 的工程师[安妮·塞克斯顿](https://twitter.com/_anniebabannie_)在一月份提出的，这种方法可以让拉式请求的开发者和审核者的生活更加轻松。

她在一篇描述这种新技术的博客文章[中解释说，这种方法不是经常提交，而是将同一功能分支的提交捆绑到逻辑类别中，只有在功能工作基本完成之后。](https://render.com/blog/git-organized-a-better-git-flow)

“最终的结果是一个非常，非常整洁和组织良好的 git 历史，”Sexton 在 ChangeLog 播客的最新版本[中阐述道。](https://changelog.com/podcast/480)

该节目的联合主持人 Jerod Santo 也看到了这种方法的潜在价值。

桑托解释说，这不同于规范方法——理查德·希普经常支持这种方法，他是 [Fossil](https://fossil-scm.org/home/dir?ci=tip) 分布式版本控制系统的作者——在这种方法中，“你提交的每一个提交都会立即在网络上与其他人共享。没有什么可隐瞒的。”

桑托观察到，相比之下，塞克斯顿的方法更像是去餐馆之前先清理一下。

## 减轻审查者的负担

当构建一个新特性时，大多数开发团队将首先创建一个主代码库的新分支，并在每个工作块完成时创建提交。当特性完成时，他们发布一个 pull 请求(PR ),该请求被审查并在被接受时被输入到主分支。

太好了。但是 Sexton 指出，这种方法有一些局限性。一个是，几乎总是，某些提交包含未完成的工作。这种方法的另一个问题是，它给审查 PR 的团队带来了大量的工作。只有一个更改的提交很少见。通常许多是在提交中捕获的，它们可能以评审者难以跟踪的方式跨越代码库。

塞克斯顿提倡的方法是不同的。她将工程工作与提交文档分开。像往常一样处理这个特性，但是不要担心对提交的评论，因为这些信息稍后会被删除。只需将它们标记为“在制品”(或“WIP”)。开发人员可以自由地留下未完成的工作，因为他们知道以后还可以继续工作。

当开发人员完成了所有的修改后，他们会执行一个`git reset`，这个命令不带标志，会删除提交历史。

通常不鼓励开发人员使用该命令，因为它会删除工作的提交历史。她建议，他们不应该如此担心。

“我想我以前被教导过，如果你使用`git reset`，事情是不可逆转的，这是超级危险的。事实并非如此。真的不是。她在播客中说:“git 中几乎没有什么是你无法撤销的。这些变化仍然可以通过`git reflog`展现出来。

Sexton 建议，最后一步是回顾代码，进行一系列新的提交，明确地寻找能够很好地组合在一起的逻辑分组。Sexton 写道，这个想法是为了“通过将我们的更改拆分成人类可读、易于遵循的提交，使拉请求更容易审查”。

> “当我处于开发模式时，我处于开发模式，我只是解决问题，我不需要在精神上转换到思考 git。”

重置后，“看起来好像你一次就完成了所有的更改，而没有提交任何文件。然后，你可以仔细检查并挑选出哪些文件看起来最适合放在一起，然后将你的更改分组到逻辑提交中，”她说。“就好像我完全知道我要构建什么，每一行，然后我一个接一个地提交它们，就好像我是一个机器人一样。”

她指出，一个好的工具，比如 [VS Code](https://code.visualstudio.com/) ，可以帮助进行这种提交分组。

对于开发人员来说，这里的一个优点是它将提交和开发完全分成两个独立的任务。“我喜欢这一点，因为它们是完全独立的任务，”她在播客中进一步解释。“当我处于开发模式时，我处于开发模式，我只是解决问题，我不需要在精神上也考虑 git，因为所有这些都在后面处理。”

## 不同的笔画

虽然大多数开发人员以一种特定的方式使用 git，但是没有什么可以阻止我们以其他方式使用它。Santo 指出，Git 本身实际上对如何使用它并不感兴趣。

“我确实认为 git 已经足够老了，许多人，许多 Git 的老手已经用许多不同的方式测试了它，尝试了不同的方式，并且拥有一些人们可以依赖的真正有价值的工作流。但它仍然足够灵活，如果人们愿意，他们可以用其他方式来做，”塞克斯顿表示同意。

尽管如此，许多开发商仍持怀疑态度。我们询问了我们的一位 git 大师，Michelle Gienow，她已经为 TNS 写了很多 git 教程，分别来自 T2 和 T4。“我不认为这种工作方式对我个人有吸引力，但在我尝试之前，我不应该批评它。我当然可以看到这种逻辑的吸引力，”她通过 Twitter 消息回应道。

[变更日志 480:在](https://changelog.com/podcast/480)上重置——在[Changelog.com](https://changelog.com/)上监听

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>