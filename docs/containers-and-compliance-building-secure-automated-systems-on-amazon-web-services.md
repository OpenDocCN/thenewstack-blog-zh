# 容器和合规性:在 Amazon Web Services 上构建安全的自动化系统

> 原文：<https://thenewstack.io/containers-and-compliance-building-secure-automated-systems-on-amazon-web-services/>

[](https://www.logicworks.com/)

 [Jason McKay，Logicworks 的 CTO

Jason McKay 负责领导 Logicworks 的技术战略，包括我们的软件和 DevOps 产品路线图。在此职位上，他直接与 Logicworks 的高级工程师和开发人员、技术供应商和合作伙伴以及研发团队合作，以确保 Logicworks 服务满足并超越客户的性能、合规性、自动化和安全性要求。](https://www.logicworks.com/) [](https://www.logicworks.com/)

有可能使用容器并维护 PCI、HIPAA、HITRUST、FedRAMP 或其他合规性要求吗？这是一个我们经常听到的问题——尤其是来自医疗保健、金融和其他高度监管行业的公司，这些公司需要容器的灵活性和可伸缩性，但现有复杂的流程来保持合规性。

好消息是:是的，您可以使用容器构建兼容的 AWS 环境。Docker 容器没有什么是与 PCI 或 HIPAA 天生不兼容的。您还可以使用诸如 Kubernetes、AWS 弹性容器服务或弹性 Kubernetes 服务以及 Docker Swarm 之类的编排工具来构建合规友好的 AWS 环境。

但是，与合规性方面的大多数事情一样，重要的是如何配置这些服务。严峻的事实是，您当前的许多安全工具和流程都必须改变。

## 集装箱和安全的挑战

大多数公司都有一套现有的工具来解决合规性问题。您的团队熟悉这些工具，您更愿意继续使用它们。

Docker 容器对基础设施安全最重要的影响是，您现有的大多数安全工具——监控、入侵检测等。—本身不知道子虚拟机组件，即容器。市场上大多数“传统”监控工具刚刚开始了解公共云中的瞬时实例，但远远落后于提供监控子虚拟机实体的功能。

这意味着您必须应用创造性的替代方案来满足您的内部安全标准。好消息是，对于渴望集装箱化的公司来说，这些挑战绝非不可克服。

下面是一些最常见的工具障碍，以及如何克服它们。

## 监控和 IDS

在大多数情况下，您可以通过在托管容器的虚拟实例上安装监控和入侵检测系统(IDS)来满足这一需求。这意味着日志是按实例组织的，而不是按容器、任务或集群组织的。如果法规遵从性需要 IDS，这是目前满足该需求的最佳方式。

考虑在主机上安装监控和安全工具，而不是在容器上。

## 事故取证和响应

每个安全团队都制定了操作手册或事件响应计划，概述了在发生事件或攻击时应采取的措施。将 Docker 整合到此响应流程中需要对现有程序进行重大调整，并涉及教育和协调治理、风险管理和法规遵从性(GRC)团队、安全团队和开发团队。

传统上，如果您的 IDS 检测到带有已知安全攻击指纹的扫描，第一步通常是查看流量是如何通过环境的。Docker 容器本质上迫使你更少关心你的主机，你不能跟踪容器间的流量或者让一台机器看内存中有什么(Docker 中没有运行内存)。这可能会使查看警报来源和可能访问的数据变得更加困难。

在您大规模实施 Docker 之前，请与您的 GRC 团队讨论集装箱化对事件响应的影响，并努力开发新的操作手册。[这是一个有力的解释](https://www.stackrox.com/post/2017/08/csi-container-edition---forensics-in-the-age-of-containers/),说明了在集装箱时代，事故取证将如何走向成熟。长话短说:比较复杂，但是可以做到。

## HTTPS 和 SSL

默认情况下，Docker Swarm 和 AWS 弹性容器服务(ECS)都自动使用 HTTPS 来保护所有 API 通信。然而，在 Kubernetes 中，这是您必须配置的一个附加项目(尽管许多 Kubernetes 的商业发行版将为您涵盖 SSL)。

## 修补

在传统的虚拟化或 AWS 环境中，安全补丁的安装独立于应用程序代码。通过配置管理工具，修补过程可以部分自动化，因此，如果您在 AWS 或其他地方运行虚拟机，您可以更新 Puppet 清单或 Chef 配方，并从一个中心将该配置“强制”到您的所有实例。

Docker 映像有两个组成部分:基础映像和应用程序映像。要修补容器化系统，您必须更新基本映像，然后重建应用程序映像。因此，在像 Heartbleed 这样的漏洞的情况下，如果您希望确保每个容器上都有新版本的 SSL，那么您应该更新基本映像，并根据您的典型部署过程重新创建容器。一个复杂的部署自动化过程(如果您是容器化的，可能已经存在)会使这变得相当简单。

Docker 最有前途的特性之一是应用程序依赖关系与应用程序本身的耦合程度，这提供了在应用程序更新时修补系统的可能性，即，频繁地且可能不那么痛苦。

## 为审计时间做准备

更广泛的信息安全和审计社区还没有真正理解容器的使用，这是潜在的审计和财务风险。有可能你必须向你的 QSA 解释 Docker——如果你没有几个外部团体可以帮助你建立一个经过良好测试的、可审计的基于 Docker 的系统，比如 [Logicworks](http://www.logicworks.com/) ，这会很有帮助。

也就是说，规避风险的公司已经在试验 Docker，这种知识已经渗透到审计人员中。很快这将成为常态。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>