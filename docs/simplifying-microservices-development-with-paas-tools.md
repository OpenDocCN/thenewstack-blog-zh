# 使用 PaaS 工具简化微服务开发

> 原文：<https://thenewstack.io/simplifying-microservices-development-with-paas-tools/>

编者按:平台即服务(PaaS)技术处于微服务运动的前沿。这是

[part four](http://www.activestate.com/blog/2014/10/microservices-and-paas-part-iv?utm_source=thestack&utm_medium=sponsor&utm_term=&utm_content=sp-microservices-part-iv&utm_campaign=thestack-cfq4)

最近在 ActiveState 博客上发布的一系列关于微服务的文章。它涵盖了 PaaS 产品提供的简化微服务开发的主要特性。ActiveState 是新堆栈的发起人。

这是不断扩展的“微服务和 PaaS”博客系列的第四部分，涵盖了微服务在现代云软件项目中的快速发展使用。第一部分和第二部分介绍了微服务的概念，并讨论了由微服务先锋引领的模式和实践，特别是网飞，他出席了最近的一次微服务会议，这也是本系列的起源。

第三部分列出了微服务采用者面临的挑战和陷阱。这个清单令人生畏，有些令人生畏；指出在投入微服务之前，思维模式、组织结构和整体开发实践需要发生的重大变化。

幸运的是，工具和其他支持技术的发展速度几乎和微服务实践本身一样快。平台即服务(PaaS)处于这场变革的最前沿，现在有充分的理由认为它是微服务工具集中的一个重要组件。

以下是 PaaS 产品提供的大量特性的总结，这些特性极大地简化了微服务的开发。

## 1.多语言、框架和持久层

微服务的一个重要好处是，它们不会将一个团队或一个组织束缚在单一的开发语言或框架上。每个服务都可以使用适合于任务、数据或团队的语言和框架来构建。

但是每个语言堆栈都必须单独下载、安装、配置和供应。要求每个开发人员或团队手动完成这项工作会带来相当大的复杂性，并扰乱整个开发流程。

> PaaS 完全消除了供应开发堆栈所需的任何手动步骤，无论是 Spring 上的 Java、Rails 上的 Ruby 还是 Django 上的 Python。

部署微服务后，这些功能以及更多功能将立即可用。

类似地，微服务应该使用对工作有意义的持久层。关系数据库(MySQL)、NoSQL 数据库(MongoDB)和缓存数据库(Redis)各有各的优势，PaaS 允许每种数据库即时供应并连接到微服务，无需人工干预。

### 2.一致的测试环境

测试微服务是一件棘手的事情，有效测试微服务的实践刚刚出现。不管测试的当前状态如何，可以肯定地说，如果微服务开发、测试和部署到生产的环境之间存在不一致，混乱就会随之而来。至关重要的是，这些环境中的每一个都是相同的。细微的差异将导致不一致的测试结果，并将造成严重的破坏。

PaaS 在部署微服务的每个地方都提供了一个可预测且一致的环境，例如开发、试运行、QA 和生产。此外，Stackato 提供的微云(其中整个云堆栈运行在笔记本电脑或台式机上)扩展了这种同质性，使其随时可供所有开发人员和团队成员使用。

### 3.记录

正如我之前所讨论的，在复杂的云应用程序中处理日志是一件痛苦的事情。在基于微服务的应用程序中尤其如此，在这些应用程序中，每个微服务实例都会生成自己的日志。

PaaS 通过提供自动化日志聚合机制大大减少了这种痛苦，其中来自多个微服务实例的多个日志可以自动聚合并重定向到任意数量的日志聚合服务。PaaS 负责确保日志记录“正常工作”,并确保来自所有应用程序的所有日志可以轻松地定向到一个集中的目的地，如 Loggly 或 Splunk，或者轻松地定向到一个自主开发的 PaaS 托管的日志应用程序。

### 4.监视

与日志记录一样，监控对于基于微服务的应用的成功运行至关重要。但是手动监控解决方案的时代已经结束了。随着短期微服务实例在网络中快速启动、停止和移动，任何监控解决方案都必须完全自动化，不需要人工干预，这一点至关重要。

PaaS 通常会提供内置监控来跟踪常见指标，如 CPU 负载或内存使用。除了提供这些功能，Stackato 还允许与 Nagios 和 New Relic 等专门的外部监控工具和服务进行简单集成，并通过其易于自动化的 REST 接口提供管理和控制部署的微服务的能力，以响应监控事件。

### 5.自动缩放

云应用程序必须扩展以适应不同的使用负载。微服务架构允许分离组件，以便可以单独扩展导致瓶颈的单个微服务，而不必横向扩展整个应用程序。这是一种强大的方法，但是横向扩展多个微服务比横向扩展单个应用实例更复杂。

自动扩展是 PaaS 的另一个亮点。特定的微服务可以根据内部或外部仪器提供的指标自动扩展，在负载事件发生时做出响应，无需人工干预。当使用 PaaS 时，自动扩展的复杂性以及处理这些复杂性的负担就消失了。

### 6.服务发现

服务发现、命名和路由到微服务的模式还处于初级阶段。像 Stackato 这样的 PaaS 产品为实现这一点提供了基本的构建模块，例如允许将服务位置(URIs)和凭证注入到应用程序环境中，以及提供从外部发布和访问这些内容的方法。

### 7.即时回滚和版本控制

正如在本博客系列的第一部分中所讨论的，使用不可变的服务模式(其中多个服务版本被并排部署)是一种非常有用的技术，它以一种允许新特性被安全推出的方式支持微服务的连续部署和交付。

一个相关的实践是使用 PaaS 提供的内置版本控制和回滚机制，在部署新的服务版本后，如果出现问题，可以立即回滚到任何以前的版本。例如，Stackato 将跟踪部署的微服务或应用程序的每个版本，并公开用户界面和 API，以便在这些版本之间即时回滚和前滚。UI 需要手动干预，而 API 允许此过程在响应监控事件时轻松实现自动化。

### 8.可用性和故障恢复能力

单一应用程序中的一个故障通常会导致整个系统瘫痪。相比之下，微服务系统由多个独立的松散耦合的微服务组成。它可以设计为一个微服务的故障不会对系统的其余部分产生重大影响。它可以继续在降级模式下运行，在降级模式下，被中断的服务(可能还有相关的用户界面)被禁用，但应用程序的其余部分仍然正常工作。

显然，最好所有的服务在任何时候都保持可操作性，有些服务对于系统的操作可能是必不可少的。这需要一个高可用性(HA)环境来保证多个微服务实例跨可用性区域运行，以便经受灾难性故障的影响。

HA 本身是一门艺术和科学，但是 PaaS 对开发者屏蔽了 HA 的复杂性。例如，Stackato 允许创建跨机架或数据中心的多个可用性区域，并可以保证每个区域中始终运行一个或多个微服务实例。提供一个通用且简单的可用性平台对于解放开发团队，使其专注于应用程序而不是管道系统大有帮助。

### 9.离开杂草

微服务中还有无数其他领域需要管道，处理这些管道会增加复杂性和成本，从而阻碍整个开发流程。例子包括:

*   将网络流量路由到应用程序实例
*   负载平衡
*   多节点集群配置和管理
*   与基础设施层(IaaS)接口
*   服务命名和 URI 映射

PaaS 负责这些管道细节，这样开发团队就不需要陷入混乱。

### 10.按需/自助服务

PaaS 的一个重要优势是它的“自助服务”性质，允许按需提供资源，而无需提交服务单，也不需要其他人以任何方式参与。这加快了开发速度，简化了整体开发流程，并允许自由试验，开发人员可以不受流程限制地开发集群和服务。这种[自助服务](http://www.activestate.com/blog/2014/02/devops-self-service?utm_source=thestack&utm_medium=sponsor&utm_term=&utm_content=sp-microservices-part-iv&utm_campaign=thestack-cfq4)能力对于面向微服务的开发组织来说至关重要。

## PaaS 适合微服务

正如 Adrian Cockroft 在他的微服务演讲中明确指出的，PaaS 是整个微服务故事中的一个关键部分，原因如上所列。PaaS 不仅标准化了环境并显著降低了复杂性，还为迁移到微服务方法所需的重大组织变革奠定了基础。

很少有开发组织拥有网飞所拥有的手段和资源来推动整个公司范围的计划，以彻底检查他们的整个软件架构、组织和思维方式，从而采用微服务方法。正如 Donnie Berkholz 在与 Bernard Golden 的炉边谈话中指出的那样，改变组织结构图本身就是一项巨大的任务，除非工具到位以降低开发人员的障碍，否则这不会发生。

Donnie 所指的工具正在演变为 PaaS，它为目标团队成功交付微服务提供了一种强大的自助式手段。来自 ActiveState 的世界级企业 Stackato 是简化微服务开发的 PaaS 产品的主要例子。

如果您想了解有关微服务和 PaaS 的更多信息，请观看网上技术交流讲座《微服务和 PaaS 入门》的录像

John Wetherill 是 ActiveState 的开发者传道者。John 来自加拿大，他职业生涯的大部分时间都在为几家初创公司、Sun Microsystems、NeXT Inc .设计和构建软件，最近则在智能电网和能源领域工作。他最大的热情是开发人员工具，或者更一般地说，任何提高开发人员生产力和生活质量的工具、语言、过程或系统。毫无疑问，斯塔卡托就是这样一个工具，也是他在这里的原因。John 对技术福音并不陌生，他在 20 世纪 90 年代后期在 Sun 的技术福音小组工作了几年，在全球传播 Java 福音，并关注大量的 Java 技术。约翰现在回归故土，作为一名技术传道者为一家加拿大公司工作，尽管离圣克鲁斯很远。在 [Twitter](https://twitter.com/bcferrycoder) 上关注 John，了解有关微服务、PaaS 以及 ActiveState 参与并密切关注的活动的最新信息。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>