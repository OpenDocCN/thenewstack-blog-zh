# Cloudflare 为 CDN 平台带来了状态数据支持

> 原文：<https://thenewstack.io/cloudflare-brings-stateful-data-support-to-cdn-platform/>

自 2017 年首次推出其 [Cloudflare Workers](https://workers.cloudflare.com/) 功能以来，内容交付网络(CDN) [Cloudflare](https://www.cloudflare.com/) 已经为其用户提供了计算访问权限。虽然边缘计算可能是一项强大的功能，但如果无法访问有状态的数据，它仍然会受到限制。现在，Cloudflare 发布了一系列新功能，将有状态数据引入其平台，无论是连接到现有数据库还是使用该公司的持久对象，该产品本月刚刚全面上市。

Cloudflare 首先通过构建 Workers KV 开始了向用户提供持久数据的旅程，这是它在 2019 年添加的一个关键价值商店。虽然 Workers KV 允许开发人员“利用 CDN 静态缓存的性能构建整个应用程序”，但 Cloudflare 首席执行官[马修·普林斯](https://twitter.com/eastdakota)表示，他们很快意识到这还不够。

“我们需要更坚固的东西。这要求我们创建一种新的原语，对于像 Cloudflare 这样的分布式计算平台来说，这种原语是非常具体和特殊的，”Prince 说。“持久对象的基本思想是，数据应该跟随用户和工作负载，而不是让用户和工作负载去访问数据。在某些方面，它颠覆了传统的数据存储模式，在这种情况下，它在大多数情况下都能为您提供非常高性能的解决方案，但仍允许您拥有分布式计算环境。”

在比较工人的 KV 和耐用物品时，普林斯举了一个例子，你可能会在餐馆里看到这样一个标志，上面写着“你可以拥有好的、快速的或便宜的:选择两个。”他说，有了数据，你可以拥有一致性、可用性或分区容忍度，但不能同时拥有这三者。Workers KV 提供了“最终一致性”，这使得它非常适合那些数据不需要在所有位置都保持一致的应用程序。然而，对于像售票或多人游戏这样的应用程序，Workers KV 并不工作。

“在这些情况下，你需要一个比最终一致性更强大的一致性模型。持久对象为你提供了强大的一致性模型，”普林斯说。“优秀的开发人员平台拥有各种不同的开发人员存储和访问数据的方式，每种方式都有利弊。我们希望确保我们提供的工具允许开发人员构建他们需要的任何类型的应用程序。”

借助持久对象，Cloudflare 可以处理许多原本需要运营团队或站点可靠性工程师(SREs)完成的流程。例如，如果他们正被用于多人游戏，而玩家移动了他们的位置，Cloudflare 将找到最佳位置，以提供最佳的整体性能。类似地，如果需要遵守数据法规，可以根据需要标记持久对象以保留在特定位置。Prince 认为持久对象是一种工具，可以让开发者用更少的资源做更多的事情。

“作为一名开发者，你不必考虑这个问题，所以它允许你构建更复杂的东西，”普林斯说。“我认为这才是真正的全栈精神，或者说，对你来说，这是开发的新栈，这就是你如何能够完成所有这些工作，这些工作在过去通常需要大量的技术运营工作，并将其抽象化，以便任何地方的任何开发人员都可以构建在过去可能会非常艰巨的工作？”

虽然 Durable Objects 极大地扩展了 Cloudflare 中的开发人员能力，但该公司还引入了其他两个功能，极大地扩展了其处理数据的能力。首先，Cloudflare 与 Node.js 和 Javascript ORM 建立了新的合作伙伴关系，让开发人员可以轻松访问 MySQL、Postgres 和 SQL。第二，他们推出了关系数据库连接器，允许开发人员连接到他们现有的关系数据库。普林斯说，目前，Cloudflare 已经与一些初始合作伙伴推出了这些功能，但他预计很快“你就会看到几乎所有开发的数据库的连接器。”

随着 Cloudflare 增加了这些数据功能，包括该公司本周单独发布的 Cloudflare R2 存储，该存储提供了完全的 AWS S3 API 兼容性，Prince 表示，他认为 Cloudflare 能够以前所未有的方式增强单独开发人员的能力。

普林斯说:“我们相信，在未来几年的某个时候，一个单独的开发者将独自建立一个价值 10 亿美元的企业，而无需与任何 SRE 团队或技术运营团队或任何其他人合作。”。“当他们这样做时，我们试图让员工成为赋予他们权力的平台。如果我们能够做到这一点，我认为这就是真正实现了对当今工人的承诺。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>