# SimilarWeb 用于大规模数据分析的云基础设施

> 原文：<https://thenewstack.io/similarwebs-cloud-infrastructure-large-scale-data-analysis/>

我们经常听到有人说，每个公司都在成为软件公司。每个公司现在都是科技公司。但随着微服务和基于 API 的架构暴露数据资产，以及机器学习在所有行业领域的使用越来越多，可以说现在每个公司都是数据公司。

在全球范围内，企业正在识别他们一直在收集和构建的独特数据集，并正在将这些数据集作为新的产品线开放。

在加利福尼亚州，数据管理公司 [VIMOC Technologies](http://vimoc.com/) 正在与停车场公司合作，这些公司希望将实时停车位数据作为数据集输入到 GPS 系统中。虽然这有助于优化停车可用性资产并增加收入，但停车场本身也看到了将这些数据用于其他用途的机会:例如，更好地了解城市和商业中心的交通流量。

在英国，媒体公司 FT.com 提供数据挖掘许可，因此合作伙伴可以将新闻和金融内容作为数据源集成到他们的产品和算法中。一些人甚至认为，FT.com 新闻关于法国总统奥朗德在英国退出欧盟[问题上的立场的一篇受欢迎的报道已经被一种交易算法所吸收，然后导致交易员迅速卖出英镑](https://www.ft.com/content/40d53d90-8c4d-11e6-8aa5-f79f5696c731?sharetype=share)，导致英国货币下跌。虽然这种情况下的时间不太合理，但它确实表明了媒体内容已经被用作机器学习算法的原始数据。

在西班牙，BBVA 银行[对其客户信用卡购买行为的每月交易数据](https://www.bbvaapimarket.com/products/paystats)进行了匿名化和汇总。这些数据现在可以包装成商业产品，并已经被市场可行性和城市开发商用来识别特定社区的消费者人口统计数据，以便他们可以评估该地区新业务成功的可能性。

公司正在利用其可组合的微服务架构来像数据公司一样运营:使数据资产能够被收集、存储、规范化和打包，以便对外部客户可用(具有足够的安全控制)，并反馈到内部机器学习工作流。当他们在云环境中构建这些数据集时，需要做出真正的决策，确定哪家供应商不仅能提供数据分析功能，还能同时满足所有分布式应用程序需求，如身份验证和授权以及数据恢复管理服务。

那么，任何企业能从以数据为核心业务的公司学到什么呢？

## 摄取数据，应用学习算法，将数据作为产品

SimilarWeb 是一家数据公司，在过去几年中，其全球足迹大幅增长。最初，SimilarWeb 是一家雄心勃勃的初创公司，希望成为 Quantcast 的竞争对手，现在，similar web 的网络流量比任何一家提供商都大，并提供一系列产品，旨在帮助企业分析和处理从网站访问和参与度、数字市场份额、移动应用排名、广告支出等方面收集的数字见解。

为了提供服务，SimilarWeb 从三个主要来源收集数据:向数亿用户免费提供的应用程序；从它自己的数据收集中，成千上万的企业与 SimilarWeb 共享其内部分析；以及从其与第三方提供商(如 ISP)的关系中获取数据。

SimilarWeb 的研发执行副总裁[艾纳特或](https://www.linkedin.com/in/einat-or-359ba6)说:“数据实时到达:我们每秒钟收到 6 万个请求，然后我们将它作为我们学习集和分析的基础。它的主要生产流水线是基于批量的，正如 Or 解释的那样，“对于我们看到的使用案例，这些数据是用于分析的，它可以从战略角度采取行动。我们的数据有助于公司了解如何投资，而不是为下一笔钱的实时决策提供信息。”

在创业初期，SimilarWeb 使用私有主机作为其架构，但最近，这家数据公司已经达到了一个临界点，需要开始与两个主机设施合作，此时云管理对他们来说成为了一个经济高效的选择。

像许多行业的公司一样，SimilarWeb 现在正在向基于云的基础设施转移。为此，had 需要决定哪家供应商能够支持其数据摄取水平，在许可政策范围内为客户和合作伙伴提供访问安全性，能够链接到其机器学习流程，并将分析的数据推送给客户。

## 谷歌与 AWS 的对决

当与私人托管合作时，SimilarWeb 的数据管道看到来自三个来源渠道的所有数据都被引导到他们自己的网关应用程序，称为 TAPI。从那里，数据进入 Kafka，将被解析并进入 HDFS，第二个副本被发送到亚马逊 S3 进行备份存储。

虽然 Or 认为 Kafka 是一项优秀的技术，但寻找云托管提供商意味着有更多的选择。“一旦数据进入 HDFS，我们就会根据运行的算法类型，使用 Hadoop 或 Spark 在数据上运行成千上万的作业。这是我们的核心优势:我们收集所有的数据，然后我们使用许多学习技术，这样我们就可以推导出数字世界的准确模型。”

转向云托管提供商意味着 SimilarWeb 可以评估服务管理组件，并审查每个供应商提供的数据分析工具，以及对其机器学习数据科学技术的支持。“我们在谷歌和 AWS 之间进行了一场较量。在数据分析方面，谷歌更胜一筹，但他们的云产品的整体成熟度实际上非常低。

或者说，总的来说，如果一家公司正在考虑从云上运营，那么很难将基于 web 的应用程序架构需求与数据分析工具之类的东西分开。“我们已经有了一个相当复杂的体系结构，我们希望确保在每个地区都提供数据恢复。对于某些技术，使用另一个提供商会有更高的迁移风险。也许以后，如果我们发现有理由在技术的某一方面使用另一家供应商。但是云提供商在出口上的价格非常高，所以如果我们需要将所有数据传输到不同的供应商并返回，那么成本很高。从成本的角度来看，这是不值得的，尤其是如果您像我们这样高度基于数据的运营。”

## Kinesis vs Pub/Sub

或者指出她的团队评估的每个供应商的众多技术中的一个例子。 [AWS Kinesis](https://aws.amazon.com/kinesis/) 是亚马逊云中的一个数据流平台，允许用户接收和分析大量数据流。[谷歌云平台的 Pub/Sub](https://cloud.google.com/pubsub/docs/) 是一种用于摄取数据的异步消息服务(而分析数据是通过单独的[谷歌云数据流](https://cloud.google.com/dataflow/)完成的)。

“Pub/Sub 没有 Kinesis 成熟，”Or 说。“实际上，它存在真正的实施问题。挑战变得非常紧迫。”或者说情况并不总是这样。SimilarWeb 使用 [Hbase](http://hbase.apache.org/) ，这可能很难，但它对谷歌的替代产品 [Dataproc](https://cloud.google.com/dataproc/) 印象深刻。她还特别指出谷歌[大表](https://cloud.google.com/bigtable/)的功能“非常强大”。

或者同意，“AWS 确实有一个缺口需要填补。”但对于像他们这样已经拥有依赖他们产品的用户群的生产级数据服务来说，在谷歌云平台上管理他们的业务存在太多问题。“知道你可以适当地管理它，用户只能访问他们应该访问的数据，所有这些要求在谷歌都是薄弱的。即使拥有谷歌的所有优势，这仍然是一个风险。如果我是一家只有 10 个人的创业公司的一员，我可能会这么做，但面对成千上万的客户和数百万免费用户，风险太大了。”

## 其他云供应商考虑事项

or 的另一个重要决定因素是 AWS 相对于 Google 的服务水平和透明度。比如 business，它选择在 Lambda 和 Kinesis 的早期迭代中与 AWS 合作，因为它被邀请提供关于产品使用的反馈，并经常在一夜之间看到功能和错误得到解决，或者对 AWS 的方法印象深刻。

“对 AWS 服务的关注度要高得多。当你看整个公司时，AWS 比 AWS 更好，AWS 正在运行一个非常好的开发程序，他们对他们的工作方式非常慷慨，整个客户服务是一流的，你会觉得你得到了很好的照顾。他们对即将到来的事情有非常清晰的看法，他们给了我们一些新工具，所以我们是他们测试版的一部分。这是他们的长处，我想，”还是说。

## 管理数据公司准确性的巨大飞跃

SimilarWeb 使用机器学习算法以及定期分析和改进这些算法的学习集，这意味着在某个阶段，算法模型将在某个阶段出现统计上的显著改进。在 SimilarWeb 短暂的历史中，这已经发生了。今年 3 月，这家数据提供商开始在之前算法的网站估计值和通过更精确的建模计算出的估计值之间划定界限。

“我们不断改进。但是我们的客户依赖于我们数据的一致性，因为他们关注趋势。因此，只要改进在一定的误差水平之下，我们实施改进，您就会得到稍微改进的数据。当出现量子飞跃时，问题就来了:如果客户过去依赖数据，我们如何提高准确性并提供一致的数据？”

或者说他们的团队与产品经理交谈并采访客户。它发现客户希望调整所有历史数据以满足新的准确性模型。重新计算所有的数据花了几个月的时间，主要是为了批量测试新精度模型的一致性。历史数据是在公司规模小得多且不太成熟的时候创建的，因此在每次批量分析时，都需要进行多项改进。Or 说，迁移到云基础设施的另一个关键好处是，它将大大减少更改如此庞大的历史数据集的时间。毕竟，在云环境中，你只是给问题增加了更多的硬件，而不是需要更多的时间。

## 所有(数据)公司正在做出的决策

SimilarWeb 目前从托管提供商向云基础设施的迁移表明，他们越来越依赖于能够整合用户身份验证和授权、大规模数据摄取、可以不断学习的算法、用于分析、存储和数据恢复的计算能力的提供商。这些是任何企业面临的决定性因素，这些企业开始评估如何在新的合作伙伴关系中，使用新的业务模型，开放、利用和公开他们的数据资产作为产品。

专题图片:作者[加布里埃尔·圣地亚哥](https://unsplash.com/collections/326652/digital?photo=36nRvt6EP2I)。【CC0 1.0 许可

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>