# 实施有效的集装箱安全策略

> 原文：<https://thenewstack.io/implementing-effective-container-security-strategies/>

[](https://www.synopsys.com/)

 [蒂姆·麦基

蒂姆·麦基在新思软件完整性小组工作，是一名高级技术布道者。在这个职位上，他参与了各种技术社区，以了解如何最好地解决应用程序安全问题。他专门研究容器安全、虚拟化、云技术、分布式系统工程、关键任务工程、性能监控和大规模数据中心运营。Tim 从这些活动中吸取了经验教训，并在 RSA、OSCON、开源峰会、KubeCon、Interop、CA World、Container World、DevSecCon、DevOps Days 和 IoT 峰会等全球会议上发表演讲。他也是奥莱利媒体出版的作者。](https://www.synopsys.com/) [](https://www.synopsys.com/)

容器化应用越来越受欢迎，这是有充分理由的。它们为组织提供了多种优势，包括可移植性、易于部署以及对资源消耗的强大控制。这是通过在应用交付堆栈中添加两个新层来实现的——容器运行时和相关的编排解决方案。这些变化要求组织调整其安全策略，以适应更加动态的生产环境。

任何采用新技术的组织的主要目标都是降低其应用交付堆栈中的安全风险。这样做需要根据新技术提供的功能重新评估现有的最佳实践。受严格法规约束的组织，或具有风险厌恶型领导的组织，通常对在生产中保护新技术的挑战保持警惕，并等待更主流的采用来审查最佳实践。

在设计有效的容器安全策略时，组织必须首先了解攻击者可能利用的、可能导致数据泄漏的风险。以下是在尝试保护集装箱之前需要考虑的一些关键挑战:

*   **隔离** 。容器隔离与虚拟机隔离有很大不同。在虚拟机(VM)系统中，虚拟机管理程序隔离限制了攻击者在应用遭到破坏的情况下在应用堆栈内横向移动的能力。然而，容器化的应用程序不需要管理程序；相反，它们共享主机操作系统内核的元素。
*   **运行时复杂性** 。容器的动态特性引入了应用程序部署团队需要了解和管理的运行时复杂性。这也使得对恶意行为和未授权访问的监控比在传统 It 环境中更加复杂，因为容器化的应用程序通常具有在主机服务器级别共享的不同资源请求。为了克服这个困难，IT 运营和安全团队应该成为他们开发团队的合作伙伴。他们之间的信息共享将有助于他们理解应用程序的预期行为，并将其与意外行为区分开来。像 Kubernetes 这样的容器编排系统旨在快速提供容器映像的复制实例。容器化的应用程序由一个或多个容器映像组成，这些映像相互耦合以形成应用程序所需的功能。这就引出了应用程序可伸缩性的话题——这是在任何给定点部署的特定容器映像数量的函数。当一个新特性准备好进行部署时，应用程序所有者创建一个更新策略，以确保应用程序的任何现有用户都不会受到更新的影响。此更新策略定义了随更新前滚的映像的百分比，以及在发现错误时如何进行回滚。
*   **补丁管理** 。大多数容器应用程序映像都是从基础映像创建的——为应用程序提供核心操作环境的映像。应用程序容器映像将基础映像与特定于应用程序的元素(如框架、运行时和应用程序本身)结合在一起。包括基础图像在内的每个元素都是图像中的一个层。这些层的内容可能隐藏软件漏洞，如果不打补丁，这使它们成为有吸引力的攻击面。因此，容器化应用程序的安全测试必须解决映像各层的漏洞，以确定由此产生的漏洞影响。定期扫描容器映像也是不够的，因为一些集群可以运行超过 10，000 个容器。组织必须继续监控映像内组件中新披露的漏洞，而不管是哪一层，也不会对性能产生负面影响。

虽然容器带来了独特的安全挑战，但通过正确的工具、实践和策略，是有可能克服这些挑战的。

在试验集装箱化等新技术时，组织通常会进行手动安全审查。根据 Forrester 的研究，43%的容器应用程序所有者对其集群执行定期安全审计。审计可能包括在电子表格上跟踪具有已知漏洞的组件，或者手动测试配置。确定哪些解决方案对容器环境有效也需要时间，这就是为什么手动过程只适用于小型的概念验证部署。因此，拥有一个专用的安全解决方案也是很重要的，这个解决方案被设计成可以随着容器集群进行伸缩。

容器化的一个重要好处是，在一台机器上创建的容器映像可以在任何地方运行，包括在它们所中断的技术中:虚拟机。一些组织在虚拟机中运行容器化的应用程序，以使用虚拟机管理程序隔离容器。然后，他们根据虚拟机内的数据类型创建应用程序关联性，以防止攻击者在应用程序堆栈内横向移动以访问其他应用程序的数据。虽然这种策略可以限制攻击的严重性，但不能阻止攻击的发生。

我们不要忘记运行时安全解决方案，它可以实时检测和阻止运行容器中的恶意活动。通过监控对主机的网络调用和登录容器的尝试，这些解决方案为环境中的每个应用程序构建了行为模型。这些模型确定了哪些活动是正常的，因此当某些活动不正常(或可能是恶意的)时，它会被检测出来。当然，在定义运行时安全策略时，提出这样的问题是很重要的，比如，为什么首先可以登录到一个正在运行的容器中？应该利用新技术中存在的任何安全范例来获得最佳效果，包括确定应用程序的最低运行时要求。

与运行时安全性相反，容器补丁管理是主动的；一种在攻击发生前解决漏洞和减轻攻击的策略。为了保护他们的容器，组织必须知道容器映像中存在什么。由于大多数容器映像源自公共第三方来源的基础映像，因此了解映像的完整构成非常重要。考虑到大多数容器应用程序都是基于 Linux 的，这需要从一个有效的开源治理流程开始，该流程旨在识别所有映像中的潜在问题。

[2019 开源安全和风险分析](https://www.synopsys.com/software-integrity/resources/analyst-reports/2019-open-source-security-risk-analysis.html?cmp=pr-sig) (OSSRA)报告在 96%的审计代码库中发现了开源组件，平均代码库由 60%的开源组成(高于 2017 年的 57%)。此外，2018 年审计的代码库中有 60%包含至少一个开源漏洞——仍然很重要，但远远好于 2017 年观察到的 78%。知道了这一点，任何组织都不应该期望手动跟踪所有的开源组件和相关的漏洞。

当应用于容器时，现有的补丁管理策略也可能增加风险。实际上，随着应用程序的扩展，传统补丁模型增加了攻击面并降低了应用程序的可用性。一个更有效的模型是像应用程序更新一样处理补丁并更新容器映像，然后使用适合容器编排解决方案的更新策略来部署容器映像。最终结果将是一个更安全的部署范例，它利用了不可变容器映像的固有优势。

随着使用容器技术的应用程序部署在生产环境中的增长，安全流程必须随之扩展。为了全面了解容器群集中的风险，组织必须自动化识别、缓解和警告任何风险的过程，而不管风险来自何方。

由于没有单一的工具可以完全保护容器集群，组织应该寻找与他们选择的编排解决方案集成的容器安全解决方案。这种模式受益于深度防御——使用不同的技术来解决集装箱化带来的一些风险。

容器运行时安全解决方案可以帮助团队监控和防止对主机的未授权调用，从而限制违规的范围。漏洞管理解决方案可以帮助组织主动降低风险，自动识别已知漏洞并将其从集群中删除，从而大规模减少潜在的攻击媒介。结合这些技术创建了一个健壮的安全策略，用于在大规模部署容器化应用程序时监控、管理和修复安全问题。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>