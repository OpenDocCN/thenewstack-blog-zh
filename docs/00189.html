<html>
<head>
<title>A Closer Look into Google Stackdriver</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解Google Stackdriver</h1>
<blockquote>原文：<a href="https://thenewstack.io/closer-look-google-stackdriver/#0001-01-01">https://thenewstack.io/closer-look-google-stackdriver/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">上个月在GCP Next大会上，谷歌宣布了Stackdriver云监控和日志服务的公测版。它被设计成一个跨越亚马逊网络服务和谷歌云平台的混合监控服务。</p>
<p class="translated"><a href="http://www.stackdriver.com/" class="ext-link" rel="external "> Stackdriver </a>由VMware前员工丹·贝尔彻和伊西·阿泽里于2013年在波士顿创立。它是作为AWS和Rackspace的统一监控引擎而创建的。在很短的时间内，Stackdriver设法从企业市场和托管服务提供商那里获得了客户。这项服务有一个光滑的用户界面，以其与各种工作负载的集成而闻名。</p>
<p class="translated">在2012年推出Compute Engine后，谷歌迅速增加了运营团队所需的新基础设施服务。为了给其云平台增加监控功能，谷歌<a href="https://cloudplatform.googleblog.com/2014/05/welcome-stackdriver-to-google-cloud-platform.html" class="ext-link" rel="external ">于2014年5月收购了</a> Stackdriver。一年后，它作为针对计算引擎、应用引擎、云发布/订阅和云SQL的谷歌云监控服务的预览版浮出水面。不出所料，谷歌顺手放弃了对AWS的支持。像大多数GCP服务一样，云监控有自己的一套API。</p>
<p class="translated">谷歌没有宣布这项服务的全面上市，而是在GCP Next发布了Stackdriver，这让所有人都大吃一惊。这项服务不仅获得了它原来的名字，还获得了对AWS的支持。随着企业采用多云策略，Google意识到需要为其监控服务提供跨云支持。谷歌的产品营销团队希望强调跨云能力。他们决定保留原来的名字Stackdriver，而不是Google Cloud Monitoring，这与GCP的品牌密切相关。虽然对Rackspace cloud的支持已经取消，但GCP的演讲者接下来提到，监控部署在其他云中的基础设施是可能的。</p>
<div id="attachment_1165975" class="wp-caption aligncenter"><a href="https://cloudplatform.googleblog.com/2016/03/Google-Stackdriver-integrated-monitoring-and-logging-for-hybrid-cloud.html" rel="attachment wp-att-1165975 external " class="ext-link"><img aria-describedby="caption-attachment-1165975" decoding="async" loading="lazy" class="size-full wp-image-1165975" src="../Images/023cea46db2a368b88f9cd96c4478840.png" alt="Stackdriver can monitor hybrid environments" data-original-src="https://thenewstack.io/wp-content/uploads/2016/04/stackdriver-10.png"/></a><p id="caption-attachment-1165975" class="wp-caption-text translated">Stackdriver可以监控混合环境</p></div>
<p class="translated">在过去的两年中，谷歌在其云平台中增加了多种与DevOps相关的功能。云日志记录、云跟踪、云调试等服务与App Engine集成在一起，使开发人员和<a href="https://thenewstack.io/tns-research-devops-factions-software-development-world/" class="local-link"> DevOps团队</a>能够对部署进行分析和故障排除。随着Stackdriver的发布，Google整合了监控、日志、跟踪和调试服务。Google Stackdriver现在已经成为Google云平台上所有DevOps服务的一站式商店。</p>
<p class="translated">让我们仔细看看Stackdriver的特性。</p>
<h2 class="translated">监视</h2>
<p class="translated">堆栈驱动程序监控是该服务的关键功能之一。客户可以创建控制面板来跟踪与虚拟机及其部署的服务相关的各种指标。它还支持通过电子邮件、SMS、PagerDuty和HipChat发送警报。该服务还可以跟踪来自其他GCP服务(如发布/订阅和云SQL)的指标。</p>
<p class="translated">尽管Stackdriver支持默认指标，如CPU利用率、磁盘I/O、内存利用率、网络流量和正常运行时间，但它需要在每个虚拟机中安装一个代理来监控特定于工作负载的指标。部署在GCP或AWS上的任何具有出站互联网访问权限的虚拟机都可以通过代理报告指标。还有额外的插件用于监控常见的开源服务器，比如MongoDB、Apache、Nginx、Elasticsearch等等。</p>
<div id="attachment_1164201" class="wp-caption aligncenter"><a href="https://cloudplatform.googleblog.com/search?updated-max=2016-03-23T09:55:00-07:00&amp;max-results=7&amp;start=7&amp;by-date=false" class="ext-link" rel="external "><img aria-describedby="caption-attachment-1164201" decoding="async" loading="lazy" class="wp-image-1164201 size-large" src="../Images/ac837dff2f701d4f64eabb47aee483cf.png" alt="Stackdriver offers stats for both Google Cloud and AWS." data-original-src="https://thenewstack.io/wp-content/uploads/2016/04/stackdriver-9-1024x540.png"/></a><p id="caption-attachment-1164201" class="wp-caption-text translated">Stackdriver提供谷歌云和AWS的统计数据。</p></div>
<p class="translated">该服务还支持与仪表板和警报集成的自定义指标。应用程序可以通过Stackdriver API轻松发送自定义指标。</p>
<p class="translated">Stackdriver监控基于<a class="ext-link" href="https://collectd.org/" rel="external "> collectd </a>，一个收集系统性能指标的开源软件。</p>
<p class="translated">虽然不如Amazon CloudWatch成熟，但Stackdriver Monitoring提供了监控虚拟机、GCP资源所需的核心功能。</p>
<p class="translated">它对自定义指标的支持使客户能够配置高级场景。</p>
<h2 class="translated">记录</h2>
<p class="translated">Stackdriver日志记录旨在收集和存储部署在Google云平台和Amazon Web Services中的工作负载的日志。该服务可以从计算引擎、应用引擎、EC2和谷歌云审计日志中收集日志。</p>
<p class="translated">基于<a href="http://www.fluentd.org/" class="ext-link" rel="external "> Fluentd </a>，Stackdriver日志依赖于安装在每个虚拟机中的<a href="https://cloud.google.com/logging/docs/agent/" class="ext-link" rel="external "> google-fluentd日志代理</a>。可以在Stackdriver日志查看器中查看从多个源传输的日志。应用程序也可以使用日志API以编程方式发送日志。</p>
<p class="translated">Stackdriver日志记录的强大功能之一是将日志导出到外部服务，如Google云存储桶、Google BigQuery数据集、Google Cloud发布/订阅主题或这三种服务的任意组合。这通过移动到廉价的Google云存储桶来实现日志的长期保留。可以搜索和分析导出到BigQuery的日志。Cloud Pub/Sub可用于将日志导出到第三方服务或REST端点。</p>
<p class="translated">为了便于集成，Google提供了多种语言的SDK，包括Go、Java、JavaScript、.NET、PHP、Python等。</p>
<h2 class="translated">错误报告</h2>
<p class="translated">Stackdriver错误报告是一种在一个中心位置聚集、存储和显示错误的服务。它可以显示时间图表、事件、受影响的用户数、第一次和最后一次看到的日期，以及清除的异常堆栈跟踪。该服务支持部署在应用引擎和计算引擎中的应用。</p>
<div id="attachment_1164203" class="wp-caption aligncenter"><a href="https://cloudplatform.googleblog.com/search?updated-max=2016-03-23T09:55:00-07:00&amp;max-results=7&amp;start=7&amp;by-date=false" rel="attachment wp-att-1164203 external " class="ext-link"><img aria-describedby="caption-attachment-1164203" decoding="async" loading="lazy" class="size-large wp-image-1164203" src="../Images/6502add0510c4b047d749d611b340443.png" alt="Stackdriver error reporting." data-original-src="https://thenewstack.io/wp-content/uploads/2016/04/stackdriver-6-1024x589.png"/></a><p id="caption-attachment-1164203" class="wp-caption-text translated">堆栈驱动程序错误报告。</p></div>
<p class="translated">像Stackdriver的其他服务一样，错误报告也依赖于<a href="https://cloud.google.com/logging/docs/agent/" class="ext-link" rel="external "> google-fluentd日志代理</a>。该服务支持Java、Python、JavaScript、PHP和Go。安装代理后，需要安装特定语言的插件和模块。</p>
<p class="translated">客户可以将服务配置为在出现新错误时发送电子邮件。错误也可以通过REST API来检索。</p>
<h2 class="translated">排除故障</h2>
<p class="translated">Stackdriver Debugger以前被称为Cloud Debugger，它允许开发人员检查部署在App Engine或Compute Engine中的Java、Python或Go应用程序的代码状态。谷歌声称这项服务不会干扰应用程序的性能。无需显式添加日志记录语句就可以查看应用程序的状态。</p>
<p class="translated">这项服务有一个附带条件——它只适用于那些源代码存储在<a href="https://cloud.google.com/source-repositories/docs/" class="ext-link" rel="external ">谷歌云资源仓库</a>、Github或Bitbucket中的应用程序。开发人员需要配置一个连接到云存储库的本地git repo。</p>
<p class="translated">将应用程序与Stackdriver集成的开发人员需要安装支持语言的代理。它可以捕获和检查应用程序中的调用堆栈和局部变量。</p>
<p class="translated">源代码中特定位置的局部变量和调用堆栈可以作为快照捕获，这适用于应用程序的所有运行实例。这些快照可以通过URL与其他团队成员共享。</p>
<h2 class="translated">描摹</h2>
<p class="translated">Stackdriver的最后一个特性是针对部署在App Engine中的应用的分布式跟踪系统。它从应用程序收集延迟数据，并近乎实时地显示在控制台中。该服务可用于调查影响应用程序性能的延迟。它可以跟踪对应用引擎URIs的请求的延迟数据，以及对数据存储、URL获取和Memcache等应用引擎服务的往返RPC调用的附加数据。</p>
<p class="translated"><img decoding="async" loading="lazy" class="aligncenter size-large wp-image-1164202" src="../Images/56fdd8a2c252b9fae781dfd179b93935.png" alt="stackdriver-5" data-original-src="https://thenewstack.io/wp-content/uploads/2016/04/stackdriver-5-1024x653.png"/> <br/>随着微服务架构成为主流，该服务可用于执行延迟相关问题的根本原因分析。</p>
<p class="translated">可以启用在App Engine上运行的现有应用程序进行跟踪。在服务收集到足够的数据后，可以创建一个定制的分析报告。该报告显示了应用程序发出的每个请求的总延迟。<br/> Stackdriver是谷歌对亚马逊CloudWatch和CloudTrail的回答。该服务有潜力成为谷歌云平台中部署的应用和工作负载的核心DevOps平台。</p>
<p class="translated">在GCP没有投资的AWS客户可能不喜欢这项服务。但是对于多云和混合部署，Google Stackdriver是一个可行的监控选项。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>