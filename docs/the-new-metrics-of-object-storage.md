# 对象存储的新标准

> 原文：<https://thenewstack.io/the-new-metrics-of-object-storage/>

[](https://twitter.com/abperiasamy?lang=en)

[AB peri asamy](https://twitter.com/abperiasamy?lang=en)

[AB peri asamy 是 MinIO 的 CEO 兼联合创始人。作为开源软件运动的主要思想家和技术专家之一，AB 是 GlusterFS 的联合创始人兼首席技术官，该公司于 2011 年被红帽收购。收购后，他在 2015 年底创立 MinIO 之前，曾在 RedHat 的 CTO 办公室任职。AB 是一位活跃的天使投资人，并在 H2O.ai 和印度自由软件基金会的董事会任职。他在安纳马莱大学获得了计算机科学和工程学士学位。](https://twitter.com/abperiasamy?lang=en)

[](https://twitter.com/abperiasamy?lang=en)[](https://twitter.com/abperiasamy?lang=en)

一般来说，当人们想到对象存储时，他们会想到一件事—每 TB/GB 的价格。尽管这是一个合理的成本指标，但它会使对象存储变得一维，并将其归入归档用例。此外，它扭曲了与企业技术堆栈中日益重要的部分相关的价值。

坦率地说，遗留对象存储玩家是罪魁祸首。多年来，他们在技术方面创新不足，倾向于制造越来越便宜的电器。虽然这些老派供应商可能会辩称这是客户想要的，但他们错了。

亚马逊网络服务去年获得了 250 亿美元的收入，其中绝大部分是高性能的主对象存储。如果我们保守地将 200 亿美元归因于 S3 存储服务，我们也可以有把握地说，S3 很可能与其他家电市场的总和一样大。考虑到价格相似且增长迅速的 Azure Blob 和谷歌云收入，情况就变得很清楚了——成本只是一个考虑因素。

这就是为什么现代企业关注更广泛的指标——强调性能、运营效率、灵活性和价格的指标——而不仅仅是价格。他们认识到将您的数据搁置会降低其对组织的价值。当目标是最大化组织数据的价值时，设备供应商的方法似乎是对立的。

企业应该考虑什么？它们分为五大类:

1.  表演
2.  可量测性
3.  S3 兼容性
4.  故障响应
5.  一致性

除了成本之外，这五个要素定义了对象存储的新标准。他们是超级六人组。让我们依次看看它们。

## 表演

对象存储传统上并不以性能著称。在价格竞争中，家电厂商不断牺牲性能。也就是说，他们使用“冰川”这样的术语来定义他们的产品。

现代对象存储改变了这一点。

从亚马逊到 MinIO，我们看到了接近 Hadoop 的速度，T2 甚至超过了它。对象存储的新指标与读写速度相关，从硬盘的数十 GB/s 到 NVMe 的 35+GB/s。对于 [Spark](https://min.io/resources/docs/Performance-comparison-Apache-Spark.pdf) 、 [Presto](https://min.io/resources/docs/Performance-comparison-Starburst-Presto-SQL.pdf) 、Tensorflow、Teradata、Vertica、Splunk 和分析堆栈中的其他现代计算框架来说，这种吞吐量已经足够快了。MPP 数据库以对象存储为目标的事实证明了对象存储正日益成为主要存储。

如果您的对象存储系统无法提供这些速度，那么您就无法与所有数据进行交互，也无法从中提取适当的价值。即使您将数据从传统的对象存储中取出，放到内存处理框架中，您仍然需要在内存中来回传送数据的吞吐量——您无法从传统的对象设备中获得这样的吞吐量。

这是一个关键点。新的性能指标是吞吐量，而不是延迟。这是大规模数据所需要的，也是现代数据基础设施的标准。

应该注意的是，虽然性能指标评测是一个很好的代理，但是直到在该环境中运行了特定的应用程序，人们才真正知道性能是什么样的。只有这样，他们才能了解瓶颈是存储软件、驱动器、网络还是计算层。

## 可量测性

可伸缩性通常是指适合单个名称空间的 Pb 数。每个供应商都声称 zeta scale，但它隐藏了一个事实，即当您扩展时，庞大的整体系统会变得脆弱、复杂、不稳定和昂贵。

可伸缩性的新标准是您可以处理多少不同的名称空间或租户。

这一指标直接取自超大规模扩展，其中的构造块很小，但可以扩展到数十亿。简而言之，这是云的固有方式。

当构造块很小时，可以更有效地理解和优化一切—安全性、访问控制、策略管理、生命周期管理、无中断升级和更新以及最终的性能。构造块的大小取决于故障域的可管理性。这就是高弹性系统的架构。

在现代企业中，多租户有多个方面。虽然它当然指的是企业如何组织对数据和应用程序的访问，但它也指的是应用程序本身以及它们在逻辑上如何相互隔离。

多租户的现代方法具有以下特征:

*   租户可以在短时间内从几百人增长到几百万人。
*   租户彼此完全隔离，使他们能够运行具有不同配置、权限、功能、安全性和服务级别的同一对象存储软件的不同版本。当扩展新的服务器、更新和地理位置时，这是一个现实的操作问题。
*   弹性和按需。
*   每项操作都是 API 驱动和自动化的，无需人工参与查看仪表盘。
*   其中的软件足够轻便，可以进行容器化，并利用像 Kubernetes 这样的行业标准编排服务。

## S3 兼容性

亚马逊 S3 API 是对象存储的事实上的标准，每个对象存储软件供应商都声称它是兼容的。也就是说，AWS S3 兼容性实际上是二进制的。它在所有情况下都有效，或者无效。S3 兼容性的度量是 1。

这意味着有成百上千个你期望发生的情况没有发生。这对专有软件或设备供应商来说尤其具有挑战性。原因是他们的大多数用例都是直接的归档或备份，因此 API 调用的多样性很低，并且用例非常相似。很明显，这是开源软件具有显著优势的一个领域。鉴于应用程序、操作系统和硬件架构的规模和多样性，他们已经看到了大多数的极限情况。

作为应用程序创建者，这很重要。您需要针对这些供应商测试您的应用程序。开源使得评估供应商声明和确定什么平台对您的应用程序起作用变得容易。如果您的供应商足够好，可以充当网关，并被其他人用作网关，那么您可以相信它也会满足您的需求。关于开源和 S3 的最后一点。开源意味着企业避免供应商锁定并增加透明度。这使得解决方案的使用寿命比部署时要长得多。

关于 S3 兼容性的几个要点。

如果您正在运行任何大数据应用程序，S3 选择通过使用 SQL 仅从对象存储中提取所需内容，提供数量级的性能和效率提升。

此外，对存储桶通知的支持是关键。存储桶通知促进了无服务器计算，这是任何基于微服务的功能即服务中的关键组件。假设对象存储是云中的实际存储——当将对象服务器暴露给云本地应用程序时，这种能力就成了赌注。

最后，S3 实现需要支持亚马逊 S3 服务器端加密 API(SSE-C，SSE-S3，SSE-KMS)。更好的是，它应该支持防篡改，可证明是安全的。任何不足都会招致不必要的风险。

## 失败

也许在对象存储中最容易被忽视的指标是系统如何处理故障。失败会以多种方式发生。对象存储系统需要优雅地处理所有这些问题。

例如，存在单点故障。这个指标是零。

不幸的是，许多对象存储系统将采用“特殊”节点，这些节点必须启动，集群才能正常工作。这些包括名称节点或元数据服务器。这造成了单点故障。

即使有多个故障点，承受灾难性故障的能力也是最重要的。驱动器出现故障。服务器停机。关键是采用被设计成将失败视为正常情况的软件。这意味着当某个磁盘或节点出现故障时，软件仍能正常运行，不受影响。

线内擦除编码和 bitrot 保护带来的变革确保在软件不再能够返回数据之前，您可以丢失与奇偶校验块一样多的磁盘或节点。这通常是驱动器的一半。

失败很少在量表中测试，但应该是强制性的。模拟负载下的故障将提供该故障的总成本(数据丢失、时间和技能)的准确情况。

## 一致性

一致性的度量是 100% —也称为严格。在任何存储系统中，一致性都是一个关键要素，但严格的一致性却很少见。例如，亚马逊 S3 ListObject 不是严格一致的，它只是最终一致。

我们所说的严格一致性是什么意思？对于确认 PUT 操作后的所有操作，必须满足以下条件:

*   从任何节点读取时，都可以看到更新后的值。
*   通过冗余保护更新免受节点故障的影响。

这意味着，如果在写入过程中拔出插头，不会丢失任何东西。结果是系统永远不会返回损坏的或陈旧的数据。这是一个很高的标准，从事务性应用程序到备份和恢复使用情形都有影响。

## 结论

这些是对象存储中的新指标，反映了现代企业的使用模式，其中性能、一致性、可扩展性、故障域和 S3 兼容性是云原生应用程序和大数据分析的构建块。我们鼓励读者在构建现代数据堆栈时，除了考虑成本之外，还使用这个列表。

来自 Pixabay 的 arielrobin 的特写图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>