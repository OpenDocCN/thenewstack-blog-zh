# 控制云支出的云成本优化策略

> 原文：<https://thenewstack.io/cloud-cost-optimization-strategies-to-rein-in-cloud-spending/>

[](https://www.linkedin.com/in/powellronald/)

 [罗恩·鲍威尔

罗恩拥有空间物理学背景，曾作为卡西尼小组成员分析土星磁层中的等离子体。他现在在旧金山的 CircleCI 公司工作，是一名开发人员，倡导开发内容，使开发人员能够更快地构建、测试和部署他们的项目。](https://www.linkedin.com/in/powellronald/) [](https://www.linkedin.com/in/powellronald/)

云提供了几个吸引人的优势，包括高效的可伸缩性和只为您使用的东西付费的灵活性。团队可以利用 IT 向分散计算的转变来开发更好的产品，保持竞争力和灵活性。

但托管服务往往会抽象出你是什么，以及你可能会支付什么，从而很容易超支。[根据行业研究公司 Gartner](https://www.gartner.com/smarterwithgartner/6-ways-cloud-migration-costs-go-off-the-rails) 的调查，到 2024 年，60%的基础设施和运营领导者将会看到他们的云支出超过预算。您希望从您的云支出中获得最大收益，因此优化您的云服务成本以最大化您的投资回报至关重要。

在本文中，我们将讨论可以帮助组织了解其云使用和支出的工具和流程。我们将分析云计算如何带来令人不快的财务惊喜，以及组织如何管理和优化他们的云成本。

## 云在现代软件开发中的作用

云通过为日常应用程序提供易于使用、可扩展的部署，支持并加速了现代软件开发。无服务器功能和 Kubernetes 等云原生技术使开发人员能够更多地关注应用程序，而不是基础设施和部署。

部署过程要快得多，并为团队节省了一些添加新功能和修复 bug 的开销。无服务器功能和 Kubernetes 构建在云原生技术之上，使得部署和扩展应用程序和 API 更加容易。当您创建一个无服务器功能或部署一个 API 时，您不需要担心在哪里托管它或它将如何扩展。云提供商会负责一切。

然而，这些无限可扩展的技术可能会让开发人员不知所措。要熟练识别满足您需求的合适云资源，需要一个学习过程。因此，大多数公司并不完全了解如何优化他们的云使用，或者将精力集中在哪里。

## 大规模云计算的相关成本

在云中运营业务需要全面的管理和对云内部运作的扎实知识。云计算的高成本源于基础设施的使用，包括虚拟机(VM)、Kubernetes 集群、虚拟网络、公共 IP 和 DNS 条目。

云计算的核心原则是，你应该只为你使用的资源付费，就像你租用计算能力或使用电力等公用事业一样。这种现收现付模式可以让您在需求不可预测时即时调整资源，而无需对内部基础架构进行大量投资。例如，当遇到突发负载时，您应该能够通过添加更多服务器来进行水平扩展。或者，如果您的业务应用程序流量在假期期间较低，并且您需要降低成本，您可以缩小基础架构的规模。

尽管大多数云提供商都提供这种配置，但与提供对象存储或块存储解决方案的提供商不同，许多文件存储提供商使用一种模式，在这种模式下，您必须为您认为需要的空间预先付费。以这种方式在云中存储大量数据可能会变得非常昂贵，尽管这通常比建立一个内部存储单元要好。

亚马逊简单存储服务(S3)、Azure Blob 存储和谷歌云存储的[比较](https://www.msp360.com/resources/blog/amazon-s3-azure-and-google-cloud-prices-compare/)提供了一些关于当前云存储产品状态的背景。这些提供程序为非结构化的对象文件提供存储。对象存储的技术简单性使云提供商能够更有效地分配资源，他们通过按千兆字节收费将这些好处传递给用户，而不是强迫他们预测工作负载和调配他们可能永远不会使用的容量。

即便如此，云基础设施仍然可能通过隐藏在数据传输和数据存储中的费用默默产生成本。大多数云提供商让客户免费将数据传输到他们的网络(入口)，但对数据输出(出口)收费。例如， [AWS](https://aws.amazon.com/blogs/architecture/exploring-data-transfer-costs-for-aws-managed-databases/) 在其网络内提供免费数据传输，但在其网络外传输数据则收取每 GB 12 美分的费用。

开发人员通常使用 MongoDB 或 Postgres 之类的数据库来存储结构化数据。许多组织使用数据库即服务(DBaaS)在云中运行完全托管的数据库，绕过设置虚拟机和手动安装安全补丁的传统方式。但是这种方法也有成本，随着数据量的增长，成本可能会很快超出组织的预算。

## 云成本管理的重要性

许多软件交付团队努力获得他们组织的云使用的完整图片。成本会迅速增加，在他们意识到之前，他们已经为一项他们并不需要或本可以进行不同配置的服务支付了数千美元。

因此，云成本管理已经成为在云中运营企业的关键部分。为了了解完整的情况，团队有时需要查看计费控制台或每项服务的单独账户费用。如果他们只有几个账户，这种方法很有挑战性。如果他们使用数十或数百项服务，这几乎是不可能的。

因为在云中创建新资源只需点击几下鼠标，所以团队很容易调配他们甚至不需要的资源。如果他们忘记关闭他们创建的资源，他们将为未使用的容量付费。

大多数云服务都是按照现收现付的模式收费的。然而，这种账单可能会产生误导，因为账单从来不会立即到达。团队可能会意外启动 10，000 台虚拟机，而不是他们想要的 10 台。他们可能会制定宽松的政策，然后他们的软件通过提供公共云资源的消防水管来应对持续的流量高峰。在这种情况下，他们希望在月底大额账单到来之前就能找到答案。

云技术不是金融毁灭的雷区，但它提供的力量需要谨慎对待。不幸的是，随着云为我们提供了比以往更多的花钱方式，代价高昂的错误可能会发生，这使得云成本管理对各种规模的企业都至关重要。

## 如何优化您组织中的云成本

公司经常在云成本上浪费金钱，因为他们不知道他们的团队花了多少钱。他们可能有一般的感觉，但没有清晰的理解，他们的团队成员可能没有意识到他们的选择会如何影响运营成本。

那么，你能做什么？

### 定期查看您的账单仪表板

最好在规划阶段实施云成本优化策略。这种方法可以帮助你避免账单到来时令人不快的意外。优化您的云成本的第一步是了解您的陈述是如何分解的。

出乎意料的高成本甚至会让最有经验的云工程师措手不及，因此对照历史云消费模式来检查您的使用情况是一个不错的做法。

基于消费的计费解决方案使您能够随着时间的推移直观地了解您的模式及其相关成本。这可以帮助您确定哪些应用程序和服务消耗了最多的资源，并在它们无法提供业务价值时减少它们。

大多数主要的云提供商都提供了一个仪表板，可以提供一段时间内您的云支出的高级概览。AWS 有[成本浏览器](https://aws.amazon.com/aws-cost-management/aws-cost-explorer/)，GCP 提供[云计费报告](https://cloud.google.com/billing/docs/reports)，Azure 提供[成本管理和计费](https://azure.microsoft.com/en-us/services/cost-management/#overview)。为了最大限度地利用这些工具，需要进行一些手动设置和监控，因此在您的云计算之旅中尽早熟悉它们是一个好主意，以确保您获得对您的支出的准确和可操作的见解。

### 确保团队对他们的成本负责

了解每个团队成员或部门如何与组织中的其他成员或部门相适应，有助于让团队对其云成本负责。

鼓励高效使用云的最好方法之一是给团队一些背景。帮助他们了解他们正在使用什么资源以及如何使用。这种可见性让团队更有动力高效地使用云。否则，他们没有办法确定他们没有使用超过合理的数量。

假设您管理五个团队，他们都部署在一个 Kubernetes 集群上。起初，这似乎是个好主意。当您只有少数几个容器时，它的设置很简单，并且最初工作得很好。如果你需要更多的资源，提供商很乐意卖给你一些，所以看起来大家都赢了。

但是没有人有动机明智地使用云资源。如果每个团队都部署到同一个集群中，而没有使用标签、标记或其他方法来跟踪谁在使用哪些资源，那么没有人清楚地知道他们的使用情况与其他人相比如何。此外，如果每个人都部署到同一个集群，您将很难在不削减现有项目的情况下为新项目找到空间。通过清楚地跟踪特定团队和部署的资源使用情况，您可以更好地管理您的总体支出。

### 使用第三方解决方案

第三方云成本管理平台可以帮助您从云投资中获得更多回报。这些平台为您的基础设施提供单一屏幕视图，包括多云部署，或者提供工具或与工具集成，以便对资源供应进行更精细的控制。它们还可以实时跟踪成本，并在基础架构使用超出约定限制时向您发出警报。

一些常用的云成本管理解决方案包括 [Apptio Cloudability](https://www.apptio.com/products/cloudability/) 、 [Flexera](https://www.flexera.com/flexera-one/cloud-cost-optimization/cloud-cost-management) 、 [CloudHealth by VMware](https://www.cloudhealthtech.com/solutions/cloud-financial-management) 、 [CloudCheckr](https://cloudcheckr.com/solutions/cloud-cost-optimization/) 、[density](https://www.densify.com/solutions/finops)和 [Virtana](https://www.virtana.com/solutions/cloud-cost-optimization/) 。其中许多平台还提供人工智能支持的工具，用于根据您的历史使用趋势调整规模或标记过度调配的云资源，帮助您识别和消除不必要的支出。

保持部署策略的一致性也有助于控制云成本。通过在 [CI/CD 管道](https://circleci.com/blog/what-is-a-ci-cd-pipeline/)中自动化您的部署和基础架构配置，您可以避免开发人员手动配置资源时有时会发生的代价高昂的错误。许多持续集成平台具有与基础设施即代码工具的集成功能，如 [Terraform](https://www.hashicorp.com/solutions/infrastructure-provisioning) 和 [Pulumi](https://www.pulumi.com/crossguard/) ，您可以使用这些工具来指定部署所需的确切资源，并通过成本控制策略来设置资源使用限制。

## 结论

随着组织在云领域的投资金额不断增加(截至 2021 年为 3960 亿美元，并且还在增长)，制定正确的云成本优化策略变得前所未有的重要。随着时间的推移，云计算成本可能会以多种方式攀升，但通过积极主动地管理您的投资，您可以避免未来出现昂贵的意外，而是专注于提供对您的用户最重要的功能。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>