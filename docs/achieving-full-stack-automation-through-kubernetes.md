# 通过 Kubernetes 实现全栈自动化

> 原文：<https://thenewstack.io/achieving-full-stack-automation-through-kubernetes/>

[](https://www.couchbase.com/)

 [阿尼尔·库马尔

阿尼尔·库马尔是 Couchbase 的产品管理总监。Anil 的职业生涯跨越了超过 15 年的时间，在各个领域构建软件产品，包括企业软件、移动服务以及语音和视频服务。他是一名亲力亲为的产品负责人，负责 Couchbase Server、Couchbase Cloud 和 Kubernetes 产品线，包括向客户、合作伙伴、开发人员和分析师宣传产品战略和愿景。在加入 Couchbase 之前，Anil 在微软雷蒙德娱乐部门工作了几年，最近在 Windows 和 Windows Live 部门工作。Anil 拥有加拿大多伦多大学的计算机科学硕士学位和印度 Visvesvaraya 理工大学的信息技术学士学位。](https://www.couchbase.com/) [](https://www.couchbase.com/)

随着 Kubernetes 的兴起，开源革命又全面展开了。灵活性和敏捷性是充分利用云、多云或混合云时代的关键因素。Kubernetes 通过授予 DevOps 团队对其基础设施的更大控制权，使这一点变得更加容易。但是更容易并不一定意味着容易——仍然有障碍需要克服。

事实证明，将 Kubernetes 连接到底层数据库对于希望对其云操作采取整体方法的组织来说非常困难。Kubernetes 的动态灵活性虽然在公共云环境中非常出色，但对于仍然依赖于传统裸机或虚拟机实例的遗留数据库来说，这往往是个麻烦。随着云应用程序的需求和使用的波动，容器化环境的即时可扩展性和沉闷的数据库部署之间的不匹配会导致严重的问题。

主要障碍通常包括:

*   **高运营成本**:跨多个地理位置手动部署和管理数百个数据库集群会增加成本、工作量和复杂性。
*   **供应商锁定**:缺乏标准化来确保数据可以在云提供商之间自由安全地移动，这使得很难快速切换提供商或与多家提供商合作。
*   **上市时间延迟**:应用程序使用微服务架构的客户难以管理和扩展孤岛系统中的数据库集群，这延长了开发时间，也增加了支持其应用程序的难度。

开发人员需要实现跨多云环境的敏捷性和自动化流程编排，通过正确应用 Kubernetes，他们可以克服这些挑战。有几个关键的重点领域。

## 心不在焉

很容易一头冲进云趋势的诱惑中。但是正确地做这件事需要一个更实际的方法。云原生应用相对于更有限的同类应用有很多优势，包括基于用户需求的即时容量扩展，以及从边缘交付以提高速度和可靠性。

问题是，应用程序的“云原生”方面通常停留在应用程序上，而不关心使其工作的所有其他方面。许多传统数据库被锁定在裸机服务器或虚拟机上的特定部署策略中。它们是为早期构建的，当时数据库仅在内部环境中运行，适应速度很慢。这使得它很难适应繁忙季节(如零售商的假期或旅游和酒店公司的夏季)不断增长的需求，因为频繁的变化和更多的条目会超出可用计算能力的极限。

在云中运行应用程序通常是“显而易见”的。许多应用程序是无状态的，允许在应用程序实例崩溃时快速恢复。无状态工作负载通常很容易从一个云提供商移植到另一个云提供商。另一方面，数据库是有状态的，需要复杂的管理和编排，以便在实例崩溃时保持可用性和一致性。这使得将数据库从其最初的本地环境迁移到云中成为一项艰巨的任务，尤其是当数据量从 TB 级增长到 Pb 级甚至更高时。

DevOps 团队需要对他们的数据库部署进行一些更改，以便他们能够像他们所支持的应用程序一样敏捷。这意味着切换到包含无状态和有状态应用程序的完整堆栈。

## 整个堆栈，除了堆栈什么都没有

像 Kubernetes 这样的容器编排系统可以帮助解决这些问题，特别是对于已经在使用容器的应用程序。长期以来，人们有一种误解，认为容器无法应对支持成熟数据库的挑战，这减缓了采用速度。在过去，这是对集装箱征收的合理费用。然而，随着 Kubernetes 的出现和管理有状态工作负载的复杂性的增加(例如，定制控制器和持久卷)，在容器中部署分布式数据库是一个可行的选择。容器环境能够快速适应不断变化的需求，能够在瞬间建立更多的容器集群，这使得它们非常适合云规模的任务。

Kubernetes 使云平台不可知，这意味着无论您使用内部部署、AWS、Azure、Joe 的家庭云平台还是组合，都没有关系。最终结果将是所有用户的平稳和无缝操作。由于平台供应商必须遵守严格的 CNCF 准则，在 Kubernetes 中构建的应用程序无需任何更改就可以在任何地方运行。

通过自动化常见的云场景，容器可以减轻运营团队的监控和管理负担。Kubernetes 有助于通过包含任何网络或存储元素的单一仪表板轻松管理整个应用程序部署流程。

对常见情况(如需求高峰)的定制响应可以通过 Kubernetes 编程到堆栈中。然后，当标准出现时，编排系统将自动执行它们。只有当应用程序和数据库都运行在同一个平台即服务(PaaS)上时，这种即时反应才是可能的。它使容量扩展成为一个近乎完美的线性过程，随着需求而上升和下降，而不是随着大量计算能力的增加而留下未使用的容量。

这个过程还有助于确保应用程序和支持数据库的连续性和正常运行时间。如果一个实例的连接问题或系统错误开始影响用户体验，编排系统可以检测到该问题并立即做出响应。

## 给我看看数据

所有这些优势的最终结果是，在其应用程序和数据库中采用 Kubernetes 的 DevOps 团队将能够提供更好的用户体验，并更快地适应不断变化的需求。随着开发团队努力满足市场压力，敏捷性变得越来越重要。这种方法将他们解放出来，将更多的时间花在应用程序本身上，而不是管理数据库部署的日常琐事。他们还可以完全控制数据库和其中的数据。他们不需要依赖外部专家或供应商，而是可以自助从数据中提取意义。

Kubernetes 的兴起开启了一个快速应用部署的新时代，精明的企业可以利用它来实现自己的目标。但是重要的是不要匆忙进入平流层，而将云留给重要的应用支持系统，如数据库。做好这件事需要耐心和细心去考虑所有的因素。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>