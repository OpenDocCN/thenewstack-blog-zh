# 衡量游戏开发的成功

> 原文：<https://thenewstack.io/measuring-success-in-game-development/>

[](https://www.influxdata.com/)

 [凯蒂农夫

凯蒂和她的丈夫以及两条狗住在加州的奥克兰(其中至少有一条会跟她聊些有趣的、技术性的东西)。她喜欢试验代码，破坏东西，并试图修复它。她在科罗拉多州丹佛市的图灵软件与设计学院学习编码，这给了她一个绝好的机会，在她知道如何修复之前就把东西弄坏了。](https://www.influxdata.com/) [](https://www.influxdata.com/)

我的个人使命仍然是探索和理解度量作为技术基础部分的价值。我们已经进入了一个仪器化的时代，我感觉自己被抛在了后面。我见过用于监控复杂系统、分析行为(包括软件、硬件和人类的行为)以及跟踪机器学习算法变化的指标。传感器数据可以告诉我何时空气中的一氧化碳过多，或者我的在线商店是否在黑色星期五崩溃。指标可以帮助保证工厂工人的安全，并跟踪我的杂货交付。这些都非常令人印象深刻，当其他人向我解释他们的指标时，很容易就能看出其价值。

我决定，对我来说，在我自己的工作中探索度量的价值的最简单的方法是检测一个对我有价值的应用程序。进入“Paper Pirates”:一个我构建的基于浏览器的 Node.js 游戏，没有任何目的，只是为了好玩(在这里找到 [repo](https://github.com/TheKaterTot/paper-pirates) )。没有赢的“纸盗版”——唯一的赢棋就是不玩。

我选择网页游戏有几个原因:1)我热爱游戏。他们比现实好得多。2)游戏开发真的很辛苦。即使在这样一个简单的游戏中，也有很多机会出现小故障和无法解释的行为。

游戏是衡量指标的金矿，我可以收集大量的统计数据来确保我的应用程序按预期运行。这是 DevOps 的核心，但我想探索一个稍微不同的角度。在这篇文章中，我将重点介绍度量帮助我调整游戏性能和提高游戏性的方法。我们走吧！

从“纸盗版者”那里收集指标很容易；我用的是 InfluxDB Node.js 客户端。本质上，我监听某些事件，当它们发生时，我向 InfluxDB 发送一个值 1。在这种情况下，我不需要具体的值—我只需要知道事件发生的时间。

与 InfluxDB 的所有互动都在 index.js 中进行。查看代码，您会发现我正在收集指标来帮助建立排行榜，测量导弹准确性和整体玩家详细信息。现在，我们将重点关注这个模块:

```
socket.on("enemyfire",  results  =&gt;  {
     client.writeMeasurement("events",  [
       {
         tags:  {  sessionID,  gameID,  enemyID:  results.enemyID,  event:  "enemyMissile"  },
         fields:  {
           enemyFires:  1,
         }
       }
     ])
   })
});

```

游戏最重要的部分之一是玩家与世界的互动，老实说，这是我最后想到的事情之一，直到我第一次玩这个游戏。敌舰是这样开火的:

```
export const enemiesFire  =  ()  =&gt;  (dispatch,  getState)  =&gt;  {
   const  {  enemies  }  =  getState();

   _.each(enemies,  enemy  =&gt;  {
     const roll  =  _.random(4000);

     if  (roll  &lt;=  10)  {
       Client.emit("enemyfire",  {  enemyID:  enemy.id  })
       dispatch({  type:  "ENEMYFIRE",  payload:  enemy  });
     }
   });
};

```

这里发生了很多事情。本质上，我们面对的是敌人开火的可能性。在 0 到 4000 之间选择一个随机数，只有当它小于 10 时，敌人才会发射导弹。当我第一次写这个的时候，我不知道什么数字会起作用，所以我猜测。我们把第一次实验的结果称为“虚空”。

![](img/a76b9dbd4a93694922792e02072f5f2d.png)

你独自面对错误的地方

敌人如此频繁地发射，以至于仅仅产生导弹就导致画布上的其他一切都滞后了。然后，当一船导弹撞向他们时，这名球员立即死亡。

这导致我几次改变 rand 函数中的数字，直到我找到了不杀死浏览器的东西。然而，游戏开发中最困难的部分之一是找出*觉得*什么是对的。像控制的反应速度，精灵的反应速度，甚至碰撞检测的精确度，都决定了玩家是否喜欢这种体验。所以找到敌人火力的正确速度对我来说很重要，即使这很难。

输入指标！重温第一个代码片段，我将每个敌人的导弹标记为一个事件，该事件增加发送到我的实例 [InfluxDB](https://www.influxdata.com/time-series-platform/) 的计数。这允许我跟踪与我在代码中选择的随机数相关的有意义的集合。

就这样，metrics 推动了《纸盗》游戏性的提升，也让我成为了一个更见多识广的开发者。第一次写乱射的时候是这样的:

```
 _.each(enemies,  enemy  =&gt;  {
     const roll  =  _.random(1000);

     if  (roll  &lt;=  10)  {
       Client.emit("enemyfire",  {  enemyID:  enemy.id  })
       dispatch({  type:  "ENEMYFIRE",  payload:  enemy  });
     }

```

通过跟踪事件，我确定它破坏整个游戏的原因是它在 10 秒内发射了大约 3500 次。“纸盗版”无法承受这样的负荷。当我玩游戏和追踪火的时候，我确定大约每秒一个敌人的火对我来说是最好的，并使玩家有可能生存超过一分钟。

![](img/c27898a8a650e14b836283bcc151595d.png)

海上最好的船只

我需要聚集的另一个原因是屏幕上有多个敌人。这个游戏目前被限制为一次只能有四个敌人，但他们的开火速度都略有不同，用最简单的话来说，这意味着我不知道会发生什么。收集敌人开火事件的数量减轻了我个人试图找出它的心理负担。它还允许我对它执行各种聚合，尽管我主要关心的是平均值。

对指标价值的理解不会对每个人都一样。是的，我想知道“纸盗版”已经启动并运行，指标和事件可以对此有所帮助。但我也想知道，当它启动并运行时，它也是最好的。

能够微调游戏性是创建人们真正想玩的游戏的一部分，测量游戏性如何随着代码的变化而变化是我成为更好的游戏开发人员的一种方式。

InfluxData 是新堆栈的赞助商。

凯蒂·法默的插图。通过 Pixabay 的特征图像的背景。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>