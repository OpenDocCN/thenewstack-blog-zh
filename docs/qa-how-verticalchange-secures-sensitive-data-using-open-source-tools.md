# 问与答:VerticalChange 如何使用开源工具保护敏感数据

> 原文：<https://thenewstack.io/qa-how-verticalchange-secures-sensitive-data-using-open-source-tools/>

[](https://www.linkedin.com/in/benarent/)

 [Ben Arent

Ben 是 Teleport 的开发者倡导者。他开发过一系列开发工具，从数据库到监控系统。](https://www.linkedin.com/in/benarent/) [](https://www.linkedin.com/in/benarent/)

基于网络的云平台致力于服务社区。从一开始，VerticalChange 就旨在通过先进的数据管理和分析来增强医疗和社会服务部门的能力，并在衡量结果的同时向个人、家庭和社区提供服务。

通过在 AWS 上托管，VerticalChange 获得了一个灵活、经济高效且高度可扩展的云解决方案。作为[高级公共部门合作伙伴](https://aws.amazon.com/partners/public-sector/)，该平台通过了 AWS 的一些最严格的实施要求。

VerticalChange 符合 HIPAA 标准，并遵循严格的数据加密政策。通过其高级权限设置，客户端可以控制对信息的访问，甚至可以控制到分钟级别。该平台使用开源工具，如 Kubernetes、 [Teleport](http://goteleport.com/?utm_campaign=eg&utm_medium=partner&utm_source=newstack) 和 PostgreSQL 来实现安全性和可用性。VerticalChange 首席技术官 Dylan Stamat 在接受 Ben Arent 采访时解释了他们是如何做到这一点的。

你能告诉我们垂直变化的情况吗？

VerticalChange 是一个面向社会部门的数据系统。可以把它想象成一个 Qualtrics-meets-Salesforce CRM，带有一个动态表单生成器和分析平台。我们的客户群包括心理健康机构、无家可归者收容所、早期儿童教育机构、许多县等机构。许多数据必须遵守 HIPAA、FERPA 和一些更严格的安全规则。

**您能向我介绍一下客户是如何使用 VerticalChange 的吗？**

 [迪伦·斯塔马特

迪伦是 VerticalChange 的首席技术官。](https://www.linkedin.com/in/dylanstamat/) 

我有家人参与其中一些机构，我知道这是非常书面的。你会有装满人们记录的文件夹，但通常只有几个人在这些机构工作。他们通常需要提供季度报告来获得更多资金。这个过程通常包括坐在那里，一页一页地费力地打开文件夹，然后在 Excel 表格中草草记下记号。这真的很费力，我们希望与他们合作，将这一过程数字化。

**您已经通过了 AWS 公共部门合作伙伴计划。你能描述一下你选择的技术以及亚马逊是如何帮助你获得的吗？**

过去，亚马逊没有为 HIPAA 签署任何商业伙伴协议(BAA)。我们实际上是首批与亚马逊签订 BAA 的客户之一。工作量很大。例如，我们必须在自己的 EC2 实例上运行 PostgreSQL，因为还没有 PostgreSQL RDS 实现。AWS 也需要使用专用实例。作为一家初创公司，这很昂贵，但这是你唯一能做到的方式。您无法使用任何虚拟化的东西。一开始是牵手——V1 的基础设施——让 BAA 签了字。现在情况大不一样了。

**现在有更多的服务可以帮助你到达那里。这是否改变了您最初选择开源技术的方式，从裸机到实现合规性？**

确实如此。我们慢慢地将一些服务转移到最新最好的东西上，这取决于它是否有意义，然后我们对我们的基础设施进行了全面的重写。现在我们在 Kubernetes 上运行，并使用了许多开源工具。这实际上涵盖了我们的许多合规控制，因为 HIPAA 由一系列安全和隐私规则组成。我们还在考虑一些更高级别的认证，如 [NIST](https://www.nist.gov/) 800-53，并转向政府云，所以我们希望这些复选框被选中，并使用已经兼容的服务。

**你是如何遇到 Teleport 的，它为你解决了什么问题？**

在迁移到 Kubernetes 工作流之前，我们使用 Chef，它将 SSH 密钥放在主机上。现在我们使用 Terraform 和许多其他开源工具。仅仅管理机器访问就是一个大问题。我们会让人们上船并最终离开。使用 Chef 过程管理他们的 SSH 密钥并不总是很容易，因为您已经放弃了集群中某些机器上的 associate 密钥。

**他们会因为你有员工假而被抛弃？**

一些退役过程会失败，我们在不应该在那里的机器上有钥匙。迁移到我们使用 SSO 和 [Teleport](https://goteleport.com/?utm_content=inline-mention) 的系统非常有帮助，因为我们能够为我们的员工设置规则，并根据员工角色提供对我们基础架构某些部分的访问，并作为短期证书发放。

**您使用 Teleport 为 Kubernetes 提供访问吗？**

是的，对我们来说最重要的事情是审计对 kubectl 的访问。当您进入更高的遵从级别时，您需要知道谁可以访问机器。将这个过程自动化并拥有这些日志是很好的，这样我们可以在需要时引用它们。

**你采用 Kubernetes 的过程是怎样的？有没有一种简单的方法可以迁移到 Kubernetes——如果您已经有一个产品部署到 Kubernetes，有没有一种无缝的方法可以迁移它？**

第一步只是将我们的应用程序容器化，让我们的团队参与进来，将所有东西都放入容器中，并熟悉 Docker。这是一个学习曲线。我们确实开设了 Kubernetes 如何工作的速成班——人们不太愿意加入 Kubernetes 的潮流，因为这是一个庞大的系统。他们不知道所有的协同工作方式。一旦您将现有的应用程序容器化，将它们放入 Kubernetes 安装是非常简单的。

我们创建了一个全新的 AWS 帐户，为一些服务设置了帐户共享，并从全新的 IAM 角色开始——全新的一切。所有这些都是通过传送提供的访问通过 Terraform 创建的。所以我们从一个漂亮、新鲜、干净的装置开始，从那里开始工作。

**对于 Kubernetes 来说，你是如何处理升级的？**

牧场主让升级变得超级容易。这是一个 Kubernetes 类型的实现和管理控制台。Rancher 和 Kubernetes 几乎有一个平台即服务类型的设置，因此运行不同的服务、为每个服务设置网络，以及通过单一窗口了解我们整个基础架构的运行方式和正在运行的服务非常容易。

我们的部署是完全脚本化的，因此我们能够轻松地为我们的整个平台创建新环境。我们有一个构建流程和一个分阶段实施。只需一个命令，我们就可以创建另一个完整的环境。从那里，我们能够在这些集成发生之前对其进行测试。我们还使用 Flagger，因此我们也设置了金丝雀部署。当我们部署东西时，如果 Kubernetes 端的应用程序或基础设施中的任何地方出现错误，它会回滚到以前的版本。

**Teleport 是一个代理，提供对 EC2 主机中 SSH 集群的访问。这是您的 Chef 之旅的开始，但是现在您正在迁移到还提供 Kubernetes 对集群的访问。**

没错。在使用 Teleport 之前，我们的实现是一个堡垒机器，每个人都可以连接到不同的机器上。现在，简单多了。Teleport 很好，因为它还允许 web 访问内部应用程序。我知道你们正在做一个传送的数据库实现，我真的很期待。

**Teleport**[**数据库访问**](https://goteleport.com/blog/introducing-database-access/?utm_campaign=eg&utm_medium=partner&utm_source=newstack) **允许组织使用 Teleport 作为代理来提供对其数据库的安全访问，这对 VerticalChange 有何影响？**

这对我们来说很重要，因为它允许我们使用现有的 transport 实现，并允许基于角色访问我们的数据库实例。我们网络中最敏感的数据都在这个数据库中，我们对访问这些数据的人非常挑剔。能够审计访问和跟踪访问日志是非常重要的。现在做起来很痛苦。

**你经历过 SOC 2 流程吗？**

实际上我们现在正处于这种状态。如果你喝咖啡，那就多喝点，因为这需要很多文件。当一个新员工入职时，这里有四个你需要记录的控制，以及你如何做。实际上*并没有*那么糟糕——SOC 2 Type 1 实际上相当简单。一旦你开始查看 NIST 上的 800-53 和 800-171，你会得到更多的细节，这样一个控件可能有四个子控件。对于 NIST 171，它可能有 20 个子控制，你必须记录一切。有了 Teleport，我们可以立即访问审计日志和预先记录的大量开箱即用的安全控制的答案。

**Teleport 帮助公司获得 FedRAMP 认证，该认证在获得 NIST 控制方面与 HIPAA 有很多相似之处。**

这实际上非常有帮助，因为这些 NIST 控制措施——通过联邦程序——真的非常复杂。您通常需要引入第三方来帮助实现，然后您需要一个单独的第三方来进行实际的审查。这是一个漫长的过程。有时候很难选择正确的工具。我们对开源工具的选择相当挑剔。

**在选择开源项目时，你通常会寻找什么？**

我们寻找相当多的东西。我们关注产品由谁维护，活动水平如何，项目的脉搏。此外，如果它是由私人公司运营的，它是否有支持合同，以便您在需要与他们合作时可以优先获得支持。此外，它是否由不同的机构管理，例如 Kubernetes 在 CNCF。这对我们来说是件大事。CNCF 很好，因为它给予开源项目治理。他们会有部署时间表。他们也将有一定水平的测试标准需要发生。CNCF 在发现开源项目如何融入其他项目的生态系统方面做得非常好。

**为什么您会选择开源产品而不是专有产品？**

对我们来说，这是一个偏好的问题——我们喜欢支持开源。我们一直都有——我们团队的所有工程师。我们也喜欢在需要的时候通过为项目做贡献来钻研开源软件。所以，对你正在使用的东西有一个清晰的了解是非常重要的。

**您认为 VerticalChange 目前在哪里拥有最敏感的 PII 数据？**

大部分内容都存储在我们的 PostgreSQL 实例中，并且都是 HIPAA 下的数据。所以很多精神健康记录和其他非常敏感的信息。拥有一个高可用性的系统非常重要，因为作为一名工作人员，比如说在心理健康领域，如果有人打电话或来到办公室自杀，你需要能够立即查看他们的记录，并能够非常快速地做出反应。对于纸张，跑到文件柜中查找资料非常耗时，因此能够立即访问客户的历史记录非常重要。

**日益增长的远程工作趋势正在推动这些组织的数字化转型** **这些组织不仅需要随时随地访问记录，还需要在关键时刻为员工提供关键护理。**

绝对的。我们立即在应用程序中添加了视频功能，因为我们的许多机构都受到了疫情的重创。

**对于试图在这些高度管制的环境中统治并寻求采用开源技术的读者，有什么建议吗？**

如果您需要看到一致性，请确保您正在使用的项目已经使用了一段时间，并且有付费服务合同。有很多东西来来去去，所以能够很好地驾驭它是很重要的。团队中经验越丰富的人参与进来——他们已经看到项目来来去去，所以他们知道要寻找什么。从您使用的任何东西的安全角度来看它是很重要的，这样您就能够确定这是否是需要所有控制的东西，您可以在未来检查。

**这是 AWS 的共同责任模式。但最终，您要负责配置您的基础架构。这就是 Teleport 和 Kubernetes 以及其他工具可以帮助保护顶层的地方。你能谈谈你在这方面帮助保护的其他工具吗？**

很多 AWS 工具只能帮你做到这一步。现在有如此多的选择，而且这些工具经常改变。您必须仔细挑选，并确保在工具成为您的过程的一部分之前，您能够支持并适当地管理它们。否则，工具本身会变成一个过多的过程，你会被工具淹没。

也就是说，我们确实使用了很多 AWS 工具。我们使用 CloudTrail 进行日志记录。为了不可否认，我们将日志发送到一个我们无法访问的独立 AWS 帐户。我们使用很多他们的安全套件，所以我们使用他们提供的 GuardDuty 和其他安全工具。

**尽管 HIPAA 不像 FedRAMP 那样规范，但它可以更加模糊。VerticalChange 如何满足 HIPAA 要求？**

正是那样:非常模糊。没有一个真正的管理机构会从卫生与公众服务部认证 HIPAA。当有隐私规则或安全规则时，我会经常查看 NIST，看看有什么指导原则，因为这是我们最终要做的事情。我只是按照满足一些 FedRAMP 要求的要求来查找我下一步需要做的事情的严格性阶梯，然后在 HIPAA 上下文中实现它。

**你购买或购买的任何工具的另一点** — **合规性是你必须持续获得的东西，即使你已经实现了。合规性不是一次性的复选框。**

绝对的。在你经历了 SOC 2 Type 1 之后，你还得经历 SOC 2 Type 2。这是类型 1 的延续，你将不得不不断地重新审视它。许多这些规则和控制是连续的。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>