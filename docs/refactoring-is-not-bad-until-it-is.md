# 重构并不坏，直到它变坏

> 原文：<https://thenewstack.io/refactoring-is-not-bad-until-it-is/>

[Raygun](https://raygun.com/) 赞助本文。

 [科林·兰卡斯特

科林是 Raygun.com 的作家，他的能力范围从产品管理到团队领导到销售到运营。他领导过团队，并为多个垂直行业提供咨询，包括制造业、农业、零售业和医疗保健业。](https://raygun.com/) 

何时停止对工作代码库进行更改是业界最容易被忽视的问题之一。伟大的开发人员将继续推动不同层次的重构。他们坚持认为重构会增加可读性，降低实现新功能的难度，并使系统[不容易出现软件错误。](https://raygun.com/platform/crash-reporting)这都是真的。但是产品领导和开发人员真的了解重构一个工作产品的风险吗？他们是否明白选择什么都不做可能是对企业最好的决定？

今天，我们将讨论伟大的开发人员为什么想要重构的更深层次的原因，即使这不是一个好主意。我们还将讨论为什么重构可能会给你的业务带来不必要的风险。一旦你掌握了这些知识，你就能做出让你的开发者和客户都满意的决策。

## 开发人员需要重构

重构通常源于良好的意图。一名开发人员认为，在这里进行一点点重构，在那里添加一些新的库，工作将会完成得更快，每个人都会更乐意在代码库中工作。开发人员进行重构的一个不太常见也更自私的原因是，他们认为代码永远是糟糕的，除非是他们自己写的。但是在每一个场景中，重构的原因都是一样的:他们不熟悉代码库，重构会让他们更加熟悉。

软件开发行业的新东西似乎每个月都在变化。开发人员，尤其是优秀的开发人员，希望使用最新的和最优秀的产品，这样他们就能掌握自己的技术。无论是从 SOA(面向服务的架构)切换到微服务架构，还是使用最新版本的。NET 框架，解决方案是一样的。重构应用程序以使用这个很酷的新东西。

什么时候重构不是明智的路线？让我们讨论一下什么时候不应该走这条路，以及开发人员可以关注的其他创收任务。换句话说，并非所有的重构都是不好的。

## 如果是稳定的产品，就不要碰

如果您看不到该产品线的增长领域，则进行应用程序更改不仅风险极高，而且不会带来投资回报(ROI)，并且会带来巨大的机会成本。就风险而言，架构变更必须绝对完美，以避免影响用户的回归错误。如果用户不抱怨问题，而你引入了导致问题的变化，你就有了客户服务的噩梦。您在影响客户的架构变更上冒了风险，但却没有给他们带来任何回报。团队可能会说，有了健壮的自动化测试套件，他们可以减少回归错误的风险。但是从来没有人拥有 100%的测试覆盖率，或者完全理解客户可能使用他们产品的所有创造性方式。

这个行业的底线是，如果你的产品在工作，客户在付费，而你没有引入新的特性，那么重新架构应该在你的优先级列表中排在很低的位置。

## 不要重建；建造正确的东西

开发人员是产品团队中最有价值也是最昂贵的成员。让你最有价值的团队成员从事最有可能促进业务发展的功能是有意义的。这样做的一个很大的好处是，当开发新特性时，开发人员不再需要重写所有的东西。他们可以开发与业务战略一致的新功能，并且可以用正确的方式构建它们。

本质上，重新构建一个稳定的系统对您的业务没有任何帮助。有时这是合适的，但是很有可能开发能力应该用在其他地方以获得更好的潜在投资回报。

## 产品生命周期中的正确点

从商业角度来看，有些情况下新的架构或重大重构是合理的。考虑以下场景:

*   该应用程序能够通过新功能增加收入；
*   你已经超越了你的 MVP。

在这些情况下，渴望重构的开发人员会对你的业务有所帮助。

处于成长阶段的产品可以通过附加功能加速成长。这是假设这些功能已经被潜在客户验证过——或者更好的是，客户付钱给你来开发它。一个新的架构或新特性的重构可能是有意义的，但有一些警告。首先，新的架构必须给你一些实际的好处，而不是“更好”可能是这些变化允许在三分之一的时间内完成一个特性。也许这可以最小化开发人员的入职成本。或者，它可能将应用程序编程接口(API)的响应时间缩短了一定的百分比。无论哪种方式，使用应用程序监控软件，如 [Raygun](https://raygun.com/) 将有助于您能够查明现有应用程序的关键问题，还将有助于您根据数据做出重构的决策。

即使有了新的开发，重构一个新的架构也是有风险的。它不应该成为新作品的默认设置。如果您决定变更将有足够的 ROI，您仍然必须确保您的新架构不会破坏现有的特性，并且能够迭代地完成。这不是公开邀请团队重写整个应用程序。相反，这是一个提升和转变架构的机会，他们认为这是应用程序未来的理想架构。

## 结论:将它带回给开发人员

产品经理和高管有很好的机会让开发人员适应业务的增长需求。这给了开发人员一个以安全的方式引入新架构的机会。这样，当生产经理和开发人员在同一页面上时，对工作应用程序进行不必要的更改就不是问题了。它是关于以客户愿意支付的正确方式构建新事物或重新配置现有架构。如果重构有助于改进现有的或新的代码，那么无论如何，开发人员应该有做出选择的自由。如上所述，仅仅为了重构而重构是没有意义的。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>