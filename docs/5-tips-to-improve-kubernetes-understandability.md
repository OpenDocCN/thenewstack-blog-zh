# 提高 Kubernetes 可理解性的 5 个技巧

> 原文：<https://thenewstack.io/5-tips-to-improve-kubernetes-understandability/>

[](https://www.linkedin.com/in/joshuahendrick/)

 [乔希·亨德里克

乔希是 Rookout 的高级解决方案工程师。他喜欢发现新技术，曾在许多科技公司工作过。他曾在香港、悉尼、纽约生活过，并游遍了欧洲和亚洲。在他的空闲时间，你会发现他练习太极，弹吉他，创作音乐。](https://www.linkedin.com/in/joshuahendrick/) [](https://www.linkedin.com/in/joshuahendrick/)

如今，当您与企业开发团队交谈时，他们很有可能正在将应用程序迁移到云，或者正在构建云原生绿地应用程序。虽然有许多方法可以在云中运行这些应用程序，但 Kubernetes 通常是首选平台。它提供了一个强大的容器编排平台，这为应用程序的发展提供了足够的增长空间。

当然，尽管 Kubernetes 带来了强大的功能和惊人的新功能，但对于没有经验的用户(有时甚至是有经验的用户)来说，导航可能会很困难。大多数人都同意，在 Kubernetes 上运行的应用程序的管理、部署和故障排除需要一个学习过程。本文的其余部分致力于在入门时提高 Kubernetes 的易用性和可理解性的一些技巧。

## 1.使用 Helm 管理包

在之前的一篇文章中，我已经从技术的角度谈到了 Helm，但是值得讨论的是它如何不仅给你的过程增加价值，而且给你的客户如何消费你的软件增加价值。通过使用 Helm charts 打包您的 Kubernetes 应用程序，它允许您的客户快速轻松地使用这些应用程序或服务，而无需深入了解这些服务的内部工作原理。只需从 CLI 执行几个命令，您的应用程序就可以启动并运行了。

当您面向客户的团队出去与您的客户一起部署您的软件时，这也是非常宝贵的。设置过程漫长而艰难的应用程序给客户和负责部署它们的内部团队都增加了额外的负担。随着时间的推移，管理这些已部署应用程序的长期维护成本可能会累积为技术债务，从而减缓您的开发和工程进度，因为当出现问题时，开发人员通常需要介入帮助。Helm 绝不是解决所有这些问题的灵丹妙药，但它确实有助于降低复杂性，并提高应用程序在 Kubernetes 中的部署过程的可理解性。

## 2.使用远程调试器进行调试

如果不增加 Kubernetes 作为运行时环境的复杂性，应用程序调试已经够困难的了。当您在生产或预生产环境中发现一个 bug 时，有时您只想直接跳进去，在代码运行的地方开始调试代码。连接调试器并不总是一件简单的任务；有时，由于安全性和合规性的原因，这甚至是不可能的。在这些情况下，就要回到添加日志代码和运行构建、部署和发布过程的典型方法，直到您找到帮助您查明缺陷的数据。

远程调试器是一个完美的解决方案，能够更好地理解代码的运行，而没有添加日志或创建缺陷再现环境的所有开销。远程调试器通常作为代理或 SDK 与您的应用程序一起运行，并允许您拥有传统的“本地调试器”体验，但使用远程部署的应用程序。这些可能是现代开发工作流程中非常有价值的部分，并且极大地减少了缺陷解决的时间。

## 3.用名称空间管理 Kubernetes 资源

使用 Kubernetes 名称空间有助于对部署的服务进行逻辑分区，从而使集群更容易被多个团队或用户理解和使用。默认情况下，Kubernetes 会在配置集群时实例化一个默认名称空间，并由管理员来创建其他名称空间。这些名称空间提供了一种将多种授权策略或策略附加到集群的这些逻辑分区的好方法。这意味着多个服务、团队或项目可以出于不同的目的或以不同的安全级别使用同一个集群，而不需要为每个用例创建单独的集群。团队甚至可以利用一个集群来模拟多个部署环境，例如开发、试运行或 UAT。这种环境划分确保了可以维护已部署组件的命名约定，而不会在每个环境之间产生冲突。

## 4.尝试终端或基于浏览器的用户界面

在与许多一头扎进 Kubernetes 微服务开发的客户合作中，我看到他们中的许多人采用交互式终端或图形 UI 工具来管理他们的集群并与之交互。这可以使集群组件(pod、服务、部署)的导航速度更快，甚至可以缩短寻找路径的学习曲线。它们通常很容易安装，可以提高日常工作流程的效率。

有许多不同的选择。一个免费好用的是 [K9s](https://github.com/derailed/k9s) 。K9s 直接在命令行终端中提供了一个简单高效的集群查看器。您可以使用简单的键盘快捷键来导航您的集群，而不必严重依赖 *kubectl* 命令。为了更好地理解您的集群，另一个开源选项(但这次是基于浏览器的)是 [Octant](https://github.com/vmware-tanzu/octant) ，它允许您直接从浏览器导航您的集群并与之交互。无论您是使用上述功能之一，还是直接在云提供商中使用集群管理功能，拥有带快捷方式的可视化工具都有助于加快您的工作流程并降低复杂性。

## 5.考虑一个服务网格

服务网格是一种工具，用于管理和简化 Kubernetes 集群中运行的微服务之间的大量通信。他们试图抽象和简化无论构建何种类型的应用程序都需要的任务，例如微服务间的通信、发现、安全、跟踪和监控。通过使用服务网格，您可以将网络、安全性和可观察性逻辑与特定于应用程序的业务逻辑分开，从而有效地消除了为这些特定功能维护您自己的代码的需要。

这个领域的一些主要参与者有 [Istio](https://istio.io/) 、 [Linkerd](https://linkerd.io/) 和 [Consul](https://www.consul.io/) 。这些解决方案通常运行在您现有的基础设施之上，作为您的 pod 的附属设备。当谈到应用程序的可理解性和可维护性时，您可以从开发团队中卸载的核心应用程序运行时功能越多越好。

## 结论

一头扎进 Kubernetes 可能是一项艰巨的任务，但有一些技术可以让生活变得更容易。无论您是刚刚开始采用 Kubernetes，还是已经走上正轨，考虑采用新技术或流程来提高对 Kubernetes 环境的可理解性都没有坏处。

*要了解更多关于 Kubernetes 和其他云原生技术的信息，请考虑参加 5 月 4 日至 7 日在[T2 举行的 kube con+CloudNativeCon Europe 2021 虚拟大会。](https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/)*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>