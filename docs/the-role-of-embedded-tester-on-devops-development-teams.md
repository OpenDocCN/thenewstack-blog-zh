# 嵌入式测试人员在 DevOps 开发团队中的作用

> 原文：<https://thenewstack.io/the-role-of-embedded-tester-on-devops-development-teams/>

随着 DevOps 为持续交付和集成而努力，持续测试成为整个快速稳定性转变的更大部分。在敏捷驱动的 DevOps 和极限编程实践之前，测试团队通常在开发过程结束时接收代码，越过众所周知的墙。现在，我们不仅看到开发人员执行他们自己的测试，而且测试人员也包括在开发和基础设施团队中。

最终目标不再是测试人员在代码编写后检查代码，而是在一个通过自动化和对生产数据的响应来寻求速度的组织中扮演一个更具战略性的角色。

今天，我们与其中两位嵌入式测试人员交谈，以了解它如何在两家规模非常不同的数字驱动公司——脸书和 Moo——工作，因为他们希望以一种他们认为与流行网站[可靠性工程](https://thenewstack.io/site-reliability-engineering-cloud-native-operations/)截然不同的方式来加强软件。

### Moo 嵌入式测试工程师的选择

[大约两个月前，Abby Bangser](https://twitter.com/a_bangser/) 作为平台团队的高级测试工程师加入了[在线印刷和设计公司 Moo](https://www.moo.com/uk/about/workingformoo.html) 及其 100 人的技术部门，这本身就是一个不同寻常的角色。Moo 信奉 DevOps“产品而非项目”的精神，每个技术团队都有一名测试工程师、一名产品负责人和一名敏捷教练。

Bangser 告诉新堆栈，测试工程师被嵌入到技术团队中，以打破孤岛。她很快表示，她的工作不是为开发人员进行测试，而是通过识别合适的需求并利用测试工具来支持它们，来帮助团队识别质量对每个服务意味着什么。

“我们的工程师负责利用工具进行自己的监控，编写自己的服务级别警报，运行自己的管道，包括生产部署和监控，”她说。

Bangser 认为她在平台团队中的角色——她说平台团队结合了平台工程、操作和测试——是小型开发团队中站点可靠性工程师的一个很好的替代。她说，她的角色侧重于基础设施和供应、共享资源，以及这些服务的可观察性。

她说“我来自软件开发测试背景，与大多数平台团队成员相比，我有点与众不同。这是一个将受益于更多地参与部署和基础设施工作的概况。我相信软件测试人员能够[带来]识别用例以及特性价值的能力。”

> "软件测试人员识别用例以及特性的价值."艾比·邦瑟，哞

Bangser 继续说，她的角色包括大量的需求和用户故事分析。她说这也有助于支持开发者体验。

“你关注用户体验。我听到开发人员总是说‘他们不需要 UX，因为它是一个 API。’但如果你在开发软件，你就有用户，作为一个平台团队，我们绝对了解我们的用户——他们(用户)就是开发团队，”她说。

她说，测试工程师的角色有助于整个团队关注任何变化对最终用户的影响，这意味着要确保文档、培训、功能优先级和更新沟通都处于首要位置。

### 如果不是每个人都随叫随到呢？

新的堆栈已经谈了很多关于[随叫随到轮换](/call-rotations-best-wake-devs-middle-night/)作为零停机开发运维文化的重要组成部分。但是如果不是每个人都随叫随到，会发生什么呢？在 Moo，软件工程师还没有。目前，只有在黑色星期五和网络星期一销售 T4 等活动之外的平台和运营部门工作的人。但是，工程团队中的每个人都需要了解呼叫上报背后的思维过程，因为他们通常是警报的提出者。

“由于他们不是会被叫醒的人，他们不一定有设置门槛的经验，”邦瑟解释道。

> MOO“浸泡测试”事件升级，以便每个人都了解应该采取什么样的待命措施。

她说，在 Moo，他们运行自己的[浸泡测试](https://en.wikipedia.org/wiki/Soak_testing)——运行一个更长试用期的测试，以真正验证稳定性——对软件团队想要放入[页面责任事件管理工具](https://www.pagerduty.com/)的任何警报。

“我们让警报在创建警报的团队的空闲通道中运行一段时间，这使他们能够将其调整到正确的级别，在发生事件时，我们应该采取措施。”

Bangser 继续说，他们与随叫随到的支持人员合作进行这种微调和指导。

### 面向脸书重载的 DevOps 基础设施

Evan Snyder 已经在[脸书](https://www.facebook.com/careers/)公司担任生产工程师四年了，其中最后两年在测试基础设施部门工作。她说，生产工程师是 DevOps 的一种角色，就像网站可靠性工程师，但像 Moo 的测试工程师一样，更多地与开发团队整合，甚至一起编写路线图。

![](img/e159ae68b0739b80a51df8232bb24189.png)虽然开发人员负责编写他们自己的测试，但 Snyder 告诉新的堆栈，“团队不必重新发明轮子来在正确的时间运行和跟踪他们的测试。测试基础设施团队为测试选择、执行、分类和报告构建共享系统，以支持测试编写后的整个生命周期。”

Evan 说:“DevOps 方法允许我们发布高质量的代码，因此在正确的时间运行正确的测试是至关重要的，因为它有助于我们在部署之前确保一切安全。我们有一大套测试，对我们的应用程序提出现实的请求，验证功能是否按预期运行。”

> 脸书混合使用连续单元、集成和端到端测试。

在脸书，每个产品团队都有三种类型的测试，它们会对提交到脸书主存储库中的任何变更持续运行:

*   [单元测试](/unit-testing-time-consuming-product-saving/)——非常小且有针对性的测试，他们在早期编写了很多这种便宜的测试
*   集成测试——更大块的依赖代码
*   端到端测试—成本更高，运行时间更长

Snyder 说，这一切都是为了尽早向开发人员发出任何异常信号:

“要么是您的测试被这一更改破坏了，要么是主[回购]中有什么东西被破坏了，所以请过来看看发生了什么。”

毫不奇怪，脸书的应用套件，包括 Messenger、WhatsApp 和 Instagram，比几乎任何服务都要承受更重的负载，这意味着任何形式的中断都可能影响大量的人，因此需要大规模的测试覆盖。

### 对大量设备进行自动化测试

同样，尽管脸书和它的其他应用程序非常普遍，但它比许多人更需要跨环境测试，比如针对特定操作系统的不同版本的应用程序:iOS、Android 和 KaiOS。这就是脸书创建测试资源库的原因。

一个世界是脸书的一个内部工具，它提供了库和基础设施，通过一个通用的 API 向服务和工程师公开运行时。运行时的“生产化”例子包括仿真器、模拟器、web 浏览器或设备。为了说明“同一个世界”的运营规模，脸书每天通过这些现有部署运行数百万次测试。

当产品开发人员想要测试 Android 应用程序的构建，但不想设置复杂的 Android 模拟器时，可以使用 One World 或者当有人想要在 Windows 上尝试一些东西，但没有 Windows 机器时，可以使用 One World，这样他们可以使用虚拟机进行测试。脸书甚至有一个用于测试手机等设备的物理实验室。

他们正在处理的所有事情都需要重点回答:

*   我如何设置它以准备运行测试？
    测试人员如何与客户沟通？
    我如何在事后进行清理，以确保资源的健康状况良好？

一个世界包括硬件管理、移动设备实验室、性能测试、功能测试和模拟正确性测试——点击这个可以做到吗？Snyder 说，性能测试必须在实际的硬件上进行，这使得它更具挑战性。

> "脸书生产工程团队的目标是资源效率和合理的测试策略."——埃文·斯奈德，脸书

开发人员从生产工程师那里学习如何评估执行和运行测试的代价——时间和容量资源。

Snyder 说“我们所有团队的目标是尽可能高效地使用资源，包括硬件和计算。如果你在一堆服务器上执行每一个测试，如果有很多拉请求同时到来，我们能把它们一起批处理吗？”

脸书正致力于“在每一层测试中做到事半功倍”。无限运行的测试不会永远扩展。”

PagerDuty 是新栈的赞助商。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>