# DCHQ:以类似于虚拟机的方式自动化容器部署

> 原文：<https://thenewstack.io/dchq-automating-container-deployment-in-similar-ways-to-vms/>

企业习惯于以映像的形式部署应用程序，但是是以某种受控、受监控、或许受监管的方式。他们习惯于处理应用程序的生命周期。Docker 是一场“运动”(阿洛·古瑟瑞曾将其定义为每天有 50 个人随机闯入唱它的主题曲)，但虚拟机管理的既定顺序是明确的。命令并没有推翻它，但是毫无疑问，有两个因素的变化正在发生。传统基础设施将继续运行大型系统。但是在前端是一个真正的向 Docker 和新形式的容器编排的转变。

考虑到企业中不断变化的动态，DCHQ 正在寻求实施[一种部署自动化平台](https://dchq.io/)，为基于容器的应用程序提供治理、部署自动化和生命周期管理。

使用 DCHQ，管理员可以将容器在合成期间可能需要的资源分组到访问集群中。然后，可以将供应权限分配给这些集群。然后，它可以应用配置后控制，限制开发人员对部署容器的生产域的访问，例如，开发人员可以执行 Docker 用户已经习惯的监控、编排和更新流程，以及使用 Jenkins CI 的诊断和连续交付。

## 访问控制

容器自动化平台提供商 DCHQ 的首席执行官兼创始人阿姆贾德·阿法纳赫说:“当容器被引入时，对于许多拥有现有技能或构建应用程序的思维方式的开发人员来说，这只是一个他们无法迅速接受的重大转变。”。“我们试图做的是帮助企业以最小的努力将应用程序容器化。”

正如 Afanah 解释的那样，“传统的 IT 部门仍然希望拥有它，或者中央 DevOps 团队构建标准的容器映像，然后让开发人员在这些映像上部署他们的代码。这就是我们引入 bash 脚本插件框架的地方，它允许您在运行时和后期配置时定制容器。”

对于自动化容器创建过程来说，这是一个足够简单的概念，但也可以将其转换为一系列步骤，这些步骤大致类似于创建虚拟机所采取的步骤。安全控制框架可以像以前一样应用于这些步骤。

在上一次 VMworld 大会上，VMware 讨论了它计划如何实现它所说的容器所缺乏的安全功能:将容器包装在 VM 框架中，并将它们与 vSphere 中的其他 VM 一起部署，在 VSP here 中已经实施了现有的控制。

> 如果烘焙一个蛋糕主要是把每种配料放进一个单独的杯子里，然后把所有的杯子放在冰箱里，存放在烤箱里，效果可能差不多。

真正的容器化是指部署可以有效伸缩的微服务。DCHQ 处理“缺失”安全元素的方法旨在保持容器的架构和身份，从而使微服务成为可能。如果你愿意的话，世界之间的桥梁是由“插件”组成的，在 DCHQ 的例子中，这些插件是 bash 脚本的包装器，开发人员和 IT 专业人员应该很容易识别。

“‘治理’的定义非常广泛，”Afanah 警告我们，“我们并不声称提供容器治理的所有内容。我们提供的是 IT 所需的访问控制，使开发人员能够释放 Docker 的灵活性，通过我们的平台加速应用开发。”

典型的 Docker 文件已经附加了一个脚本，其中简单地说明了如何组成相关的容器。该脚本包含从注册中心(如 Docker Hub)请求资源的命令，但更常见的是从组织的私有注册中心请求资源。

在传统的 IT 环境中，此类请求附带有控制措施。在这个上下文中，我所说的“控制”并不是指代码段，而是指 IT 经理监督的过程，尤其是实现对公司资源的访问控制。脚本通常以访问它们的用户的权限级别执行，如果是开发人员，该权限通常相对于开发人员的本地领域来说非常高。为了让这样的脚本对生产领域的开发人员有用，可能必须提供对有限命令行的 SSH 访问。对于一些组织来说，这是不允许的。

Afanah 说:“如果作为一名开发人员，你能够在不访问实际主机的情况下做你需要做的一切事情，那么你就不需要担心这一点。”

## 不间断的变化

正如阿姆贾德·阿法纳坦率承认的那样，DCHQ 还没有像野火一样蔓延。

“老实说，早期采用者不像典型的企业 IT 部门，他们甚至没有尝试过虚拟化，”他评论道。“对我们来说，这些不是最佳客户，因为你首先必须在 Docker 上销售他们，甚至是一般的虚拟化，然后谈论如何加快应用程序开发，消除影子 IT，以及所有这些东西。通常，我们的客户是这些超大型企业中的创新群体。这些人已经在运行某种虚拟化—大多数情况下是 OpenStack 或 vSphere，有时是 CloudStack。

“我们试图告诉他们的是，你不必完全调整或破坏你做事的方式，”阿法纳继续说。“基本上，您可以使用现有的虚拟化解决方案来释放 Docker 的力量。”

众所周知，容器化的艺术是由开发人员为开发人员构思、生产和交付的，而新堆栈的大部分基础就是建立在这种艺术之上的。即使在今天，Docker 的演示仍然以开发人员从原始和收集的代码中组装容器组件，将其部署到平台，并从那里运行它为特色。

Docker Inc .的首席技术官所罗门·海克斯去年 6 月 22 日在 DockerCon 说:“计算机除了计算你的软件之外，没有别的用途。

企业可能会反对这种观点。当然，Docker、CoreOS、Weave、ClusterHQ 以及基本上所有领先的开源贡献者都知道，他们试图取代的平台是由 IT 部门管理的——具体来说，是由外部消息人士告诉我不要阅读这份出版物，甚至可能没有听说过它的人管理的。

有些人甚至把使用 Docker 等同于“影子 IT”的实践。虽然这听起来像是一个激烈的结论，但请记住，在大多数组织中，“影子 IT”是指在没有信息技术部门许可的情况下实践信息技术的行为。这非常符合 Docker 部署演示的模型。

这是一个严重的问题——对容器化来说，对我们来说，也许对您也是如此，不仅仅是因为有些人认为容器化是针对 IT 部门的阴谋。组织有义务(可能是自愿的，也可能是合法的)遵守安全控制。

你不可能像改变一家餐馆的整个菜单那样改变一个组织中的所有技术。最好的改变想法是那些在系统内起作用的想法，而不是不顾系统，并最终改进系统。

CoreOS、Docker 和 Weaveworks 是新堆栈的赞助商。

专题图片:G [ianni Del Bufalo](https://www.flickr.com/photos/bygdb/) 的“[意大利马尔凯安科纳-集装箱](https://www.flickr.com/photos/bygdb/14276323800/in/photolist-nKxTFN-6W4iTE-j7jb3f-3FpbaU-d1Nqc-an9FYm-8F9u6r-5mDbRZ-4UUC3M-brhG5b-ygsgBT-75qi8o-6h8a1M-odKYvP-abB8iv-6eVnJP-3eHezK-kvGrjM-4aSGdf-8it3SY-9pDbxJ-bwAtkv-wvKHg-6YuF75-3FkH1H-ecDex2-7Rv2hG-5aGWYj-s3fJUN-cAwHkA-eYQEL4-4Vr5Qj-4Xp5Za-hUj1QM-7khCbz-avrpZx-a9rTWb-7tnHRL-gibiAV-69vGrH-oQPTW5-p83HCR-a36UbW-dRFb72-j7eVDH-q2RpwE-58hqim-55e4wE-ecBUvW-fqfWnT)”在 [CC BY-SA 2.0](https://creativecommons.org/licenses/by-sa/2.0/) 下获得许可。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>