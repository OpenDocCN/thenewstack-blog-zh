# Java 18:不要睡在简单的 Web 服务器上

> 原文：<https://thenewstack.io/java-18-dont-sleep-on-the-simple-web-server/>

当甲骨文上个月发布 Java 18 时，它的一个稍微被忽视但有趣的新特性是简单的网络服务器。

甲骨文通过 Java 增强协议(JEP) 408 推出了[简单网络服务器](https://blogs.oracle.com/javamagazine/post/java-18-simple-web-server?s=09)。 [JEP 408](https://openjdk.java.net/jeps/408) 提案将简单的 web 服务器描述为提供命令行工具和 API 来启动只服务静态文件的最小化 Web 服务器。没有 CGI 或类似 servlet 的功能可用。

## 用于原型制作、测试等。

甲骨文表示，该工具旨在用于原型开发、特别编码和测试，特别是在教育领域。

Oracle Java Platform Group 的 OpenJDK 开发人员 Julia Boes 在[博客文章](https://blogs.oracle.com/javamagazine/post/java-18-simple-web-server?s=09)中说[这个简单的 Web 服务器是一个最小的 HTTP 静态文件服务器，它是在 JEP 408 中添加到 jdk.httpserve 模块中的。它服务于单个目录层次结构，并且它只服务于 HTTP/1.1 上的静态文件；她写道，不支持动态内容和其他 HTTP 版本。](https://www.linkedin.com/in/juliaboes/?originalSubdomain=ie)

Boes 说:“web 服务器的规格是由使 JDK(Java 开发工具包)更易接近的总体目标决定的。”。“该服务器是一款开箱即用的工具，具有简单的设置和最少的功能，可让您立即投入运行，专注于手头的任务。简单的设计也避免了与功能丰富或商业级服务器的混淆，毕竟，对于生产环境来说，存在更好的替代方案，在这种情况下，简单的 Web 服务器不是正确的选择。”

事实上，另一个目标是减少开发者的激活能量，使 JDK 更容易接近。第三个目标是通过命令行提供一个默认的实现，以及一个用于编程创建和定制的小 API。

## 命令行和 API

简化的服务器可以通过专用的命令行工具 jwebserver 使用，或者通过其 API 以编程方式使用。在命令行中，使用命令$ jwebserver 启动简单的 Web 服务器。Oracle 还为服务器创建定义了新的 API，并使用新特性定制了请求处理。

Boes 说:“简单的 Web 服务器旨在促进原型制作、调试和测试任务，我希望最小命令行工具和一组灵活的 API 点的组合能够实现这一目标。”jwebserver 工具为命令行带来了基本的服务器功能，而简单的 Web 服务器 API 点提供了完全可自定义的服务器组件，有助于处理不太常见的情况和极端情况

## 面向新开发人员

甲骨文公司 Java 平台组软件开发副总裁 Georges Saab 告诉 New Stack，这款新工具对刚接触 Java 的开发人员和教育工作者特别有用，基本上可以让学生很容易地启动和运行、启动 web 服务器，并为他们提供编写 Java 应用程序所需的所有基础设施。

“简单的 Web 服务器代表了我们的持续投资，以使 Java 对下一代开发人员来说更容易理解。让学生和教育工作者更容易掌握 Java。做一些开箱即用的酷东西，而不必引入许多新概念，”[甲骨文公司开发人员关系副总裁查德·阿里穆拉](https://www.linkedin.com/in/chadarimura/)告诉新堆栈。

例如，启动一个 web 服务器，下载 NGINX 并让它运行，然后在此基础上编写 Java 代码并部署它，这包括学生不想学习的几个步骤，他说，并指出服务器可能是他在 Java 18 中最喜欢的功能。

“使用一个简单的 web 服务器，你下载 JDK，输入 jwebserver，它会向你的本地主机接口发出一个回环，并自动生成一个包含一些 Java 代码的 index.html 文件，你几乎不用思考就可以参加比赛。然后你可以开始插入你自己的代码，”Arimura 说。“所以我认为这和 Java 结合起来很酷。有了 JShell 工具，你现在可以在命令行做很多以前做不到的非常酷的事情。”

然而，像[Azul Systems](https://www.linkedin.com/in/siritter/?originalSubdomain=uk)的副首席技术官西蒙·里特这样经验丰富的 Java 专业人士说，他们对新的简单服务器似乎在方向上的变化感到有点困惑。

“我明白，这是为了测试，”里特说。“但我知道，当我们到达 JDK 9 时，OpenJDK 的开发人员说的一件大事是，我们真的想尝试去掉我们在 JDK 中包含的所有多余的东西，并把它归结为开发 Java 所需的核心内容。你知道，那很好，除了现在我们又回到了另一条路上。让我们包括一个 web 服务器。为什么？我的意思是，我们真的需要网络服务器吗？”

然而，JEP 408 的描述道出了甲骨文在这个问题上的想法。

“它的目标不是提供功能丰富或商业级的服务器，”描述中写道。“更好的替代方案存在于服务器框架(例如 Jetty、Netty 和 Grizzly)和生产服务器(例如 Apache Tomcat、Apache httpd 和 NGINX)的形式中。这些成熟且性能优化的技术需要花费精力进行配置，这正是我们想要避免的。”

然而，使用一个小型的开箱即用服务器，开发人员，尤其是新手，可以执行:

*   Web 开发测试，其中本地测试服务器用于模拟客户机-服务器设置。
*   Web 服务或应用程序测试，其中静态文件被用作目录结构中的 API 存根，该目录结构镜像 RESTful URLs 并包含虚拟数据。
*   跨系统非正式地浏览和共享文件，例如，从本地机器搜索远程服务器上的目录。

“Python、Ruby、PHP、Erlang 和许多其他平台提供了从命令行运行的开箱即用的服务器，”JEP 408 的描述说。"现有的各种替代方案表明了对这种工具的公认需求."

总的来说，这代表着甲骨文在 Java 方面取得了良好而稳定的进展，这也是开发者和 cxo 们对编程语言平台提供商的期望，[星座研究公司](https://www.constellationr.com/)的分析师 [Holger Mueller](https://www.linkedin.com/in/holgermueller/) 说。

“增加一个简单的网络服务器是开发速度的关键，因为开发人员可以更早、更容易、更快地测试和验证代码，”他指出。

## 功能齐全

除了简单的 Web 服务器之外，Java 18 还在性能、稳定性和安全性方面进行了数千次改进，包括 9 项提高开发人员工作效率的增强功能。

其中包括在 Java API 文档中添加代码片段的能力(JEP 413)，这简化了在 API 文档中添加示例源代码，以及用于原型和测试的简单 Web 服务器(JEP 408)。开发者还可以试用两个孵化模块:Vector API (JEP 417)和 Foreign Function and Memory API(JEP 419)，以及一个预览功能:[针对 Switch 的模式匹配(JEP 420)](https://openjdk.java.net/jeps/420) 。

然而，甲骨文公司 Java 和容器原生产品管理和开发者关系高级主管 Sharat Chander 告诉新的堆栈，“这不一定都是关于功能的，因为每个版本都与性能有关。”Chander 说，“对我来说，能够利用新的运行时在新的版本上获得超越以前版本的现成改进，这是一个跟上时代的理由，因为性能对现代应用程序开发至关重要。”

## 开关的模式匹配

JEP 420 正在进行第二次预演。它为开关表达式和语句提供了模式匹配，以及对模式语言的扩展。将模式匹配扩展到 switch 允许根据多个模式测试一个表达式，每个模式都有一个特定的操作，因此复杂的面向数据的查询可以被简洁而安全地表达。

萨博称 switch 的模式匹配是他最喜欢的功能之一。“这是对不可变数据的支持和推理，”他说。"它所允许的编码风格真的非常方便和直观."萨博说，“虽然就人们编程的方式而言，这是 Java 的一系列改进中的一小部分，但我认为几年后，我们会回过头来看，就像是，‘哦，我的上帝，没有它我们怎么生活？’对吗？”

总的来说，通过其为期六个月的 Java 发布节奏，Oracle 提供了从早期版本开始的工作的平稳延续，如 switch 的模式匹配。

[Omdia](https://omdia.tech.informa.com/) 的分析师[Brad shimmen](https://www.linkedin.com/in/bradshimmin/)说:“JEP 420 包括扩展的模式匹配，这将帮助 Java 开发人员在面向数据的查询方面做得更多——这种能力和思维方式将在日益面向数据的应用市场中很好地服务于 Java。无论如何，这种滚动更新的“慢烧”方法至关重要，因为它使开发人员能够更快地开始使用完全成熟的和新引入的功能，而没有风险或复杂性

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>