# 连续积分可观测性解释

> 原文：<https://thenewstack.io/continuous-integration-observability-explained/>

持续集成(CI)是一种 DevOps 实践，通过这种实践，工程师贡献的代码被频繁且自动地集成到项目中。CI 涉及共享版本控制系统(VCS)的使用，它通常伴随着其他工具(包括测试工具)来管理源代码。工程师使用共享的 VCS 推动代码变更；然后，在构建过程完成之前，对代码进行审查和测试。这整个过程是自动化的，以最大限度地提高速度和性能。

可观测性是指根据相应的输出来测量系统内部状态的实践。它允许您通过检查日志、数据和其他关键指标来深入了解系统的状态。

因此，CI 可观察性提供了对 CI 渠道工作流的可见性。随着更多代码的集成，可观察性成为一个重要的过程，因此您可以了解您的基础设施是如何执行的，并确保交付高质量的代码。

## 为什么 CI 可观察性很重要

一个典型的应用软件是一个复杂的庞然大物，有许多相互关联的组件。因此，问题或故障可能发生在不同的组件和不同的工作流程阶段。CI 可观察性让您了解您的软件基础设施和工作流，因此当问题不可避免地出现时，您可以尽快识别并修复它。

CI 可观察性允许您:

*   评估每个拉式请求(PR)的风险级别:在典型的 CI 工作流中，工程师会生成大量的拉式请求。借助 CI 可观察性，您可以检测和分析每个 PR 的问题/失败(或发生的可能性)。这在开发的早期阶段就阻止了潜在的问题——尤其是重大缺陷——从而限制了未来的负面成本和后果。
*   通过测试优先化减少测试周期时间:测试优先化是根据特性、功能和关键组件等因素对测试进行排序的过程。这就产生了关于成本和时间的前期需求，但是通过产生有效的和相关的测试，允许您进行任何必要的修正，最终有助于减少测试周期。
*   识别错误的、缓慢的和不可靠的测试:不可靠的测试令人沮丧。没有人喜欢发现以前通过的测试现在失败了。CI 可观察性帮助您识别这样的测试，这反过来允许您删除或改进它们，并确保只发布高质量的、经过良好测试的代码。
*   缩短构建时间:优化构建速度在开发中至关重要，有助于您更快地交付软件。为了实现这一点，您的工作流程需要适当的测试和自动化。然而，诸如不可靠或错误的测试或代码中的错误等因素会阻碍这一点。CI 可观察性向您显示哪里存在阻碍构建速度的障碍，以便您可以处理它们并改进您的构建时间。

## 可观察性的支柱

既然我们理解了为什么 CI 可观察性如此重要，那么让我们更深入地探讨一下究竟什么是可观察性。可观察性由三个主要过程组成:日志记录、度量和跟踪。总的来说，它们给出了软件健康状况的整体情况。

### 记录

日志记录是记录事件数据的过程，这些数据带有相应的时间戳以及检索这些事件的索引。例如，如果支付交易在支付系统中失败，此类事件可以用事件发生时的时间戳以及其他必要的详细信息来记录，这些信息可能会让您对事件有所了解。日志不仅对记录错误有用；记录日志是一种普遍的良好做法，因为日志产生用于定量和分析目的的数据。

让我们回顾一下日志记录的一些好处:

*   使用其搜索索引，可以在任何时间点出于任何原因轻松检索事件记录。
*   当您需要查找和解决错误时，日志起着重要的作用。
*   可以实时监控某些日志，从而更容易快速找到问题和解决方案。
*   它们是纯文本，这使得它们易于存储。

### 韵律学

指标是可量化的数值，可用于衡量应用程序的行为、健康状况和性能。可以对它们进行收集、关联、汇总和分析，以便从整体上了解系统的状态。

日志记录事件，而度量则更进一步，从系统中产生数据；当日志记录事件时，度量可以指示哪些事件实际上是重要的。因此，可以从日志中获得指标。

指标的一些好处包括:

*   为您提供明确的数据，您可以通过这些数据来衡量您的应用程序的健康状况和进度。
*   检测系统中的异常，这可以帮助您预测未来的问题。

### 描摹

跟踪包括从初始化到完成跟踪操作或请求的流程。获得的信息旨在用于优化您的应用程序的性能。跟踪有助于工程师找出工作流程中的哪些阶段存在瓶颈，提供的信息包括错误发生的方式和位置、哪个特性/功能触发了错误以及哪个更改导致了错误。

跟踪提供了以下好处:

*   提供操作路径中各个阶段的可见性；这对于优化应用程序非常有用。
*   帮助您检测操作路径中出现问题的区域。
*   提供可以改善用户体验的信息。

## CI 可观察性挑战

当涉及到 CI 可观察性时，可能会出现特定的困难。您可能会遇到与您的应用程序的复杂性和规模特别相关的挑战，这产生了 CI 管道可观察性工作中常见的困难。

### 处理复杂性

随着更多代码的集成，您的应用程序将变得越来越复杂。当您需要管理一个不断增长的、由多个部分组成的应用程序时，获得对您的应用程序的全面洞察和理解可能会变得非常困难。随着应用程序的扩展，可观察性的挑战也在增加。

### 实时可见性

虽然能够实时监控您的应用程序是有帮助的，但是如果您选择在内部构建和/或实现该工具，那么寻找或创建合适的工具可能需要时间，或者如果您选择外包，则需要大量的财务支出。但是，如果没有实时监控，您将无法在 CI 工作流的早期阶段检测到错误，这可能会为您的团队带来时间和金钱方面的间接成本。

### 观察大量 CI 管道

根据您的项目和团队结构的规模，您的应用程序的源代码可能会变得难以理解。在监控工作流程的各个阶段时，正确了解 CI 工作流程至关重要。可观察性帮助您识别相关的度量标准，并根据它们快速采取行动，并允许任何规模和复杂性的团队保持一致。因此，CI 可观察性对于高效、有效的流程和优化的用户体验至关重要。

## 可观察性工具

可观察性工具具有允许您执行包括监视、跟踪和记录在内的操作的功能和特性。因此，它们使您更容易获得关于应用程序健康和性能的基本知识，从而深入了解系统中需要的任何修复或改进。

让我们回顾一下您应该在可观察性工具中寻找的一些关键品质:

*   文档:好的文档可以让你的工程师更容易、更快地设置和使用这个工具。
*   详细的仪表板:该工具应该有一个仪表板，能够为您提供全面的信息，并为您的团队提供愉快的用户体验。
*   自动错误检测/分析:该工具应该能够在工作流程的不同阶段自动检测错误。
*   事件警报:当您的应用程序中出现某些异常时，警报会通知您，从而对关键事件做出快速响应。
*   事件日志记录:该工具应该支持以一种易于访问和检索的方式记录数据。
*   工作流监控:监控 CI 工作流并显示基于系统性能的分析，提供系统的整体视图。
*   实时监控:该工具应该能够随时执行操作并返回数据。

## 监控工具的常见问题

拥有一个提供上述所有功能的强大的可观察性工具，对于优化您的 CI 渠道至关重要。然而，如今市场上的许多工具，无论是 APMs 还是错误跟踪工具，都存在一些问题，使得全面的 CI 渠道可见性成为一项挑战:

*   当涉及到具有多个相互依赖的组件的应用程序时，一些工具缺乏足够的细节，这限制了它们的有用性以及它们提供对您的 CI 渠道的全面可见性的能力。
*   具有复杂体系结构的应用程序生成的数据量可能会很大，这反过来又会使定位应用程序中的问题变得很困难。大多数工具不能充分处理这种复杂性，因为它们没有被设置为处理和呈现海量数据。
*   使用缺乏必要功能的工具进行故障排除和调试可能会很麻烦，这些工具无法有效地让所有相关的利益相关者了解您的 CI 渠道的最新状态。

选择一个能够处理复杂架构、大量数据和大型多面团队的可观察性工具是至关重要的。即使您的应用程序目前没有这些需求，您也需要一个能够随着您的应用程序的扩展而增长的工具。

## 预见简介

[Foresight](https://www.runforesight.com/) 是一款全面的观察工具，可让您全面了解 CI/CD 管道的状态。预见有助于您评估新变化的风险，减少构建时间，并通过强大的功能交付高质量的软件。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>