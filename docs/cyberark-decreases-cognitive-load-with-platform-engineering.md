# 赛博方舟通过平台工程降低认知负荷

> 原文：<https://thenewstack.io/cyberark-decreases-cognitive-load-with-platform-engineering/>

当一家软件公司从内部产品转向基于云的服务时，不仅仅是客户会有不同的体验。内部开发人员的体验也完全改变了。突然之间，除了特定领域的职责之外，你的开发人员还必须学习云计算。这增加了已经超负荷工作、精疲力竭的团队的认知负荷。

平台工程是一门[新兴学科](https://thenewstack.io/platform-engineering-wont-kill-the-devops-star/)，它的形成是为了服务那些开发团队。开发有助于他们向云迁移的最佳实践，并掩盖其他实践。这些工程师与他们的开发客户一起工作并向他们学习，构建一个平台来帮助这些开发人员更有效地完成他们的工作。

《新堆栈》采访了 SaaS 身份安全提供商 [CyberArk](https://www.cyberark.com/company/) 平台工程团队的首席软件架构师 [Ran Isenberg](https://www.ranthebuilder.cloud/) ，讲述了一家公司是如何建立平台工程团队的，以及他们在这个过程中学到了什么。

## 如何组建一个平台工程团队

在早期，如果 CyberArk 的一项服务想要从内部提供转向软件即服务(SaaS)，其团队必须独立研究云计算并发明自己的途径。Isenberg 解释说，这“造成了组织浪费和不同的解决方案，以及不同的客户体验登录。”再加上那些突然出现的 SaaS 团队的大量额外工作。

这根本无法与发布自助式 SaaS 的预期增长同步。

突然间，不仅外部客户，内部客户也要求 CyberArk 有一致的用户体验。“我们开始创建 SaaS 应用程序，我们意识到我们希望为客户和内部提供更好、更统一的体验，”他说。

这不是关于获得对开发人员日常工作的控制，而是关于减少必须学习与其日常业务领域无关的东西的认知负荷，例如:

*   云迁移
*   云安全
*   租户管理
*   可观察性
*   云中的测试方法
*   CI/CD 实践

因此，新平台工程团队决定优先考虑任何涉及重复工作或为最终用户、内部用户或支持人员创造不同体验的内容。

每当有两个 CyberArk 服务开发相同的能力来实现他们的业务目标时，平台工程团队将与这些利益相关者展开对话，看看它如何能有所帮助。

一个新兴的平台工程用例是存储、加密和获取服务审计跟踪。审计代表服务事件的日志，例如“用户 X 连接到机器 Y 并执行了动作 z”。所有 CyberArk 服务都发送审计，因此不是让所有服务创建它们自己的内部审计服务，而是它们可以使用中央平台维护的审计服务。

CyberArk 的平台工程团队将他们的同事、内部开发人员视为主要客户，通过他们使用的内部服务为他们构建 SaaS 体验。

平台工程职责包括提供:

*   无缝登录
*   服务的统一组织和可发现性
*   软件开发工具包(SDK)
*   [租户隔离](https://aws.amazon.com/blogs/apn/explore-saas-tenant-isolation-strategies-in-new-saas-whitepaper/)
*   可观察性

平台团队成为事实上的云工程团队，为整个公司定义云最佳实践，并设置自助服务培训。这个云平台工程团队建立了一个自助服务模板，允许开发人员使用他们需要的所有工具创建自己的服务，包括 CI/CD 管道和日志记录，所有这些都使用平台 SDK。

“这为他们节省了大量时间，减少了认知负荷，”Isenberg 说。“我们只是为他们解决所有他们不必担心的问题。”

## 平台工程师必须证明自己

“我们必须向 org 证明，我们将提供良好的价值，你应该融入我们的工作，”Isenberg 说。一开始，平台工程小组是一个实验，只有 15 名队友。

作为获得早期反馈的一种方式，平台团队中的一些开发人员的任务不是构建平台，而是在新平台的基础上构建服务——“为了证明这一点，让第一个客户成为团队的一部分，”他解释道。大概过了 18 个月，那些开发者就脱离了平台团队，成了自己的服务。

现在，平台团队已经发展到 40 多名工程师，为 700 多名开发人员提供服务，但 Isenberg 承认这并不总是一帆风顺的。“获得批准花费了大量时间，与其他解决方案集成也经历了许多坎坷，”但最终，通过将他们的开发人员同事视为客户，他们成为了黄金路径——服务向前发展的方式。

“在某个时候，我们获得了黄金路径证书，并获得了人们使用我们的批准。现在，每项新服务都要经过我们。”但是，他强调，“这是我们仍然需要保持的”，要求持续的反馈，发送调查问卷，并与开发团队并肩工作。“如果人们不使用这个平台，我不仅仅是没有做好自己的工作，他们还会(建立)自己的版本。”

## 一条有护栏的黄金小径

正如我们从许多平台工程团队那里听到的那样，这条所谓的黄金通道更多的是护栏，而不是大门。你被引导到一条路上，但你有离开的自由。

CyberArk 的内部平台是用 Python 铺设的[，Isenberg 认为这对于云来说是非常棒的。“你仍然可以使用其他语言——你不能使用所有的内部 SDK，但你可以使用一些。平台工程给你提供了很大的自由度。但是如果你使用 Python，你会受益更多，因为我们更关注它。但是如果有一天你决定用 Java 或 Go，我们可以为其他语言创造适应性，”他说。](https://thenewstack.io/an-introduction-to-python-a-language-for-the-ages/)

同样，内部平台包括租户管理服务，为了访问该服务，您需要实施 API 并创建租户，“但我不知道创建租户对您来说意味着什么，从我的角度来看，这是一个黑盒，您可以使用无服务器技术或其他技术。只要你实现一个你需要的 API，这是一种抽象的方式，你在那里有更多的自由，”Isenberg 进一步解释说，他的内部客户甚至可以使用发布-订阅模式，如果他们想要的话。

该平台是在[亚马逊网络服务](https://aws.amazon.com/?utm_content=inline-mention)上使用无服务器构建的，具有定义的技术栈和 CI/CD 管道，并附有内部开发人员应该使用的技术的建议。“从那里，你可以做你想做的事情，”他解释道。如果一个团队想用 Kubernetes 做实验，他们是受欢迎的，但是他们要为此负责。但是，如果两个团队想以类似的方式使用 Kubernetes，平台团队可能会参与进来，创建整个公司都可以建立的一致的体验。

CyberArk 团队以同样的方式为 SaaS 的外部客户提供服务。作为一家网络安全公司，法律要求提供加密并保留七年的审计服务。无论他们的客户正在访问什么服务，他们都有相同的用户界面来访问审计。

## 平台工程师面临的挑战

“你需要对内部客户有一种比外部客户更苛刻的服务心态，”伊森伯格警告说。“这些是我们在办公室亲自见到的人，所以这更极端。”

这就是平台工程团队的难点所在——你的同事就是你的客户。从好的方面来说，它消除了很多沟通障碍，缩短了反馈周期。

“提供良好的开发人员体验不是小事，”他评论说，他们仍在努力。起初，这意味着 GitHub 上的 ReadMe 页面，但是，当观察到同事们试图使用代码示例时，他们意识到他们缺少一些行，这导致了支持需求。现在，它已经发展成为存放在 GitHub 页面上的完全风格化的文档。

CyberArk 平台工程团队的目标是像对待一个成功的开源项目一样对待其内部客户。“我们将我们的内部代码、SDK、内部服务视为内部开源，”他用版本、发布说明和大量文档推断道。“这帮助我们赢得了开发者的信任。”

在过去的 20 个月里，Isenberg 自己的角色已经演变成了一名内部开发人员倡导者。

平台工程团队的另一个挑战是避免成为瓶颈，“因为每个人都需要我们的一些东西，他们昨天就需要了，”Isenberg 评论道。毕竟，随着内部平台采用的增长，请求也在增长。由于无法全部完成，他们已经开始接受内部代码贡献。一旦合并，平台团队维护它——“你创建它，你贡献它，我们审查它，维护它，”他解释说。

他们还采用了[内部采购](https://thenewstack.io/adopting-inner-source-culture-within-organizations/)。如果有新的服务要构建，该团队可以加入平台团队几个月来构建本地平台，然后由平台工程团队来维护。

总的来说，平台工程影响了一个重要的文化变革，促进了加速知识共享。“经理们知道，当他们这样做的时候，他们帮助了自己，也帮助了 CyberArk 的其他人，”Isenberg 说。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>