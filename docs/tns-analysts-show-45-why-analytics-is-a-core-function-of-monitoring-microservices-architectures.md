# 为什么分析是监控微服务的核心功能

> 原文：<https://thenewstack.io/tns-analysts-show-45-why-analytics-is-a-core-function-of-monitoring-microservices-architectures/>

在本期新的 Stack Analysts 播客中，Alex 欢迎 SignalFx 创始人兼首席技术官 [Phillip Liu](https://www.linkedin.com/pub/phillip-liu/0/31/52b) ，这一次 SignalFx 创始人兼首席执行官 [Karthik Rau](https://www.linkedin.com/in/krrau) 也加入了他的行列。参加的还有 Kickstarter 的工程副总裁[詹姆斯·特恩布尔](https://www.linkedin.com/in/turnbulljames)，以及 451 Research 的联合主持人[唐尼·伯克霍尔茨](https://twitter.com/dberkholz)。

更多剧集，请查看新堆栈的播客部分[。](https://thenewstack.io/podcasts/)

[#45:为什么分析是监控微服务架构的核心功能](https://thenewstack.simplecast.com/episodes/45-why-analytics-is-a-core-function-of-monitoring-microservices-architectures)

这个播客也可以在 YouTube 上看到。

Karthik 解释说，SignalFx 是从头开始设计的，旨在为现代分布式应用程序提供更好的监控和可见性:“我们看到新的应用程序被设计为分布式应用程序和更多的微服务架构，发现应用程序具有几十个、几百个甚至可能几千个组件是很常见的。”

“在这种环境下，”他说，“你真的必须重新考虑如何进行监控。如果您只是简单地对单个节点进行健康检查，您可能会制造很多噪音。我们发现，进步的组织正在寻找更多基于分析的监控方法，在这种方法中，您可以收集堆栈上的数据，跨不同的服务收集数据，将其集中起来，并运行分析来尝试识别模式。”

当 Alex 问及监控方法的这种彻底转变时，James 断言“传统的监控已经被打破了。”

詹姆斯说:“使用 Nagios 这样的东西，你实际上关心的是故障检测之类的事情，你会连接所有的服务和所有的主机，ping 它们，并询问它们自己的情况，如果一个 [Nginx](http://wiki.nginx.org/Main) 或 Apache 停止工作，它会向你发出警报。

> “人们的邮箱或传呼机队列中充满了警报，表明某些东西已经停止，这是您从这种监控中获得的最深刻的见解。”

“那不成比例，”詹姆斯评论道。“这不是很有用。如果你在凌晨 4 点钟被一条消息吵醒，说 Apache 已经停止了’，这对你有多大用处？结果，操作人员开始忽略这些警报，”James 说，并补充说该流程早就应该更新了。

Donnie 补充说:“人们希望在逻辑应用方面使用监控，无论它是否是微服务。

“许多公司都在扩大他们的 IT 足迹，而没有扩大他们背后的团队，”唐尼说。“如今，云驱动的公司试图用一个 [SRE](https://www.linkedin.com/job/site-reliability-engineer-jobs/) 来维护大约 10，000 个系统。”

Karthik 说，许多进步的组织“使用尽可能多的相关指标。”

“当您遇到性能问题或错误情况时，”他说，“让这些指标真正可访问，特别是如果您仍然有这些指标流入，这意味着您可以以非常互动的方式更好地了解您的环境中正在发生的事情。”

“这些现代应用程序并不是单一的应用程序，”Karthik 继续说道。“你有不同的服务，不同的服务有不同的所有者。如果您的所有数据都在日志中，那么不同团队之间的沟通、共享联系人以及理解如果您的服务“B”降级，以及服务“C”的下游影响都将变得非常困难，您可能会有不同的开发团队，他们都需要共享信息并找出解决问题的方法。”

Karthik 说:“如果你在 SignalFx 这样的服务中使用了度量标准和仪表板，你就可以在不同组件之间慢慢出现问题时检测到问题，当你遇到问题时，你可以在不同的团队中非常快速地开始调试。”

正如 James 所说，“我不需要一个监控工具来为我提供单一窗口。我正在寻找一种监控工具，它可以帮助我识别问题领域，然后我可以深入研究，找出问题所在，并进行故障排除。我不期望我的监控系统会出现大量的故障排除或诊断。我认为那是人类的问题，人类在解决那些问题上要好得多，但需要被指向正确的地方。”

“我们在寻找指导，而不是一些神奇的异常检测，”詹姆斯说。

Alex 询问为什么微服务架构需要分析作为监控平台的核心功能。

“这是一个更加动态的解决方案，”詹姆斯回答道。“微服务往往是频繁变化的小型主机集群。活码头集装箱很大程度上被认为是短暂的；预计它们只会存在很短一段时间。因此，它不像过去的单片服务器，以及运行在该服务器上的单片应用程序，其中' application-1 dot example . com '永远是您的主机名，具有相同的 IP 地址，并始终显示相同的 JVM 指标。”

“你不能再围绕这些单片文物建立监控系统，”詹姆斯说。“你可能在一个小时内生产出 1000 个集装箱，所有这些集装箱的名称和 IP 地址你都不关心。您所关心的是通过该容器、应用程序或微服务运行的服务，这些东西都有指标。它们有事务吞吐量、响应时间或延迟，这些是你现在关心的数字。”

Karthik 说，在走向基于度量的监控的过程中，人们关心整个服务的趋势。人们可能仍然关心单个组件上发生的事情，但没有整个服务中发生的事情那么紧急。“我们看到了更多利用指标和围绕指标构建分析的趋势。”

Alex 认为微服务架构肯定会引发问题和背景问题。

Karthik 说:“你有一个更加灵活的环境，在这个环境中，你可能会非常频繁地看到单个服务的规模扩大或缩小。“你有更多的依赖；不同的服务有时以不同的节奏更新，并且具有上游和下游依赖性。”

Karthik 观察到，人们的许多问题都是他们自己的应用程序所特有的:“你会遇到一个性能问题。你需要了解它的起源。它是上游服务还是下游服务？更好地了解这一点变得非常重要。错误条件可能在依赖的服务之间有各种各样的其他依赖关系，因此需要更多的协作，并且每个组织都有独特的问题。”

“我们当然看到了在这些环境中建立工具来提供更好的交流的需要，”他说。

“在微服务环境中，”Phillip 说，“一个应用程序包含许多不同的服务，但不同的团队拥有应用程序的不同部分，”一个服务中的部署变化可能会产生意想不到的副作用。

Phillip 指出，在过去，如果它是一个大的应用程序，它就不会工作，但是，“在这个微服务环境中，你是在推动一个组件。在下游，它可能会影响其他组件。”

“除非你有一个整体观，或者一个能让你一次看到多个组成部分的系统，否则你不会知道你正在造成什么影响。”

SignalFx 是新堆栈的赞助商。

特色图片:保罗·克利，《在核心》(1935)，石油在船上，途经[WikiArt.org](http://www.wikiart.org/en/paul-klee/at-the-core-1935)。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>