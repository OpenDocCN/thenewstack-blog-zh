# Kubernetes 如何为 50 倍的视频会议使用高峰准备 8x8

> 原文：<https://thenewstack.io/how-kubernetes-prepared-8x8-for-a-50x-spike-in-videoconferencing-usage/>

我们突然在家工作的一个潜在机会是永久接受远程工作。如果做得好，它可以消除许多人的长时间通勤，并为推动包容性工作场所的灵活工作类型让路。但是“远程操作正确”的实际含义仍有待确定。尽管摄像头开启似乎是所有远程规则列表中的第一项。

新的堆栈与云通信和视频协作提供商 [8×8](https://www.8x8.com/) 进行了交谈，以了解该公司[如何逐步引入默认远程](https://thenewstack.io/chaos-hugs-and-interruptions-dev-folks-work-from-home-with-kids/)，以及它如何在不到一个月的时间内流量增加 50 倍的情况下创建系统和团队弹性。

## 做最坏的打算，抱最好的希望

“这是相当疯狂的几周，”8×8 首席产品官[德扬·德克里奇](https://www.linkedin.com/in/dejandeklich/)通过其 8×8 视频会议系统告诉新堆栈。

去年 9 月，8×8 庆祝了其 30 岁生日，为其桌面和移动集成语音、视频、聊天和联系人解决方案添加了一个新的视频会议平台。随后在 11 月，它推出了免费增值版。两者都基于 2018 年 8×8 从 Atlassian 收购的 [Jitsi](https://jitsi.org/) 开源视频会议技术。

现在 8×8 视频会议拥有超过 650 万用户，每天增加大约 50 万新用户，仅在过去几周就增长了 50 倍。

Deklich 说，由 1600 名员工和另外 400 名承包商组成的全球团队正在全天候工作，以满足需求。这种增长不局限于一个地区，而是在全球范围内扩展，包括突然需要为 30%的意大利高中远程学习提供视频会议。

他说“几乎系统的每个部分都爆炸了，这太棒了。”

幸运的是，似乎没有什么东西坏了。他将这种可扩展性归因于运行在公共云上的几乎所有东西。

“我无法想象如果你在真实的数据中心运行，会发生什么，”德克里奇说。

他说，该公司的工程师“看到了每一个技术问题”——包括第三方监控工具“爆炸”——因为从来没有人计划将它们扩大 50 倍。

他说，你通常可以挤压系统的容量，以覆盖两到三倍的当前流量。现在，8×8 必须达到正常水平的 350 倍——每天约有 15 万新用户——以确保他们准备好应对预计至少持续到 4 月的流量大幅上升。

Deklich 说的是，由于代码和自动化的质量，“每个人显然都很忙，但没有必要在这个时候扩大团队。”

## 自动化是在无法预测的规模下生存的关键

他说他们已经“在自动化上投入了巨大的资金”，遵循 CI/CD 黄金法则，如果你做一次，你就用手做，但是任何超过一次的都需要自动化。

8×8 架构也建立在 Kubernetes 和分布式计算之上，因此，正如 Deklich 所说，没有单点故障或任何瓶颈。

“如果在架构上实现得当，您可以水平扩展。这使您能够处理负载，并具有高正常运行时间和可用性，”他说。

Deklich 继续说，他们可以保证高正常运行时间和可用性，因为只有很小一部分流量是在单个节点上。这正是过去三年来该组织得以在全球范围内扩展的原因。

“我们构建和设计的一切都是为了分布在世界各地的客户——全球几乎每个国家都有 4000 个应用程序，”Deklich 说，拥有超过 50，000 个企业客户。

他继续说道，“唯一可行的方法是将您的工作负载分布在世界各地。”

Deklich 表示，为了实现这种全球规模，它使用了亚马逊网络服务、谷歌、甲骨文以及任何能够在特定地区支撑云计算的东西。Kubernetes 使该公司能够相对容易地将工作负载从一个位置转移到另一个位置。

Deklich 的产品团队还利用了许多监控和问题工具，包括 Dashbase、New Relic、Splunk 和 VMware 产品。公司工程师可以通过观察流量峰值如何上升然后变平，来了解意大利在线、去吃午餐或停止学校和工作的情况。然后他们看到美国上线，再次飙升。

他们拥有从功能测试到自动化测试再到性能测试的全面持续集成和部署自动化。他们非常依赖 Red Hat Ansible 进行脚本自动化、监控和基于负载。

“如果你没有它(大规模自动化)，就没有办法在三周内存活 50 次，”德克里奇说。

### 在危机时期，团队和系统一样需要弹性

8×8 在新加坡有一个办公室，它在二月的第二周制定了在家工作的规定。

“在任何事情真正来到美国之前，我们有过‘哦，我的上帝，一些真正邪恶的事情要来了’的经历，”德克里奇说。

人力资源和业务连续性团队——在加州总部有地震应急计划支持，准备充分——更新了公司指南，使每个人都能在家工作。

8×8 在 3 月 9 日的那个星期开始错开在家工作的部署，以测试团队规模的系统，如 VPN，并允许每个人把他们的硬件搬回家。3 月 16 日那一周，该公司在全球范围内全面实施远程监控。

“这说明这确实有效。每个人都在系统中。每个人都可以联系到。对我来说，这开启了与人力资源和财务部门的对话。“我可以雇佣世界上的任何人。我不在乎他们坐在哪里。我有办法和他们合作。一种看到它们的方式。”

公司高管一开始就明确表示，[家庭是工作日中受欢迎的干扰](/chaos-hugs-and-interruptions-dev-folks-work-from-home-with-kids/)。现在，尽管他们在一月份刚刚搬到硅谷的新总部，但在可预见的未来，他们都在家里工作。

尽管 Deklich 承认:“这也有助于我们开发协作和交流的软件。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>