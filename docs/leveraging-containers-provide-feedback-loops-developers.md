# 容器如何为开发人员提供反馈循环

> 原文：<https://thenewstack.io/leveraging-containers-provide-feedback-loops-developers/>

[](http://www.cloudgeek.in)

[Vivek June ja](http://www.cloudgeek.in)

[Vivek June ja，首尔的工程师，专注于云服务和微服务。他于 2008 年开始从事云平台工作，是 AWS 和 Eucalyptus 的早期采用者。他还是一名技术布道者，在印度的各种技术会议上发表演讲。他在 CloudGeek 和他自己的网站上写作。](http://www.cloudgeek.in)

[](http://www.cloudgeek.in)[](http://www.cloudgeek.in)

快速反馈加快了决策过程，为观察和确定新方向提供了更多时间。由约翰·伯伊德首创的“观察、定位、决策和行动”( [OODA](https://en.wikipedia.org/wiki/OODA_loop) )越来越多地被用于软件开发过程中的反馈循环建模。成功的公司都采用了这种决策框架，并把它变成了一种商品。

反馈循环是[敏捷和开发思维](http://flowcon.org/dl/flowcon-sanfran-2013/slides/AdrianCockcroft_VelocityAndVolumeorSpeedWins.pdf)的重要组成部分。反馈循环不仅提供了开发过程中活动的直接结果，还在开发人员中灌输了良好的习惯。从科学的角度来说，已经证明反馈回路会改变人类的行为和行动。

## 反馈回路的阶段

为开发人员建立一个反馈回路需要注意四个不同的阶段。它从收集观察开始，包括特性使用度量、代码质量、静态分析、性能度量和测试结果等等。我们可以称之为反馈回路的第一阶段。

然后，这些信息被输入到一个引擎中，该引擎根据观察结果提供有价值的推断。这些推论避免了原始数据的混乱，并产生了实用的度量标准，包括测试覆盖率、圈复杂度、用户偏好等等。这可以被称为反馈回路的第二阶段。

[cyclone slider id = " ebook-2-赞助商"]

从第一阶段产生的数据和通过第二阶段产生的推论被用于创建方向。这是第三阶段，其中每个方向都是校准和诊断的可能路径。这些方向代表了基于第一和第二阶段的结果可以做出的决策的多种选择。

最后，在第四阶段采取行动，这取决于选择了哪个决策。所采取的行动然后被反馈到循环中。这种循环过程对于在软件开发过程中创建流程非常有效，并且从长远来看，减少了变更和问题出现的成本。

反馈循环最重要的方面是完成每一步所需的时间。

目标是在反馈循环的每个阶段尽可能自动化。一个快速的反馈循环对于最终用户移动和生产可靠的软件是必不可少的。这种可靠性来源于基于当前观察和之后的决策而持续采取的行动。

构建更快的反馈循环的主要障碍之一是集成和部署大型代码库的痛苦。庞大的代码库增加了编译、捆绑和在基础设施上部署的成本。安装软件环境运行代码所需的依赖项的成本可能会令人望而却步，并且会减慢该过程。此外，对于在异构基础设施上运行的多样化部署环境，支持这种多样性可能成为导致进一步延迟的另一个问题。所有这些都增加了更长的决策间隔和反应时间，这两者对于向用户交付产品质量的软件都是至关重要的。

## 变革的代价

快速反馈循环的核心是降低变革的成本。将反馈时间从几分钟缩短到几秒钟，虽然看起来微不足道，但对降低这种变化的成本有很大的影响。开发人员可以满怀信心地构建新的基础设施和代码，并承诺不会有太大的变化。脸书的口头禅“做得比完美更好”符合这种能够在快速构建软件的同时最小化成本的思想。

随着社区和组织开始尝试微服务，他们也需要一种新的方式来改变他们的反馈回路。

这就是集装箱出现的地方。容器生态系统承诺了这种改变，并通过加速反馈循环的所有四个阶段，最终允许开发人员看到他们的代码在运行。

## 高度敏捷的反馈循环和开发人员体验

高度敏捷的反馈循环是指从一个阶段到另一个阶段的过渡时间最短，以秒计。

创建一个超级敏捷的反馈循环无异于一次非凡的开发体验。这样的经历鼓励冒险、替代解决方案和[改善](https://en.wikipedia.org/wiki/Kaizen)的循环。理解容器生态系统如何产生这种超敏捷反馈循环的最简单的方法是了解生态系统的参与者以及他们对循环的贡献。

我们可以通过将容器生态系统映射到超敏捷反馈循环的关键方面来做到这一点。该反馈回路通常包括以下内容:

*   **快速且一致的开发环境供应**:团队中的开发人员获得他们开发环境的本地测试环境和源代码。测试环境本身是一个声明性清单，用于为开发人员提供环境。供应的环境是一组容器化的服务实例，每个实例独立运行。本地测试环境包含产品的所有必要服务和相关依赖项。
*   **松散耦合开发**:开发人员改变或添加一个新的服务，以及所需的测试用例。然后运行本地测试用例来测试这些变化。为了避免破坏客户端，开发人员还可以坚持在发布之前使用消费者驱动的契约来验证更改。
*   **自动化部署和测试**:开发人员然后将这个变更部署到本地测试环境中，并为使用这个特定服务的各种参与服务触发集成测试。
*   **版本控制的开发工件**:一旦用本地测试环境测试了变更，开发人员就将变更提交给存储库。如果服务还需要配置更改或新的依赖项，开发人员会将其添加到环境清单中并提交。
*   **自动化构建和生产发布**:提交代码导致在构建和部署服务上安排构建任务。该服务只将相关的变更服务部署为新的服务版本，而不是替换旧版本，遵循 canary releasing 的原则。适当的负载平衡器被告知新的服务版本，并且发生渐进式负载转移，以允许对服务中的新变化的一定量的请求。
*   **迁移和取消配置**:然后观察新的变更，并根据 A/B 测试和用户分析收集指标，与旧版本进行对比。如果结果是有希望的，更多的负载将被转移，最终新的服务将超越旧的服务。老版本优雅退役。如果改变不是有希望的，那么新的服务被适度地取消供应，并且负载从它上面移走。

在为开发人员创建反馈循环时，上面的步骤仅仅触及了表面。容器生态系统为开发人员提供了一组丰富的服务，涵盖了广泛的功能，并加速了上述每个步骤。

## 平台和版本控制

容器生态系统最有趣的一个方面是利基 PaaS 选项的兴起，如[鹤](https://tsuru.io/)、[巨型蜂群](https://giantswarm.io/)和[戴斯](http://deis.io/)等等。这些 PaaS 选项中的一些是透明的解决方案，而另一些则以开发人员友好的 DSL 形式提供了一个抽象层来设计和部署复杂的应用程序。随着快速的变更周期和迭代开发过程，当考虑快速的开发人员反馈时，像这样的 PaaS 解决方案就派上了用场。现有的 PaaS 实现，如 [IBM Bluemix](http://www.ibm.com/cloud-computing/bluemix/) 、 [Pivotal Cloud Foundry](https://www.cloudfoundry.org/) 、 [Apcera Platform](https://www.apcera.com/why-apcera) 和 [OpenShift](https://www.openshift.com/) ，已经准备好与 Docker 和 container 工具链集成，并为企业级解决方案提供成熟、稳定的选项。

大多数采用容器来加速开发过程的组织都有同时管理多个服务版本的内在需求。这主要是为了支持金丝雀释放和服务不变性。后者是一个有趣的命题，因为它被认为是一种部署新服务而不是更新现有服务的变化。这减少了回滚时间，并为 A/B 测试提供了机会。

## 标准化的需要

为了实现对变化的快速反馈，有必要为开发人员提供一个模板，该模板具有各种容器生态系统工具链的所有基础，包括监控、治理和 PaaS 集成和解决方案。

所有这些问题的核心是标准化的思想。

像 [ZeroToDocker](https://github.com/Netflix-Skunkworks/zerotodocker) 这样的项目是为开发人员创建样板文件的第一步——一个已经预先配置为提供基于微服务的开发实践的样板文件。这使得开发人员可以将时间投入到开发和发布可靠的代码上，而不是管理面向服务系统的复杂性。

这个想法是为不同的语言类型建立一个标准化的“hello world”样板项目。它将整合面向服务开发的最佳实践，包括预配置的日志记录、监控、服务注册和发现，以及与容器生态系统工具集的集成。这就形成了微服务系统的服务单元，可以快速开发和发布，无需重新发明轮子。

## 达到成熟

尽管有其根源和活跃的历史，但当前的容器生态系统仍处于起步阶段，并且几乎每天都在变化。在容器生态系统成熟的过程中，为快速反馈循环创建一个成熟平台的标准肯定也会改变。然而，它已经为创建一个超级敏捷的反馈循环提供了构建模块，这预示着软件将如何在未来几年被构建和发布。

Apcera、IBM、Pivotal 和 Red Hat 是新堆栈的赞助商。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>