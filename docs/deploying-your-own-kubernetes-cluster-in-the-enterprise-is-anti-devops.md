# 在企业中部署自己的 Kubernetes 集群是反开发的

> 原文：<https://thenewstack.io/deploying-your-own-kubernetes-cluster-in-the-enterprise-is-anti-devops/>

[](https://www.linkedin.com/in/nigelkersten/)

 [奈杰尔·克斯滕

奈杰尔是 Puppet 公司的现场首席技术官，也是业界领先的 DevOps 报告的合著者。他与 Puppet 最大的客户合作，进行大规模 DevOps 实施所需的文化和组织变革。在加入 Puppet 之前，Nigel 隶属于 Google 的 SRE 组织，负责世界上最大的 Puppet 部署之一。](https://www.linkedin.com/in/nigelkersten/) [](https://www.linkedin.com/in/nigelkersten/)

您正在快速跟踪一个项目，并以光速前进，因此让开发人员部署另一个 [Kubernetes 集群](https://thenewstack.io/what-does-it-take-to-manage-hundreds-of-kubernetes-clusters/)是有意义的，对吗？毕竟，在当今的企业中，速度就是一切，因为他们竞相将新产品和应用程序推向市场。没有人想拖开发商的后腿。部署另一个 K8s 群集并让企业中的多个开发运维团队创建和维护他们自己的基础架构可能会让您在这个*项目的竞争中领先，但是当以后需要扩展开发运维时，您会一头栽向悬崖。如果企业不能扩展到少数几个团队之外，它将会失去速度，而能够扩展的竞争对手将很容易超过它。*

任何快速增长或已经达到企业规模的企业都面临这种困境。没有人希望回到严格的集中式 it 实践，在这种实践中，应用程序交付团队感到无能为力，必须等待人手不足的 IT 团队来满足他们所有的基础架构请求。然而，每个人都构建和维护自己的基础设施的做法会侵蚀质量、合规性和治理。

## **提示平台团队……**

为了解决这一问题，公司建立了平台团队——专门的跨职能主题专家，为内部开发团队构建、管理和维护这些自助服务平台。这些平台是以客户为中心的产品，以最有效、企业认可的方式帮助解决最终用户的问题，同时仍然提供开源思维，让开发人员对他们需要什么有发言权，以便做好他们的工作。

平台团队并不新鲜；事实上，Gartner 在几年前就发布了一篇关于如何让这些工作更好的文章。在[木偶](https://puppet.com/?utm_content=inline-mention)，我们与企业紧密合作，帮助平台团队构建他们成功所需的 API 主导的解决方案。

我发现，当谈到平台团队以及他们实际工作得如何时，开发人员有着复杂的情绪。这是有充分理由的。开发人员经常担心，被迫使用中央 IT 提供的基础设施会导致他们的创造力自由度减少，并不必要地减慢他们的速度。事实上，作为一次性项目资助的平台团队最初可能会工作得很好，但如果没有持续的投资，平台将停止发展以满足用户需求——这将使各方都感到沮丧。最终用户会创建变通办法，构建自己的基础架构，并回到过去糟糕的影子 IT 时代。

尽可能快地创新、构建和迭代是开发人员的工作。对于单个项目来说，独立完成通常是获得成功的最快途径，但从整体来看，这可能不是一种可持续的方法。

*但是没有平台团队，你真的在练 DevOps 吗？*

你可能会只见树木不见森林。缩小范围，把企业作为一个整体来看:如果每个人都使用不同的操作系统，你最终会陷入混乱，因为缺乏标准化抑制了整体优化。如果每个人都创建自己的小型基础设施，当你有几十个，甚至几百个开发者时，你将如何扩展？平台团队以用户为中心，为您提供通用的工具集，最大限度地降低质量、合规性和安全性成本，并实现更快的价值流交付。如果平台团队工作出色，开发人员的工作应该会变得更容易。

## **平台团队成功的要素**

1.  **支持系统思考方法**。这是 DevOps 的一个关键原则。系统思维要求您将企业视为一个整体，并将每个 DevOps 团队成员视为该整体的一部分。把企业想象成一张巨大的蜘蛛网。每当有人在网络上的任何地方移动，整个网络都会感受到这种影响——即使你认为你的新 K8s 集群没有任何实际影响。每一个行为都有外部性在起作用。有什么影响？开发者的行为会有助于扩展能力，还是会抑制它？对组织做出贡献的负责任的方式是什么？有什么可持续的方式？你今天是如何做开发运维的，以支持五年后将在你的企业工作的开发团队吗？
2.  **长期投资平台团队。**随着平台团队构建多个平台并扩大其在整个企业中的影响力，他们需要不断增加的资金。这不是一个短期项目。平台团队应被视为组织的永久组成部分，与产品开发团队一样对创新和收入至关重要。毕竟，他们正在构建内部产品，开发人员将使用这些产品为您的外部客户创建产品。
3.  **选择多样化的专家组合。**为了让平台团队工作得更好，他们需要共享编码能力的跨职能主题专家的多样化组合。他们需要了解开发人员的内在工作方式，以及什么能最好地解决手头的更大问题。他们需要以客户为中心的心态，不断寻求创造可行的解决方案。构建一个平台作为一个产品需要和构建你的外部产品一样多的技能和专业知识——这些团队成员需要感受到他们背后的企业领导的支持和认可。
4.  **任命一个平台产品经理。团队需要领导——决定平台将做什么的人，而不是决定如何做的人。这个人需要有产品思维，关注用户市场，发现他们的问题，并建立真正解决这些需求的自助服务解决方案。面对整个企业中相互竞争的需求，产品经理需要优先考虑新的解决方案，摒弃那些不能满足用户需求的解决方案，并确保用户和平台团队之间存在强大的反馈回路。**
5.  **使用 API 优先、模块化、可组合的解决方案进行构建。**最终用户必须能够采用解决方案，并以适合他们的方式重新组合它们。专注于通过易于使用和易于组合的 API 提供解决方案，这些 API 可以从脚本、自动化工具和 CI/CD 系统中触发。使这些解决方案背后的代码在内部可见，并确保用户的内部贡献可以通过“内部源”模型实现。
6.  **对内宣传平台，对外推销产品。**你可以建立一个平台，有一个团队，但如果只是存在，没有人真正了解，那就不会成功。开展内部营销活动，让用户参与出主意。将 DevOps 反馈循环放在适当的位置，这样平台就成为开发人员如何完成工作的一个持续改进的核心要素。

有了一个运行良好的平台团队来交付可组合的模块化自助服务解决方案，开发人员可以高度自由地进行操作，依靠标准化的依赖层来确保企业其余部分的合规性和可扩展性。做好这一点需要在人员、流程和工具上的持续投入；但它也将产生持续增加的回报，只要它不是一次性投资。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>