# 是的，无索引日志管理是可行的

> 原文：<https://thenewstack.io/yes-index-free-log-management-works/>

[Humio](https://www.humio.com/) 赞助本帖。

 [莫滕克

Morten 是销售执行副总裁，是 Humio 执行领导团队的一员。他负责公司销售、营销和渠道运营中所有与收入相关的活动，其任务是扩大 Humio 内部和 SaaS 产品的采用和增长。在加入 Humio 之前，Morten 是许多组织的执行管理团队成员，包括 TriFork、R5 和 2cchange，他是这些组织的联合创始人，销售额达到 6000 万美元。在他职业生涯的大部分时间里，Morten 专注于从事企业软件的公司，但他最近的重点是以用户为中心的软件开发和软件行业的初创公司。](https://www.humio.com/) 

对于任何负责日志管理的人来说,“无索引日志记录”的概念似乎有些牵强。但是正如我们下面所描述的，它实际上是日志管理解决方案的未来架构。

为什么？

客户需要从他们的日志记录解决方案中获得更多。与传统方法相比，无索引方法的可用性将使他们能够以很小的成本获得更快的结果。

重要的是要认识到索引本身并不全是坏事。在许多情况下，索引是有意义的，但是对于日志监控来说，它们并不理想。索引通常适用于接收负载不大但搜索大量数据负载较大的环境。但是对于日志监控来说，正好相反。为了处理日志，用户需要能够处理大量的接收，并且在事件发生后能够进行更多的偶然搜索，而这些事件通常只限于特定时间段。现在有了更快、更便宜、更有效的替代方法。

需要日志管理的企业(现在谁不需要？)必须问自己:“为什么我们不采用现代方法来解决日志管理问题？”****

## 传统索引方法

十多年来，索引一直是收集和分析日志数据的公认方法，许多现有的解决方案都是基于这种传统方法。但是它的时代已经过去了。

关于索引，有几件事情需要理解。首先，它不是免费的。看起来可能是这样，因为几乎每个日志管理供应商都提供它，但是在多个方面都有有形的成本。

索引行为会增加硬件成本，包括 CPU 和内存成本，以处理接收时的索引处理和存储占用空间，因为在许多情况下，索引比日志或事件本身要大。在许多情况下，实时监控的成本太高，如果延迟太长，这一点就变得非常关键。

当您需要浏览或分析数据时，索引也不太灵活，因为搜索功能取决于您对其进行索引的方式。这将限制您可以请求的内容，或者更糟，甚至迫使您重新索引数据库。对于大型安装，重建索引非常耗时，当应用程序停机或存在正在调查的安全漏洞时，您不希望这样做。

考虑到上述问题的成本，许多公司将更多的时间花在过滤数据和决定监控哪些日志上，而不是真正花费资源来分析他们的日志监控平台生成的数据。

也许最高的成本 l 是当日志中的一条关键信息被忽略时所付出的代价。发生这种情况的原因或者是信息没有及时定位(或者根本没有定位)，或者是因为关键事件从未被记录在第一位置(因为记录所有事件的理想目标被认为过于昂贵，部分原因是索引会增加成本)。

但是，尽管引入索引有很好的理由，并解决了许多问题，但它仍然存在不足。

相反，与无索引日志记录所能实现的结果相比，过去几年遗留日志管理方法的增量改进显得苍白无力。索引更适用于日志管理之外的应用程序，如全文搜索、数据库和 web 搜索。在传统的日志管理方法中，使用索引是因为它“足够接近”并且足够有效。

然而，技术在不断发展，现在已经有了专门为日志管理定制的现代技术。它们现在也符合成本和性能标准。

## 索引的新替代方案

索引的支持者经常声称它是必不可少的。他们说，如果没有索引，就没有办法从堆积如山的日志数据中找到意义。虽然这似乎是一个合理的说法，但正如我们上面所讨论的，这是不真实的。索引不仅成本高，而且在许多情况下，会使要解决的问题复杂化。

那么，还有什么选择呢？更好的索引方式？毫无疑问，答案是完全不同的方法，根本不涉及索引。这一新的无索引日志管理浪潮结合了三种关键方法:

*   减少您必须管理的数据量；
*   减少您分析的数据量；
*   在对历史数据的分析略有减少的情况下，可以获得更快的接收速度、更大的灵活性和更高的硬件使用效率。

让我们更详细地看一下每一项。

有效日志管理的最大障碍通常是要管理的数据量。数据越多，处理时间越长，所需的存储容量也越大。因此，如果想要改进日志管理过程，一个合理的步骤是减少要处理的数据量。通过删除索引，我们大大减少了需要处理的数据量。加上先进的压缩技术，我们可以实现高达 30:1 的压缩比。

这种现代方法的第二个方面是分析一小部分数据。如何在不增加遗漏可能性的情况下做到这一点？答案是智能过滤。过滤从大量日志数据与特定查询不相关(例如，某个时间参数之外的所有日志)开始，而其他数据集具有更高的相关性(例如，从电话簿的“J”部分开始查找名为 Jones 的人)。

过滤的关键是*所有的*日志都被预先*摄取，而没有索引*，这大大加快了过程。然后，在提取时，应用过滤器来减少分析的日志量并缩小应用于搜索的关键字范围。根据历史信息执行查询时，筛选会查找在所需时间范围内拥有数据的主机，并扫描这些数据，每次都查找与标准匹配的项目。这是使用简单的 map/reduce 方法并行化的。

即使在现代日志管理解决方案中，日志数据的智能过滤也是一个突破性的概念。

通过放弃索引，CPU 周期可以用于另一个高价值的步骤:在日志数据被接收时对其进行实时分析。这在计算机安全等应用中非常有价值，在这些应用中，攻击可能在进行中被识别，而不是在事后被调查。

过滤有三重好处。首先，机器和人力资源不会浪费在既昂贵又不必要的耗时的过程(索引)上。其次，结果更加符合日志管理的独特要求。最后，从接收到洞察的整个流程在更短的时间内完成，成本也大大降低。

## 摘要

无索引日志记录正引领着下一波日志管理，其解决方案消除了索引的多维限制。因此，企业现在可以收集和分析*所有*日志数据，同时降低成本，更快地提供结果，并扩大能够在广泛的安全、业务运营、开发运维以及客户体验用例中产生新见解的用户数量。

无索引日志记录的时代已经到来。加入运动: #IndexFreeLogging。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>