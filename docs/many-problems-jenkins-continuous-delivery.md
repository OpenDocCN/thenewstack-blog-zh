# 詹金斯和连续交货的许多问题

> 原文：<https://thenewstack.io/many-problems-jenkins-continuous-delivery/>

[](https://www.oracle.com/corporate/acquisitions/wercker/)

 [Micha“密斯”Hernandez van Leuffen

Micha“密斯”Hernandez van Leuffen 是一名黑客企业家，也是 Wercker 的创始人兼首席执行官，他正在为现代云构建下一代开发人员自动化。](https://www.oracle.com/corporate/acquisitions/wercker/) [](https://www.oracle.com/corporate/acquisitions/wercker/)

如果你从事软件工作，你可能已经意识到今天软件交付的实践远非完美。查看我们上个月关于世纪之交以来软件开发发展的文章，原因如下。在那篇文章中，我们解释了通向我们今天生活的软件世界的道路，以及为什么那个世界可能达不到我们的期望。

这篇文章是我们进入后詹金斯时代系列文章的第二篇。在这里，我们更详细地看一下流行的工具和过程，包括但不限于 Jenkins，这些工具和过程阻碍了我们进入软件天堂。

## 我们喜欢詹金斯！

需要澄清的是，我们并不认为 Jenkins 是当今软件交付世界中唯一的麻烦来源。我们真的认为詹金斯是一个伟大的工具。然而，Jenkins 和其他持续集成(CI)服务器并不总是被正确使用。软件交付团队在部署 Jenkins 和类似工具时容易犯错误。结果，他们采用了低效的实践，削弱了他们获得或保持敏捷性的能力，并失去了采用最新技术创新所需的灵活性。

## 詹金斯的问题

归根结底，这些问题的根源不在于具体的工具，而在于文化错误。

### **问题 1:詹金斯有太多插件**

插件不一定是坏事。事实上，如果使用得当(这意味着扩展软件平台所需的核心功能之外的功能)，它们是很好的资源。它们让用户选择向他们使用的工具添加额外的功能，如果他们不想使用这些功能，不需要他们为这些功能投入资源。

但是对于 Jenkins 来说，插件并不提供使用平台所需的核心功能之外的可选功能。相反，Jenkins 要求团队使用插件来完成任务，在许多情况下，这些任务都是非常基本的。

例如，如果你想构建一个 Docker 环境——这是目前非常常见的用例——你需要一个[插件](https://wiki.jenkins-ci.org/display/JENKINS/Docker+build+step+plugin)。如果你想从 GitHub(另一个相当常见的任务)中获取，那么你需要一个[插件](https://wiki.jenkins-ci.org/display/JENKINS/GitHub+Integration+Plugin)。如果你想让 [PAM 支持](https://wiki.jenkins-ci.org/display/JENKINS/PAM+Authentication+Plugin)，你需要一个插件。

可以肯定的是，Jenkins 的 1500 个插件中有许多提供了并非每个人都需要的功能。对于它来说，通过插件来提供是非常有意义的，例如，PagerDuty 或 Azure 存储兼容性，因为许多用户可能并不需要这些功能。

但是你需要插件在 Jenkins 中做任何事情的事实是有问题的——不仅仅是因为这意味着软件交付团队在开始工作之前必须花时间安装和配置它们。这里更大的问题是 Jenkins 的大部分插件是由第三方编写的，质量不一，可能会在没有通知的情况下失去支持。

基于第三方插件构建软件交付链并不是确保可用性或稳定性的好方法。

### 问题 2:詹金斯不是为码头工人时代设计的

虽然 CI 服务器经常是现代 DevOps 对话的一部分(并且确实是 DevOps 工程师的许多重要工具之一)，但它们实际上是一项相对古老的技术，可以追溯到 2000 年代早期到中期，远在任何人将容器和微服务设想为软件部署的首选基础设施之前。

因此，传统的 CI 服务器在帮助团队充分利用下一代基础设施(如 Docker containers)方面做得不多。它们通过多个插件与 Docker 集成起来相当笨拙。实际上，Jenkins 有不下 14 个名字中带有 *Docker* 的不同插件。许多是针对特定厂商的 Docker 相关平台的，但其中六个是针对核心 Docker 平台的。

在许多方面，Jenkins 与大多数其他 CI 服务器一样，是在裸机服务器和虚拟机时代构建的。它在事后得到了码头工人的支持。在一个越来越多 Docker-native 的世界中，这不是 CI 服务器运行的好方法。

### **问题 3: Jenkins 不太支持微服务**

正如 Jenkins 和大多数其他 CI 服务器诞生于 Docker 之前的时代一样，它们也在微服务流行之前很久就出现了。

当然，在 2000 年的时候，有些人在从事面向服务的架构(SOA)的工作，那时 Jenkins 第一次被使用。像微内核这样的概念从 20 世纪 80 年代就已经出现了。但是在 Docker 出现并使微服务易于实现之前，很少有微服务平台真正得到部署。

所以你可能不会期望 Jenkins 在支持微服务方面做得很好——事实上，它并没有。Jenkins 缺乏对同时集成和测试多个服务的支持。这是微服务环境的基本功能。

除非你计划投资多个管道的开销(每个微服务一个管道)，否则 Jenkins 在帮助你开发下一代微服务应用方面做得很差。

### **问题四:CI！= CD**

Jenkins 和 CI 服务器最大的问题可能是，软件交付团队有时会将持续集成和持续交付(CD)混为一谈。

其实 CI 和 CD 是两码事。CI 是 CD 过程的一部分，但是要实现完整的 CD——这应该是任何旨在优化其工作流的软件交付团队的目标——您需要的不仅仅是 CI 服务器。

CD 还要求将自动化发布到您正在工作的环境中，不管它是什么。它需要工具，例如[步骤](http://devcenter.wercker.com/docs/steps)，可以自动化 CI 服务器范围之外的软件交付任务。CD 需要沟通工具和渠道来使软件交付团队无缝协作。

当组织建立了一个 CI 服务器，并立即认为他们的软件交付现代化工作已经完成时，他们正在犯一个大错误。

## 改变詹金斯世界的文化

为什么熟练的软件工程团队会犯这样的错误？这并不是因为他们不聪明或者没有跟上最新的创新。

相反，问题在于错误地试图模仿最大、最有效的软件交付业务，比如谷歌和网飞。众所周知，这些组织利用开源工具链和大规模基础设施来构建极其敏捷的软件交付管道。

让这些公司能够建造这些管道的不仅仅是他们部署的工具，还有他们的文化。仅仅使用和谷歌一样的工具，你不可能变得和谷歌一样高效。

较小的组织并不总是意识到这一点。只有当他们拥有正确的文化哲学和过程时，他们才能克服像 Jenkins 这样的工具的限制，并优化他们的软件交付管道。

没有工具链是完美的，但是当你实施正确的文化时，你*可以*实现软件交付的完美(或者至少接近完美)。

如果你的软件交付方法仍然是建立在 Jenkins 一个人的基础上，你无疑会错过做得更好的机会。创造这些机会需要文化变革。在本系列的下一篇文章中，我们将研究有远见的公司如何将新工具与软件交付的新文化相结合，以克服我们长期以来一直在努力克服的以 Jenkins 为中心的世界的低效。

有什么问题吗？我们总是对反馈感兴趣，[给我们发电子邮件](mailto:insights@wercker.com)。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>