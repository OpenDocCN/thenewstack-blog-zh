# 数据库索引是如何工作的

> 原文：<https://thenewstack.io/how-database-indexes-really-work/>

[InfluxData](https://www.influxdata.com/) 赞助了这篇文章。

我越来越喜欢数据库，这让我问了很多关于它们如何工作的问题，我最近痴迷于数据库索引。

以前，我知道如果我想让一个特定的列或字段比其余的更快，我会对它进行索引。当我第一次学习编码时，这是我的大脑所能处理的，但是作为开发人员的成长意味着扩展我的基础知识，比如数据库索引到底是什么以及它为什么存在。

![](img/7e85bd5dd3398aa33b1e5d8b34aeaea0.png)

作为一名开发人员，有很多方法可以成长

## 什么是数据库索引？

 [凯蒂·法默

凯蒂和她的丈夫以及两条狗住在加州的奥克兰(其中至少有一条会和她聊一些有趣的科技话题)。她喜欢试验代码，破坏东西，并试图修复它。她在科罗拉多州丹佛市的图灵软件与设计学院学习编码，这给了她一个绝好的机会，在她知道如何修复之前就把东西弄坏了。](https://www.influxdata.com/) 

想象一下，我们正在旧金山寻找我们的朋友克里斯。我们知道她住在旧金山，但不知道她的地址。虽然每栋建筑都有一个唯一的地址，使我们可以很容易地找到它，但我们需要一种方法将我们要找的人 Chris 与她的唯一地址联系起来。在这种情况下，我们必须在旧金山挨家挨户敲门，直到找到她。那不是很有效率(可能也不是个好主意)。但是如果我们有一个目录把克里斯和她的地址联系起来，123 Nunya Lane，我们可以直接走到那里。

这与数据库索引的原理相同。数据库索引是一种数据结构，类似于数组或散列。这只是我们组织数据的一种方式。在这个例子中，我们有一个指向地址的名称索引。

那么，为什么我们的数据库中需要一个数据结构，也就是大数据结构呢？

![](img/8c19ebc81c2e05c0905a7751ebf256ad.png)

你永远不知道谁会在旧金山开门

## 为什么数据库需要索引？

![](img/d977e78a46ae1eb777324f16898f21b9.png)

我们在数据库中保存了如此多的东西——几乎是我们认为以后可能需要的任何东西，从用户凭证一直到送到我们家的比萨饼的经度和纬度。如果没有索引，数据库就只能在旧金山挨家挨户敲门，或者以线性方式搜索每一条记录。有时候，这很好。话又说回来，一些数据库存储了数亿条记录，所以线性搜索可能需要十个步骤或 525，600 或 3 亿条记录。我们必须考虑*潜在的*步数。如果没有索引，数据库在搜索每条匹配记录时可能会以极其缓慢的查询结束，这可能会导致等待查询的累积。延迟和总体响应时间将会增加，等待这些查询结果的任何人要么必须培养一种爱好，要么更有可能使用不同的应用程序。

## 应该索引什么？

当决定向数据库添加索引时，我们需要考虑我们的数据。为每个列或字段编制索引也会产生负面影响。如果我们创建 10 个索引，那么向数据库写入一条记录就变成了 11 次写入:一次写入数据库，一次写入每个索引(假设该记录包括所有索引列/字段)。作为一个指导原则，我们希望索引最常被查找的数据。大量数据库查询的性能提高抵消了写入索引的成本。

## 关系数据库索引和 NoSQL 数据库索引之间有什么区别？

在关系数据库中，索引是按列创建的。我们可以选择任何列，甚至是列的组合来创建索引。

NoSQL 数据库也可以有索引！由于数据库的多样性，非关系数据库领域的惯例要少得多，但是大多数数据库都有关于如何索引数据的优秀文档。我喜欢 [InfluxDB 的索引](https://docs.influxdata.com/influxdb/v1.6/concepts/time-series-index/)，其中作为标签插入的数据被索引，而作为字段插入的数据不被索引，所以如果我不想的话，我不必考虑更多的索引。

## 摘要

数据库索引是理解我们的数据库如何花费时间和资源的基础部分，创建它们鼓励我们更多地了解我们的应用程序和它们产生的数据。我已经觉得自己更聪明了。

[InfluxData](https://www.influxdata.com/) 是新堆栈的赞助商。

凯蒂·法默的原创作品。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>