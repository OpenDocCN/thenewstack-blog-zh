# 简单看一下不可变的基础设施，以及为什么它是这样一个追求

> 原文：<https://thenewstack.io/a-brief-look-at-immutable-infrastructure-and-why-it-is-such-a-quest/>

您可能听说过一些关于不可变基础设施的事情。这很流行，说实话也应该如此。它正在以一种引人注目的方式改变软件运输、构建和管理的范式。但是什么是不可变的基础设施呢？让我们花一点时间来讨论这个问题，就像任何流行的东西一样，它背后有一些核心思想，还有一些是多余的。

不可变仅仅意味着某种被创造并保持不变的东西。不可变的事物被理解为不需要改变它们，因此也不需要可变。基础设施这个词当然是从建筑和空间的物理设计领域中取来的，用于我们的虚拟服务器和软件应用领域。结合起来，我们有一个创建的和不变的集合或架构来托管应用程序。

不变的基础设施听起来可能与您在敏捷环境中想要的正好相反。但是它的意思是，一旦映像开始工作，就只部署一个工作映像。当需要进行更改时，会创建一个新的映像，但以前的映像仍可用于回滚环境本身。事实上，我们现在可以创建整个环境的精确的、版本化的、带时间戳的版本，这几乎完全消除了故障实例的故障排除。由于操作系统级虚拟化引领着不变基础设施的发展，这些映像的部署速度极快..

尽管有人可能会想，好吧，部署更快，但是实际性能呢？在某些情况下，单个实例的性能比专用机器慢，但它使横向扩展更加容易，提供了另一种构建更快环境的方法，不仅通过更快的部署，而且实际上通过添加更多的机器来加快处理速度。

不可变基础设施的出现是因为可变基础设施的可怕考验。系统管理员的真实体验:管理需要登录和帐户的服务器、具有可变更新(可能成功也可能失败)的托管软件、各种修复或失修状态，以及传统管理基础架构方式中的其他挫折。设置不可变的服务器，这些服务器被配置和设置为工作一次，然后只按原样部署，可以消除许多这样的问题。如果需要补丁或更新，服务器映像会被更新，所有的东西都会从一个不可变的上下文中重新部署。生产环境中的任何服务器都不会以可变的方式被修补或操作。

## 持续集成和交付

传统上，将软件从开发人员的机器集成和交付到生产(或者至少是试运行)环境是一个冗长且耗时的过程。这通常涉及多台服务器的设置，有时是虚拟化的，有时不是，各种脚本编写，通常围绕所有这些都需要大量的工作，并且仍然需要几个小时或几天。每次部署系统都意味着通过手动启动的过程运行各种脚本和其他应用程序。如果集成在起作用，它通常与传统环境中的交付无关，并且仍然包括进入生产环境的手动干预。

有了不可变的基础架构，几乎所有东西(有时甚至包括生产)都是可处置的。这个想法是，它可以在几分钟内再次部署。有时，通过完整的集成周期和交付进行重新部署可能需要几秒钟。一些充分利用这一过程的公司包括 [Codeship](https://codeship.com/) 、 [Snap CI](https://www.snap-ci.com/) 、 [CircleCI。](https://circleci.com)

## 应用程序部署

随着上面讨论的持续交付和集成的出现，通过不可变基础设施的应用程序部署已经成为应用程序部署的最佳实践之一。这通常涉及到能够在几分钟内编写完整的脚本并重新创建一个生产(或试运行或 UAT 或其他)环境。这提供了在几秒钟内回滚和将部署推向生产的能力。通过在这样不变的基础设施上构建代理，它极大地提高了团队测试部署的能力，而不用担心。

## 摘要

不可变基础设施在这一领域提供的东西真正颠覆了应用程序的部署方式。在已部署的环境中提高可靠性、效率和一致性，以便在几分钟内重新创建环境的能力是非常宝贵的。拖延只会增加迭代的成本和时间。以不变性前进的想法是现在。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>