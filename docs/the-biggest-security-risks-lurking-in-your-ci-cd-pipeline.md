# 隐藏在您的 CI/CD 渠道中的最大安全风险

> 原文：<https://thenewstack.io/the-biggest-security-risks-lurking-in-your-ci-cd-pipeline/>

您的 CI/CD 管道可帮助您实现快速高效的应用交付，但不一定能保证您的应用安全。

虽然 CI/CD 提供了许多优势，但与 CI/CD 流程相关的速度和缺乏手动监督也会带来新的安全风险。这些风险是可以管理的，但前提是您将安全放在 CI/CD 渠道的前端和中心。

下面，我解释 CI/CD 链中常见的安全疏忽，以及如何解决它们。

## 保护 CI/CD 不应该是事后的想法

 [吐温·泰勒

吐温是 Twistlock 的客座博主，也是 Fixate IO 的撰稿人。他在谷歌开始了他的职业生涯，在那里，他参与了 AdWords 团队的技术支持。他的工作包括审查堆栈跟踪和解决影响客户和支持团队的问题，以及处理升级。如今，作为一名科技记者，他帮助 IT 杂志和初创公司改变团队构建和发布应用程序的方式。](https://cloudplatformonline.com/TNS-CI-CD-with-Kubernetes.html?utm_source=google&utm_medium=email&utm_campaign=FY18-Q3-americas-nurture-email-wd-icb_tns&utm_content=cicd&utm_term=tns) 

[CI/CD](https://www.twistlock.com/platform/continuous-integration-tools/) 管道对于任何开发 [云原生](https://www.twistlock.com/2019/01/21/cisos-5-essential-features-cloud-native-security-platform/) 应用的团队都至关重要。它们用于端到端地管理软件生命周期。这使得 CI/CD 管道成为攻击者的诱人目标。仅仅通过攻击 CI/CD 管道，攻击者就可以访问他们支持的应用程序中包含的私有信息。应用程序可能会中断，数据可能会泄露，当然，这对任何组织来说都是一场灾难。

保护 CI/CD 渠道显然是 DevOps 团队的首要任务。然而，将安全性应用到 CI/CD 管道的过程并不简单。开发人员应该深入研究他们的管道，了解他们的管道接收什么样的信息以及他们的主要漏洞，然后找到消除它们的方法。大部分都可以通过严格实施 [DevSecOps](https://www.twistlock.com/devsecops-101/) 实践来完成，这确保了安全性是应用程序的核心。开发人员应该遵循部署和使用 CI/CD 管道的最佳实践，以确保它们免受任何安全威胁。

## 对您的 CI/CD 渠道的威胁

CI/CD 管道由各种组件组合而成，这些组件相互协作以提供高效的集成和部署。这些组件包括代码和映像库、构建服务器、容器和第三方工具。这些组件依靠信任关系相互通信。然而，CI/CD 平台的漏洞很容易被忽略。由于整个系统具有各种依赖关系和配置，攻击者可以利用看似安全的资源，并简单地关闭整个基础设施。

容器看起来像是运行应用程序的安全选择，因为它们的生命周期短，并且具有隔离的性质。然而，过去已知攻击者攻击过容器图像。容器是相互隔离的，但是它们通常部署在同一个 IP 空间。这意味着，即使攻击者获得了对单个容器的访问权限，他们也可以访问群集中任意数量的其他容器。

容器的生命周期很短，只有 15-20 分钟，理论上来说，这是阻止攻击者攻击 CI/CD 管道中任何其他组件的好方法。然而，攻击者可以利用这短暂的时间访问其他漏洞并下载软件包，他们可以使用这些软件包进行更复杂的攻击。

攻击者可以利用代码库和服务器之间的信任关系来更改代码并将它们提交给主服务器，这对应用程序来说是极其有害的。开发人员倾向于通过环境变量使用各种工具和资源的凭证。尽管这是比将这些凭证硬编码到代码中更好的选择，但攻击者可以转储这些变量来获得他们利用其他资源所需的所有信息。攻击者不必发起全面的攻击，他们只需访问应用程序中的各种服务之一，并使用它来利用昂贵的资源并对应用程序发起各种攻击。可回收的代码对开发人员来说很方便，但是攻击者试图用漏洞来破坏开源代码，以便让依赖它们的应用程序容易受到攻击。

## **保护 CI/CD 管道**

开发运维团队必须研究他们的管道，评估攻击面和威胁，并提出一套部署 CI/CD 管道时要遵循的最佳实践。开发运维团队可以采取以下步骤来确保安全性:

1.  开发人员应该从强化他们的管道开始。这可以通过锁定托管存储库、配置管理器和构建服务器的系统来实现；
2.  应对整个管道进行监控，各种服务应绝对透明，以便立即追踪任何异常情况；
3.  管道中使用的工具应任意审核并定期更新。对存储库的访问也应该被审计和限制，以避免内部和外部攻击；
4.  密钥、凭证和秘密应该从脚本中删除，并由可信的秘密管理器保护，该管理器保护它们并定期审计它们；
5.  访问控制应该在整个工具链中实现，确保没有对任何服务的匿名或共享访问；
6.  应该维护不可变的日志，然后可以定期检查这些日志，以追溯更改的源头，确保没有未经授权的更改；
7.  容器大大增加了任何应用程序的攻击面，开发人员从一开始就牢记容器安全性是至关重要的；
8.  应该使用代码分析工具来确保代码是使用最佳实践编写的，并且不会为攻击者打开后门。

## 结论

不幸的事实是，CI/CD 管道并没有将安全性作为首要考虑因素。速度和方便是主要目标。因此，重要的是开发人员要仔细理解他们的 CI/CD 管道，并确保安全性总是被放在首位。这种方法有时可能会减慢开发速度，但是通过在开发、DevOps(更恰当地说是 DevSecOps)过程中牢记安全性，开发团队可以在威胁最终出现时避免损失和损害。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>