<html>
<head>
<title>This Week in Numbers: Meltdown Patches Hurt Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">本周数字:崩溃补丁损害性能</h1>
<blockquote>原文：<a href="https://thenewstack.io/week-numbers-meltdown-patches-hurt-performance/#0001-01-01">https://thenewstack.io/week-numbers-meltdown-patches-hurt-performance/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">修复本月早些时候披露的英特尔Meltdown安全漏洞所需的补丁正在损害内部系统和云提供商系统的CPU性能。</p>
<p class="translated">正如我们在中报道的<a href="https://thenewstack.io/need-know-meltdown-spectre-cpu-flaws/" class="local-link">,</a><a href="https://fedoramagazine.org/kpti-new-kernel-feature-mitigate-meltdown/" class="ext-link" rel="external ">内核页表隔离</a> (KPTI)方法提供了缓解措施，但对系统性能有负面影响。Red Hat <a href="https://access.redhat.com/articles/3307751?sc_cid=7016000000127NJAAY" class="ext-link" rel="external ">报告</a>称，其基准测试发现许多数据库工作负载的性能下降了8-19%。Red Hat指出，云系统的性能可能会受到特别的影响:“由于用户到内核转换的频率增加，我们预计对部署在虚拟来宾中的应用程序的影响将高于裸机。”</p>
<p class="translated">事实上，一篇Sysdig <a href="https://sysdig.com/blog/making-sense-of-meltdown/" class="ext-link" rel="external ">帖子</a>强调了来自整个Twitterverse的报告，即对于一系列工作负载来说，影响要严重得多。例如，Darko ronic<a href="https://twitter.com/apolloFER/status/949589014977400833" class="ext-link" rel="external ">的Riak性能下降了50 %, Redis下降了40%。根据Branch Analytics工程总监Ian Chan </a>的<a href="https://twitter.com/chanian/status/949457156071288833" class="ext-link" rel="external ">观察，当亚马逊网络服务将Meltdown补丁应用于其自己的系统时，运行在d2.xlarge AMIs上的生产Kafka代理吞噬了5%至20%的额外CPU使用率。</a></p>
<p class="translated">AWS的ElasticCache是一项管理Redis服务，其用户也担心这会增加他们每月AWS账单的费用。下面的图表显示了<a href="https://www.crowdfireapp.com/" class="ext-link" rel="external "> Crowdfire </a>的<a href="https://twitter.com/ApsOps/status/949251143363899392" class="ext-link" rel="external "> Amanpreet Singh </a>正在监控的ElasticeCache实现的CPU利用率如何跃升:</p>
<p class="translated"><a href="https://twitter.com/ApsOps/status/949251143363899392" class="ext-link" rel="external "> <img decoding="async" loading="lazy" src="../Images/a60cbeb375824cc9cd8c01932b6042c3.png" alt="" data-id="3933291" data-original-src="https://storage.googleapis.com/cdn.thenewstack.io/media/2018/01/526b6387-meltdown.jpg"/> </a></p>
<p class="translated">至少有一家云提供商，<a href="https://cloud.google.com/kubernetes-engine" class="ext-link" rel="external ">谷歌</a>，在2017年的最后几个月里一直在<a href="https://www.blog.google/topics/google-cloud/protecting-our-google-cloud-customers-new-vulnerabilities-without-impacting-performance/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+blogspot%2FMKuf+%28The+Keyword+%7C+Official+Google+Blog%29" class="ext-link" rel="external ">狂热地工作</a>，以缓解其自身系统当时悬而未决的性能滞后，至少在新一代处理器出现之前是如此。公司工程师提出了<a href="https://support.google.com/faqs/answer/7625886" class="ext-link" rel="external "> Retpoline </a>，这是一种软件二进制修改技术，旨在防止分支目标注入。</p>
<p class="translated">“借助Retpoline，我们无需禁用推测性执行或其他硬件功能。相反，这种解决方案修改程序，以确保执行不会受到攻击者的影响，”谷歌指出。</p>
<p class="translated">类似的方法会在其他地方奏效吗？正如Red Hat <a href="https://access.redhat.com/articles/3307751?sc_cid=7016000000127NJAAY" class="ext-link" rel="external ">指出的</a>，有自己的内核补丁，“即使被禁用，额外的代码和微码更新可能会有轻微的性能影响。”</p>
<p class="translated">这个故事的寓意是，即使不需要购买新的芯片，英特尔的安全缺陷仍然可能伤害你的钱包。</p>
<p class="translated">TNS执行主编Joab Jackson为本文做出了贡献。</p>
<p class="attribution translated"><a href="https://cloud.google.com/kubernetes-engine" class="ext-link" rel="external ">谷歌</a>和<a href="https://www.openshift.com/" class="ext-link" rel="external ">红帽</a>是新栈的赞助商。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>