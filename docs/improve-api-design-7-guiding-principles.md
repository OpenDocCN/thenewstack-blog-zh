# 用 7 条指导原则改进你的 API 设计

> 原文：<https://thenewstack.io/improve-api-design-7-guiding-principles/>

[](http://www.apiacademy.co/team_member/ronnie-mitra/)

 [罗尼·米特拉

罗尼是 CA 技术公司 API 学院的设计总监。他是一名作家、演示者和设计师，特别关注软件和人之间的交流方式。他最近的出版物是合著的《微服务架构》一书，由 O'Reilly 出版。](http://www.apiacademy.co/team_member/ronnie-mitra/) [](http://www.apiacademy.co/team_member/ronnie-mitra/)

在 20 世纪 90 年代中期，Jakob Nielsen 和 Rolf Molich 创建了一套评估和测量界面可用性的设计原则。他们的“[用户界面设计的 10 种可用性启发法](https://www.nngroup.com/articles/ten-usability-heuristics/)”强调了如果设计师想要他们的产品有更好的可用性，他们需要关注的领域。

如果你是一个 API 设计者，启发式是值得学习的。Nielsen 和 Molich 提出的原则今天仍然适用，并为你建立可用性思维提供了一个很好的基础。通过研究每一个启发，你将开始批判性地思考你的 API，以及如何改进它。

为了帮助你，我将最初的列表缩减为七个启发，这七个启发对于 API 设计者来说是最重要的，需要学习和理解:

## 1.系统状态的可见性

*“系统应该在合理的时间内，通过适当的反馈，始终让用户了解正在发生的事情。”—尼尔森*

在图形用户界面中，当系统不提供相关反馈时，用户很容易感到困惑。例如，按下一个按钮而没有从 UI 得到任何响应会让用户怀疑按钮是否被正确按下。为了满足这一启发，需要向用户提供及时和相关的信息。

这种信息访问对于 API 也很重要。增强的系统状态可见性可以帮助开发人员编写使用 API 的客户端应用程序。提供更多更好的系统信息将有助于开发人员理解他们调用 API 时发生了什么，从而带来更好的开发体验。

但是，提供系统状态可见性并不意味着丢弃关于系统内部的所有可用信息。从客户端开发人员的角度来看，关注的系统是界面，而不是底层数据库或代码。对于客户来说，知道一个调用可能需要很长时间来完成是很重要的，但是了解一个调用由于特定的数据库配置而变慢是很有趣的，但不是非常有用。

对于 HTTP APIs，响应状态代码提供了良好的、基本的系统状态信息。例如，2xx 系列通知呼叫者事情进展顺利，而 4xx 和 5xx 系列指示某种类型的故障。选择特定的状态代码(如 202 或 404)可以提供额外的系统状态信息。但是，设计者可以超越 HTTP 级别的代码，在他们的消息体中提供附加的系统状态信息，合并问题细节和可能已经改变的资源的当前状态。增加系统状态信息的保真度应该增加 API 的可用性。

在评估 API 时，要寻找缺乏状态可见性使得编写客户端更加困难的情况。

*   当系统出现问题时，很难学习吗？
*   接口告诉我们调用和请求的结果了吗？
*   系统是否应该描述任何可能发生的相关副作用？

## 2.系统和现实世界之间的匹配

系统应该说用户的语言，用用户熟悉的单词、短语和概念，而不是面向系统的术语。遵循现实世界的惯例，使信息以自然和逻辑的顺序出现。”—尼尔森

用户友好植根于构建一个与用户的世界模型相匹配的界面——目标是减少用户需要学习的新事物的数量。感觉熟悉的界面更容易学习和使用。

当谈到 API 可用性时，我们关心的用户是编写将使用我们接口的代码的开发人员。这意味着 API 的语言、模式和约定应该尽可能地与其用户的世界相匹配。这个世界包括他们用来编写代码的工具和编程语言、他们工作的行业和组织以及他们生活的社区和社会世界。

API 评估者需要从识别 API 的目标用户开始。如果没有可用的用户配置文件，则需要定义一个通用开发人员。找出 API 中会给用户带来不必要的认知负担(或“摩擦”)的部分。这可能是由于不熟悉的单词、与用户的理解相冲突的语义(单词的含义)以及不适合开发人员的世界视角的消息格式或消息模式。

*   消息格式、库和消息模式是否符合用户的世界？
*   API 的词汇表对用户来说是一个很好的匹配吗？
*   API 的行为是否像用户习惯使用的 API 一样？

## 3.一致性和标准

用户不应该怀疑不同的词语、情境或动作是否意味着同一件事—尼尔森

一致性是界面设计的一个重要部分——改变事物工作的规则是一个令人不快的惊喜，可能会导致挫败感。在 API 设计领域，接口不一致的代价尤其高，每个不一致都会导致编写更多的代码来处理那些一次性的边缘情况。这种可用性缺陷真的会伤害 API 开发者的体验。

学习如何使用 API 实际上意味着学习使用接口的规则。这包括 API 的每个部分，从消息格式和接口的查询参数到文档的表示风格。您做出的每一个 API 设计决策都建立了一个您的用户将要学习的规则。

当评估一个 API 时，寻找那些用户会对界面的特定部分的工作方式感到惊讶的情况，因为它打破了设计中其他地方已经建立的惯例。此外，确定 API 不必要地违反行业流行惯例的情况。

*   API 的签名是否一致(如 URI 格式、查询控制)？
*   API 的词汇一致吗？单词在任何地方都有相同的意思吗？
*   API 所有部分的文档和支持工具是否一致？运行时行为与记录的行为匹配吗？

## 4.错误预防

*“比好的错误消息更好的是从一开始就防止问题发生的精心设计。”—尼尔森*

对于 API，错误包括在客户端开发期间发生的问题(语法错误、打字错误和误解的含义)以及在客户端开发和发布之后发生的错误(破坏应用程序的意外数据和更改)。如果我们能够防止每一种错误的发生，那么 API 的可用性就会大大提高。

错误预防是一个很大的问题空间，但是在审查 API 时，您可以特别寻找这些类型的问题:

*   记录的例子是否不正确或有误导性？
*   API 的设计方式是否让它变得“脆弱”——接口的改变很容易破坏应用程序？
*   设计是否过于复杂？是否有机会简化用户的认知工作量？

## 5.使用的灵活性和效率

*“加速器——新手用户看不到——通常可以加速专家用户的交互，这样系统就可以同时满足没有经验和有经验的用户。允许用户定制频繁的操作。”—尼尔森*

提供灵活性的界面，有助于满足不同类型的用户，他们可能有相似的需求，但在不同的环境中工作。Neilsen 和 Molich 提供的经典例子是加速器——例如，一个为常用交互提供键盘快捷键的 GUI 应用程序。第一次复制和粘贴时，你可能会使用菜单系统，但如果这仍然是唯一的选择，第 50 次复制和粘贴操作将会非常令人沮丧。

提供灵活性和使用效率的 API 应该提供一个易于初学者使用的界面，以及旨在提高效率的可选控件。如果用户知道自己在做什么，他们只需编写更少的代码，或者当界面以某种定制方式使用时，运行时应用程序进行更少的 API 调用。

这在 API 中的例子包括:支持多种 API 样式和格式，提供压缩的或分页的响应数据，并提供允许客户端应用程序定制它们接收的响应的控件。

当评估一个 API 的灵活性和效率时，要考虑使用它的不同类型的用户。

*   界面对于初次使用的用户来说有多合适？
*   API 是否为更高级、更有经验的用户提供了控件和快捷方式？默认值是否用于特殊控制？
*   是否有机会优化任何重复或不必要的步骤？

## 6.帮助用户识别、诊断和恢复错误

错误信息应该用简单的语言(没有代码)来表达，准确地指出问题，并建设性地提出解决方案—尼尔森

API 错误消息有两种受众:

1.  机器驱动的客户端应用程序，以编程方式对其接收的内容进行操作
2.  负责编写使用 API 的应用程序的开发人员

API 的可用性取决于机器和人类用户的需求是否得到满足。

在描述这一启发时，尼尔森特别警告我们不要在错误消息中使用“代码”。但是，在 API 领域，忽略这个建议是有意义的——至少对于基于运行时机器的用户来说是这样。易于解析的错误代码非常适合必须基于运行时条件做出决策的客户端程序的需求。

但是，一个提供高水平可用性的 API 也应该包括与人类受众相关的错误信息。这意味着提供描述错误情况的可读文本，并提供故障排除建议。

评估者应该仔细查看 API 提供的错误信息。

*   错误信息是否正确？
*   是否提供机器可读信息？
*   它是否以人类可以理解的方式描述了错误？
*   是否提供了足够的信息来纠正错误？

## 7.帮助和文档

*“即使在没有文档的情况下使用系统会更好，但提供帮助和文档可能是必要的。任何此类信息都应该易于搜索，专注于用户的任务，列出要执行的具体步骤，并且不要太大。”—尼尔森*

从人机交互角度来看，API 文档是开发人员与您的界面进行交互的主要接口。即使文档只是作为 API 用户通过调用学习的起点，它也是体验的必要部分。

API 文档可以像任何一篇技术文章一样被评估。评论者应该注意所提供信息的风格、内容和架构。

*   文档是否满足不同学习阶段(初级、中级和专家)的需求？)
*   在打电话之前，需要阅读多少文档？文档中是否提供了示例？
*   文档结构与用户试图解决的问题有多匹配？

## 使用试探法来改进您的 API 设计

最初的十个可用性试探法是用来作为界面评估方法的一部分。[正如 Jakob Nielsen 在 1995 年描述的那样](https://www.nngroup.com/articles/how-to-conduct-a-heuristic-evaluation/)，这个想法是召集一小组设计专家，让他们使用定义好的设计原则来寻找可用性缺陷。虽然这不如从实际用户那里获得反馈有效，但这是一种很好的、经济的早期识别可用性问题的方法。

但是，即使您不采用专家的正式启发式评估，简单地让您的同行(甚至只是您自己)审查基于 Nielsen 和 Molich 的一套启发式方法的 API 也是有启发性的。如果你觉得它有价值，你可以扩展或者定制这个列表来突出你最关心的 API 可用性部分。

识别启发法的一个很大的价值来自于有一个系统的、结构化的方法来思考和讨论你的 API 的可用性。当真正的用户接触到你的 API 时，困难的工作在于对你发现的问题采取行动，并验证你关于可用性好坏的假设。

构建易于学习、易于使用的 API 并不容易，但是从一套指导原则开始作为第一步可以增加成功的机会。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>