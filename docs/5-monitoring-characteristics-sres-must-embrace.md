# sre 必须具备的 5 个监控特征

> 原文：<https://thenewstack.io/5-monitoring-characteristics-sres-must-embrace/>

[](https://www.linkedin.com/in/postwait/)

 [西奥·施洛斯纳格

西奥于 2010 年创立 Circonus，并继续担任其首席建筑师。20 年来，他一直在设计、编码、构建和操作可扩展系统。作为一名连续创业者，他已经创建了四家公司，并帮助发展了无数的工程组织。西奥是*可扩展互联网架构* (Sams)的作者，是*网络运营* (O'Reilly)和*寻求 SRE* (O'Reilly)的撰稿人，也是全球 IT 会议的常客。他是 IEEE 会员和 ACM 杰出会员。](https://www.linkedin.com/in/postwait/) [](https://www.linkedin.com/in/postwait/)

在当今以服务为中心的“永不停机”IT 环境中，越来越多的组织正在实施站点可靠性工程师(SRE)职能，该职能负责定义测量可用性和正常运行时间、加速发布和降低故障成本的方法。

sre 在持续集成/持续交付(CI/CD)环境中运行，在这种环境中，用户需求驱动着频繁、高性能的发布周期，并且系统变化很快。它是如此的动态，以至于传统的监控方法试图解决不再存在的问题，并且根本不能满足新的监控期望和要求。

SREs 需要一种新的、更新的方法来进行监控。

今天的系统诞生于一个敏捷的世界，并保持流动性以适应供应商和消费者两方面的变化。这个高度动态的系统对传统的监控模式提出了挑战。

从本质上讲，监控就是观察和确定系统的行为。它的目的是回答一个一直存在的问题:我的系统在做它们应该做的事情吗？在缓慢发布周期的旧世界中，通常在 6 到 18 个月之间，在发布开始时部署的系统看起来很像几个月后的同一个系统。简而言之，它不是非常流畅，这是伟大的监测。如果今天的系统是明天的系统，而今天的系统所做的练习在明天基本上是相同的，那么通过观察系统组件的行为而开发的基线将可能有很长的使用寿命。

在快速流动的业务和开发过程的新世界中，变化不断发生。这里的问题是，电源监控的基本原则，也就是判断您的机器是否正常运行的方法，需要了解什么是良好的行为。为了理解系统是否行为不端，你需要知道它们行为时的样子。

在这个新世界中，许多组织正在采用微服务系统架构模式。微服务规定，特定技术问题的解决方案应该被隔离到具有明确定义的接口的网络可访问的服务，以便服务具有自由度。这种自由非常强大，但真正的价值在于将发布时间表和维护分离，并允许围绕安全性、弹性和合规性做出独立的高层决策。这两种变化的结合导致了监控领域完全意想不到的事情:今天的系统既不像明天的系统，也不应该像明天的系统。

## **成功监控的特征**

要使 sre 取得成功，他们需要一种新的现代化方法来管理和监控快速扩展和快速变化的 IT 基础架构，其中监控是服务交付的关键组成部分。那么 SREs 世界中的监控应该是什么样的呢？成功调整其监控策略的组织和 sre 具有以下共同特征:

### **1。测量性能以满足服务质量要求**

是时候超越仅仅 ping 一个系统来查看它是运行还是关闭了。ping 是有用的，但并不等同于知道服务运行得有多好，是否满足业务需求。知道一台机器正在运行并向客户交付服务的某个子集，并实时了解这一信息，这是真正的商业价值。

下一个问题是如何最有效地度量这些服务质量需求的性能。答案是测量系统中每个组件之间每个交互的延迟。在这个以服务为中心的世界中，高延迟是新的“问题”除了检查可用磁盘空间或针对该磁盘的 IO 操作数量之外，检查 API 请求的延迟分布也很重要。仅仅知道系统使用了多少内存是不够的。更重要的是知道每个查询会有多少微秒的延迟。

应该衡量的是系统中所有组件的实际性能，以及客户和数据中心之间的服务交付路径。不要只是检查是否达到了任意确定的“平均”事务时间或者系统是否正常运行。虽然这些传统的度量仍然是有用的，并且需要监控，但是查看是否满足您的服务质量需求是至关重要的。

web 应用程序上的每个用户或每个客户网站都使用过多的基础架构组件，用户体验的质量受到众多微服务性能的影响。要完全了解性能，需要检查系统中每个组件和微服务的延迟。所有这些延迟加起来决定了客户体验的成败，从而决定了您的服务质量。

如果每 100 个数据库查询中有一个非常慢，您的服务质量会受到影响吗？如果每 100 个客户中有 5 个对你的服务不满意，你的业务会受到影响吗？传统的平均值存储和报警方法使 SREs 对这些情况视而不见。每一个用户都很重要，每一次用户交互也是如此。他们的体验受到每一次组件交互、每一次磁盘交互、每一次云服务交互、每一次微服务交互、每一次 API 查询的直接影响，所以都要衡量。

想象一下，测量用户经历的总延迟，并在子组件和微服务中不可接受的延迟影响端到端服务质量之前向 SREs 发出警报。如果没有对其进行衡量，那么 sre 就看不到是什么导致 web 应用程序或网站满足或不满足服务级别协议的基础。

SREs 要求能够可靠且经济高效地测量所有数据，而不仅仅是样品。您需要对您的所有基础架构和所有指标进行全面观察。这不仅有助于加快问题的解决，而且一旦您收集了这些指标，您的团队就有可能在这个数据海洋中发现额外的商业价值。

### **2。民主化数据以提高生产力和节省时间**

传统监控的一个特点是使用不同的监控工具，每个工具都有特定的用途，并会产生度量数据孤岛。这是一个东拼西凑的环境，缺乏一致的标准和流程；结果，无法在组织内的不同团队之间以清晰和一致的方式共享信息。

拥有不同的工具通常需要更多的成本和资源，而且通常只有少数人知道如何使用它们。如果这些人离开组织，这不仅会造成严重的中断，而且还会阻止 it 组织内的团队自己找到答案。例如，负责应用程序性能监控的工程师如果不依靠团队中的某个人来获取所需的网络健康信息，就无法获得这些信息，这使得故障排除等任务需要花费更长的时间。在战略层面，没有办法获得支撑业务的系统的健康和性能的全面和综合的视图。

通过将您的所有指标(应用程序、基础架构、云、网络、容器)集中到一个可观察性平台，您的组织可以获得跨团队和服务的一致指标框架。您使您的数据民主化，这样任何人都可以随时立即访问该数据，并以与您业务的其他部分相关的方式使用它，消除了与传统监控工具相关的耗时障碍。一个持续实时呈现和关联所有数据的集中式平台整合了组织内所有团队的监控工作，使企业能够从其监控工作中获取最大价值。

### **3。获得更深入的背景以减少 MTTR 并获得更高的洞察力**

如今的 sre 淹没在从每个基础架构组件(虚拟、物理或云)不断涌出的数据中。使用传统的监控流程，从数以百万计的数据流中识别性能问题的根源可能需要数小时的工程时间。为了快速解决性能问题，sre 需要更多的上下文。

具有上下文的指标允许 sre 关联事件，因此它们可以减少识别和纠正影响服务的故障的根本原因所需的时间。这就是为什么 SREs 必须拥有符合 Metrics 2.0 的监控解决方案。Metrics 2.0 是一组关于时间序列指标元数据的约定、标准和概念，目标是以自描述和标准化的格式生成指标。

Metrics 2.0 的基本前提是，没有上下文的度量没有多大价值。Metrics 2.0 要求使用与正在收集的指标相关的元数据或上下文来标记指标。例如，在没有上下文的情况下从 100 台服务器收集 CPU 利用率并不是特别有用。但是使用 Metrics 2.0 标签，您将知道这个特定的 CPU 指标来自这个特定的服务器，在这个特定的机架中，在这个特定的数据中心，做着这种特定类型的工作。有用多了。

当所有指标都以这种方式标记时，查询和分析变得非常强大。您可以基于这些标签进行搜索，并且能够以多种方式对数据进行切片和切块，以收集关于您的运营和绩效的见解和情报。

### **4。阐明成功是什么样子的**

用一种语言来表达成功是什么样子，可以让人们赢。令人沮丧的是，你认为你做得很好，达到了预期，然后发现目标已经改变，或者你不能清楚地说明为什么你会成功。服务级别目标(SLO)的艺术在这里占主导地位。SLO 是关于可接受的可用性和性能水平的协议。了解您的企业提供的服务以及您提供该服务的目标水平是监控的核心。

因为 SLO 是一种可用性和性能保证，所以它不应该被用来识别什么时候东西坏了。相反，SLO 应该围绕客户感知价值来设置，因为这是直接影响您成功能力的因素。

许多组织花费大量精力试图正确设置他们的 SLO。不幸的是，这是白费力气，因为你将是错误的。方法不应该是第一次就让你的 SLO 完美，这是不可能的。相反，SLO 应该是一个迭代过程。你应该有一个反馈环，根据你每天学到的信息，告诉你是否需要改变你对什么值得 SLO 和参数应该是什么的概念。关键是你的 SLO 要有灵活性。你需要定期重新评估它们，以确保它们不会太松也不会太紧。

### **5。保留您的数据，以便降低未来风险**

监测数据通常被认为是低价值和高成本的。时代变了，就像所有的计算一样，存储数据的成本已经大幅下降。更重要的是，sre 改变了这些数据的长期保留价值。SREs 在学习文化中运作。当事情出错时，它们总是会出错，关键是要有一个健壮的过程来询问系统和组织，以了解故障是如何发生的。这允许改变过程以降低未来的风险。按照我们前进的步伐，不可否认的是，您的组织将针对过去失败后立即被忽略的失败开发智能问题。这些新问题对你的组织的发展至关重要，但如果你能回到过去，问一些关于过去事件的问题，它们将变得绝对珍贵。数据保留通常可以带来有价值的学习，从而降低未来的风险。

## **SREs 需要更高级的监控**

当今“永不停机”的以服务为中心的 IT 环境的现实意味着，与过去相比，监控扮演着不同且更有影响力的角色。因此，sre 在监控方面有新的、更高级的要求和期望。当您接受了这些监控特性，您将立即开始提升监控与您的企业成功的相关性。您还将获得许多其他好处，如更快地识别和解决问题、全面了解所有指标、更好的性能、更低的成本以及对决策准确性的更大信心。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>