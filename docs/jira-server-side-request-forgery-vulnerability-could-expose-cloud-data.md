# 吉拉服务器端请求伪造漏洞可能会暴露云数据

> 原文：<https://thenewstack.io/jira-server-side-request-forgery-vulnerability-could-expose-cloud-data/>

对 9 月份发现的一个吉拉漏洞的进一步研究引发了人们对 Atlassian 提供的漏洞跟踪和项目管理软件的新担忧，特别是云服务提供商和容器用户对该软件的使用。

恶意攻击者可以利用这一漏洞(在数千个基于云的部署中发现)绕过 web 防火墙，诱骗吉拉暴露敏感的配置、日志和凭据。

2019 年 9 月，研究人员发现了一个漏洞( [CVE-2019-8451](https://nvd.nist.gov/vuln/detail/CVE-2019-8451) )，该漏洞影响了吉拉 8.4.0 之前的版本，由于 JiraWhitelist 类中的逻辑缺陷，该漏洞允许远程攻击者通过服务器端请求伪造(SSRF)访问内部网络资源的内容。

[Palo Alto Networks](https://unit42.paloaltonetworks.com/server-side-request-forgery-exposes-data-of-technology-industrial-and-media-organizations/)的 [Unit 42 发布了关于这个漏洞](https://unit42.paloaltonetworks.com/)的新研究，这应该会引起任何开发或部署容器的人的关注。该研究小组密切关注了吉拉 SSRF 漏洞，并研究了它对六个公共云服务提供商(CSP)的影响。他们的发现令人大开眼界。

SSRF 是一种 web 应用程序漏洞，能够将恶意请求重定向到通常仅限于受影响服务器的资源。这是导致 2019 年 7 月 Capital One 违规的同类型漏洞。攻击者能够通过欺骗易受攻击的应用程序将恶意请求转发到随机域(包括局域网上的本地主机和机器)来绕过防火墙。

最常见的 SSRF 请求类型是 HTTPS 和统一资源标识符(URI)。

根据 Unit 42 的调查结果，他们的漏洞扫描器在公共云中发现了超过 7，000 个暴露于互联网的吉拉实例。在这 7000 个实例中，3152 个易受 CVE 攻击-2019-8451。和 1，779 个泄露的云基础架构元数据。

据帕洛阿尔托网络公司的高级云漏洞和利用研究员[陈颉](https://www.linkedin.com/in/jay-chen-64471b3/)称，SSRF 的根本原因是“web 应用程序需要从另一个域中检索资源来满足请求，但输入的 URL 没有得到适当的净化，从而允许攻击者操纵目的地。”

陈进一步解释说，“易受攻击的 API/plugins/servlet/gadgets/makeRequest？url=endpoint 从服务提供者端点获取数据来填充小工具。服务器会验证查询字符串，并且只允许白名单中的端点。

“由于 **JiraWhiteList** 类中的逻辑错误，参数字符串中的 at 符号(@)可以绕过白名单验证。发送到*的请求 http://vulnerablehost . com/plugins/servlet/gadgets/make request？ur l = http://vulnerablehost . com @ http://target host . com*将被重定向到 targethost.com。这种逻辑错误使得攻击者能够向从易受攻击的服务器可到达的任何目标发送 http 请求，”Chen 进一步解释道。

Unit 42 research 声称，吉拉引起了他们的注意，因为它包含 SSRF 漏洞(CVE-2019-8451)，无需身份验证即可被利用。针对该缺陷的补丁立即发布，但像吉拉这样的软件很少得到更新(因为它与业务运营紧密结合)。Unit 42(通过 Shodan 搜索)发现了大约 25000 个暴露在互联网上的吉拉实例。然后，他们选择了六个具有最多易受攻击的吉拉实例的 CSP，发现其中 80%的实例运行的版本低于 8.4，如果不打补丁，它们都可能存在漏洞。

这些统计数据的分类如下:

*   数字海洋客户的元数据泄漏率最高，为 93%。
*   谷歌云用户比例第二高，为 80%。
*   阿里巴巴的客户占 71%。
*   AWS 评分 68%。
*   赫茨纳的顾客比例最低，为 21%。

最后，Unit 42 提供了吉拉开采的最佳实践和补救措施列表:

*   实施允许应用程序与之通信的域的白名单。
*   绝不允许一个应用程序信任另一个应用程序，仅仅因为它在同一个网络上。
*   利用网络应用防火墙。
*   始终保持您的 web 应用程序更新和修补。

Palo Alto Networks 是新堆栈的赞助商。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>