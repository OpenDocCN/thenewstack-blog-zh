# 你的代码审查过程有多好？

> 原文：<https://thenewstack.io/how-good-is-your-code-review-process/>

[](https://leaddev.com/community/romain-dupas)

 [罗曼·杜帕斯

罗曼·杜帕斯是 Code Climate 的软件工程总监，他领导着一个充满激情的工程师团队，致力于帮助其他工程团队利用数据驱动的洞察力取得成功。在加入 Code Climate 之前，Romain 在纳斯达克私人市场担任了六年的工程主管。Romain 在法国出生和长大，并在那里获得了软件工程硕士学位。](https://leaddev.com/community/romain-dupas) [](https://leaddev.com/community/romain-dupas)

如果你的团队认为代码审查是浪费时间，他们是对的。这是一个自我实现的预言:那些不重视代码评审的人会推迟去做，他们的输入通常是琐碎的和风格化的。如果这成为一种模式，代码审查会使你的软件开发过程变得更糟，在没有提高代码质量的情况下减慢你的软件开发周期。

您可以构建一个代码审查过程来提高效率而不是降低效率，但是您需要有意识。首先，组织必须在代码评审目标上保持一致。第二，团队领导和部门经理应该定期监控代码评审度量，以确保目标得到满足，并且过程是健康的。您的目标，以及您用来衡量成功的标准，将会因项目而异。我们来分解一下。

## **对齐:在同一页上**

一个有效的代码评审过程从与其目标一致开始。作为一个团队，重要的是要确定您的评估流程优化了哪些结果。是捕捉 bug 和缺陷，提高代码库的可维护性还是增加风格的一致性？也许这不是关于代码，而是关于增加整个团队的知识共享？

确定优先级有助于您的团队专注于留下或寻找什么样的反馈。旨在让评审者熟悉代码库的特定部分的评审看起来与指导新团队成员更好地进行整体编码实践的评审不同。一旦您知道有效的代码评审对您的团队意味着什么，您就可以开始调整您的代码评审活动来实现这些目标。

## **报告:关键指标**

指示健康的代码评审过程的度量标准与目标不同，但是有一点要注意，每个团队领导都应该监控一些趋势。定期报告第一次审查的时间、审查覆盖范围、审查影响和审查周期指标将允许您快速诊断和解决代码审查过程中的问题。

### **1。速度:第一次审查的时间**

“首次审核时间”是提交者等待反馈的平均时间。当这个指标很高时，提交者要么浪费时间等待，要么被迫打开多个工作轨道。这导致他们团队的公关库存增加，进而对您团队的上市时间产生负面影响。当团队经历第一次审查的时间增加时，调整代码审查期望是什么以及如何将审查更好地集成到日常过程中是至关重要的。团队可以从设定一个基准开始:定义在整个行业和你的组织环境中，第一次评审的“低”时间意味着什么。从这里，团队领导可以深入到个人和团队的指标中，更好地理解为什么第一次评审的时间很长或不一致。您可以查看三个数据点来全面诊断这种放缓，这三个数据点是拉式请求大小、工作负载平衡和审查速度。您希望尽可能地降低这一指标，而不要让它成为评审者关注的焦点和生产力的代价。如果审查的时间是一个问题，重新优先排序或重组可能会导致预期的结果。

### **2。找到最佳点:查看覆盖率**

一个健康的代码审查过程是彻底而有效的。如果您的评审目标是提高代码质量并识别 bug，那么查看评审中带有注释的文件的数量与拉请求中更改的文件的数量(也称为“评审覆盖率”)是很重要的收到至少一个注释的已更改文件的数量是审查彻底性的代表。评审覆盖率没有最佳的数字——正确的数字对于每个团队都是不同的——但是你要确保它符合你的期望。通常，您需要一个最佳点:不要太低，以至于评审人员显然只是在橡皮图章式地修改，也不要太高，以至于评审人员吹毛求疵并减缓过程。

### **3。衡量影响:审查影响**

低审查覆盖率不一定是一件坏事:也许你的代码就是那么好。如果有问题，通常可以通过在团队范围内更加重视评审或者查看评审是如何分配的来确保没有人超负荷工作来解决。高评论覆盖率可能有点棘手:你如何区分彻底性和吹毛求疵？当你看到高于平均水平的评论覆盖率时，有必要看看评论数量之外的内容，以了解实际上在说什么:所有这些反馈都是可行的吗？要做到这一点，您可以监控导致回复评论或代码中后续更改的评论的百分比——在 Code Climate，我们将这一指标称为“评审影响”大量低影响力的评论可能表明审阅者提供的反馈对提交者来说不可操作或没有价值。这可能需要重新调整代码评审应该如何进行。

### **4。绕圈子:复习周期**

在作者和审阅者之间来回跳转的拉取请求会极大地消耗资源。这可能包括评论、变更请求或 PR 作者之外的其他人的批准。  每次来回传递拉取请求时，开发人员都需要进行上下文切换，并在一个特定的工作行上花费更多时间。如果这种情况经常发生，审查过程可能会成为发货的瓶颈，并成为试图完成工作的工程师的动力来源。

PR 来回传递的平均次数——即“审核周期”的数量——可能会因多种原因而变化。举例来说，新开发人员的加入可能会导致它激增。然而，当你在一个有经验的团队中看到评审周期的峰值时，这通常是不一致的迹象。这可以采取多种形式，包括:

*   对“完成”的不同理解。
*   关于评审过程中预期会产生什么样的变化的不一致。
*   关于如何实施解决方案的不同意见。

如果对于一个特定的提交者来说，审查周期的数量很高，这可能意味着他们正在代码库中挣扎，或者处理不清楚的需求。

代码审查是软件开发团队中最难正确完成的过程之一。每个团队都有不同的彻底性和速度的理想平衡——由于优先级的变化，这种平衡甚至可能会改变。

团队领导应该在持续的基础上监控他们的代码审查，但这仅仅是开始。领导者还需要与团队进行频繁的对话。这些对话是一个机会，可以收集必要的洞察力，为代码评审度量提供背景，并使它们有意义。只有这样，团队才能齐心协力解决问题，无论是与反馈相关的问题还是其他问题。

此外，每当流程或团队结构发生重大变化时，团队领导必须认真审视并重新评估他们的流程，重申目标和期望。当团队在评审的目标和过程上保持一致，并且团队领导采取积极的步骤来确保团队能够遵守他们的代码评审承诺时，就有可能建立一个彻底的、有用的和高效的过程。效果将是非常值得的。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>