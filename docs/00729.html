<html>
<head>
<title>CNAB Simplifies Container-Style Deployments for Distributed Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CNAB简化了分布式应用的容器式部署</h1>
<blockquote>原文：<a href="https://thenewstack.io/microsoft-cnab-simplifies-container-deployment-to-distributed-applications/#0001-01-01">https://thenewstack.io/microsoft-cnab-simplifies-container-deployment-to-distributed-applications/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">容器变得如此流行的原因之一是易于部署，但今天的分布式应用程序并不局限于单一运行时或单一云提供商。如果你在应用程序中使用云数据库服务和无服务器功能，你会失去Docker体验的简单性，即把应用程序打包成一个包，并将其推送到repos供人们取出，因为你需要Terraform和Azure Resource Manager模板和Ansible等工具来处理所有不同组件的供应。</p>
<p class="translated">“今天，如果你只使用基于容器的应用程序，你可能正在构建Helm工件，或者对于Azure，你的目标是一个[Azure Resource Manager]工件或类似Terraform的东西，”微软云原生计算团队负责人Gabe Monroy 告诉新堆栈。“当你正在构建的应用程序是这些东西的混合时，问题就来了，所以它有，比如说，Terraform、容器和功能，因为我们开始看到不同运行时和云API的多样性正在出现。你如何把它包装起来，并把它变成像一个简单的应用程序一样可以管理的东西呢？我们能否围绕可重复性、不变性和加密保证提供熟悉的体验，确保工作负载在一个有容器的世界中没有被修改……或者根本没有容器？”</p>
<p class="translated">微软和Docker周二在微软的<a href="https://www.microsoft.com/en-us/connectevent/" target="_blank" class="ext-link" rel="external "> Connect() </a>开发者大会上发布的开源<a href="https://www.youtube.com/watch?v=26e5-UK4YRA" class="ext-link" rel="external ">云原生应用捆绑包</a>是一个包管理规范，它建立在<a href="https://www.opencontainers.org/" target="_blank" class="ext-link" rel="external ">开放容器倡议</a>的基础上，为分布式应用创建一个清单，并将在Docker的公共中心得到支持。</p>
<p class="translated">“我们的想法是尝试并定义一种模式，让人们可以构建这些不同的捆绑包，这些捆绑包具有与之相关的管理生命周期，因此您可以安装、更新和卸载它们，并拥有与确保这些捆绑包安全相关的所有加密技术，能够推拉它们等等，”Monroy解释道。</p>
<p class="translated">CNAB还可以帮助开发人员在越来越多的云环境中工作。“我们希望保持规范的灵活性，以便您可以跨不同的云提供商对解决方案进行建模。即使是主要使用Azure的客户，他们可能在AKS中有一些容器，他们可能有一些Cosmos DB，然后他们希望使用像Dyn DNS这样的第三方DNS服务来缝合DNS记录。CNAB允许他们对所有这些进行建模，并构建一个他们能够以很高的可重复性管理的应用程序。”</p>
<blockquote><p class="translated">CNAB的参数化基于Azure资源管理器(ARM)模板语言。“这意味着，当您使用CNAB安装软件包时，您可以提示输入内容，并立即对这些条目进行强验证。”——加布·蒙罗伊。</p></blockquote>
<p class="translated">CNAB使开发人员能够定义资源，这些资源可以部署到运行时环境的任何组合中，在云中，在本地环境中，如on-premise OpenStack或Kubernetes(或开发人员的笔记本电脑)，在受限的物联网环境中，或者在断开连接的边缘和空气间隙环境中，您无法调用云来下载容器。“在一个断开的环境中，你不能假设你可以访问基于云的容器注册，所以关键的设计目标之一是确保我们可以有一个可以序列化为‘厚’包的包版本，”Monroy解释道。“这个厚厚的包包括所有容器图像和您需要的一切，以便将它放在u盘上，带到一个有空气间隙的环境中，合并容器注册表等，并获得在离线环境中运行的应用程序的全保真版本。”</p>
<p class="translated">即使只使用容器构建的应用程序也将受益于离线选项，以及CNAB使用参数进行配置的方式，因此更改现有应用程序的网络配置并不意味着复制Docker compose文件和编辑YAML，这是一个很容易导致错误的手动过程。它还对Helm进行了改进，Helm使用参数，因此您可以放入块来标记防火墙配置，但没有结构化模式或强类型来验证字段内容，因此安装后很容易出错。Monroy说，CNAB的参数化基于Azure资源管理器(ARM)模板语言。“这意味着，当您使用CNAB安装软件包时，您可以提示输入内容，并立即对这些条目进行强验证。”</p>
<h2 class="translated">分布式资源管理</h2>
<p class="translated">CNAB还可以简化云资源的审计和成本控制，并解决容器蔓延问题，方法是让哪些资源与哪些应用程序相关联变得更加清晰，让开发人员更容易采用不同的服务和平台，而不会因管理它们而不堪重负。</p>
<p class="translated">“现在，如果你打开你的Azure订阅，看看所有正在运行的东西，这些东西可能是成百上千的资源，并且能够区分这些资源中的哪些是哪个逻辑应用程序的一部分，这在今天是很难做到的。Monroy承认:“公共云和不同资源的爆炸式增长确实提高了灵活性，但钟摆还没有摆回到围绕所有这些资源的良好管理结构上。像CNAB这样的现代工具将使跟踪和审计您已经部署的资源变得更加容易。“您不能通过GUI手动点击来管理云资源，否则您最终会面临这种无序蔓延的管理。作为代码，你需要更仔细地考虑工具和基础设施，以避免落入这些陷阱。”</p>
<p class="translated">除了CNAB规范，微软还宣布了一套初始工具，包括用于构建CNAB捆绑包的Visual Studio代码扩展和CNAB客户端的跨平台开源参考实现Duffle。这是一个Docker风格的CLI工具，用于创建捆绑包、加密签名和验证捆绑包，以及推拉捆绑包来安装、升级和卸载它们。还有一个跨平台的电子安装程序，它将一个图形化的前端放到CNAB包中，用于安装、升级或安装应用程序。</p>
<p class="translated">“一旦你建立了一个这样的包，电子安装程序允许你把它放在u盘上，在笔记本电脑上双击它，它会带你完成一个安装程序，”他解释道。“这将允许您使用标准的[桌面安装程序]向导，从您的桌面执行这些基于云的分布式应用程序之一的生命周期管理。”</p>
<p class="translated">该接口依赖于在CNAB完成的参数验证，该规范足够灵活，允许安装和管理桌面资源，为本地应用程序安装开辟了有趣的可能性。</p>
<p class="translated">微软还与Docker合作创建了一个捆绑存储库服务器的示例实现。“为此，我们需要一套围绕Docker注册API和OCI发布API的新API，”他说。“计划是在标准的Docker兼容注册表中将其作为一个附加组件或一组替代API推出。”随着时间的推移，通过开放集装箱倡议与社区合作，蒙罗伊预计CNAB的支持将变得更加一体化。“Docker已经承诺在公共Docker hub中支持CNAB，这非常令人兴奋。”</p>
<p class="translated">编写分布式应用程序和创建CNAB捆绑包仍然需要专业知识，但蒙罗伊认为，这将极大地简化通过软件市场和边缘场景安装和管理它们。“我认为我们在这里所做的就是让人们消费这种东西变得完全无关紧要。如果你现在想安装一个复杂的Kubernetes-plus-containers-plus-Cosmos DB-plus-functions应用程序，你将会在不同的ARM模板或Terraform和Ansible以及混合工具中摸索。现在，您可以轻松安装他人预先构建的软件包，并在几分钟内为您搭建好整个环境。”</p>
<p class="translated"><iframe loading="lazy" title="Introducing Cloud Native Application Bundle (CNAB), standard for defining distributed applications" src="https://www.youtube.com/embed/26e5-UK4YRA?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>