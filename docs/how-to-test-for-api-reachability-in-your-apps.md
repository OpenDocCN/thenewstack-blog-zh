# 如何测试应用程序中 API 的可达性

> 原文：<https://thenewstack.io/how-to-test-for-api-reachability-in-your-apps/>

[](https://www.linkedin.com/in/jwdougherty/)

 [乔·多尔蒂

Joe Dougherty 是一名产品经理，在 ThousandEyes 领导浏览器合成产品的开发，ThousandEyes 是一家提供云和互联网智能的思科公司。](https://www.linkedin.com/in/jwdougherty/) [](https://www.linkedin.com/in/jwdougherty/)

现代应用有点像冰山。用户看到顶部——交互或交易发生的地方——并从那里得出关于业务的结论。理想情况下，这是一种无缝、简单的体验。

就像冰山一样，用户看到的只是整体的一小部分。

今天的大多数应用程序，即使是像在购物车中放置物品这样的小事，都依赖于分布在互联网上的庞大的服务和平台网络——通常是通过基于 REST 的 API。

这可能意味着一个使用 Twilio 进行云通信的消息服务，一个使用 Stripe 进行支付处理的电子商务网站，或者一个使用谷歌地图进行地理定位的送货服务——以及无数其他例子。为了优化这些数字体验的交付，我们需要了解 API 是如何执行的。当涉及到确保整体应用性能时，了解 API 在互联网和云提供商网络上的可达性至关重要。

## **缺乏可见性使得解决问题成为一项挑战**

当应用程序工作流中出现问题时，您需要快速修复。但是现代应用程序工作流的复杂性和分布性使得找到问题的根源变得困难和耗时。当你的声誉依赖于应用程序的性能时，这可不好。

传统的网络和应用程序监控工具虽然有用，但无法提供快速了解问题、适当上报和跨外部工作流解决问题所需的可见性。例如，数据包捕获和流量分析器不能在您自己的环境之外工作。

这意味着企业通常对大部分交付路径视而不见，因此也是影响用户体验的大部分问题的根源。为了适当地升级和解决您自己的基础架构之外的问题，您需要足够的证据来说服第三方采取行动。

如果没有这些证据，您将会在帮助台和低效的故障排除上花费宝贵的时间和金钱，而您的用户将会面临有问题的应用程序体验。

我们在[千眼](https://www.thousandeyes.com/?utm_content=inline-mention)发现，除了简单的可见性，还有其他挑战。交付路径不断变化。云中没有稳定状态。例如，如果你依赖一个基于爱尔兰的第三方 API，不能保证它明天还会基于那里。数据中心会突然出现、迁移或完全消失。所有这些都会直接影响应用程序的功能。这意味着我们需要更多更好的工具来恰当地解决出现的问题。

虽然浏览器合成提供了一个强大的工具来测试应用程序和衡量整个工作流的用户体验，但也有浏览器中的单个请求触发多个后端 API 交互的情况，这从用户的角度来看是无法直接观察到的。例如，当用户在电子商务网站上提交订单时，应用程序发出一系列 API 调用来检查库存、处理付款并生成订单号，然后将用户导向订单确认页面。因为这些后端服务对客户端是不可见的，所以任何一个后端服务的故障或性能问题最终都不会被检测到，并且会直接影响客户。

相反，应用所有者需要一种测试方法，这种方法不仅仅依赖于前端交互，而是从核心应用的上下文中整合测试，以便了解底层网络传输(通常是互联网服务提供商或云提供商网络)的影响。这就是自适应 API 监控的用武之地。

## **自适应 API 监控提供了一条前进的道路**

自适应 API 监控更进一步。通过对您的 API 依赖项执行顺序的、有条件的或迭代的 API 调用，它提供了一个高度灵活的综合测试框架，模拟后端应用程序与远程 API 端点的交互。

API 监控测试可以从应用程序环境外部的有利位置运行，或者从应用程序托管环境中的代理运行到 API 服务。后一种部署方法的优点是，还可以监控从应用程序到 API 端点的特定网络路径和性能。

所有这些都为影响应用体验的外部网络提供了强大的测试选项和前所未有的可见性。对于应用程序所有者来说，这意味着您可以动态地测量性能，区分每个迭代函数之间的计时，并验证复杂工作流的逻辑。好处？快速解决问题、更智能的工作流程以及对优化数字体验机会的宝贵见解。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>