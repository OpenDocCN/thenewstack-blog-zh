<html>
<head>
<title>Q&amp;A LinkedIn's Nikolai Avteniev: Code Review in the Age of DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">LinkedIn的Nikolai Avteniev问答:DevOps时代的代码审查</h1>
<blockquote>原文：<a href="https://thenewstack.io/qa-linkedins-nikolai-avteniev-code-review-in-the-age-of-devops/#0001-01-01">https://thenewstack.io/qa-linkedins-nikolai-avteniev-code-review-in-the-age-of-devops/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">今年早些时候，LinkedIn工程师Nikolai Avteniev在纽约市举行的<a href="https://scna.softwarecraftsmanship.org/" class="ext-link" rel="external ">软件工艺</a>会议上给<a href="https://engineering.linkedin.com/blog/2018/06/scaling-collective-code-ownership-with-code-reviews" class="ext-link" rel="external ">做了一个关于现代代码审查过程以及如何在LinkedIn实践的演讲</a>。他传授的关键经验之一是，软件必须有一个“所有者”——没有明确定义所有者的软件会有更多的bug。</p>
<p class="translated">作为LinkedIn旗舰产品工程团队的一员，Avteniev非常熟悉这家商业社交网络巨头的代码审查流程。因此，我们采访了Avteniev，以了解LinkedIn软件测试的更多信息，并讨论review如何适应DevOps驱动的软件开发的总体目标。</p>
<p class="translated"><strong>LinkedIn旗舰产品工程团队是做什么的？</strong></p>
<p class="translated">旗舰团队构建我们的旗舰应用程序，因此面向iOS和Android的LinkedIn移动应用程序、LinkedIn网站以及为我们的成员提供这些体验的所有服务，包括消息传递、订阅源、您在网站上收到的通知等..这是我们称之为旗舰工程的一部分。当然还有视频。视频是生态系统的另一部分。我谈论这个是因为这是我工作的团队。</p>
<p class="translated"><strong>您能描述一下这个团队通常的代码审查流程吗？</strong></p>
<p class="translated">通常，一个开发人员，比如说我，正在开发一个特性，这个特性要求我对一个特定的服务或者代码库的一个特定部分进行修改。比方说，我想在Android应用程序中进行更改；我继续前进，编写测试，编写满足这些测试的更改，以确保我所做的更改经过了良好的测试。然后我创建一个代码审查提交。我们使用一种叫做审查板的工具。我们还有一个小的命令行工具，可以让我们从本地git存储库Git workspace创建代码审查。</p>
<p class="translated">这创建了一个评审委员会票，同时也通知了那些负责维护我正在更改的代码库的特定部分的人。这些作者然后查看评审委员会，查看代码变更，并可能提供建议。这可能在单次迭代中发生。假设我得到了完美的一切，它看起来很棒，代码库的维护者看着它说，“看起来很棒，非常感谢”，然后他们会签字认可它对代码库的贡献。</p>
<p class="translated">然后，我将使用另一个命令行工具来提交变更。它通过了一系列自动化测试，然后被提交到代码库，并为我们的持续部署管道做好了准备，以构建它并使其可部署到我们Android应用的下一个版本。</p>
<p class="translated">你能告诉我们更多关于LinkedIn的准则审查流程及其好处吗？</p>
<p class="translated">代码审查曾经意味着一个非常正式的过程，在这个过程中，一组工程师会聚在一个会议室里，一行一行地检查提出的整个代码更改，并深入研究实现细节。你必须让每个人都看到相同的代码库并获得反馈——这需要大量的时间投入。</p>
<p class="translated">最近，一个更加异步的过程被开发出来，在这个过程中，人们审查和阅读代码，但是他们不一定在同一个房间里一起做。他们通常利用自己的时间做这件事。</p>
<p class="translated">这通常是通过一个工具来实现的，比如Review Board，或者GitHub pull request过程，在这个过程中，一个工程师想要做出贡献，创建一个pull request，然后项目的维护人员使用pull request作为一种方式来讨论代码，以及在代码可以被合并到服务的主要分支之前，贡献者需要做哪些更改。</p>
<p class="translated"><strong>对于现代代码评审过程，拉请求是原子单元还是触发它的东西？</strong></p>
<p class="translated">是啊。有人想对项目的服务或库进行更改，这是一种在贡献进入主开发人员分支之前获得更多关注的方式。</p>
<p class="translated">对于贡献者来说，这是一种从真正熟悉代码库并有代码经验的人那里获得输入的方式，他们知道哪些模式在代码库中工作良好，哪些模式需要避免。</p>
<p class="translated">对于代码的维护者——对项目的长期健康负责的人——这是他们跟踪项目中发生的所有不同变化的一种方式，也是他们知道正在发生什么、哪里可能会出现问题或者哪里工作得非常好的一种方式。</p>
<p class="translated">比方说，对于一个中立的观察者，一个试图找出如何对代码做出贡献或了解代码库的人，这是一个观察交互的机会，了解代码是如何改变的，以了解哪些模式工作良好，哪些模式不受代码库支持。大致了解一下应该向谁提交可以接受的稿件。</p>
<p class="translated"><strong>代码评审关注的是什么？</strong></p>
<p class="translated">这是个有趣的问题。微软曾做过一项调查研究，开发者被问到，“你认为代码审查的目的是什么？”而开发商给出了几个理由。第一个是发现代码中的缺陷。他们也有一个类似的问题要问工程经理，他们一致认为在代码中发现缺陷是代码审查的主要原因。</p>
<p class="translated">这可能是历史原因。这就是正式代码检查的目的。</p>
<p class="translated">但是当他们实际查看人们提供的评论类型时，他们并不总是在寻找漏洞。它们更多的是关于代码库的发展，代码库的可维护性，当进行改变时使用什么模式。</p>
<p class="translated">当有人审查代码时，他们从能够理解代码库的角度来看，能够看到这种变化如何适应应用程序的其余部分，并且他们从代码库的长期维护和发展的角度来看，而不仅仅是他们的缺陷。</p>
<p class="translated">对于个人来说，代码评审是学习最佳实践的好方法，对于高级程序员来说，代码评审是分享代码库中什么是好实践的好方法的好方法，这将使支持向前发展变得非常容易。</p>
<p class="translated">维护代码库的人熟悉那些实践，并且理解它们是如何工作的；这就是为什么你想让他们参与进来。</p>
<p class="translated">它还使不熟悉代码库的其他人能够开始做出贡献并改进代码，因为他们实际上在学习如何以健康的方式保持代码库的同时进行了更改并添加了新功能。</p>
<p class="translated">这又回到了微软的另一项研究，该研究发现，有许多贡献很小的贡献者的代码更有可能存在缺陷。</p>
<p class="translated">仅仅是因为有更多的人做出了贡献，而把这些联系在一起的连贯性却减少了？</p>
<p class="translated">他们没有真正解释原因。这个想法是，“是的，那些偶尔做出贡献的人不熟悉工作模式，或者可能不熟悉他们需要做的某些事情，以确保变更安全。”你想让更有经验的工程师给他们关于改变的反馈，以帮助识别潜在的问题。</p>
<p class="translated"><strong>在你想将新特性推向市场的速度和这个代码审查过程之间有自然的紧张关系吗？</strong></p>
<p class="translated">代码审查肯定需要一些时间。在已发表的实证研究中，大约一个小时后你会收到对你提交的代码评审的第一个反馈。大多数贡献在一天内得到反馈。大约一天后，有人会说“是的”，然后签字说，“这个贡献是好的。”大多数的改变需要几天时间。</p>
<p class="translated">有些变更需要花更长的时间来评审，这取决于代码变更的大小，贡献者对代码变更的熟悉程度。</p>
<p class="translated">在LinkedIn，我们自己的研究发现，我们有类似的时间安排，所以大约一天的时间来签署一项更改并将其提交给代码库。</p>
<p class="translated">很难说将这个特性提供给成员的总贡献是什么，因为您需要考虑如果没有代码审查过程，会有什么样的权衡。您可能需要建立一个流程来发现潜在的问题，或者实现代码库的长期健康和维护。</p>
<p class="translated">你能举一个你在代码评审过程中学到的东西的例子吗？</p>
<p class="translated">作为评论者和贡献者，我学到了很多东西。但最近我一直是贡献者，所以我会特别指出一个。我相对来说是Android开发的新手。我已经做了很长时间的Java开发人员，但是Android对我来说是一个新的平台。</p>
<p class="translated">去年的某个时候，我正在开发一个小功能…嗯，对于一个Android专家来说，这可能是一个小功能。对我来说，这看起来像是一项巨大的任务，我需要监控设备的电池健康状况，然后修改Android设备上的视频播放。</p>
<p class="translated">当我第一次做出改变时，我得到了Android资深评审人员的反馈，他们为我指出了一种方法，使这种改变可以在Android应用程序的其他组件中重用，而不仅仅是视频组件。</p>
<p class="translated">他们还指出，需要将它转移到一个单独的库中，以便我可以更快地实现更改，更好地进行测试，然后将它集成到主要的旗舰应用程序中，以便可以在LinkedIn的许多其他使用Android构建系统的应用程序中重用。</p>
<p class="translated">尽管我不是Android方面的专家，但我能够以一种专家的方式做出这种改变，并且更好地理解操作系统，如果他们自己做一个，他们也会做出贡献。</p>
<p class="translated">它向我展示了代码审查过程中这种倍增力量的力量，在这种情况下，专家可以帮助其他人做出真正伟大的改变，这种改变是可以利用的，如果他们试图自己做，他们可能不会得出相同的答案。</p>
<p class="translated"><strong>结对编程的代码评审过程是如何工作的？</strong></p>
<p class="translated">结对编程是另一种集体代码所有权技术，有时被较小的团队用来做类似的事情。我认为这些相互作用。当团队相对较小时，你确实有一个连续的结对编程实践，这很像一个代码审查过程，但它是在你写代码时实时发生的。</p>
<p class="translated">当你的团队变得越来越大，例如，变得地理上分散，你可能没有能力总是匹配所有的变化。这可能是开始引入代码审查过程的好时机。</p>
<p class="translated"><strong>如果我想成为一名代码评审员，我不需要在特定的代码库方面有专业知识，只要我熟悉……</strong></p>
<p class="translated">你肯定希望一些熟悉代码库的人成为代码评审员。</p>
<p class="translated">但是如果你还不是专家，你不应该拒绝参与。这是一种很好的学习方式。在几次代码评审之后，你会对代码库非常熟悉，并且当你对代码评审给出反馈时，你的贡献会非常好。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>