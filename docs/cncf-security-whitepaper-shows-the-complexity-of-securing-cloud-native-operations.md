# CNCF 安全白皮书展示了保护云原生操作的复杂性

> 原文：<https://thenewstack.io/cncf-security-whitepaper-shows-the-complexity-of-securing-cloud-native-operations/>

11 月，[云原生计算基金会](https://www.cncf.io/)发布了一份关注云原生应用安全性的[白皮书](https://github.com/cncf/sig-security/blob/master/security-whitepaper/CNCF_cloud-native-security-whitepaper-Nov2020.pdf)。它的范围很大，涵盖了从云原生层到开发的整个生命周期，再到合规性(以及两者之间的一切)。本白皮书不仅应该作为所有云原生开发人员和管理员(以及雇佣他们的公司)的指路明灯，还应该作为围绕云原生的安全复杂性的警告。

为什么？

因为在云中进行开发和管理会带来几层复杂性，这在使用标准应用程序时是看不到的。参与云和公司之间关系的每个人都会受到影响。

让我们从管理员的角度深入研究这份白皮书，并强调一些更重要的内容。所以戴上你的管理员帽子，我们走吧。

## 是什么让云原生如此复杂？

CNCF 白皮书一开始就讨论了云原生操作的复杂性。任何在这个领域发展的人都不会不同意他们的评估。本文提出的第一点是关注快速部署和开发，以及传统的“基于边界的安全性”的不可行性

对于许多来自传统背景的开发人员来说，这是一个大问题，如果他们假设保护传统应用程序的方法适用的话。

他们没有。

事实上，正如 CNCF 明确指出的:

“这种复杂性要求通过从基于边界的方法迁移到安全性更接近基于属性和元数据识别的动态工作负载的方法来保护应用程序。”

对于云原生应用，工作负载是关键。考虑到云原生的主要优势之一是能够随意扩展，应用程序的工作负载占据了中心位置。开发人员知道这一点，所以他们几乎只关注这个功能。当扩展需求优先于安全需求时，这些部署的应用程序就面临着妥协的风险。为了满足规模需求，同时解决不断变化的应用程序的关键安全需求，范式转换是必要的。

为此，CNCF 指出，云原生开发必须建模为四个不同的生命周期阶段:开发、分发、部署和运行时。让我们来看看这些阶段。

## 发展

对于云原生开发，应该在应用程序生命周期的早期引入安全性，并且安全性测试应该立即识别合规违规和错误配置。通过这样做，有可能创建短的和可操作的反馈周期，这为持续改进打开了大门，以便在将软件从一个阶段移动到下一个阶段之前，以解决所有其他工作流的相同方式解决安全故障。

CNCF 还明确表示，现代云原生开发的安全生命周期必须围绕遵循推荐设计模式的代码，例如 [12 因子应用](https://12factor.net/)，它将开发分为以下几点:

1.  **代码库**:一个代码库在多次部署的版本代码中被跟踪。
2.  **依赖**:明确声明和隔离。
3.  **Config** :配置存储在环境中。
4.  **后台服务**:被视为附属资源。
5.  **构建、发布、运行**:这三个阶段是严格分开的。
6.  **进程**:应用作为一个或多个无状态进程执行。
7.  **端口绑定**:通过端口绑定导出服务。
8.  **并发**:应用程序通过流程模型向外扩展。
9.  **一次性**:快速启动和优雅关闭。
10.  开发/生产对等:开发、试运行和生产应该尽可能保持相似。
11.  **日志**:应被视为事件流。
12.  **管理进程:**管理任务应该作为一次性进程运行。

通过使用推荐的设计模式，您可以确保工作负载的完整性。由于云原生开发以代码形式绑定到基础架构，此类实践旨在确保所有控制按预期运行，并包括早期安全检查集成，以识别错误配置并实施最佳实践。

## 分配

软件供应链是生命周期中最重要的方面之一。为什么？因为在云原生开发的世界中，迭代比在标准开发中要快得多。在处理 CI/CD 时尤其如此。对于云原生，您需要包括验证工作负载完整性的方法、工作负载创建流程和操作方式。由于使用开源软件和第三方运行时映像，这变得更加复杂。

请记住，您正在部署依赖于图像的容器。这些图像可能是链条中最薄弱的一环，因为您的开发人员可能已经下载了包含恶意软件的图像。这些映像需要不断地扫描漏洞、恶意软件和不安全的编码实践，否则从这些映像构建的云原生应用程序将面临您的网络(以及其中包含的数据)遭受攻击的风险。

## 部署

您的云原生应用程序的部署需要伴随着候选工作负载属性的实时验证。您必须确保:

*   签名的工件被验证。
*   容器映像遵守安全策略。
*   可以验证宿主适应性。

云原生应用的另一个关键方面是能够部署安全的工作负载可观察性功能，允许以非常高的信任度监控日志和指标。如此高水平的透明可观察性，将有助于补充您的云原生应用程序已经集成的安全性。

将可观察性视为一种新的监控类型，专门针对云原生部署，基于三大支柱构建:

*   **指标:**当您遇到问题时向您展示
*   **追踪:**指出问题所在
*   **日志:**帮你找到问题的根源。

## 运行时间

最后，我们有运行时。您的云原生环境需要提供严格的策略执行和资源限制功能。对于云原生应用程序，您有运行时资源约束，如 Linux 内核 cgroupension，它限制、隔离和测量一组进程的资源使用。群组隔离是限制性/可观察性原语的一个例子，必须集成到云原生应用生命周期的更高级别中。

在云本地应用程序中，一个关键的高级组件是运行时。不要将此运行时与运行时环境混淆。这是关于在应用程序运行时执行的软件和指令的运行时间。很多时候，运行时会包含您没有明确编写、而是由第三方编程的指令。因此，采用最佳实践来保护所有这些相互关联的组件非常重要，例如:

*   只有被批准的进程才允许在容器名称空间中操作。
*   您可以防止未经授权的资源访问。
*   网络监控用于检测恶意工具活动。

## 结论

云原生应用的安全性必须始终应用于这些组件中的每一个，以确保在整个生命周期中应用相同的条件、勤勉、完整性、信任和威胁预防。因为云原生开发比传统开发复杂得多，所以每一层都必须着眼于防止未经授权的访问。您的组织、管理员和开发人员必须采用特定的方法来转变安全性并重新重视开发运维，以便您可以在开发、分发、部署和运行时的整个生命周期中确保云原生应用的安全性。

约翰·巴克利在 [Unsplash](https://unsplash.com/s/photos/complexity?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的特写图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>