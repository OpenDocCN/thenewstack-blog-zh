# CN-NOS:云原生网络操作系统

> 原文：<https://thenewstack.io/cn-nos-a-cloud-native-network-operating-system/>

如果网络运营像 DevOps 一样敏捷，并且可以轻松使用 [CI/CD 方法](https://thenewstack.io/ci-cd-for-networking-adopting-devops-principles-for-a-more-robust-network/)会怎样？

[亚当·卡塞拉](https://www.linkedin.com/in/adam-casella/)和[格伦·沙利文](https://www.linkedin.com/in/glenn-sullivan/)，苹果数据中心的前网络工程师，负责驱动 iCloud、iTunes 和其他面向客户的应用，已经接受了这一挑战。他们公司 [SnapRoute](https://www.snaproute.com/) 发布了云原生网络操作系统(CN-NOS)。

它基于容器化的微服务架构构建，可提供增强的网络灵活性，并将网络原生集成到 DevOps 环境中。

Sullivan 解释说，传统供应商销售的网络设备(硬件和软件)是一个无法分离的整体。与服务器领域一样，现在有一种分散网络或白盒网络的趋势，它允许用户在硬件之上编写自己的软件。

虽然其他人现在正在编写网络软件，但它更多的是对传统供应商提供的东西的重新想象。

“没有人从运营商的角度真正做到过，”沙利文说。

超大规模公司——谷歌、微软、脸书——可以编写自己的路由堆栈和协议，因为他们有成千上万的开发人员来处理别人没有的规模问题。

“[别人]自己不会造网络软件。因此，我们正在构建一个网络操作系统，它内置了所有这些云原生的优点，因此他们可以原生地使用一些云原生工具，如 Kubernetes，”他说。

他称之为与其他操作系统一样的操作系统，但是内置了对云原生工具的原生支持。

“我们使用 Docker 容器将操作系统完全容器化，创建了一个微服务系统。其他的系统将会是巨大的斑点。它内置了所有的功能。你可以打开和关闭功能，但你得到了整个厨房水槽。它是守护进程化的——你可以启动和停止守护进程之类的东西……但它没有给你一种机制来取出网络操作系统的各个部分并对它们进行升级，”他说。

## API 驱动的

CN-OS 是 API 驱动的，CLI 是一个可以利用 API 的应用程序。这使得能够集成

开发运维工具、内部工具或定制应用。有三个主要的集成点:

*   Rest API 层(Kubernetes API)
*   不需要网络工程师学习 Kubernetes 的 CLI 界面
*   遥测流层

它建立在面向嵌入式系统的精简版 Linux 上。Yocto Linux Base 处理容器的安装、启动和运行。

“我们有点置身于 Debian 与 Red Hat 的宗教讨论之外，”Sullivan 说。

“网络设备的问题是它们有非常专业的硬件。它们不像服务器那样通用。网络设备的硬件允许它们以线速转发数据包。…它是专门的硬件，在初始化和运行方面受到非常严格的控制。…你不能从货架上取下一个版本的 Linux，然后让它工作。你真的需要一个网络操作系统来理解硬件，将它抽象出来，并为你提供一个管理硬件的接口。”

他说，这不仅仅是另一个带有一堆接口的 Linux 服务器。

“网络设备很特殊，因为它们下游有很多东西。…[如果你想更新某个东西]，你不能这样做，因为你会关闭所有连接到它的下游设备。你必须区别对待网络，因为模型和范例影响的不仅仅是你所使用的设备。

“我们没有单独的插件来管理设备，以使用云原生工具。…您可以直接使用 Kubernetes 语言。…我们已将所有 API 改编为行业标准的 Kubernetes，以便使用 Kubernetes 直接控制网络。”

在 Yocto 基础之上，还有基础设施资源控制器，比如数据平面抽象(ASICRC)、接口资源控制器和邻接管理器。主机控制器和进程管理器资源控制器处理服务的依赖性管理和安装，并确保服务和系统之间的一致性。平台资源控制器管理交换机上硬件的系统外围设备的发现、监控和管理。

L2/L3 协议和相关的控制平面资源控制器是容器化的。CN-NOS 使用 MetaSwitch L3 协议套件，但它被分成多个可以独立管理的 Kubernetes 本地控制器。基础设施和 L2 功能也作为 Kubernetes 控制器在内部构建。

运行在 CN-NOS 上的容器化服务是可移植的，可以独立地更新、测试和替换。使用 Helm 和 CI/CD 测试管道等工具和流程，运营商可以在部署前验证变更，并根据需要回滚变更。

[Packet](https://www.packet.com/) 的首席技术官 [Ihab Tarazi](https://www.packet.com/about/team/ihab-tarazi/) 说:“我们相信网络分解和赋予开发者权力对于我们的‘新企业’客户来说至关重要。“SnapRoute 的 CN-NOS 采用完全云原生架构，为我们扩展到数百个位置时所需的基础架构提供了真正开放、开发运维驱动的产品开发方法。”

## 提高灵活性、安全性

该公司认为 CN-NOS 将通过使运营商能够:

*   实时添加和升级功能和修复程序，无需停机，无需安排维护窗口。
*   删除而不仅仅是禁用未使用的服务，以减少网络操作系统的安全暴露和威胁面。
*   通过实时修复易受攻击的服务，确保随时合规。

[https://www.youtube.com/embed/B1r00RhL0x4?feature=oembed](https://www.youtube.com/embed/B1r00RhL0x4?feature=oembed)

视频

沙利文说，几十年来，网络运营商一直处于类似脸书决定所有 Whatsapp 用户都必须使用 Facebook Messenger 的情况，或者类似于一部新手机拥有所有功能的情况，不管你是否想要它们。

做出改变的难度意味着网络人员获得了对任何可能影响正常运行时间的事情说不的名声——他说，这是评判他们的唯一标准——而不是新功能部署的速度。

“我们说，因为网络操作系统被分成了这些更小的部分，而且你知道每次部署时你会得到什么，所以你可以采取这些渐进的步骤，建立敏捷部署的肌肉，就像你在计算方面一样，”他说。

他说，例如，DevOps 可以快速解决漏洞，但在网络方面，你必须从供应商那里获得新版本，它是一个包含整个厨房水槽的 blob，所以你必须花时间测试每一个功能，然后你可能必须重新开始，因为发现了新的漏洞。它不会让你快速移动。

“我们是说，你拿着这一块，建立起做小改变的肌肉。你做 CI/CD 是为了建立关系网，”他说。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>