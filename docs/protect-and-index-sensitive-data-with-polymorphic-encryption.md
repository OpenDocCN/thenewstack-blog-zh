# 使用多态加密保护和索引敏感数据

> 原文：<https://thenewstack.io/protect-and-index-sensitive-data-with-polymorphic-encryption/>

[](https://www.linkedin.com/in/toanshu)

 [安舒·夏尔马

安舒·夏尔马是 Skyflow 的联合创始人兼首席执行官，这是一个数据隐私保险库，允许 B2C 公司保护敏感的客户数据。](https://www.linkedin.com/in/toanshu) [](https://www.linkedin.com/in/toanshu)

如果您可以对保持安全加密的数据运行实时查询，会怎么样？乍一看，这似乎很荒谬——用加密数据做任何事情通常都很麻烦、耗费资源而且速度很慢。但是对敏感数据的实时查询不仅仅是可能的，它们非常实用，尤其是在处理敏感的个人数据时(PII)。关键是多态加密，它应该是任何现代数据隐私堆栈的一部分。

在本文中，我将讨论多态加密为开发人员提供了什么，以及它如何平衡使用数据的需求和保护数据的需求。为了理解多态加密，我们应该从同态加密开始，它也旨在解决数据安全性和数据可用性。

## 同态加密:一个有缺陷的理想？

同态加密被广泛认为是加密的“黄金标准”,因为它支持对加密数据的任意操作，而无需首先解密。其思想是对两个加密值执行操作(如乘法和加法)以获得加密结果。然后，您可以将结果解密为与对纯文本值执行该操作时获得的值相同的值。

使用最广泛的同态加密方案，可以重复执行更广泛的操作。从表面上看，这似乎让你既能保护敏感数据，又能使用它。

但是，同态加密存在一些问题。看看这些问题，就能明白为什么同态加密没有得到更广泛的应用。虽然它经常被称为“金本位”，但它有一些实际的缺点——就像货币金本位在经济学中有实际的缺点一样。

> 使用多态加密，数据以多种形式加密，使用多个密钥，使用与每个加密集相关联的数据的特定功能。

同态的一个问题是，对于大多数公司来说，它需要太多的计算能力。完全同态加密所需的计算资源意味着，即使拥有巨大的计算能力，依赖它的用户体验也慢得令人难以置信。有多慢？慢到大多数公司会因为延迟问题而避免使用它。微软甚至在他们的同态加密库文档中提到[同态加密效率不高](https://docs.microsoft.com/en-us/azure/architecture/solution-ideas/articles/homomorphic-encryption-seal)。这种性能问题使得同态加密对于大多数商业应用程序来说是不可行的。

那么为什么同态会有这些性能挑战呢？这是因为同态加密是一种理想的表达——能够在加密数据上运行几乎任何操作——这与大多数开发人员的实际需求是脱节的。开发人员经常面临的实际需求是对敏感数据运行一些众所周知的操作。您真正需要支持在敏感数据上运行大范围计算的频率有多高？此外，为什么您的加密方案在支持这些不必要的操作方面表现不佳？

例如，您可能需要通过对客户的加密电话号码运行匹配操作、检查国家代码或区号来确定客户的位置。但是，我想不出一个好的理由来对客户的电话号码进行乘法或加法运算。那么，为什么要忍受缓慢的性能来支持这个操作呢？

同态加密的真正问题在于它的目标:在加密数据上运行广泛的操作，同时选择加密后支持哪些操作。

## 多态加密与同态加密的比较

同态加密从同态的数学思想中借用了它的第一个术语，同态是指将一个数学对象映射到另一个，同时保留第一个对象的结构。使用同态加密，只创建一组加密数据，并且只使用一个密钥来解密数据。这是强大的，但不灵活和计算缓慢。

多态加密得名于计算机科学中的多态概念，即一个接口或符号代表许多数据类型。使用多态加密，数据以多种形式加密，使用多个密钥，使用与每个加密集相关联的数据的特定功能。这同样强大，但是更加灵活、安全，并且计算速度更快。

因此，虽然它在某些方面与同态加密相似，但与多态加密还是有一些重要的区别:

*   **对部分数据的操作:**有时，您不需要对整个记录执行操作，只需要对其中的一部分执行操作，比如当您仅使用电话号码的区号来确定客户的位置时。当您考虑到许多数字实际上是由多个标识符组成的数据结构，而不是需要加减的整数时，支持对部分记录的操作是有意义的。例如，电话号码由国家代码、区号和本地代码组成。它可能通常存储为整数，但它实际上是一种数据结构。对部分数据的操作不需要完全的数据访问，因为您只需要一个区域代码投影来比较区域代码。多态加密通过在只需要部分数据时不对全部记录进行解密，增强了数据的隐私性和安全性。
*   **对选定操作的高性能支持:**因为多态只支持加密前你知道你需要的操作，所以它提供了比同态加密好得多的性能。

## 多态加密正在运行

企业如何使用多态加密的几个示例有助于说明如何管理保护数据的需求和使用数据的需求之间的棘手冲突:

*   **身份验证:**假设一个客户服务代理(CSA)需要使用 SSN 的最后四位数字来确认身份。通过多态加密，他们可以向客户询问他们的最后四个 SSN 数字，并实时确认他们的身份，而无需解密客户社会安全号码列表(甚至完整的 SSN)。对于同态加密，他们将需要等待太长时间来实现这种精确匹配操作。在没有数据保护或加密的系统中，CsA 可以访问完整的 SSN，发生数据泄露只是时间问题。
*   **信用检查:**想象一个银行家审查客户的信用评分以批准贷款。他们不需要完整的信用评分，只需要知道它是高于还是低于给定的阈值。通过多态加密，他们可以确定客户的分数是否满足给定贷款的要求，而无需查看。他们所看到的只是对信用评分是否达到或超过贷款要求的“是”或“否”的回答。

在这两种情况下，多态加密让您无需解密数据即可支持业务工作流。您没有从 SSN 或信用评分表中解密整个字段，更不用说为所有客户获取这些值了。

从数据安全的角度来看，这很好，因为除了数据泄露之外，任何首席信息安全官最不希望的事情就是员工解密比他们需要的更多的数据并将其缓存在本地，因为这是完成工作阻力最小的途径。

## 结论

平衡数据隐私和数据可用性的需求要求我们采取新的方法来存储和加密数据，并承认不支持关键工作流的数据安全性不是真正强大的安全性。

多态加密提供了同态加密所承诺的东西，因为它的范围是业务工作流对敏感数据的实际需求。它提供了一个性能更好的解决方案，因为它不支持对最敏感的加密数据进行不必要的操作。相反，它支持和保护关键业务工作流所需的操作，如部分记录的比较和精确匹配。

注意:*本文讨论多态数据加密。多态数据加密不同于多态密钥加密，在多态密钥加密中，加密密钥是循环的，但是除非完全解密，否则数据是不可用的。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>