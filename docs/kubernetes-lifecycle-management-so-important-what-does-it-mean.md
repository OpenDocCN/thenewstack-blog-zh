# Kubernetes 生命周期管理！如此重要！(什么意思？)

> 原文：<https://thenewstack.io/kubernetes-lifecycle-management-so-important-what-does-it-mean/>

[](https://www.linkedin.com/in/tinanolte/)

 [蒂娜·诺尔特

蒂娜·诺尔特是 Spectro Cloud 的产品副总裁。近十年来，她一直在专注于云基础架构和机架级架构的初创公司以及更成熟的基础架构公司从事云原生和横向扩展技术方面的工作。她拥有麻省理工学院分布式计算博士学位，喜欢阅读科幻小说和建造大型乐高星球大战套件。](https://www.linkedin.com/in/tinanolte/) [](https://www.linkedin.com/in/tinanolte/)

我总是看到它。

想象一下。有一个与 Kubernetes 用户和 Kubernetes 供应商的 Zoom 通话。在某个时候，话题转到如何管理用户的 Kubernetes 部署。

最终，有人会抛出“生命周期管理”这个术语。每个人都会点头同意这是非常重要的。不知何故，大多数对话都没有深入到“Kubernetes 生命周期管理”的确切含义。

如果你问某人关于 IT 产品的生命周期管理，你往往会听到第 0 天、第 1 天和第 2 天。第 0 天大致是“设计”阶段，在这一阶段，您确定将部署什么。第一天是“部署”阶段，或者说是产品在您的环境中投入使用的第一天。第二天是“操作”阶段；更准确的说法是“第二天以上”，但是我跑题了。

这在 Kubernetes 生命周期管理的上下文中意味着什么？让我们按天分解一下:

## 第 0 天'设计'

在这个阶段，您需要回答一些关键问题，比如您将使用哪个 Kubernetes 平台以及它将存在的环境。如果集群是针对一个非常具体的用例，您甚至可以考虑特定应用程序的细节。

在此阶段，您需要问自己的关键问题是:

*   您需要什么样的集成，从上到下？操作系统、存储、网络、负载平衡器、安全性、日志记录、监控…
*   您将在基础架构本身中进行多少安全投资？安全性是一个多层次的问题，但是在基础架构本身中，您会使用安全加固的操作系统吗？您将如何配置您的网络安全和入口策略？
*   您将如何执行集成？需要编写和维护脚本吗？您是否将一些集成工作让给了服务提供商？您选择的 Kubernetes 平台会对您的集成有所帮助吗？
*   您的平台将如何与贵组织目前使用的 GitOps 或 CI/CD 工具链集成？
*   如果您需要为您的一些集群引入一套不同的技术，需要做多少工作？在快速开发新项目来帮助您完成任务的环境中，保持您的选择余地可以帮助您加快新项目的部署时间。

## 第一天'部署'

在您制定好所有计划后，部署是下一个需要处理的阶段。你会看到你的计划付诸实施。

*   在这一阶段要做好的关键事情是:
*   明确你的多云和多集群策略是什么，并确保你正在设法支持它。您的需求不可避免地会发生变化，但是拥有一份路线图有助于确保您今天的投资能够延续到明天。对于集群的规模，有什么样的策略？新的需要什么时候开始？您目前是在一个云中还是在多个云中？这种情况会改变吗？您需要确保无论您的策略如何发展，您的部署方式都能保持一致。
*   配置并部署到您的各种环境中—私有云、公共云、edge 或裸机。不同的环境有不同的堆栈，并且对基础架构组件的管理有非常不同的需求。例如，您需要一个计划来管理边缘或裸机环境中的操作系统层。在每种情况下，关键是您要用一种可以跨越不同环境的方法进行部署。在操作上，一致性和熟悉性有助于保持事情的可控性。
*   设置云帐户和设置。每个部署环境都有自己需要管理的帐户。存储和利用这些凭据的方式是什么？您和您的供应商如何保护您的秘密，从而限制妥协的影响？
*   如果您在公共云上，请设置您的首选项以利用现场或保留实例。你要确保你明白你的选择如何影响你的预算，并确保你有适当的系统来控制开支。

## 第二天'操作'

许多人在 Kubernetes 之旅的早期关注第 0 天和第 1 天，但没有足够的时间来思考第 2 天的问题。第 2 天的重点是部署好一切后会发生什么—您如何维护您的基础架构？机载新用户？确保应用程序的健康？第 2 天的内容是让系统长期保持运行和健康。

此阶段需要考虑的关键事项有:

*   您使用的解决方案如何支持您的治理需求？Kubernetes 速度快，这也是其吸引力的一部分。这并不意味着它不安全。你应该问问 RBAC 在你的新环境中是如何工作的。您是否能够集中整个组织的策略，并保证调配的群集符合您组织的最佳实践？IAM 和认证怎么样？可以跨名称空间管理策略吗？
*   该解决方案提供了什么样的 SLA？你知道你的支持度是多少，如何获得支持吗？支持级别是否符合您的需求？如果您在生产中有应用程序，那么您需要了解您的 SLA 级别。
*   您将如何提供跨部署的可见性？大多数组织发现，能够从一个位置查看他们的部署非常有用。您选择的任何解决方案都应该能够让您轻松做到这一点。
*   您能够跟踪利用率吗？你有适当的限制吗？不幸的是，云原生工作负载的动态性使得成本难以预测。确保您有一个了解您的利用率和成本的计划。跟踪应该足够细致，以便您能够根据数据做出可操作的决策。你还应该能够使用配额和限额来防止自己感到惊讶。
*   您计划如何监控您的解决方案？您的集群应该有可用的监控，这样您就可以快速获得所需的信息，并对可用性的变化做出响应。
    升级如何在您的解决方案中发挥作用？技术不会停滞不前；您部署的内容需要升级。您的产品升级策略是什么？多长时间升级一次？他们是如何被排挤出去的？遇到问题会怎么样；回滚可能吗？它们将如何影响您的应用程序工作负载？
*   当您的应用程序需要更多资源时，扩展是如何工作的？您的解决方案会自动管理扩展吗？帮助您做出手动扩展决策？
*   你的安全相关程序是什么？除了技术，安全还需要清晰的流程和沟通计划。这些需要定期重新审视。
*   随着时间的推移，什么将帮助您确保部署的一致性？配置漂移会随着时间的推移而发生，但会给维护和故障排除带来困难。您如何确保您部署的集群和相关基础设施看起来符合您的预期？
*   您的备份和恢复计划是什么？有时候，事情就这么发生了。如果最坏的情况发生，你打算如何做好准备？

## 结论

在考虑 Kubernetes 部署的生命周期管理时，这个关键问题和需要记住的事情的旋风之旅只是一个开始，但希望能给你一些思考的东西。在 Spectro Cloud，我们从头开始设计了一个系统来帮助人们度过每个阶段，从第 0 天到第 2 天。Spectro Cloud 的集群配置文件概念提供了一种简单的方法来设计、部署和操作整个 Kubernetes 堆栈，而整个系统是以企业为中心设计的。

想谈谈这些问题吗？建议其他你最喜欢的？给我们写封短信。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>