# 2019 年指南:关于虚拟机和 Kubernetes 需要考虑什么

> 原文：<https://thenewstack.io/guide-for-2019-what-to-consider-about-vms-and-kubernetes/>

[](https://www.openshift.com/)

 [乔·费尔南德斯

乔·费尔南德斯是 Red Hat 的产品、云平台副总裁，包括 OpenShift 容器平台、OpenStack 和虚拟化。在加入 Red Hat 之前，Joe 是 Oracle 应用质量管理解决方案的产品管理总监，并在被 Oracle 收购之前担任 Empirix 网络业务部门的产品管理和营销总监。Joe 在过去的 15 年中帮助客户构建、测试和管理企业应用程序。他拥有伍斯特理工学院的电气和计算机工程学士学位和波士顿学院的 MBA 学位。](https://www.openshift.com/) [](https://www.openshift.com/)

在 2019 年 Kubernetes 社区的[路标](https://blog.openshift.com/kubernetes-guideposts-for-2019/)摘要中，讨论了 [Kubernetes 和虚拟机](https://thenewstack.io/kubernetes-and-the-return-of-the-virtual-machines/)回归的话题。虚拟机并没有取代容器，相反，虚拟机的使用在 Kubernetes 堆栈的多个层中不断发展。

近年来，容器已经成为云原生应用架构的代名词。他们重新定义了我们打包、分发、部署和管理应用程序的方式。但是，正如我们今天所知，容器本身是现有 Linux 技术的重新出现，以一种新的、更有用的方式结合在一起。虽然许多组织正在将基于虚拟机的应用程序迁移到容器中，但虚拟化仍然普遍存在于数据中心和公共云中。我们还看到虚拟化技术以新的方式与容器和 Kubernetes 结合在一起，为新的问题集提供了创新的解决方案。换句话说，虚拟机也正在成为云原生架构的一部分，这就是容器原生虚拟化。

Kubernetes 的基础仍然是 Linux 容器的编排和管理，以创建一个强大的分布式系统，用于在混合云环境中部署应用程序。Kubernetes 通常运行在基于虚拟机的基础设施之上，通常，基于虚拟机的工作负载仍然是 IT 组合的一大部分。进入 2019 年，Kubernetes 和虚拟化的交叉领域有三个关键趋势，我们将进一步研究每个趋势:

1.  Kubernetes 协调微虚拟机，为不受信任的工作负载提供更严格的多租户隔离。
2.  Kubernetes 协调和管理传统的基于虚拟机的工作负载(通过 KubeVirt)以及基于容器的工作负载。
3.  Kubernetes 集群越来越多地部署在裸机服务器上，作为基于虚拟机的环境中 Kubernetes 的替代方案。

这些都不是一个新的想法，但在 2019 年，我们希望看到这些趋势背后的势头得到巩固。每一项独立的功能都是有用的，但是它们一起展示了 Kubernetes 是如何继续发展并应用到过去、现在和未来更广泛的应用程序中的。

## Kubernetes 编排微型虚拟机

采用 Kubernetes 和容器时的一个核心考虑是安全性，以及如何确保容器在多租户环境中安全运行。容器作为独立的进程在共享的 Linux 主机上运行，并且您经常在由多个主机组成的 Kubernetes 集群中运行多个容器化的应用程序。从 Linux 主机级到 Kubernetes 集群级，容器安全性有多个层次，可以保护这些应用程序不被利用。这些包括 Linux 内核级功能，如 cGroups、namespaces、seccomp 和 SELinux，它们确保容器不能利用底层 Linux 主机或其他容器。在 Kubernetes 集群级别，基于角色的访问控制(RBAC)、命名空间租户隔离和 pod 安全策略等功能使多个应用程序能够在同一个集群上安全运行。如今，大多数用户都对这些功能提供的安全性充满信心，因此，我们看到在关键生产环境中运行 Kubernetes 的客户数量呈爆炸式增长。

对于一些用户来说，可能希望更强的多租户隔离，无论是因为运行不受信任的工作负载、有更严格的安全要求还是其他原因。这就是基于微虚拟机的方法开始崭露头角的地方，比如[形容器](https://katacontainers.io/)、[鞭炮](https://firecracker-microvm.github.io/)或[陀螺](https://github.com/google/gvisor)。微虚拟机不同于可能在 VMWare、AWS 或其他提供商上运行的传统虚拟机。相反，他们将现有的硬件辅助虚拟化技术(如基于内核的虚拟机(KVM ))重新混合在应用程序容器的上下文中，以提供一个非常轻量级的虚拟机。与传统虚拟化中试图呈现完整的“机器”不同，这种方法侧重于提供足够的虚拟机来成功执行应用程序容器或功能。因此，由于其功能差异和局限性，您不能只使用传统的虚拟机并在基于微虚拟机的容器中运行它。相反，微虚拟机旨在提供相对于标准 Linux 容器的硬隔离，同时最小化传统虚拟机在冷启动时间和性能方面的权衡。

虽然像鞭炮，形和 gVisor 这样的技术已经获得了很多关注，但目前在用户采用方面，这个领域还没有明确的领导者，每种方法都有自己固有的权衡。虽然我们预计 Kubernetes 编排的绝大多数工作负载仍将是标准的应用程序容器，但随着微型虚拟机在 2019 年继续发展，我们将密切关注这一趋势。

## Kubernetes 编排标准虚拟机

Kubernetes 编排引擎为企业生产工作负载提供了一个更具可伸缩性和灵活性的模型。最初，这主要是一个潜台词，即生产工作负载被打包成应用程序容器。但是通过像 KubeVirt 这样的开源项目，我们看到了同样强大的 Kubernetes 编排引擎可以可行地应用于管理通常在云和虚拟化平台上运行的标准虚拟机。

2019 年，我们预计这一趋势将持续下去，并转变为更广泛的思维模式变化。以前在以虚拟机为中心和以容器为中心的基础设施之间的选择将变得毫无意义。Kubernetes 将开始支持容器和虚拟机的混合操作…并且它将在裸机环境中运行。

容器原生虚拟化是一个概念，它使虚拟机能够遵循与 Kubernetes 中基于容器的应用程序相同的工作流。以前，虚拟化堆栈完全独立于 Kubernetes 和云原生实施——独立的工作流、独立的工具、独立的团队等。但随着数字化转型的深入，统一这些不同的技术、流程和团队的需求变得至关重要。通过在 KubeVirt 中使用容器原生虚拟化，企业将能够更有效地集成其应用程序操作，并保留现有的 IT 技能，同时仍然采用基于 Kubernetes 构建的现代基础设施。

## 裸机上的 Kubernetes，没有虚拟机

虽然虚拟机成为 Kubernetes 工作负载组合的一个更大的部分，但我们也看到它们作为 Kubernetes 底层基础架构的一部分变得不太受欢迎。虽然目前大多数 Kubernetes 平台都部署在基于虚拟机的基础设施上，但是容器的运行并不依赖于虚拟机。我们看到在裸机上运行 Kubernetes 和 containers 的兴趣持续增长。

在裸机上运行 Kubernetes 将使应用程序能够充分利用底层硬件，这一点很重要，因为客户将更多对机器和性能敏感的应用程序带到了 Kubernetes。在裸机上运行 Kubernetes 和容器还可以帮助组织减少虚拟机蔓延并简化其操作。

为了避免局限于任何一家提供商或供应商，用户开始关注 Kubernetes，将其作为跨物理、虚拟、私有云和公共云环境运行的应用程序的通用抽象层。我们需要满足用户的需求。这意味着在开放的混合云中提供 Kubernetes，包括内部和金属上。

## 进入 2019 年及以后

虽然 Kubernetes 已经存在了几年，但随着下一个时代的到来，创新将继续加速。Red Hat 于 2014 年首次参与 Kubernetes，作为初始项目启动的一部分，自 2015 年 6 月推出我们的版本 3.0(基于 Kubernetes 1.0)以来，一直以 [Red Hat OpenShift 容器平台](https://www.openshift.com/)的形式提供企业 Kubernetes。随着我们关注 2019 年，我们看到这些趋势在社区生态系统和企业客户中发挥着重要作用。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>