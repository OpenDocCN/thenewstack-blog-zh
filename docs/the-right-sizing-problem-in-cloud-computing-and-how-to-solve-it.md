# 云计算中的正确规模问题，以及如何解决它

> 原文：<https://thenewstack.io/the-right-sizing-problem-in-cloud-computing-and-how-to-solve-it/>

[](https://twitter.com/siruslan)

 [鲁斯兰·Synytsky

鲁斯兰·Synytsky 是 Jelastic PaaS 和 Java Champion 的 CEO 和联合创始人。Jelastic 是一家总部位于加利福尼亚州帕洛阿尔托的公司，为全球的 ISV、MSP 和云托管提供商提供统包式云计算平台。Jelastic 平台即服务的核心技术旨在通过全球独立数据中心提供商的分散网络运行和管理数百万个容器。在创建 Jelastic 之前，Ruslan 是乌克兰国家航天局的主要工程领导之一。目前，Ruslan 专注于开发尖端的云解决方案和相关的商业技术。](https://twitter.com/siruslan) [](https://twitter.com/siruslan)

全世界有很多云服务提供商，找到一个好的不是问题。如今，更大的挑战可能是请求适量的资源，确保它足以处理可变负载，而不会为未使用的资源支付过多费用。因此，这个操作比你第一眼看到的要复杂得多。实际上，由于该过程的复杂性，人们创造了一个专门的术语“合理调整”。

> 规模调整是一个为云计算实例(容器、虚拟机或裸机)预留足够资源(RAM、CPU、存储、网络)的过程，以尽可能低的成本实现足够的性能。

然而，现代技术可以通过自动化资源分配过程及其成本评估来助您一臂之力。因此，您不需要精确地指出限制或预先猜测应该预留多少资源，同时对预期的账单有一个清晰的估计。从历史上看，合适的规模确定过程主要是一种有根据的猜测，很大程度上依赖于开发人员或系统管理员的经验。此外，由于 web 应用程序的动态特性，规模调整通常是一个持续的过程，需要对每个软件堆栈运行时实例进行定期调整。

## 合适的尺寸问题

那么，为什么为您的应用程序选择正确的实例大小非常重要呢？在大多数与业务有关的情况下，答案是钱。云计算资源非常昂贵，因此您显然希望尽可能减少与基础设施相关的支出。但是，如果资源节约导致性能问题甚至停机，那么企业将失去利润。在优化开销和将性能保持在可接受的水平之间进行权衡是规模调整过程要解决的问题。

负载的动态和不可预测性取决于最终用户在您的网站、服务或应用程序上的活动，因此很难找到涵盖所有情况的中庸之道。通常，资源使用估计是基于对最近应用程序活动的监控来完成的，并在此基础上增加一些余量来处理意外的用户涌入和负载高峰。

在初始的规模调整之后，您仍然需要跟踪您的应用程序性能，以确保预测是正确的，并且资源得到有效利用。因此，赤字和大量闲置资源表明云基础架构规模的选择并不理想。

## 技术和业务后果

为什么规模合适的问题如此严峻且难以解决？在大多数情况下，云计算是以虚拟机(VM)的形式交付的，这在[垂直扩展](https://en.wikipedia.org/wiki/Scalability#Vertical_or_scale_up)方面不是很灵活。通常，您需要将工作负载转移到一个全新的虚拟机上，以调整单个实例中的可用资源限制。迁移过程不是自动化的，因此复杂、耗时，甚至会导致停机。因此，您不得不获得一个比您现在真正需要的更大的 VM，以防您的应用程序在不久的将来需要更多的资源。

许多云服务提供商的虚拟机的垂直扩展幅度相当大(每台新机器都比前一台机器大两倍)。定价政策与订购虚拟机的规模直接相关，而不考虑实际消耗，因此[的财务损失](https://www.forbes.com/sites/forbestechcouncil/2018/03/28/deceptive-cloud-efficiency-do-you-really-pay-as-you-use/#3c5cafe76e19)可能会很大。此外，一些云供应商可以向其他客户过度销售您已分配但闲置的资源。如此一来，您为资源付出了代价，却无法避免性能下降。

总而言之，缺乏合适的规模有两个主要后果:

*   过度分配会导致云基础架构利用率低下，并为实际未使用的资源支付过多费用
*   分配不足会导致资源短缺，从而导致托管项目的性能问题甚至停机，并因此导致最终用户体验不佳、错过客户和收入损失

## 合适的解决方案

现在，我们知道了问题的根源及其后果，让我们分析一下如何在过度分配和资源短缺之间找到最佳平衡点。您可能已经从问题描述中了解到，手动调整规模并不是一个万无一失的解决方案。因此，我们将依靠现代云托管提供商提供的工具来自动化这一过程。

为了自动调整项目实例的大小，以下是您应该努力实现的功能:

*   首先，云主机应该能够运行[容器](https://jelastic.com/blog/container-types/)，并进行细粒度的资源分配。资源增加的步长越小越好，因为它允许更精确地选择所需的实例大小。

*   寻找现代的云基础设施，其中未使用的资源被返回到共享池，因此不收费。这种方法(所谓的[按使用付费](https://jelastic.com/pay-per-use/))允许我们设置较高的扩展限制，并处理负载峰值，而不会持续超额支付。

*   自动垂直伸缩(动态调整同一容器中的资源数量)可以帮助您节省大量时间和精力。基于应用需求的动态资源调配是以最佳方式解决规模适当问题的必备功能。

有了满足这些要求的云托管提供商，您只需为您的实例设置最大资源限制，大小合适的“魔术”就会自动完成。因此，在寻找适合您需求的云提供商时，彻底调查市场绝对值得您花费时间。不要犹豫，向您当前的托管服务提供商请求新的技术和业务解决方案，因为克服大小合适问题的功能已经存在，您完全有权利从中受益。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>