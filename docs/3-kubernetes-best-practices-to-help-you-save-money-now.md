# 3 Kubernetes 最佳实践，帮助您立即省钱

> 原文：<https://thenewstack.io/3-kubernetes-best-practices-to-help-you-save-money-now/>

在考虑成本管理和优化时，配置至关重要。作为企业成功的五大关键因素之一，除了安全性、合规性、可靠性和可扩展性，充分利用预算分配的能力来自于避免危险的错误配置。

配置问题是 Kubernetes 最关心的问题之一，主要是因为它们会给云原生环境带来重大风险，同时还会浪费大量资金。通过这种方式，Kubernetes 的适当配置在组织花费的金额中起着重要作用。因此，要理解集装箱成本优化的最佳实践，需要快速研究配置问题和预算调整的重要性。

## 一个 Kubernetes 工作负载到底要花多少钱？

### **1。分配成本**

这里的第一步是计算每个工作负载的成本。但这并不总是一个简单的过程，因为 Kubernetes 节点本身并不简单。节点，即 Kubernetes 中的虚拟或物理工作机(取决于集群)，最终决定了您的账单大小。但是，这些节点并不能很好地映射到运行它们的工作负载上。

Kubernetes 节点是短暂的和动态的，能够随着集群规模的扩大或缩小而被创建和销毁，或者在升级或故障时被完全替换。让事情变得更复杂的是，Kubernetes 执行了一种称为“装箱”的操作，根据它确定的可用资源的最有效利用将工作负载放入节点中——几乎就像俄罗斯方块游戏一样。将特定的工作负载映射到特定的计算实例仍然极具挑战性。虽然 Kubernetes 中高效的 bin 打包可以极大地节省成本，但是当给定节点上的资源在多个应用程序之间共享时，很难划分开销。

### **2。合适的资源**

 [罗伯特·布伦南

Robert Brennan 是 Kubernetes 治理和安全公司 Fairwinds 的开源软件主管。他专注于软件开发，该软件抽象出底层基础设施的复杂性，为工程师提供最佳体验。在 Fairwinds 之前，他在谷歌担任人工智能和自然语言处理方面的高级软件工程师。他是 DataFire.io 的联合创始人，data fire . io 是一个用于构建 API 和集成的开源平台，LucyBot 是一套由财富 500 强公司部署的自动化 API 文档解决方案的开发者。他毕业于哥伦比亚大学和哥伦比亚工程学院，在那里他专注于机器学习。](https://www.linkedin.com/in/robert-a-brennan/) 

在 Kubernetes 之前，组织可以依靠云成本工具来提供对底层云基础架构的可见性。如今，Kubernetes 在云资源管理的基础上提供了一个新的抽象层，它可以成为传统云成本监控工具的黑匣子。因此，组织需要在 Kubernetes 的“引擎盖”下找到一种方法，在应用程序、产品和团队之间进行适当的成本分配。

当应用程序被部署到 Kubernetes 中时，用户需要知道应该给应用程序分配多少内存和 CPU。这是最初经常犯错误的地方，因为团队要么没有指定这些设置，要么将它们配置得太高。因为开发人员的任务通常是快速编写代码和发布，所以他们通常会忽略看似可选的配置问题，比如 CPU 和内存请求和限制。但是这导致了大问题，并且严重背离了最佳实践。

忽略这部分配置难题会导致可靠性问题，包括延迟增加甚至停机。即使开发人员确实花时间指定内存和 CPU 设置，他们也经常过度补偿，向应用程序分配过多的资源，以确保应用程序手头拥有所需的所有资源。这样，开发人员倾向于相信，“计算越多越好。”但这不仅仅是提高运输速度和降低风险。Kubernetes 集群必须配置正确的内存请求和限制，以确保应用程序高效运行和扩展。这一步骤避免了浪费金钱。

如果没有 Kubernetes、成本控制和可见性，以及将这些信息提供给开发团队的可靠的反馈循环，开发人员可能过于慷慨的 CPU 和内存设置将会受到重视。您的组织将为云计算买单。即使 Kubernetes 尽最大努力通过以优化资源的方式协同定位来尽可能有效地利用您的资源玩俄罗斯方块，但当面临不明确的内存和 CPU 预期或过度分配的资源时，它也只能做这么多。

### **3。授权团队**

为 Kubernetes 开发一个完整的服务所有权模型是一个主要的最佳实践，它使开发团队能够在生产中拥有和运行他们的应用程序。因此，运营团队可以专注于为开发团队构建一个优秀的平台。在 Kubernetes 中，服务所有权通过自动化、可操作的建议、警报和工具链集成等方式向工程团队提供反馈，从而有助于提高效率和可靠性。这种工作流程的转变要求团队在继续遵循最佳实践的同时做出富有成效的决策。

构建、部署和运行他们的应用程序的团队拥有更多的自主权，与其他用户的交接更少。同样，服务所有权模型帮助开发人员更清楚地理解他们构建的软件如何影响客户和运营开销。当谈到改善成本管理和协作以节省成本时，Kubernetes 的服务所有权(包括适当的监督和配置)降低了容器化工作负载的复杂性，并将最佳实践的力量放回到开发人员手中。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>