# Temenos 基准测试显示 MongoDB 适合银行工作

> 原文：<https://thenewstack.io/temenos-benchmarks-show-mongodb-fit-for-banking-work/>

一家金融服务软件提供商进行的基准测试发现， [MongoDB](https://www.mongodb.com/cloud/atlas/?utm_content=inline-mention) 数据库可以提供银行交易所需的能力和速度，这表明在快节奏的金融领域引入 NoSQL 数据库有了新的可能性。

据[报道，Temenos 的首席技术官 Tony Coleman](https://www.linkedin.com/in/tony-coleman-b8389426/?originalSubdomain=uk) 上个月在 MongoDB World 的一次会议上说，Temenos 为单个 MongoDB 实例建立了一个生产级基准，发现它能够轻松地每秒执行 74，000 个事务(TPS)，所有事务的响应时间都不到一秒。此外，与 Oracle 提供的基于集群的传统系统相比，它使用的服务器数量要少得多，从而实现了如此出色的性能。

这一基准可能是银行业的一个重要里程碑，银行业已经从一个非常保守、发展缓慢的行业演变为一个竞争激烈的行业。MongoDB 行业解决方案全球主管 [Boris Bialek](https://www.linkedin.com/in/bbialek/?originalSubdomain=ch) 表示:“在苛刻的消费者和灵活的新竞争对手的压力下，以年为单位的开发周期已经不够了。"特梅诺斯站在实现这一目标的最前沿."

## 更多的事务，更少的服务器

那是在 2018 年谷歌的一次活动上，就在 Mongo 宣布支持 MongoDB 4.0 的 [ACID transactions](https://databricks.com/glossary/acid-transactions) 之后，科尔曼走向 MongoDB 展台，并表示这是这家银行软件公司可以使用的一项功能。

![](img/4c89ed3573e4ecd19e83d917d49426d9.png)

托尼·科尔曼

总部位于日内瓦的 Temenos 为全球超过 125 个国家的 3000 多家金融机构提供服务。该公司提供进行金融交易的软件，既可以是服务，也可以是软件包。

科尔曼在对新堆栈的后续采访中说，该公司发现他们的客户群随着时代的变化而变化。

二十年前，银行开始使用 Oracle 或 IBM Websphere，但最近，金融机构开始向 Temenos 寻求关于构建堆栈的建议，以提高竞争力。

所有银行业务的核心都是 ACID 事务，它保证事务一旦执行，就会提交给数据库。因此，ACID support 的消息将 MongoDB 引入了高级金融领域。

Coleman 知道 MongoDB 还有吸引这个社区的其他优势，包括跨多个云运行的能力，如果需要的话能够在本地运行，或者能够跨多个区域以主动-主动配置运行。

所以泰姆诺斯测试了蒙戈。

工程字节

在首席技术官 Tony Coleman 看来，Temenos 享有的一个竞争优势是开发新功能的声明式方法。公司开发人员增加了新功能，能够通过配置切换来打开或关闭这些功能，而不是为每个客户端分配代码，并管理随后蔓延的代码。

在一个模拟场景中，Temenos 的研究团队通过每秒 24，000 次交易和 74，000 次 MongoDB 查询，创建了 1 亿个客户和 2 亿个账户。科尔曼说，即使有相当大的工作量，运行在亚马逊网络服务的[M80 实例](https://www.mongodb.com/mongodb-on-aws-pricing)上的 MongoDB 数据库，始终将响应时间保持在一毫秒以内，这是“异常一致的”。(这意味着终端用户应用程序的总体响应时间约为 18 毫秒，快得几乎让人察觉不到)。

科尔曼将这项测试与该公司在 2015 年进行的早期测试进行了比较，使用了所有[甲骨文](https://developer.oracle.com/?utm_content=inline-mention)齿轮。他承认，考虑到老一代的硬件，这不是一个公平的比较。尽管如此，这种比较还是令人大开眼界。在该设置中，一个 Oracle 32 核集群每秒能够处理 7，200 个事务。

换句话说，一个 MongoDB 实例能够完成 10 个 Oracle 32 核心集群的工作，而使用的能量要少得多。

## 用数据模型来纠正

实现如此高吞吐量的一个关键方面是获得正确的数据模型。“就像安全一样。你不能犯错，”科尔曼说。

“实施良好的数据模型是一个良好的开端。实现一种能够正确使用该数据模型的优秀数据库技术至关重要。”

这是标准 SQL 数据库系统相对于 MongoDB 等 NoSQL 系统处于劣势的一个方面。

“如果你把索引放在关系表上，当你插入时它会变慢，因为它要做更多的工作。我的意思是，这只是物理学，”科尔曼说。因此，如果您想要一个非常灵活的查询模型，并且必须有 10 个索引，那么每次插入时，您都要为查询支付开销

相比之下，“如果你的目标是高价值的查询，也就是客户面对的那些一直在做的查询，那么投资一个特定的查询优化模型是非常值得的，因为它的效率要高得多，”科尔曼说。

科尔曼说，MongoDB 基于文档的数据库系统“非常适合”银行业。SQL 数据库可以将一系列事务捕获为一组行，每个事务一行。相比之下，MongoDB 等公司提供的面向文档的模型可以捕获所有的交易，比如说一天的交易，作为一个数组，这样查询起来更容易、更快。

科尔曼说:“如果我的现金流数据中有 30 天的条目，当月底到来时，如果我想查看我的现金流，我要么查询 30 行并将它们放在一起，要么我正在读取一行。”

## 处于测试阶段

MongoDB 目前支持 Temenos Infinity 产品，而由 Atlas 支持的 Temenos Transact 平台将在不久的将来推出。

目前，Temenos 正处于在生产中使用 MongoDB 的风口浪尖，因为测试已经基本完成。科尔曼说:“我们的目标是将 MongoDB 引入银行云。该公司发现 MongoDB 可以用少 22%的资源复制标准 SQL 工作负载。

目前，Temenos 在 PostgreSQL 数据库中以二进制 JSON (BSON)的形式存储至少一些财务数据，可以很容易地将这些数据迁移到 MongoDB。

该公司正在向事件驱动、松散耦合的架构发展，数据流经事件流，事件存储保存所有数据的规范版本。公司不使用事件源，对开发者来说还是太复杂；科尔曼补充说，相反，对象的状态变化与事件本身一起被存储。

科尔曼说:“转向这种事件驱动的架构在很多层面上都很有意义。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>