<html>
<head>
<title>It's Go Time: Stream 2.0 Ditches the Pokey Python in Favor of the Faster GoLang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">是时候了:Stream 2.0抛弃了缓慢的Python，支持更快的GoLang</h1>
<blockquote>原文：<a href="https://thenewstack.io/go-time-stream-2-0-ditches-python/#0001-01-01">https://thenewstack.io/go-time-stream-2-0-ditches-python/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated"><img decoding="async" loading="lazy" class="size-full wp-image-4046125 alignright" src="../Images/0e40d47a2a5235c213073a6fe66a7be7.png" alt="" data-original-src="https://storage.googleapis.com/cdn.thenewstack.io/media/2018/01/65889fbf-streamlogo.png"/></p>
<p class="translated">有没有停下来想想你的Twitter或Instagram feed是如何填充的，或者YouTube是如何为你个性化推荐视频的？都在饲料里。从Instagram和Twitter以及所有社交网站等引人注目的实时互动流，到新闻、天气甚至零售销售等被动功能，基本任务都是一样的:信息的聚合和自动、智能传播。虽然这个概念很简单，但是构建一个可伸缩的、可靠的提要可能是一项非常复杂且耗费资源的任务。</p>
<p class="translated">进入<a href="https://getstream.io/" class="ext-link" rel="external ">流</a>，一个用于构建、缩放和个性化feeds的API。Stream为开发人员提供了一个活动提要平台来实现新闻提要，而不是从头开始构建功能。Stream于2014年推出的高度可扩展的开源feed框架目前为超过3亿用户提供feed。该公司一直在不停地加速发展，在成立后不到一年的时间里就进入了TechStars孵化器项目，并在此后的两年里从0名员工发展到23名员工，同时在两个大陆上开设了办事处。在这个过程中，Stream平台也开始超越其最初的基于Python的架构。</p>
<p class="translated">TNS最近采访了Stream联合创始人兼首席执行官<a href="https://www.linkedin.com/in/thierryschellenbach/" class="ext-link" rel="external "> Thierry Schellenbach </a>，讨论了在微服务驱动的基于云的行业中开创性的“feed as a service ”,以及将Stream平台从Python过渡到Go for Stream 2.0的决定。</p>
<p class="translated"><strong>是什么让你有了围绕新闻源创业的想法？</strong></p>
<p class="translated">我的第一次创业是建立一个面向时尚的社交网络，这个网络已经有了几百万用户。提要是业务的重要组成部分，随着时间的推移，它就崩溃了。这是一个巨大的工程挑战，我们四处寻找解决方案，但我们能找到的只有白皮书。它提供了非常好的信息，但是你必须推出自己的解决方案。货架上没有现成的。</p>
<p class="translated">所以当我离开那个组织的时候，这个问题集就在我的脑海里。20%的应用都有订阅源，当你拥有几百万会员时，这将是一个非常棘手的问题。可扩展性就是一切。</p>
<blockquote><p class="translated">通过我们的API，我们的客户基本上是在构建下一个脸书，下一个Instagram，所以像重新排名feed，聚合feed这样的功能——只要数据变得稍微大一点，就变得非常困难。</p></blockquote>
<p class="translated">此外，超过500，000个应用程序仍在构建和维护自己的feed技术。每一次，所有这些公司都经历同样的挣扎，重新发明同样的技术。我们看到了<a href="/category/microservices/" target="_blank">微服务</a>如何添加你可以作为你的应用程序的一部分的乐高积木，我们看到我们可以提供这种特殊的组件。使开发人员能够在几天而不是几个月内构建提要，并由机器学习提供支持，因此提要可以毫不费力地智能聚合并根据相关性重新排序。</p>
<p class="translated"><strong>最初的框架是建立在Python之上的，但是对于Stream 2.0，你切换到了Go。是什么推动了这一决定？</strong></p>
<p class="translated">对于许多类型的应用程序来说，你使用的编程语言的性能并不重要——它只是应用程序和数据库之间的粘合剂。但是，如果你像我们一样，是一个为500家公司和3亿多终端用户提供feed基础设施的API提供商，那么性能差异就真的很重要了。Python是一门伟大的语言，但对于一些用例，如排序、聚合、序列化和反序列化，它的性能相当缓慢。我们一直在优化Cassandra、PostgreSQL、Redis等。但最终，我们达到了极限。</p>
<p class="translated">通过我们的API，我们的客户基本上是在构建下一个脸书，下一个Instagram，所以像重新排名feed，聚合feed这样的功能——只要数据变得稍微大一点，就变得非常困难。我们来自Cassandra的数据在后端需要一毫秒，但通过Python传输给我们的客户需要20毫秒。不仅仅是时间，而是我们的底层基础设施。</p>
<p class="translated"><a href="https://sentry.io/about/" class="ext-link" rel="external ">哨兵</a>(开源错误跟踪软件公司)在Python上遇到了类似的问题。他们最终将Rust用于他们的一些端点，并将它们嵌入Python中。这是一种选择。但是对于流、序列化、从Cassandra中读取以及其他嵌入到Python中的性能问题，意味着要完全迁移到一种新的语言。一个常见的解决方案是用C或Rust重写某些目标组件，Python可以使用的任何东西。但这只适用于一个很小的部分，比如图像大小，这是一个问题。对我们来说，虽然它太普遍了。</p>
<p class="translated">我们开始寻找选择，比如Algolia的搜索即服务，它们非常有趣，是一家由T2 Y Combinator支持的创业公司。我们广泛地研究了<a href="http://www.cplusplus.com/doc/tutorial/" class="ext-link" rel="external "> C++ </a>，然后是<a href="https://elixir-lang.org/" class="ext-link" rel="external "> elixir </a>，这是一种现在很受欢迎的编程语言。而且我们看了<a href="https://www.scala-lang.org/" class="ext-link" rel="external "> Scala </a>和<a href="https://akka.io/" class="ext-link" rel="external "> Akka框架</a>。我们看着围棋。</p>
<p class="translated">与Scala和C++相比，Go是一种更现代的语言，一种相当简单的语言，所以用Go培训工程师更容易。当您的团队中只有一个人具有该语言的经验时，这一点非常重要！而且有很多工程师想转到Go，所以它也成为了一个人才招募工具。</p>
<p class="translated">Scala和Akka一起很快，但是也非常复杂。我们觉得那会让我们太慢——我们仍然是一个小公司，所以我们需要平衡API的性能和我们能够负担的开发费用。真正达到最佳状态——它非常高性能，但也易于使用，并且入门非常简单。</p>
<p class="translated">长生不老药是最后的有力竞争者。而且很有意思。但是这个生态系统仍然太年轻，没有足够的库来容纳我们使用的东西，而且当我们对它进行基准测试时，它的速度更快。我们再也不会做这样的改变了，因为改变你的语言是一件你不应该重复做的事情。但未来寻找另一种语言的公司绝对应该考虑Elixir。</p>
<p class="translated">就在7个月前，我们决定迁移下一代平台Stream 2.0，我们刚刚完成了迁移。这是客户的一大福音，性能和稳定性都得到了极大的提高。</p>
<div>
<dl id="attachment_4046126">
<dt>
<p/><div class="wp-caption alignnone"><a href="https://storage.googleapis.com/cdn.thenewstack.io/media/2018/01/be86677c-rankedfeed.png" class="ext-image" rel="external "><img decoding="async" loading="lazy" src="../Images/0f4aedd91002b212f2db98ca89333cda.png" alt="" data-original-src="https://storage.googleapis.com/cdn.thenewstack.io/media/2018/01/be86677c-rankedfeed-1024x622.png"/></a><p class="wp-caption-text translated">是时候了:Stream的一些排名提要功能</p></div></dt>
</dl>
</div>
<p class="translated"><strong> Python仍然被用于Stream的某些方面？</strong></p>
<p class="translated">所以我们整个网站本身，以及我们所有的机器学习仍然由Python驱动。它有优秀的机器学习库。如果你看看机器学习可以派上用场的提要——例如，重新排序和重新排列与个人用户相关的提要，这是我们为企业客户做的事情——Python仍然是一个非常好的选择。</p>
<p class="translated">下一步是什么？</p>
<p class="translated">嗯，现在我们的大部分研究致力于确保Stream继续为越来越大的应用程序工作。</p>
<p class="translated">对于未来，我对机器学习中更微妙的改进非常感兴趣。</p>
<p class="translated">现在设置机器学习仍然非常复杂。我们开始用Stream提供我们自己的机器学习，但即使有一个专门的部门，也有如此多的移动部分需要跟踪:系统中的所有数据，人们如何处理这些数据。机器学习基本上是样板化需要发生的事情。现在它还很不完善，无论是技术还是我们应用它的方式都还在摸索中。现在很多应用程序只是向你扔内容。或者机器学习在不看其他东西的情况下为参与而优化时的危险。因为有争议的材料是最吸引人的，所以它会针对有争议的材料进行优化，这是一个你不想走下的悬崖。</p>
<p class="translated">因此，进化出不引人注目但更有用的方法来应用机器学习。例如，我们将Google Cloud用于他们的<a href="https://cloud.google.com/vision/" class="ext-link" rel="external "> Vision API </a>,因此当用户将活动上传到Stream时，其中有一张图像，我们使用Google来计算图像中的内容，然后将该主题输入到您的机器学习中。以前我们看的是标签或应用提及，但现在下一代我们可以使用视觉关键词来理解帖子是关于什么的。因此，如果有人上传了一张关于单板滑雪的照片，或者你正在看一张关于单板滑雪的照片，现在我们知道这是你感兴趣的东西。</p>
<p class="translated">我相信机器学习会有非常有用的应用——找工作，找房子。LinkedIn有一个庞大的团队在开发他们的feed，比我们整个公司还大，试图进行这些改进。实际上，像房地产这样有用的东西，比如说，当你搜索一栋房子时，你搜索的不仅仅是你指定的任何东西，而是你点击的内容，以及导致的结果——它更微妙地从你自己如何进行有机搜索中学习。</p>
<p class="translated">所以，是的，这就是我们要说的。人工智能应用于一些有用的东西，如找工作或住房。不仅仅是给你看猫的照片。</p>
<p class="attribution translated"><a href="https://www.cncf.io/kubecon-cloudnativecon-events/" class="ext-link" rel="external ">谷歌云</a>是新堆栈的赞助商。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>