# 环境网格:回避边车

> 原文：<https://thenewstack.io/ambient-mesh-sidestepping-the-sidecar/>

去年秋天，Solo.io 和谷歌推出了 Istio 环境网格，这是 Istio 的一种新模式，它利用网格数据平面而不是部署 sidecar 代理，而没有牺牲零信任安全等关键优势。

IDC 研究副总裁 Brad Casemore 告诉新堆栈，该产品反映了市场的一个更广泛的趋势。他指出，Cilium Service Mesh 还提供了不用边车跑步的选项。

[https://www.youtube.com/embed/AVQ0d6C5gAk](https://www.youtube.com/embed/AVQ0d6C5gAk)

视频

“这是一种趋势，我认为，这与边车的成本有关，包括注入和管理它们到网络中的复杂性，以及管理费用，因为它们是在服务网络中运行的额外容器，”他说。

凯斯莫尔说，避免边车也降低了缺乏关键专业知识的组织的准入门槛。

“随着我们看到越来越多的容器和云原生应用程序架构在企业中激增，大多数人在内部没有非常高技能、高价格的 Kubernetes 人员，他们正在寻找采用这种技术的简单方法——当他们看到 sidecars 这样的东西时，他们往往感到非常害怕，”他说。

## 主要优势

[企业管理协会的研究总监 Torsten Volk](https://www.linkedin.com/in/torstenvolk/) 说，ambient mesh 可以让开发者专注于他们最擅长的事情。

“环境网格的概念使 DevOps 工程师能够通过一个统一的 API 直接提供建立连接性、安全性、合规性和可靠性所需的所有独立组件，该 API 附加到每个 Kubernetes 集群的每个节点上，”他说。

“环境网格的核心层基本上以非常简单的方式和开源项目的形式按需提供零信任，”Volk 说。“我希望 Kubernetes 平台供应商和其他 CNCF[云本地计算基金会]类别的产品供应商将环境网格纳入他们的解决方案，因为这可能是为他们的产品提供零信任安全的一种简单方法。”

Solo.io 副总裁兼全球首席技术官 Christian Posta 表示，环境网格的两个主要优势是易于应用和升级管理。

“服务网格是基础设施级别的技术，但由于它的一个组件与应用程序密切相关，这就产生了摩擦，如果我想升级一部分基础设施，我还必须与应用程序协调，重启所有应用程序，更换它们的代理，”他说。

没有边车，这种摩擦就消失了——而且它也使响应漏洞的破坏性大大降低。“如果我们有一个 CVE，我们需要修补一些东西，我们必须快速完成，而且我们必须在不中断正在运行的应用程序的情况下完成。如果服务网的组件在此之外运行，那么做起来就容易多了，”波斯塔说。

波斯塔说，对 Solo.io 来说，这些是开发新产品的核心驱动力。

“我们真正感兴趣的是，我们如何简化入职，这可能会带来新的案例，并在第 2 天保持网格运行，同时对正在运行的应用程序产生最小的干扰？”

## 无中断升级

Posta 说，想象一下，在 Envoy 中发现一个漏洞。

“Istio 使用 Envoy Proxy 作为辅助工具，所以如果你开始在 Envoy 中看到这些 CVE，那么我们必须升级 Envoy——如果 Envoy 与应用程序一起部署，你会想，‘好吧，我必须升级应用程序，因为我必须更换代理，’”他说。

这样做需要仔细规划。

“你必须说，‘好吧，让我们先重启这个应用程序，然后我们必须等待它出现，然后我们将重启这个应用程序，’等等，”波斯塔说。“必须进行协调，这样你就不会遇到任何意外的中断，因为代理与应用程序是绑定在一起的。”

Posta 说，有了环境网格，这个过程就简单多了。

“由于应用程序中什么都没有，无论你必须采取什么步骤来升级服务网格，你都不必重启任何应用程序，”波斯塔说。“你不必考虑，‘我必须先重启 A，否则会影响 B 或 c。’这对应用程序来说无关紧要。这种编排、规划和滚动升级，以及所有这些必须发生的可能导致停机的事情，再也不会发生了。”

Posta 说，你可以重启和升级环境网格航路点代理，而应用程序甚至不会意识到这一变化。

“显然，我们不会一次关闭每个 waypoint 代理，但我们会对 waypoint 代理进行滚动升级——而且，我们不会与应用程序开发者或应用程序协调任何事情，”他说。

## 边车的地方

不过，至少在可预见的未来，边车可能仍会有一席之地。Volk 说，对于一些组织来说，合规性问题可能会鼓励他们继续使用。

他说:“sidecars 将服务网络层附加到应用程序，而不是底层基础架构集群，这一事实可以实现更高程度的工作负载分离，因此从合规性的角度来看是相关的。”

更一般地说，Posta 说，当你需要专注于只适用于客户端的设置和功能时，sidecar 会很有用。

“我们在 ambient 中使用的航路点代理，是根据工作负载类型分配的，代表目标工作负载……但现在你没有能力直接代表客户端，”他说。

Posta 说，举例来说，Istio 的重试策略允许你配置客户端，如果客户端调用服务并且请求失败，就重试请求。

“这个决定是在客户端做出的，因为代理是和客户端一起部署的，”他说。

另一方面，在环境模式下，请求从客户端发送到 waypoint 代理，后者代表客户端执行重试。

“因此，我们正在推动所有的政策——无论是在 sidecar 模式下，还是在客户端或服务端——我们正在推动所有这些到服务器端，”波斯塔说。“但是，如果我们想要调整客户端特定的东西，我们可能需要专门为某些客户端分配专用资源。”

Casemore 表示，广泛的已建立的服务网格部署，特别是那些要求符合 FIPS(联邦信息处理标准)的部署，将确保边车不会很快消失。“这些环境不会消失，但越来越多，我认为你会看到在那些非边车环境中更大程度的增长，”他说。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>