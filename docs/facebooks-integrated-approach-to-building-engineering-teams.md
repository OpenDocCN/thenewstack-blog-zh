# 脸书建设工程团队的综合方法

> 原文：<https://thenewstack.io/facebooks-integrated-approach-to-building-engineering-teams/>

塔科马海峡大桥的著名故事生动地说明了当工程师未能充分规划他们的工作在现实条件下的表现时会发生什么。这座桥于 1940 年在华盛顿州建造，汇集了该国一些最好的桥梁建筑师、设计师和建筑商。但仅仅在完工后四个月，它就戏剧性地坍塌到了普吉特湾，原因是工程师们未能解释的强风导致了意想不到的气动弹性颤动。

土木工程师们已经从塔科马海峡大桥中学到了很多。但是我们仍然看到现代软件工程团队将功能开发与操作和稳定性分开。尽管有像 DevOps 这样的运动，今天仍然很常见到软件工程师编写和开发应用程序；然后将他们的代码交给 QA 团队进行测试；然后再次移交给运营团队进行部署和调试。当 QA 和 operations 拥有修复问题所需的产品知识时，这种方法很有效，但是如果他们没有，修复和调试需要回到软件工程师那里。此工作流会显著延迟修复。软件团队今天面临的挑战是如何建立一种思维模式，其中操作和稳定性也是软件开发生命周期的一部分。

## 集中报告、嵌入式位置模型

[![](img/1cfd84de74e50cdff1bd42fbd4776ccd.png)

脸书生产工程和安全副总裁 Pedro Canahuati

Pedro Canahuati 在软件设计、架构和大规模运营稳健服务方面拥有 20 多年的经验，是脸书生产工程和安全副总裁。以此身份，Canahuati 负责确保脸书的基础设施健康、安全，超过 20 亿用户可以随时访问该平台。卡纳华提还是脸书大学拉丁裔技术人员的执行发起人之一，并致力于该公司的内部多元化计划。在 Canahuati 的职业生涯中，他建立并管理了全球工程团队，专注于运营规模公司，为用户提供最佳体验。在 2009 年加入脸书之前，卡纳华提曾担任 Buzznet(现为 Hive Media)和 Qloud 的运营总监，领导工程战略和团队的发展，并推动技术和基础设施决策。Canahuati 拥有美国洲际大学信息技术专业的理学学士学位，并以最优异的成绩毕业。他还在马里兰大学学习计算机科学。](https://www.facebook.com/?ref=tn_tnmn) 

在脸书，我们选择了不同的组织方式。通过在软件工程团队中嵌入生产工程团队，我们能够更有效、更有创造性地工作，并且具有更大的组织凝聚力。这种“集中式报告、嵌入式位置”模式确保脸书在组织上设置为随时提供最佳用户体验和对平台的访问。

拥有超过 20 亿用户，平均每天有 14 亿人使用脸书产品，制作工程师支持一个复杂的大规模运行系统，向脸书社区提供照片、视频、消息和其他类型的内容。集中报告、嵌入式位置结构在软件工程和运营团队之间创造了一种协作文化，以确保脸书的基础设施正常运行。

这种模式依赖于四个有效的原则:

1.  **同地。**每个生产工程团队都与他们一起工作的软件工程团队在同一地点。两个部门坐在一起，进行社交活动，并参加每个部门的全体会议，以便每个人都清楚地了解产品/基础设施路线图。当问题出现时，他们可以迅速聚集在一个房间里，帮助检查和解决问题。这使团队能够跟上开发的步伐，使每个涉众更加了解正在构建的软件的各个部分，以及该软件如何与服务器和服务交互。产品愿景和产品组激励的共享知识对于这种类型的结构蓬勃发展至关重要。该团队通过自动化、新工具、性能分析和核心系统调试来实现这一目标。
2.  **统一的组织结构。**我们有一个单一的工程业务部门，包括开发和生产。从组织结构图的角度来看，生产工程不是从工程中分离出来的业务单位；这是工程学科的一部分。这使得公司的工程领导对运营负责。我们认为组织结构图不应该让工程和运营部门在相遇之前就在组织的阶梯上走得很远。最终，运营是工程主管的责任，他们的评估和提升并承担更多责任的能力与运营是否成功直接相关。与此同时，运营的成功现在从根本上与工程领导及其团队交织在一起。为了成功实施这一结构，激励措施也需要重新调整。运营需要得到激励，以实现更快的开发，并在构建功能丰富的产品和服务以及稳定性之间取得平衡。任何一方都不应该战胜另一方。为了确保团队成员理解并适应他们的职责，为生产工程创建一个集中的报告结构是很重要的。这创建了一种机制来响应冲突，例如当工程领导通过“仅功能”的透镜来看项目时，并且假设操作对他们不想做的工作单独负责。当这些情况出现时，软件工程和生产工程的领导需要走到一起，使用他们的集中报告结构来共同解决问题。
3.  **团队平价**。软件工程师和生产工程师处于平等的竞争环境中。由于脸书已经建立了生产工程模型，一个主要的学习是把软件工程师和生产工程师放在一个公平的竞技场上的重要性，因为感知就是现实。每个人都是平等的合作伙伴，在构建系统时都有同等的影响力。生产工程师构建软件解决运营问题；软件工程师也负责运行他们的服务。对等意味着软件工程师可以随时调用他们构建的服务，而不是依赖传统的运营团队来响应警报。在大多数情况下，生产工程师和软件工程师共享随叫随到的轮换。
4.  **整体思维**。一个统一的团队了解代码是如何构建的，以及它如何响应环境。生产工程师的工作范围从硬件设计到 UI 工具。当软件针对用户流量进行优化或失败时，生产工程是最了解代码如何构建以及它如何响应环境的团队。从脸书的数据仓库等后端服务到新闻订阅等前端服务，再到缓存基础设施、负载平衡和部署系统等基础设施组件，该团队让脸书保持运行。生产工程师建立各种系统，解决其他人可能不会专注于解决的独特问题。例如，生产工程师设计并[建造了一个法拉第笼，用于无线手机测试](https://code.facebook.com/posts/300815046928882/the-mobile-device-lab-at-the-prineville-data-center/)和增强流量控制(ATC)，允许移动开发人员模拟真实世界的网络环境。工程师可以使用 ATC 在各种条件下测试他们的应用，如严重受损的网络或模拟移动运营商的速度和技术，如 3G 和 LTE。另一个由生产工程师构建的技术示例是[脸书自动修复](https://www.facebook.com/notes/facebook-engineering/making-facebook-self-healing/10150275248698920/) (FBAR)，这是一个自动化系统，可以处理重复性问题，以便工程师可以专注于解决和防止更大、更复杂的站点中断。在这些例子中，团队 100%的时间都是随叫随到的，因为构建和部署它的生产工程师也拥有它。

## 好处:更多样化的思维，协作文化，整体反应

软件和运营工程师地位平等，作为具有统一愿景的单个团队的一部分进行协作，并共享相同的物理工作空间，集中式报告、嵌入式位置模型在几个重要方面取得了成功。

也许最重要的是，我们看到了整个堆栈中更高的思想多样性，因为工程师们共享产品愿景和运营问题的知识。由于软件工程师作为同一个团队的一部分并肩工作，他们从生产工程师的持续警惕中受益，并且在操作问题被识别和解决时，他们也获得了一个了解操作问题的窗口。

> 通过在软件工程团队中嵌入生产工程团队，我们能够更有效、更有创造性地工作，并且具有更大的组织凝聚力。

生产工程师也可以理解软件团队的优先级限制。当生产中出现问题时，软件工程师和生产工程师会聚在一起，肩并肩地解决问题。当软件工程师随叫随到时，生产工程师就坐在那里，他或她或他们可以靠过去，就某个特定的问题寻求帮助，或者获得关于未来如何更有效的指导。

通过这种方式,“集中报告，嵌入本地”模式加强了内部沟通，消除了旧的偏见。其结果是一个强大的，协作和统一的工程文化，最终有利于脸书的用户体验。

## 应用集中报告、嵌入式位置模型

公司需要建立工程团队，以寻求他们的知识和解决问题的能力。组织不能仅仅重塑其后端部门的品牌。他们需要改变他们软件团队的文化，以及他们对开发团队所做工作的基本方法。组织支持至关重要。

通过将运营置于与软件工程师平等的地位，这种模式有助于生产工程团队建立高效和创造性解决方案的良好声誉，并避免等级化、孤岛式思维。当其他组织寻求实施这种模式时，建立一个有凝聚力的团队的最大教训之一是就职业发展、未来工作的性质以及变化如何影响人们的行为进行开放、诚实的对话。如果可行的话，让团队明白他们什么时候应该自动脱离当前的角色，去接受更大、更困难的挑战。所有这些元素都有助于建立强大的工程文化，这将最终有利于您公司的用户体验。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>