# 谷歌云如何实现圆周率的创纪录计算

> 原文：<https://thenewstack.io/how-google-cloud-enabled-a-record-calculation-of-pi/>

"π(π)的第 100 万亿位小数是 0 . "

艾玛·相户爱·岩尾知道——因为她领导了第一个计算每个数字的团队。在运行了 157 天 23 小时 31 分 7.651 秒的计算后，他们的重要时刻到了，该检查了。“我将是第一个也是唯一一个看到这个数字的人，”Iwao 在本周发表的博客文章中回忆道。

结果呢？这是一项新的世界纪录。"我们已经计算出了π的最高位数——准确地说是 100 万亿位."

但是同样有趣的是*他们是如何做到的。Iwao 和她的团队在计算中使用了 128 个虚拟 CPU 和 894GB 的内存。Iwao 在博客中解释说:“作为谷歌云的开发者倡导者，我的部分工作是创建演示和进行实验，展示开发者可以用我们的平台做的很酷的事情。”"其中之一，你猜对了，就是用程序计算圆周率的位数."*

Iwao 已经[创造了圆周率数字计算的较早记录](https://thenewstack.io/google-clouds-haruka-iwao-sets-a-new-record-for-calculating-pi/)。早在 2019 年，使用谷歌计算引擎(由谷歌云提供支持)，Iwao 启动了 25 台虚拟机，连续 121 天不间断地运行，最终计算出 pi 达到创纪录的 31，415，926，535，897 位——这是首次使用云进行创纪录的计算。

但是这一次，为了计算圆周率到小数点后第 100，000，000，000，000 位，Iwao 与另外三个开发者拥护者组成的团队合作——这个团队利用了最新的基础设施。

首先，Iwao 的团队转向了谷歌新的虚拟网卡(gVNIC)网络驱动程序，该驱动程序与谷歌的 Andromeda 虚拟网络堆栈紧密集成，为他们带来了更高吞吐量和更低延迟的优势。这意味着他们的主要计算节点——运行 Debian Linux 11——最终获得了令人瞠目结舌的 100Gbps 出口带宽支持(这对于像这样使用基于网络的共享存储架构的项目来说至关重要)。

“回到 2019 年，当我们进行 31.4 万亿数字计算时，出口吞吐量仅为 16 Gbps，”Iwao 在第二篇更具技术性的博客文章中指出，“这意味着带宽在短短三年内增加了 600%……这种增加是使这一 100 万亿实验成为可能的一个重要因素，使我们能够移动 82.0PB 的数据进行计算，高于 2019 年的 19.1PB。”

是的，这是 82PB 的输出——这个数字甚至比用于最终存储该数字的 515TB 还要大得多。“算法有多个变量，”Iwao 在周二接受新堆栈采访时解释道。“所以圆周率只是一个数字，也就是 100 万亿位数。但是为了计算圆周率，你需要保存和存储很多这些不同的数字，方程中的一些变量。”

Iwao 还写道，仅处理的数据量(82，000TB)就相当于 2，598 年的高清电影。(相比之下，2019 年只有 19TB，或者说只有 606 年的高清电影。)花了 515TB 才*存储*最终数。

![Screenshot from interview with Google Cloud advocate Emma Haruka Iwao June 7 2022](img/880e3a2eb83c681d862a7a2af2960b50.png)

我们采访谷歌云倡导者艾玛·相户爱 Iwao 的截图——2022 年 6 月 7 日

但事实证明，计算 100 万亿位数的圆周率不仅仅是一个存储问题。Iwao 写道:“因为数据集不适合主内存，存储系统的*速度*是计算的瓶颈。”。“我们需要一个强大、耐用的存储系统，能够处理数 Pb 的数据而不会丢失或损坏，同时充分利用 100 Gbps 的带宽。

为了存储最终结果，我们将两个 50TB 的磁盘直接连接到计算节点

在他们开始之前，该团队还使用 Terraform 工具(以及一个自主开发的程序)对几十个不同的可能基础设施选项进行了性能测试，以及 pi 计算程序 y-cruncher 的不同参数。微调得到了回报。“总的来说，这次计算的最终设计比我们的第一次设计快了两倍，”Iwao 的博客文章指出。“换句话说，计算可能需要 300 天，而不是 157 天！”

获奖配置？我们设计了一个包含一个计算节点和 32 个存储节点的群集，总共有 64 个 iSCSI 数据块存储目标

Iwao 的博客文章称这一新纪录“证明了谷歌云基础设施年复一年的速度有多快”(引用的不仅是其计算能力的改进，还有其存储和网络的改进。)Iwao 写道，当人们在 2019 年问接下来会发生什么时，她知道科学界“只是不停地计数”，应用任何可用的尖端工具。因为圆周率是没有尽头的，只要计算本身不断发展，我们目前计算的数字就会一直增加。

在周二的采访中，我问 Iwao:这个里程碑的意义是什么？“对于那些可能只是使用电脑的非技术人员来说，我想说的是电脑正在变得越来越快，”Iwao 告诉我。“令人兴奋的是，计算机科学和工程是令人兴奋的学习领域……如果你感兴趣，学习云计算或一般的计算机科学是很好的……

“对于技术社区来说，这个信息更加具体。自 2019 年以来，我们增加了超过 62 万亿个数字——所以我们*的数字数量是*的三倍。我们没有花三倍多的时间…所以计算机实际上快了两倍多。

“有时，即使你在这个行业工作，也很难跟踪每周发布的所有新公告和新技术。我认为 pi 代表了计算机和架构的整体状况…可以说我们实现了两倍以上的速度。这意义重大。”

以下是我们采访中的其他亮点:

**TNS:年复一年，速度会持续提高吗？即云计算是否有自己的摩尔定律的等价物？**

具体到谷歌云，我不认为我们给出的预测或未来路线图超出了我们在网站上的内容。但是对于一般的计算机来说，我的观点是我们仍然看不到进步的尽头。

我们仍然看到半导体、中央处理器、架构、操作系统以及其他所有方面的进步。因此，我相信我们在未来仍将继续看到改进和加速…

**特别提到 CPU，听起来你不是那种相信摩尔定律最终会消亡的人。**

我想我们已经说了很多年了。我认为很酷的是工程领域的科学家正在努力扩展极限，超越我们最初认为可能的大极限。所以，因为我们知道挑战，我们知道我们需要做什么来使它变得更快，我认为我们将继续看到更多的改进…

对于计算机和计算机科学来说，这是一个强大的时刻，因为你可以依赖和重用其他人的工作和成就。有开源社区，有很多很多的信息知识，你可以把它们融入到你自己的挑战中。

即使在科学的高性能计算社区中，也有许多开源软件工具和解决方案——因此硬件和云平台的改进不仅仅是硬件，还有软件。有像编译器、分析器、开发工具这样的工具，像 MPI、OpenMP 和调度器这样的库。有很多技术可以使用，其中一些也适用于 Google Cloud。

我认为学习这些技术是一回事；这是一个令人兴奋和具有挑战性的领域。使用它们，创造新的解决方案，开发新的软件，我认为是另一个挑战，也是一个有趣的挑战。

现在我们已经计算了圆周率的第 100 万亿次幂，会发生什么呢？我们能用它做什么？

为了 100%诚实，你可以用这些数字做一些实验和研究——例如，检查数字和模式的频率。对于任何科学计算，你不需要超过 40 或 50 个数字——这就是你所需要的。

我认为这是你如何做比你最终得到什么更重要、更有趣的例子之一。我们在网上公布了整个 100 万亿数字的结果，任何人都可以通过云存储或我们提供的 API 下载和访问。

我喜欢听人们想用这些数字做什么…

**那么未来会怎样？我们会看到另一个计算圆周率位数的记录被打破吗？**

计算存储网络的改进是我们每天在云和其他计算平台上看到的例子之一。可能不是我——可能是我，没人知道。但是我认为科学界作为一个整体在未来会继续得到更多位数的圆周率。我们将继续看到计算机、算法等等的改进。

所以我很高兴看到接下来会发生什么，我希望我们作为人类，在未来共同继续看到更多位数的圆周率。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>