# 成为你现实生活中网络抢劫脚本中的英雄

> 原文：<https://thenewstack.io/be-the-hero-in-your-real-life-cyber-heist-script/>

《骗中骗》(The Sting)、《夺取佩勒姆一二三号》(The Taking Pelham One Two Three)、《十一罗汉》(Ocean of 11)、《薰衣草山暴徒》(The Lavender Hill Mob)——这类抢劫电影描绘了聪明人想出精心策划的计划来偷东西，而同样聪明的人试图阻止他们。不过，你不必在网飞搜索这些电影，就能体验到“精彩的抢劫”的刺激。

今天的应用程序就像一个充满活力、不断发展的开放城市。老练的攻击者秘密渗透到城市，建立一个立足点，并横向传播他们的影响，以获得对资产的控制。这是一部抢劫电影剧本，与任何登上银幕的作品不相上下。

## **剧情**

 [欧文·加勒特

Owen 负责 Deepfence 安全观察技术的产品和上市战略。Owen 在 Riverbed、NGINX 和 F5 等公司拥有 20 年的软件工程和产品领导经验。](https://www.linkedin.com/in/owengarrett/) 

一部优秀的抢劫电影的情节反映了[网络杀伤链](https://www.lockheedmartin.com/en-us/capabilities/cyber/cyber-kill-chain.html)的概念，基于一个军事模型来理解对手的技术。

剧情从侦察开始。攻击者能找到弱点吗？他们武器化了，制造了一个工具来利用这个弱点并交付这个工具。

成功交付会导致利用**、**，然后安装更持久的接入点。然后，攻击者建立一个指挥和控制网络。我们离抢劫电影的高潮只有一步之遥了！

在最后一幕中，攻击者攻击他们的目标。无论是数据泄露、资产受损还是资源失窃，一切都为最终的抢劫做好了准备。

## **剧本**

编剧将从场景库中提取场景，并以不同的方式设定场景来推动故事的发展。

网络攻击者以完全相同的方式创造他们自己的策略。他们的许多技术和战术都记录在 ATT 主教 CK 框架中。这模拟了[现实生活中攻击团体](https://attack.mitre.org/groups/)的行为，确定了他们各自寻找的目标类型以及他们各自擅长使用的战术。

本着“了解你的敌人”的精神，学习攻击者可能在他们的抢劫脚本中使用的策略和技术。

## **地点**

一个精彩的抢劫故事在一个激动人心、高风险的舞台上上演。也许袭击者会在整个城市里跳跃。您的基础架构和其中的应用程序是您的盗窃故事的发生地。

你将设置障碍来阻挡攻击者。Web 应用防火墙(WAFs)作为安全检查点，通过身份验证来控制访问。这些当然是不够的；几乎每部抢劫电影都涉及到敌人逃避检查站或偷钥匙！

在电影中，攻击者可能会找到一名不满的员工，以获取安全巡逻的情报，或者撬开一个废弃地铁站的锁，以进入整个城市。在您的电影中，攻击者寻找他们可以利用的漏洞和错误配置。

现代应用程序几乎总是依赖于大量的第三方组件。这些组件中的漏洞可以被利用，并且可以在工业规模上部署攻击。例如，许多攻击都始于未注册的库或组件中未打补丁的缺陷。

## 你在电影中的主演

在大多数电影中，电影剧本把罪犯塑造成英雄，我们都支持他们的成功。

这部电影里没有。罪犯正是如此，而主角就是你。拦截攻击，阻止抢劫，拯救世界——这就是你的工作！

## **第一步:绘制城市地图**

一个好的侦探对这个城市了如指掌。他们知道目标是什么，如何保护他们，以及城市的薄弱环节在哪里。

你需要对你的基础设施和应用程序做同样的事情。

当然，你不能凭直觉和 20 年在城市街道上行走的经验这样做。您将需要帮助来自动执行发现攻击面、识别漏洞和构建主威胁地图的任务。

构建或获取安全工具来帮助您做到这一点。了解不断变化的威胁地图是您下一步防御的关键。

## **第二步:观察观察**

我们的电影侦探——你，这部电影的明星——接下来做什么？他们观察和观察。

当市民看到轻微犯罪发生时，他们可以打电话报警。这些是“危害的标志”:进程意外崩溃、磁盘上的文件被修改、意外的配置更改。

如果你仅仅依靠这些，你永远是在追赶。你会冲进一个房间，发现罪犯刚刚离开，只留下一扇敞开的窗户和飘散的灰尘。

我们的英雄侦探在任何地方都有消息来源，并在任何犯罪发生之前收集关于事件的情报。

一只狗叫。一个奇怪的包裹被邮寄到一所空房子里。一名保安开始炫耀一些新发现的财富。所有这些以及更多的都是一些事情可能正在发生的线索。

寻找等效的“攻击信号”攻击者是从外部侦察薄弱点吗？他们在街上徘徊，寻找一扇敞开的门吗？是否有异常的 SSH 或 C2C 流量表明攻击正在展开？

这些信号是微妙的，先于更残酷的妥协迹象。它们为您提供所需的情报，让您领先攻击者一步。

## **第三步:关联和推断**

在一部抢劫电影中，这位天才侦探经常凭借直觉而发展壮大，这让他的上司很恼火。他将城市中不寻常的活动与对弱点的详细了解联系起来，当它们聚集在一起时，就会引起怀疑。

你也有威胁地图，妥协的指标和攻击的信号。你需要在时间和空间上将这些联系起来。

一个攻击信号可能对应于一个通过防火墙的 [Apache Struts OGNL](https://www.f5.com/labs/articles/threat-intelligence/apache-struts-2-vulnerability--cve-2018-11776--exploited-in-cron) 或 [SQLi](https://owasp.org/www-community/attacks/SQL_Injection) 尝试，然而您的威胁地图显示目标服务不容易受到这种类型的攻击。没有进一步的背景，这仅仅是噪音。

危害的指标可能揭示应用程序中发生了意外的变化。如果没有上下文，这也可能是无关紧要的，但是如果您可以将这与潜在的漏洞相关联，或者您观察到匹配的攻击信号，这就值得研究了。

开发或获取工具，帮助您筛选海量数据，将攻击信号与已知漏洞和观察到的危害迹象联系起来。然后，当一场复杂的攻击正在展开时，你就可以迅速提出你的怀疑了。

## **第四步:根据情报采取行动**

当你产生怀疑时，你需要迅速行动。这不是一部迈克尔·贝电影，七个城市街区被夷为平地，全州范围的汽车追逐在追捕罪犯的过程中留下了大屠杀的痕迹。

像城市一样，您的应用程序必须遵循云原生原则，才能具有弹性和可伸缩性。然后，如果怀疑某个服务或容器受损，您可以将其隔离，orchestrator 将根据需要启动清理实例。如果攻击信号来自内部或外部 IP 地址，请将其拦截。如果检测到 C2C 流量，对其进行防火墙；如果牵涉到一个身份验证令牌，则撤销它。

以外科手术般的精确度迅速行动，打破攻击者追踪的杀戮链。压制他们，阻止攻击进一步发展。

## 我们的抢劫电影结束了

我们都受益于安全的城市。商业繁荣。交易在没有危险的情况下进行。个人和商业数据不会被利用。

电影业将继续制作抢劫电影；我们都喜欢这些票房大片。攻击者将继续试图利用应用程序和基础设施来获利。绘制地图、观察、关联和行动，你不会发现自己成为明天网络抢劫的受害者。

![](img/f620400d3f58d723440a85aa65739860.png)

*要了解更多关于安全和其他云原生技术的信息，请考虑参加 10 月 11 日至 15 日举行的 [KubeCon+CloudNativeCon 北美 2021](https://events.linuxfoundation.org/kubecon-cloudnativecon-north-america/) 。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>