# 云错误配置:隐藏在众目睽睽之下的漏洞

> 原文：<https://thenewstack.io/cloud-misconfiguration-vulnerability-hiding-in-plain-sight/>

[](https://www.linkedin.com/in/powellronald/)

 [罗恩·鲍威尔

罗恩拥有空间物理学背景，曾作为卡西尼小组成员分析土星磁层中的等离子体。他现在在旧金山的 CircleCI 公司工作，是一名开发人员，倡导开发内容，使开发人员能够更快地构建、测试和部署他们的项目。](https://www.linkedin.com/in/powellronald/) [](https://www.linkedin.com/in/powellronald/)

在当今技术驱动的环境中，大多数公司至少有一些(如果不是全部)工作负载在云上。与内部网络不同，这些云环境缺乏安全的外围环境和特定的关闭时间。

云网络永远在线，永远可用。虽然很方便，但这也意味着黑客可以随时访问它们。因此，这些网络中的任何漏洞，比如云错误配置，都可能使您的组织面临安全威胁。

在本文中，我们研究不同类型的云错误配置以及它们发生的原因。然后，我们将探讨您的团队可以做些什么来防止错误配置，并确保您的数据和业务利益的安全。

## 什么是云错误配置？

[根据 NSA](https://media.defense.gov/2020/Jan/22/2002237484/-1/-1/0/CSI-MITIGATING-CLOUD-VULNERABILITIES_20200121.PDF) 的说法，错误配置是最常见的云安全漏洞。云错误配置通常发生在云资源没有正确构建的时候，这使得您的系统容易受到攻击。

云环境的错误配置会导致系统停机、意外停机或安全风险。原因可能包括过于复杂的环境、安全实践知识不足以及手动流程导致的人为错误。

## 云错误配置的类型

云环境和资源的错误配置可能包含各种各样的安全问题。

让我们来看看两种最常见的错误配置类型:不充分的访问控制和许可的网络访问。

### 对资源的访问控制不足

云上的默认权限通常以最小的障碍开始。这意味着在开发人员或系统管理员实施访问控制之前，每个人都可以访问任何内容。因此，记住立即设置这些控件是至关重要的。

另一种情况是，在配置应用程序时，开发人员决定将所有内容都设置为开放访问。虽然这使他们在此过程中的工作更容易，但如果他们不回去重新实施访问控制，您的系统将面临更高的数据泄漏风险。

### 许可网络访问

就像访问控制一样，当您的团队成员建立网络或新服务器时，他们可能会在配置应用程序时应用相对宽松的端口访问和路由。

关键是确保只暴露预期的面向外部的端口，从而减少资源之间的通信选项。这消除了恶意方可能使用的许多攻击媒介。

## 与云错误配置相关的风险

现在我们知道什么是错误配置了。我们为什么要关心？

云错误配置会给公司的安全性和服务客户的能力带来各种风险。根据错误配置的类型，这种风险从性能或可靠性问题到重大安全风险不等。

两个最常见的风险是敏感数据泄露和服务中断。

### 泄露敏感数据

许多访问控制错误配置会暴露敏感数据或使有价值的文件面临被盗的风险。允许攻击者从您的数据库读取数据或从云存储中检索文件会使您的公司面临企业间谍风险，暴露用户的个人信息，并使恶意行为者能够删除关键数据。

### 服务中断

如果攻击者能够访问您的网络或服务器，他们可能会中断您的服务。

这种破坏可能包括勒索软件攻击。黑客可以加密你的文件或服务器，删除资源，甚至使用你的服务器发送垃圾邮件或非法开采比特币。

此外，配置不正确的服务器、网络或容器可能会阻止在负载下正确扩展，或者阻碍从站点灾难中恢复。这可能会导致您的用户停机，并迫使您为环境支付过高的费用。

## 云错误配置是如何发生的

作为 IT 专业人员，我们不会故意错误配置资源或设置环境，以免日后导致问题。大多数错误配置是由于人为错误造成的，主要是由于诸如过于复杂的基础设施或对安全实践的理解不足等因素。

### 过于复杂的基础设施

当我们环境的复杂性增加到超出我们习惯的程度时，通常会发生人为错误。快速创建资源、添加组件或新容器，以及在可伸缩的架构中更改配置——这些都是常见的错误来源。

虽然这些措施是发展业务所必需的，但实施一套安全核对表也很重要。因为如果您的环境中没有某种形式的标准化，您可能很难确保所有组件都得到正确配置和保护。

### 对安全性理解不足

大多数开发人员和 DevOps 团队在开发和使用应用程序和基础设施时，并不优先考虑安全性。这些团队主要关注于确保服务正常工作并提供功能。

因此，在雇佣你的开发团队时，牢记安全性是关键。确保他们了解静态加密、最低权限原则和应用程序强化等重要概念。

密切关注云配置最初可能看起来很乏味，但从长远来看是值得的。

## 减少错误配置的提示

幸运的是，我们可以实施许多解决方案和流程来降低错误配置的风险，并显著降低它们发生的可能性。

下面是您的 IT 团队可以部署的工具和技术的一些示例，具体取决于您的环境和组织的性质。

### 采用变革管理实践

变更管理实践，例如定期的变更节奏和变更审查小组，可以显著减少错误配置的机会。

以标准化的方式安排、审查和实施变更，无需额外的工具即可显著降低错误配置的风险。

### 简化您的环境

与其为环境中部署的每个组件定制基础架构，不如将一些组件标准化并使用模板进行部署。

这种标准化允许团队成员快速发现不同的组件配置，并使管理整个环境变得更加简单。

### 记录一切

确保您的团队像维护任何其他关键数据集一样维护和备份环境文档和配置，以便将当前环境与预期环境进行比较。

最初，记录配置和环境可能看起来很乏味，但是从长远来看，这些额外的工作将会是有益的。这些文档将在帮助您和您的团队跟踪问题、排除故障以及帮助您确定未来该做什么方面发挥关键作用。

### 采用基础设施即代码实践

基于变更管理实践的想法，我们建议采用工具和过程来构建代码为的[基础设施。当您将基础设施定义为代码并定期检查它时，很难犯配置错误。](https://circleci.com/blog/an-intro-to-infrastructure-as-code/)

如果您采用持续交付工具来保持您的配置常青，那么防止配置漂移和回滚非预期的更改也容易得多。

### 扫描漏洞

我们还建议定期扫描您的环境，查找任何漏洞。这种扫描包括从静态和动态应用程序安全测试到扫描网络和防火墙的所有内容，以确保端口和路由保持锁定。

各种配置代码扫描器，如 Bridgecrew 和 Snyk，使您的团队能够在基础设施即代码框架中找到并修复常见的配置错误。

### 执行渗透测试

除了定期的漏洞扫描之外，针对您的环境和应用程序运行实际的渗透测试有助于发现和修复您的体系结构中的潜在弱点。

渗透测试可能非常昂贵，因为它是一项专业服务。但是进行某种形式的常规渗透测试可以确保您的应用程序尽可能健壮。

### 采用 DevSecOps 文化

在开发和部署过程中，安全性一直是事后才想到的。开发、安全和操作( [DevSecOps](https://circleci.com/blog/security-best-practices-for-ci-cd/) )文化通过将安全性集成为应用程序设计和开发的一个方面来解决这个问题。

在应用程序设计和开发团队中拥有知识丰富的安全资源有助于将安全性融入应用程序的基础。这将通过在第一时间防止问题的发生，为你省去事后解决问题的麻烦。

## 后续步骤

即使在当今辉煌的技术领域，错误配置仍然是云环境中的常见现象，会在各种规模的公司中导致系统中断和数据泄露。

您可以使用更明确、标准化的安全方法来解决各种错误配置，并将这种方法融入到您的开发过程和工具中。通过将开发实践扩展到您的基础设施管理中并增加安全焦点，您可以大大减少错误配置的影响和发生。

要了解更多关于常见安全问题以及如何预防的信息，请查看 CircleCI 的电子书“ [6 条应用安全之路](https://circleci.com/resources/6-paths-to-app-security/)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>