# 采用 CI/CD 我们收获了什么？

> 原文：<https://thenewstack.io/what-do-we-harvest-by-adopting-ci-cd/>

*Armory 一直在为一项关于持续交付的投资回报(ROI)的更大规模、更深入的研究收集意见，并希望将焦点集中在该系列的第一件作品上，不仅是为了 Ashima Purohit 的见解，也是为了庆祝国际妇女节。较大的论文将在下个月出版。*

 [Ashima Purohit

Ashima 是 FreshWorks 的工程总监，负责 Freshservice IT 服务管理门户的战略方向、愿景、增长和绩效。在 FreshWorks 之前，她从事物联网、人工智能和机器学习方面的工作。在 PayPal，她从事基于机器学习的工具的研发工作，该工具可以扫描任何数据源，并针对 PII 和 PCI 相关的信息安全违规发出警报。](https://www.linkedin.com/in/ashima-purohit-6563287/?originalSubdomain=in) 

近年来，越来越多的公司在其产品开发过程中采用持续集成和持续交付。万亿美元的错误是错误地将软件开发归类为生产问题，从某种意义上来说，能够扩大它的规模，以便能够更可靠地生产东西。

在超过 15 年的工程和开发经验中，我坚信一些基本原则和不可协商的原则是围绕着不断学习和改进，以便在不牺牲质量的情况下更快地进入市场。CI/CD 有助于实现这一目标。采用持续集成和持续交付是完全敏捷的基本实践。

随着多名开发人员一天多次提交代码，构建失败的可能性增加，需要花费时间和精力进行回溯、识别和修复。拖延的时间越长，花费的时间和精力就越多。

我想在这里强调，CI 并不能帮助消除问题，但是它可以帮助您在周期的早期识别它们，这是真正的 ROI，其中每个签入都在自动化构建中得到验证。

作为一名开发人员，我经常实践和培养的最佳实践之一是维护健壮的 CI 和 CD 管道。如果集成失败，中断的构建成为修复的最高优先级。系统质量，而不仅仅是速度，对于可持续和可伸缩的开发模型是至关重要的。

这听起来就像三个简单的步骤:推送、测试和修复。但是尽管如此简单，如果只有几个团队成员实践它，CI 可能会变得具有挑战性。因此，竞争情报需要文化的改变和管理层的支持。

为了让团队成功采用 CI/CD 并实现其 ROI，理解自动化构建依赖于代码编译是至关重要的，第一个测试之后是一系列测试。

请记住，CI 的目的是尽快提供反馈。如果一个开发者必须等一个小时才能得到反馈，那是行不通的。这就是团队可能更喜欢返回并使用长特征分支的地方。因此，单元测试和集成测试的良好平衡对于保持 CI 循环更小至关重要。自动化交付管道保证更少的错误。如果出现错误，可以很快发现错误。团队成员花在救火上的时间会更少，可以将更多精力放在工程工作上。这有助于减少辛劳，更快、更安全地增加价值，让员工更开心。

使用可靠的测试是另一个重要的方面。我向我的团队建议，对于生产中发现的每个关键或阻碍问题，创建一个测试用例，并将其包含在 CI 循环中。

建立 CI/CD 渠道不是一个“一劳永逸”的过程，也没有一成不变的正确方法。它采用一种迭代的方法，通过无缝的软件交付过程来构建期望的 CI/CD 管道。为定制 CI/CD 管道配置和布局正确的策略包括分析数据，如提交频率、提交大小、构建频率和测试周期。通常，在开发周期中有三个阶段被证明有助于确定持续集成策略:提交和构建、自动化测试和部署。让我们深入研究这些。

**提交和构建:**在 Freshworks，我们的开发人员从本地工作副本中分支出来。一旦完成了变更和代码审查，他们就将代码提交到一个共享的存储库中，该存储库将他们的代码片段与中央代码库集成在一起。CI 管道可以检测到变更，并通过提取代码触发构建权限。它将运行单元测试，将报告总结为成功或失败的构建。该报告将包括诸如单元测试覆盖率、一系列最后提交的文件、构建摘要(成功或失败)以及通知分发列表和方法(电子邮件/slack/IM/SMS)之类的细节。CI 通过在代码编写后自动执行每个步骤，在简化这个过程中扮演着重要的角色。

**自动化测试:**一旦构建成功，在类似于生产环境的环境中测试整个系统是必不可少的。正如我前面所强调的，花时间确定正确的冒烟、健全和集成测试将会得到回报，以确保在可接受的 CI 周期时间内进行质量检查。

**部署:**在最后阶段，构建好的软件被推出到生产中。提前确定部署环境和设置对我的团队总是有帮助。我们有开发环境，分为 QA 环境、生产前/准备环境，最后是生产环境。开发环境会在一天内触发多个构建。从开发到 QA 有一个每日计划部署，然后是一个计划和按需部署到试运行。CD 要求这一过程自动化，这确保了从预准备到生产部署向用户的可靠交付。

当您通过从临时/手动过渡到自动化和配置的 CD 管道而获得持续开发过程的好处时，投入所有这些努力是值得的，在以下方面:

*   **更快的发布周期和更好的业务优势:**加快构建和部署周期将加快上市速度。
*   **降低的风险和更高质量的产品:**连续交付过程的最终目标是让每一次发布对 QA 团队和客户来说都是无痛的体验。通过不断发布特性，产品中出现 bug 的风险大大降低了。
*   **更低的成本:**采用持续开发模型消除了构建和测试应用程序变更时产生的许多固定成本。例如，自动化环境供应将减少与维护几个测试床和测试基础设施相关的成本。并行测试将减少测试所需的机器数量。通过持续提交代码，团队在修复 bug 上花费的时间更少，因此花费的金钱也更少。
*   **更好的业务优势:**向持续开发模式的转移使团队能够灵活地随时做出改变，以满足新的市场趋势和用户需求。应用程序监控工具是查找和修复故障的好方法，同时还可以记录问题，以便更快地发现趋势。它还有助于了解我们从客户那里收到的反馈，以确保我们的产品满足快速变化的需求。

采用 CI/CD 是为成功做准备。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>