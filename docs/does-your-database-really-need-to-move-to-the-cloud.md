# 您的数据库真的需要迁移到云中吗？

> 原文：<https://thenewstack.io/does-your-database-really-need-to-move-to-the-cloud/>

“应用程序现代化”是不是仅仅是应用程序重构和向云平台迁移以及丢弃您当前使用的任何遗留数据库的简写？

它通常被认为是拥有传统数据库的公司(可以说是大多数公司)满足用户实时或接近实时体验的需求以及处理海量数据的唯一方法。这些经历可以是优步的即时提供，一个即时的信贷决定，或者一个让你不再为选择伴侣的礼物而痛苦的建议。

同样的动态也适用于内部数据和应用程序，用户希望在检查库存水平或获得关键公司绩效指标的高管级概览时，获得他们作为消费者所享受的实时体验。

数据和分析研究公司 SanjMo 的创始人和负责人 Sanjeev Mohan 告诉 New Stack，这背后有一个简单的等式。“数据库的性能越快，客户忠诚度和参与度就越高，”Mohan 说。“这不仅仅是查询的性能。这也是你能以多快的速度写入”——或者将数据加载到数据库中，或者插入和更新。

但随着遗留数据库受到越来越多数据的冲击，他补充道，“你的表变得非常大——然后性能可能会开始下降。”

## 艰难的时期，艰难的选择

很少有组织能够免受满足实时需求的压力。但是，并不是每个人都可以通过无缝过渡到新的云原生数据库来满足这些要求。

这可能仅仅是因为一个组织的数据无处可去；例如，法规义务可能意味着在可预见的未来，数据必须留在本地。

可能一个组织确实在考虑迁移到云，但是在迁移的后勤方面犹豫不决。或者，it 部门仔细研究了这些数字，发现它们并不完全相符，尤其是在运营需要大幅扩大的情况下。

这总是一个挑战，但是[铺天盖地的经济坏消息](https://thenewstack.io/is-a-recession-coming-heres-how-to-cut-it-costs-wisely/)无疑正在泄漏到云世界，这意味着在多年来单位性能价格似乎只是下降之后，成本正在上升。

[Ryan Powers，](https://www.linkedin.com/in/ryanpowers11/) [Redis Enterprise Cloud 的](https://redis.com/?utm_content=inline-mention)产品营销主管，告诉 The New Stack，“我认为世界将在这种混合状态中停留更长的时间，这比人们在两三年前认为的时间要长，那时资金非常便宜。”。

鲍尔斯说，对于许多 IT 领导者来说，真正的问题是，“如何在尽可能少的重构和重新架构的情况下实现现代化？”

毕竟，他指出，虽然“越来越多的应用程序需要实时运行，但事实上有很大一部分并不需要。”

## 当遗留数据库仍然是保管者时

这就是与遗留数据库一起部署的缓存层发挥作用的地方。正如 Powers 所说，“你需要一个灵活的数据层，可以作为你正在使用的任何数据库的缓冲。”

例如，Redis Enterprise 可用于缓存预取，其中应用程序读取保存在内存中的数据，而不是直接从磁盘中读取，从而加快查询速度，特别是在读取负载繁重的情况下。它还提供了后写缓存，因此应用程序处理的数据被实时写入缓存层，记录数据库的核心系统在事后异步更新。

这两种方法都有望大幅减少延迟，并改善用户体验。另一种应用方式是生成二级索引以加速对二级键的查询，当使用 MySQL 或 [Oracle 等传统数据库时，这可能非常耗时和复杂。](https://developer.oracle.com/?utm_content=inline-mention)

鲍尔斯补充说，当谈到全球规模、多云和混合用例时，重要的是要考虑如何确保数据在各地区保持一致，同时确保应用程序尽可能快地运行。Redis Enterprise 提供主动-主动地理分布，允许本地速度读写，同时确保跨区域复制一致的数据，延迟不到一毫秒。

因此，即使长期目标是全面的应用程序现代化，Powers 说，“有些地方你仍然可以使用 Oracle 或 MySQL，并与我们一起修补，在过渡期间修复它，同时进行这些过渡。”

他认为，在这些情况下，“现代化是围绕速度，围绕规模，围绕总拥有成本。”

因此，如何使您的数据库现代化的问题变得远比您是否能负担得起时间和金钱来着手一个完整的重构和平台再造项目更加微妙。

也就是说，除了缓存层的原始成本之外，这种方法还有一个财务方面，Mohan 指出:“我可以维持对我的遗留系统的投资，将它用作记录系统，但这样我就可以更快地进行检索。”

## 提高极限，不去任何地方

在缓存层旁边维护一个遗留数据库有助于控制未来的许可和基础设施成本。一旦你达到了当前安装的极限，Mohan 说，你将面临从你的传统供应商那里购买更多的许可证，并增强你的硬件来匹配的痛苦。“但有了缓存，我可以将一些工作负载转移到内存数据库中。”

那么，你什么时候知道自己已经准备好采用这种现代化方法了呢？Redis 的高级产品营销经理 John Noonan 说:[首先，你应该考虑是否存在现有关系数据库速度不够快的用例。](https://www.linkedin.com/in/j-noonan/)

努南告诉新堆栈，“如果你有用户在等待，不管他们是不是内部的，还是他们的客户”，你就会知道是这样的。

他举了一个金融行业客户的例子，该客户在实施实时支付处理时遇到了困难，因为在处理交易时需要更新大量 Oracle 表。Redis Enterprise 被插入到支付过程中以加快交易速度，在交易完成后，数据随后通过管道进入记录系统。

但这也是一个尺度的问题。努南回忆起另一个客户例子，一家公司在印度运营一个幻想体育平台，当板球比赛的球队阵容在比赛前 30 分钟发布时，就会出现巨大的使用高峰。这导致了巨大的速度下降，因为其基于 SQL 的系统无法响应。

因此，它使用 Redis Enterprise 在内存中实现了阵容发布功能，以打破这一瓶颈，一旦比赛结束，就将数据转换回他们的关系数据库。

这些正是新西兰电子商务公司 Blackpepper 看到的问题，其首席执行官 [Alain Russell](https://www.linkedin.com/in/alainrussell) 称其通过[亚马逊网络服务(AWS)使用 RDS、Elasticsearch、Redis 和 Dynamo 的“难以置信的写繁重设置”。](https://aws.amazon.com/?utm_content=inline-mention)

Russell 告诉 New Stack:“我们在高负载下遇到了扩展问题，并且在扩展 RDS 实例以处理负载时遇到了难以置信的高成本。该公司还遇到了保持数据同步的问题。

测试表明，使用 Redis Enterprise 作为主数据存储可以将公司的一些常见工作的速度提高 20 到 30 倍。它还解决了数据同步问题。“将它转移到 Redis Enterprise 简化了我们的架构，简化了我们的调试方式，并为我们提供了一个单一的数据存储，”Russell 说。

Mohan 说，最终，许多组织可能希望转向云，甚至完全抛弃他们的遗留数据基础设施。但是重新架构和现代化总是说起来容易做起来难。缓存让公司有机会扩展他们的遗留平台，至少在中期是这样。

“所以你的现代化战略是:第一步，提升并转移到云。第二步，实现一个缓存解决方案，变得对云更加友好，”Mohan 说。第三步可以是，将您的传统环境重新平台化为云原生产品

这种方法的美妙之处也许在于，你可以简单地采取第二步，并且仍然受益。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>