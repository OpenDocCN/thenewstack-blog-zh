# Jit 如何在云中构建平台工程思维

> 原文：<https://thenewstack.io/how-jit-builds-a-platform-engineering-mindset-in-the-cloud/>

平台工程是一个新兴的技术行业趋势，通常有一个团队专门负责构建和集成开发人员在云中构建和运行服务所需的任何东西，而不必成为云计算领域的专家。但是，如果一家云原生的、无服务器优先的公司采用平台工程思维和纪律，而不是一个专门的团队，会怎么样呢？

我们采访了首席技术官兼 [Jit DevSecOps](https://www.jit.io/?utm_content=inline-mention) 编排平台五位联合创始人之一的 [David Melamed](https://www.linkedin.com/in/mlmd/) ，了解他们如何从第一天起就建立了一个平台工程组织。

## 发展平台工程学科

“平台工程的目标之一是促进自助服务，以提高开发人员的速度，并使他们摆脱对人员和流程的依赖，”Melamed 说。

当云原生 Jit 诞生时，这家网络安全初创公司还没有听说过平台工程被这样命名，但从一开始，“我们就建立了自己的能力，作为构建产品的工程师工作的一部分。我们发现这是为整个团队提供足够速度的唯一方法，”他说。

Jit 完全建立在“基础设施即代码(IaS)”的基础上，这意味着“在大约一个小时内，你可以建立一个全新的环境，可以为任何开发人员或团队服务，”Melamed 告诉 New Stack。

从一开始，Jit 团队就致力于尽可能多地自动创建服务。该公司采用微服务架构，这就是为什么他们在第一项服务中添加了 CI/CD 管道。但是，在第二次服务中，CI/CD 被遗忘了。梅拉梅德说，那时他们想出了“建立一些集中的概念，这样开发者甚至不会去想它”。这也是他们为任何建立新服务的人建立中央 CI/CD 系统的时候。

然后，他们开始识别其他微服务模式，认识到对标准和指南的内在需求。

“因为这是微服务的缺点之一——如果你有很多微服务，如果你没有足够的原则、指导方针和标准，你就会有漂移，”他解释道。因此，他们构建了一个微服务生成器，以便所有服务都遵循相同的模式。然后，“因为我们有集中的 CI/CD，所以我们在如何构建服务方面有一个强大的基础，包括它们的结构和测试方式。”

Jit 成立于 2020 年 8 月，从一开始就是云原生的。内部微服务生成器的核心是一系列运行在云中的 AWS Lambda 函数，构建在无服务器框架上。对每项服务的访问都基于最低特权原则。

“我们发现了微服务之间的一系列相似之处。基于此，我们希望能够为每个服务创建一个样板文件，帮助非常容易地引导一个新服务，”他解释说。

Jit 的每个微服务都基于一个简单的 YAML 文件，该文件定义了服务的范围，包括用于监控、A/B 测试和打包的插件。每项服务都包含了 linters、单元测试和集成测试。

“所有这些服务的单一结构是我们建造这种骨架微服务生成器的原因，”Melamed 说。此外，还有一个对所有用户都可见的中央持续集成管道。"我们不需要开发人员考虑为每个存储库增加新的管道."

他们基于事件的平台包括一些简单的共享基础架构，用于从任何服务中收集指标，并将其发送到专用分析服务，该服务包括评估使用情况并监控新功能和现有功能的仪表盘。因此，任何开发人员和任何服务，只需一两行代码，就可以定义自动显示的指标。“这使得我们的开发团队对他们发布的每个特性都有非常简单的 KPI，因为他们可以非常容易地随时添加新的指标，”他说。

类似地，它们具有内置的端到端测试功能。

最后，他们为了自己的安全覆盖范围而喂自己的产品。基于开发人员自动获得快速反馈循环以了解他们在拉请求中编写的代码的安全性的原理。开发人员可以看到 PR 中引入的任何漏洞，”他说，因为 Jit 将安全性自动化到他们内部开发人员正在构建的内容中，就像它为外部用户所做的一样。

## 大门，不是护栏

Jit 与我们交谈过的其他平台工程团队的区别在于，他们没有专门的团队。相反，该公司约四分之三的员工是开发人员，他们在确定需求和困难时随时进行构建。

当然，到目前为止，这更多的是一个大门而不是护栏的情况。“如果有人想创建一个新的服务，不使用相同的编程语言，或有一些特定的需求，或不遵循相同的模式，这将是很好的，”梅拉梅德说，但他们还没有走到那座桥。他预测，微服务生成器仍然会启动一项稍微偏离这些轨道的服务，“然后，如果你想因为需要而改变一些东西，你可以这样做。目前没有强制执行这些指导方针。”

他强调说，“我们都想根据相同的原则来建造东西，但这并不是以一种严格的方式来执行的。但到目前为止还行。”

虽然 Jit 是一家云原生公司，但他们决定通过在本地环境中测试和开发服务来进一步提高速度——“以获得非常快速的反馈循环。”Melamed 继续说，他们已经投资了进行本地测试的能力，并使用类似 LocalStack 的项目在云中托管，以便为开发人员提供更快的反馈，因此没有必要部署每个代码更改。他解释说，这使他们能够在一个简单的容器中运行他们的测试环境。

“你可以让你的整个云链在一个容器内触发 AWS 内的几个服务，因为一切都是被模仿的。每个服务团队都在用非常快速的单元和集成测试构建他们自己的模拟，[这]帮助我们“模拟”与多个云服务的交互，并为我们提供快速、廉价的集成测试的良好基线，这些测试不需要真正的云通信。但你仍在对部署在云中的真实服务进行 E2E(端到端)测试。”他说。梅拉梅德强调，这提高了团队的速度，因为他们目前的四个团队(每个团队五到八人)不需要依赖于其他团队正在做什么的知识。

虽然 Jit 创始人没有意识到平台工程是一件事，但 Melamed 观察到，“我认为我们做到了，因为一旦你使用云，你知道你可以非常快速地迭代和做事情，一天部署几次。”他认为，为了实现这一点，你需要有明确的标准、原则和工程卫生，“特别是当你使用基于微服务的架构时，因为否则它可能会非常混乱，并在管理方面有很大的开销。”

有利的一面是，一旦你提前投入了平台工程工作，Melamed 说，“你真的可以在微服务上构建一个可扩展的设计产品，你可以为云构建和开发，通过消除所有真正标准的令人头痛的事情，帮助你的开发人员更快地移动。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>