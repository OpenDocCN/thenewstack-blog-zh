# 什么是微服务架构？

> 原文：<https://thenewstack.io/what-is-microservices-architecture/>

当人们谈论云原生应用程序开发时，微服务是一个热门话题，这是有道理的。

微服务架构是一种结构化的方式，用于在组织中部署一组自包含的独立服务。与过去的一些应用程序开发方法相比，它们正在改变游戏规则，允许开发团队独立工作并在云原生规模上工作。

让我们深入了解应用开发的历史、微服务的特征以及这对云原生可观察性意味着什么。

## 微服务架构与整体架构

理解微服务架构的最简单方法是将其与单片架构进行比较。

### 整体建筑

整体架构，正如前缀“mono”所暗示的，是将所有组件组合成一个可执行文件的软件。这种架构通常有三个优点:

*   **开发简单**
    *   许多开发工具支持创建整体应用程序。
*   **部署简单**
    *   将单个文件或目录部署到运行时。
*   **简单到规模化**
    *   通过在某种负载平衡器后面运行多个副本，可以轻松地扩展应用程序。

### 微服务架构

微服务都是小型的、独立的服务。优点是这些服务具有高度的可维护性和可测试性，与其他服务松散耦合，可独立部署，并由小型、高效的开发团队开发。微服务架构的一些服务类型可能包括以下示例。

*   客户端服务用于收集客户端请求，例如搜索、构建等请求。
*   **身份提供者**
    在发送到 API 网关之前，来自客户端的请求由身份提供者处理，身份提供者是一种创建、认证和管理数字身份信息的服务。
*   **API 网关**
    API(应用程序编程接口)是允许两个服务相互对话的中间系统。在微服务的情况下，API 网关就像一个入口点:它接受来自客户端的请求，从后端收集完成这些请求所需的服务，并返回正确的响应。
*   **数据库**
    在微服务中，每个微服务通常都有自己的数据库，通过一个 API 服务来更新。
*   **消息格式化**
    服务以两种方式通信:同步消息和异步消息。
*   *   同步消息用于客户端等待响应的时候。这种类型包括 REST(表述性状态传输)和 HTTP 协议。
    *   异步消息传递适用于客户端不等待服务立即响应的情况。这种类型的消息传递的常见协议包括 AMQP、STOMP 和 MQTT。
*   **静态内容**
*   **管理** 
*   **服务发现** 对于客户端和服务器端服务来说，服务发现都是一种在特定网络上定位设备和服务的工具。

整体模型更传统，当然也有一些优点，但微服务在云原生环境中越来越常见。以下是这两种模型之间最明显的区别。

## 微服务架构的优势

微服务在现代云原生业务中显示出许多成功。企业从使用这种结构中获益有很多原因。

**灵活性:**因为每个服务都是独立的，所以编程语言可以在所有微服务之间有所不同(尽管在一种现代编程语言上尽可能标准化是谨慎的)。

**更快的部署:**对于大多数开发人员来说，微服务不仅更容易理解，而且部署起来也更快。改变一个整体结构的代码中的一件事，它会影响所有的东西。微服务独立部署，不影响其他服务。

**可扩展性:**如果您通过一个应用程序运行所有的东西，那么随着应用程序的增长，很难管理大规模的服务。相反，微服务架构允许团队修改单个服务的功能，而不是重新部署整个系统。这甚至适用于应用程序中每个服务的规模。例如，如果某项支付服务的需求高于其他服务，那么该微服务可以根据需要进行扩展。

**孤立故障:**对于整体架构，一个服务中的故障会危及整个应用程序。微服务隔离每个组件，因此如果一个服务失败或出现问题，其余的应用程序仍可以运行，尽管可能处于降级状态。

最终，微服务架构节省了团队的时间，为每个服务提供了更细粒度的修改，并根据每个服务和接口的整体需求进行扩展。

## 挑战

微服务非常有用，但是它们也有自己的挑战。

**增加的复杂性和依赖性问题:**微服务的设计倾向于单个服务，但这也增加了用户数量、用户行为的多样性以及服务之间的交互。这使得从前端到后端跟踪单个流量更加困难，并可能导致服务之间的依赖性问题。当微服务如此相互独立时，管理兼容性和由不同现有版本和工作负载引起的其他影响并不总是容易的。

**测试:**对整个应用程序进行测试可能会很困难，因为每个执行的服务路径可能会有很大的差异。灵活性是微服务的一个重要元素，但在分布式部署中很难始终如一地观察到同样的多样性。

**管理通信系统:**即使服务可以很容易地相互通信，开发人员也必须管理服务通信的架构。API 在服务间可靠有效的通信中扮演着重要的角色，这需要一个 API 网关。这些网关很有帮助，但是它们可能会失败，导致依赖性问题或通信瓶颈。

**可观察性:**因为微服务是分布式的，所以监控和可观察性对于开发人员和可观察性团队来说可能是一个挑战。考虑一个监控系统或平台来帮助监督、排除故障和观察整个微服务系统是很重要的。

## 你应该采用微服务架构吗？

有时，整体结构可能是一条出路，但微服务架构的增长是有原因的。问问你自己:

### **我的应用在什么环境下工作？**

因为大多数[云原生架构](https://chronosphere.io/solutions/what-is-cloud-native-monitoring/)都是为微服务而设计的，所以如果你想获得云原生环境的全部优势，微服务是必由之路。随着应用程序转向基于云的设置，应用程序开发更青睐微服务架构，并将继续这样发展下去。

### **你的团队如何运作？**

在微服务架构中，代码库通常可以由较小的团队管理。然而，开发团队也需要工具来识别、监控和执行不同组件的活动，包括它们是否以及如何相互作用。团队还需要确定哪些服务是可重用的，这样他们就不必在构建新服务时从头开始。

### **您的应用程序有多灵活？**

如果您必须不断地修改您的应用程序或进行调整，微服务方法将是最好的，因为您可以编辑单个服务，而不是整个整体系统。

### **您有多少项服务，还会有更多吗？**

如果你有很多服务或计划继续增长——在基于云的平台中，你应该期待增长——那么微服务架构也是理想的，因为单片应用软件不能很好地扩展。

## Chronosphere 通过微服务进行扩展

微服务架构旨在使云原生环境中的应用软件开发更简单，而不是更困难。随着管理每个单独的服务所带来的挑战，团队拥有随着业务增长而扩展的[可观察性解决方案](https://chronosphere.io/solutions/)变得更加重要。

Chronosphere 专门研究云原生世界的可观察性，因此您的团队在应用程序开发的每个级别都有更好的控制、可靠的功能和灵活的可伸缩性。通过一个值得信赖且灵活的平台来监控微服务可以极大地降低风险，帮助预测故障，并使开发团队能够了解他们的数据。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>