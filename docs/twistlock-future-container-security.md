# 扭锁和集装箱安全的未来

> 原文：<https://thenewstack.io/twistlock-future-container-security/>

Twistlock 是一家新公司，旨在解决当今基于容器的应用程序开发中最大的问题之一:安全性。

随着 Docker、Kubernetes、Mesos、Diego 和 Garden 等容器平台的不断发展，明确定义通用软件策略的需求变得至关重要。正如风险投资公司 General Catalyst 的董事总经理 Steve Herrod 在本月早些时候的 AWS Re:Invent 会议上告诉 New Stack 的那样，集装箱安全是投资的热门领域。他谈到了那些从事集装箱安全工作的人正在出现的可能性。

Twistlock 是走在集装箱安全前沿的公司之一，它正在受到关注；至少有六个不同的组织正在使用扭锁来保护生产系统。

## 什么是扭锁？

最基本的，Twistlock 是一个基于规则的访问控制策略系统，用于 Docker 和 Kubernetes 容器。Twistlock 能够完全集成到 Docker 中，并具有现成可用的安全策略。

安全策略可以为用户设置条件，比如说，创建新的容器，但不能删除它们；或者，他们可以启动容器，但不允许向容器推送代码。Twistlock 具有与 Kubernetes 相同的策略管理规则，用户可以修改管理策略，但不能删除它们。

Twistlock 还处理图像扫描。用户可以扫描整个容器图像，包括任何打包的 Docker 应用程序或 Node.js 组件。Twistlock 已经在这一领域进行了尽职调查，与 [Red Hat](http://www.redhat.com/en) 和 [Mirantis](https://www.mirantis.com/) 相关联，以确保在扫描运行时没有集装箱被遗漏。

Twistlock 还处理注册中心内集装箱的图像扫描。在运行时环境中，Twistlock 有一个 Docker 代理，它与应用程序的其他容器运行在同一个服务器上。这本质上是流量过滤，然后调用 Docker 守护进程的应用程序容器通过 Twistlock 被重新路由。这种方法加强了访问控制，允许在没有容器被设置为以 root 身份运行的情况下进行更安全的配置。例如，它还能够 SSH 到一个实例中。为了深入研究这些安全层，Twistlock 在运行时强制执行该策略。

## 以更好的安全性解决棘手问题

由于 Twistlock 是一家新公司，它仍在大规模部署上测试其技术。目前，生产中最大的部署是运行数百台服务器而不出现问题。Twistlock 工程师表示，一台服务器应该能够处理 15-20，000 台服务器，但仍然需要验证这一点。

此外，Twistlock 听到了关于开发人员和 IT 安全团队需要更好地了解容器的担忧。在整个工作过程中，该公司发现人们不知道为今天基于容器的技术编写什么样的安全策略。

考虑到容器技术仍然相对较新(或者至少在不断变化)，还没有人编写过可以被普遍定义为使用容器时实施安全实践的标准的策略。Docker 提供了一套最佳实践【that Twistlock 已经对其进行了调整，以解决影响 Docker 及其平台上的容器工作人员的 60 个问题中的 58 个。容器使用的抽象层与大多数 IT 专业人员所习惯的有很大不同。组织可能有针对特定安全级别的安全策略，但是当试图重新格式化他们对基于容器的管道的需求时，他们迷失了方向。

Twistlock 定义其开箱即用的安全策略的方法从修改 Docker 最佳实践开始，缩减为可以成功编写的策略。它不是一个完整的接口，尽管它与这个概念有相似之处。人们经常说他们理解基本的容器安全概念，但是 Twistlock 的首席战略官王晨曦提出了一个问题，“客户对于面向客户的容器和后端容器是否有一个成熟的观点？他们可能会考虑配置，但不会考虑安全隔离。”

Twistlock 能够熟练地为每个用户制定政策，与客户一起定制适合其特定使用情况的集装箱安全解决方案。

## 集装箱安全向前发展

在 Twistlock 中工作的要求很大程度上基于持续集成。当在图像中编写新代码时，它将被集成到 Twistlock API 中以推送一个事件，于是新图像连同其唯一的 id 一起被存放到注册表中。然后，通过扭锁将它拉出并进行扫描，以确保它符合设定的安全策略。Twistlock 将扫描结果存放到 CI 进程中，以便开发人员可以出于调试目的查看结果。

这种扫描在运行时不会变慢，尽管 Twistlock 指出这最终可能是一个延迟问题。该公司对其服务可以使用的内存/CPU 能力进行了限制，以防止潜在的系统瓶颈。如果一台服务器达到了最大容量，Twistlock 会提醒系统管理员将容器转移到新的服务器上。

Docker 是 Twistlock 目前的重点。事实上，Twistlock 是用 Go 编写的，主要是因为该公司专注于由 Go 驱动的 Docker 生态系统。 [Pantheon](https://pantheon.io/) 在 Docker 在 Linux 上出现之前运行容器，如果 TwistLock 可以扩展到 Pantheon 的容量，该公司也将开放使用该技术，王指出。

收集准确的元数据对于 Twistlock 的发展至关重要，因为这将为 Twistlock 继续完善和推出新的开箱即用的安全策略铺平道路，以适应不同的客户使用情形。此外，它将有助于完善 Twistlock 如何允许客户设置他们自己的安全策略。

该公司继续让人们谈论 OpenStack 和 Mirantis。然而，收集元数据是一项艰巨的任务，因为有大量的来源可以利用，所有这些来源对于实施安全策略都至关重要。它们不仅用于构建广泛的漏洞资源、策略改进和访问控制，还用于在管理点实施双因素身份验证，并添加其他功能以确保容器在开发的每个阶段都是安全的。

在采用一套通用的策略规则之前，不断发展容器安全策略是必不可少的，这套规则对如何在多种用例中实施策略给出了明确的指示。这项工作对于那些在这个不断变化的技术堆栈中工作的人来说将是最紧迫的问题之一。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>