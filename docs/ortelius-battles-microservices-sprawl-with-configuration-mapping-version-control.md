# Ortelius 通过配置映射、版本控制来应对微服务蔓延

> 原文：<https://thenewstack.io/ortelius-battles-microservices-sprawl-with-configuration-mapping-version-control/>

当开发一个传统的、单一的应用程序时，版本控制是平面的和线性的。当您对代码进行更改并将其签入 git 存储库时，您构建了该应用程序的新版本，并为其赋予了新的版本号。代码更改与应用程序本身密切相关。然而，对于微服务，这些变化发生在可能是众多应用和部署的一部分的单个组件上，并且跟踪它们并不那么简单。

最初由 [DeployHub](https://www.deployhub.com/) 和 [OpenMake Software](https://www.openmakesoftware.com/) 开发的开源微服务管理平台 [Ortelius](https://ortelius.io/) 就是考虑到这个问题而创建的，本月早些时候[加入了](https://cd.foundation/blog/2020/12/08/cd-foundation-welcomes-ortelius-open-source-microservices-management-platform-as-new-incubating-project/)持续交付基金会(CDF) 作为一个孵化项目，以帮助解决持续交付管道中最明显的问题。

“当微服务出现时，我开始研究它如何破坏持续交付渠道，我意识到它破坏了最核心的步骤，即持续集成步骤，”吕斯执行董事兼 DeployHub 首席执行官特雷西·拉冈在接受采访时解释道。“这是因为一个简单的事实，即微服务是松散耦合的，它们在运行时是链接的。在开发阶段，不是将它们链接成二进制文件，而是一直等到生产阶段。实质上，这导致了微服务的复杂性。”

拉冈解释说，单个微服务的变化会产生连锁反应，这在 git 这样的版本控制系统中很难表现出来。

“微服务存在扩展问题。拉冈说:“当你考虑试图管理数百个全天独立通过连续交付管道的微服务时，我们需要比 git 多一点的东西来作为后端存储库。“git 的问题是它是扁平的，不是关系型的。例如，在 git 中很难说“我已经更新了一个微服务，现在向我展示受其影响的每个应用程序，并自动启动 CD 管道。”这就是我们正在解决的问题。"

使用 Ortelius，对微服务的更改会创建一个新版本，然后这个新版本会为使用它的每个应用程序创建一个新版本。这些不同的版本不仅渗透到这些单独的应用程序，还取决于它们的部署位置，因此不同集群上的相同应用程序具有不同的版本，因为该集群上可能有不同的微服务组合。Ortelius 提供了一个跨集群发生的事情的关系视图，使用户能够看到应用程序在哪些地方更新了新版本的微服务，在哪些地方没有更新。除了处理版本控制，拉冈说，吕斯还可以帮助解决她称之为“微服务蔓延”的问题

“很多时候，公司并不知道他们可能已经有了可以重用的微服务。当你没有办法组织和管理它们时，你不知道外面有什么，所以你自己写，这是我们多年前在面向对象编程中犯的一个大错误，”拉冈说。

吕斯最初是在 2019 年 3 月创建的，基于 OpenMake 软件的代码库，但拉冈说，直到 2020 年 6 月，在清理代码后，他们才开始真正推广它。然而现在，拉冈说该项目有 120 名成员，其中 25 名核心成员来自 12 家公司。随着加入 CDF，拉冈表示，他们期待着与其他成员项目密切合作，共同解决微服务对连续交付管道及其他方面造成的独特问题。事实上，拉冈认为吕斯在处理其他问题上也有独特的优势，比如解决部署时可能出现的问题。

“我们从用户那里听到的一个大问题是他们在部署微服务时的信心水平。他们说，微服务的问题是，他们必须部署微服务才能发现是否有问题，他们通过事件报告发现问题。我们希望在某种程度上阻止这种情况，”拉冈说。

此外，拉冈看到了 Ortelius 不仅在应用程序和部署之间，而且在公司和组织之间共享微服务的潜力，就像今天共享开源软件包一样。

“想象一下未来的某一天，当公司真正拥抱微服务，我们开始共享开源微服务。我们需要一个地方来分享和组织他们，这就是吕斯可能成为的，因为它已经有了域结构，”拉冈说。“域结构允许较高级别的域向下共享给较低级别的域。一家私营公司可以在 Ortelius 内部拥有自己的领域，并且仍然可以看到他们希望其开发人员能够以一种有组织的方式访问的所有开源项目，以及所有的部署元数据，因此每个人都不必编写自己的掌舵图，或者定义需要如何部署它，以及为此需要哪些值对。”

由[拉斐尔·比斯卡尔迪](https://unsplash.com/@les_photos_de_raph?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/sprawl?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的特写图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>