# 在生产之前保护云原生数据

> 原文：<https://thenewstack.io/protecting-cloud-native-data-well-before-production/>

[](https://twitter.com/bluefug?lang=en)

 [杰森英语

杰森是 Intellyx 的首席分析师和 CMO，他为企业如何利用技术解决方案提供商和初创公司进行数字化转型提供建议。他的供应商背景包括软件开发和测试、供应链优化、交互设计、游戏和云计算公司。](https://twitter.com/bluefug?lang=en) [](https://twitter.com/bluefug?lang=en)

花一点时间在安全展会上，或者全神贯注于关于代价高昂的勒索软件攻击和数据丢失的连续不断的坏消息，你会开始将这些迫在眉睫的事件视为不可避免的灾难。

毕竟，如果您管理的任何生产级云应用程序对客户或企业都有价值，那么它对那些可以通过威胁关闭它来获利的坏人也有价值。

虽然云供应商和组织可以通过外围安全、威胁检测和 SoC 工具来准备防御，以扫描已知的攻击媒介，但黑客会想出系统尚未处理的新方法。在黑市上，新的“零日”攻击对发明者来说价值连城。

在这种无休止的冲突中，攻击尝试的数量和方式可能是无限的，因此我们可以预计这些零日灾难中至少有一个会找到渗透我们的关键应用程序和相关数据以及支持它的生产基础架构的方法。

进入构建应用程序的新模式。云原生计算抽象出了保护网络和数据的一些挑战。Kubernetes 推出了真正分布式和可扩展的容器编排，可以将计算工作负载从数据存储中分离出来，成为看似无状态的微服务。

## 云原生应用并非真的无状态

云计算原生计算项目的前景是由成千上万的开源贡献者和供应商从业者组成的社区设想、构建和测试的，它确实在设计上带来了一些安全优势。

在传统的应用环境中，无论是在数据中心还是云中，都有一个网络边界和应用交付控制器，通过 IP 地址提供对应用和数据资源的访问。服务和存储之间不断发生读/写操作，以维护所有用户会话的状态和持久结果，备份间隔很短，因此可以避免容量限制和资本支出成本。

相比之下，云原生开发人员可以使用 Kubernetes 来启动包含短暂的、基于容器的工作负载的名称空间，这些工作负载可以立即具体化和消失，并具有可扩展以满足需求的更细粒度的计算资源。通过内存秘密的概念，可以在某种程度上独立于资源来维护状态。物理硬件和已知地址的缺乏使得攻击者很难利用许多传统的漏洞来锁定系统。

问题是:即使是云原生应用程序也需要维护会话状态，并代表其用户将事件记录到持久卷中，否则就没什么用了。随着供应链攻击的增加，保护有助于广泛分布的应用程序的每个供应商工具和开源元素变得至关重要。

最近的一项 Kubernetes 安全状况调查指出，94%的受访者报告在过去的 12 个月中他们的 Kubernetes 和容器环境中遇到过安全事件，其中超过一半的人由于配置问题而不得不推迟生产部署。在考虑动态自动化交付之前，组织需要将数据保护和数据恢复问题转移到云原生应用程序生命周期的左侧，即“第一天”。

## 准备四种安全的减一天方法

云原生计算团队可以在第二天之前实施哪些安全保护措施——零恶意软件灾难威胁生产中的数据？这里有四个:

**1。扩展动态存储和备份策略以避免成本意外—** 工程师可以运行开源工具，如 [Kubestr](https://kubestr.io/) 来确定 Kubernetes 集群可用的几十个潜在存储卷，其中许多都有独特的协议和权限设置。

编写脚本和配置数据工作负载以正确存储和备份每个卷本身就是一个既耗时又昂贵的过程。更糟糕的是，对初学者来说价格合理的存储资源可能会在几个月内呈指数级增长，尤其是在流量增加且多个团队需要不同存储资源的情况下。维护足够频繁的故障安全装置可能变得无利可图。

跨应用程序团队设置通用的备份和恢复服务级别目标可以消除针对故障和成本超支的预算中的人工劳动和猜测。

**2。使用策略代码设计恢复—** 预先假设某种攻击最终会在某处找到漏洞。然后，通过定义保护、备份和恢复策略以及体系结构来限制爆炸半径。

保护策略代码资产可以作为共享项目资产与其余基础架构代码定义一起存储在 repos 中，并作为持续交付管道的一部分交付。

使用诸如 [Kasten 的 K10](https://www.kasten.io/product/) 之类的界面，开发人员和运营团队可以透明地管理部署后策略突发事件，以存储活动用户数据、设置备份间隔并跨多个混合 IT 存储卷执行复杂的恢复和重置工作流序列，包括不可变或有空隙的故障保护备份。

**3。在任何地方运行和保护应用数据—** Kubernetes 实现了在任何地方运行的可移植性和开放性的承诺，因为每个不断增长的应用资产最终都需要扩展以覆盖多个收购的供应商平台和客户域。

基于开源的数据保护、灾难恢复和恢复功能应该跟随短暂的 Kubernetes 工作负载，无论它们走到哪里，都不会只为一种类型的基础云基础架构或交付渠道创建专有锁定。

**4。在您需要之前关注恢复时间—** 在系统故障或勒索软件攻击后快速启动和运行才是最重要的，这样收入和客户才不会在这个间隙中丢失。

企业希望实现尽可能接近零秒的 SLO，以满足恢复点目标(RPO ), RPO 衡量的是从服务中断到补救操作之间事务丢失的持续时间。更重要的是，他们需要满足恢复时间目标(RTO ),该目标衡量大规模恢复 Kubernetes 生产环境及其附带数据以便恢复运营所需的时间。

请记住，恢复时间不是独立变量。减少发现和解决问题时的人为错误和延迟时间，并采用自动化策略(如跨集群导出和导入)可以更快获得结果。

## 智能带

***失败准备失败，或准备失败。***

总的来说，提前一天的心态改变了我们对云原生架构、状态管理、数据持久性和应用弹性的看法。它建立在这样一种务实的理解上，即没有系统是绝对可靠的，人类不可避免地会在配置上犯一些错误。

为了扩大规模并在不可避免的攻击风暴和潜在故障条件下生存下来，企业需要积极主动地进行备份和恢复，而不是等待新的零日勒索病毒变种的到来。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>