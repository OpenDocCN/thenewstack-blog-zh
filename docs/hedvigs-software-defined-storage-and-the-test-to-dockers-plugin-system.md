# Hedvig 的软件定义存储和 Docker 插件系统的测试

> 原文：<https://thenewstack.io/hedvigs-software-defined-storage-and-the-test-to-dockers-plugin-system/>

Docker 插件系统将通过一个新的驱动程序插件进行测试，该插件将 ClusterHQ 首创的 Flocker 容器联网方案与一家名为 [Hedvig](https://www.commvault.com/software-defined-storage) 的新公司去年 3 月正式推出的有状态、软件定义的存储方案相结合。

新插件来自于两周前发布的相对安静的 Docker 1.8[，作为发布的一部分，开发者为 Docker 插件最终确定了一个系统，根据一些开发者的报告，该系统似乎是稳定和可管理的。](http://blog.docker.com/2015/08/docker-1-8-content-trust-toolbox-registry-orchestration/)

关于 Docker 容器化是否会最终导致基于微服务的数据中心无处不在的争论[似乎在去年六月的 DockerCon 上告一段落。无状态微服务可能会在计算中占有一席之地，这一点已经得到普遍认可。但是互操作性需要沟通，而沟通需要某种共享的上下文，这种上下文反映了共享的协议和理解。](https://thenewstack.io/dockercon-2015-what-did-we-learn-this-week/)

## 弹性存储

如果 Hedvig 还没想起来(不，它不是哈利波特的猫头鹰)，那么也许它的首席执行官应该想起来。在脸书大学时，阿维纳什·拉克什曼参与设计了卡珊德拉列索引数据库系统。在此之前，在亚马逊，他参与设计了 Dynamo，这是世界上第一个基于云的分布式存储系统。

Hedvig 的营销副总裁 Rob Whiteley 在谈到新的堆栈时表示，Lakshman“可以看到市场中一个明显的拐点，不仅这个等式所必需的商用硬件变得更便宜、更容易获得，而且客户购买它并在它的基础上部署自己的软件的欲望最终也出现了。就在五年前，只有网络巨头——亚马逊、Facebooks 和谷歌——做到了这一点。"

当它首次推出时，Hedvig 将其系统称为“平台”。它实际上更像是一个连接器，通过软件定义的路径为分布式应用提供对现有存储的整体访问，使用开发人员希望使用的任何隐喻:块、文件或对象(iSCSI、NSS、中小企业、S3、Swift)。

> “我们不希望操作系统的应用程序必须符合我们的世界观，”Whiteley 评论道。“我们希望他们能够使用存储，然后我们只希望这些存储是软件定义的、具有弹性的。”

Hedvig 的架构问题是双重的:它可以创建一种自己的统一 API，一个“巴别塔”,它可以使用自己独特的词汇连接到后端的任何类型的存储。但是，应用程序必须是专门为 Hedvig 设计的。可以说，这很好，但任何公司都很难将一个自我服务的词汇作为自己的标准。

问题的第二个方面涉及容器本身的性质。不，不像它们的标题所暗示的那样，它们不是完全独立的。然而最初的想法是让它们分离，或者至少是“松散耦合”微服务的理念是程序的组件应该只共享它们完成主要功能所需的最少数据。这意味着它们不应该被绑定到自身之外的大型数据库或存储结构。

实际上，这种理想适用于高度数学化、可重用的函数。然而，数据库是现代软件开发的事实。为执行微服务而建立的结构对于利用大量数据集的应用程序来说是理想的，这些结构是如此怪异和笨拙，以至于它们有可能使这种理想在整体上失效。

## 一卷，还是第一卷

Docker 公司的策略是实现自己的卷 API，这将阻止任何单个供应商通过实现通用访问语言来强占卷存储空间。是的，它是一种独立的语言，但因为它附加在 Docker 上，所以它适用于任何连接到后端数据的服务。像许多 Docker 开源项目一样，这是一项正在进行的工作，但它已经取得了显著的进展。

Hedvig 的策略是附加到 Docker 的卷 API 上。这样，由实现者决定是否在后端部署 Hedvig。容器可以调用卷 API，并通过 Hedvig 或那里发生的任何东西连接到数据源。开发人员将更倾向于使用 Volume API 来访问数据库或大型数据存储，Hedvig 将有机会应对更大的市场。

然而，为了让这些变得可行，必须有人实现一个可靠的连接——一种让容器可扩展并且仍然是容器的方法。这就是 ClusterHQ 的切入点。

ClusterHQ 首席执行官马克·戴维斯在谈到新堆栈时承认:“将 Docker 设计为可插拔的，以便第三方软件可以与 Docker 连接，并作为 Docker 基础架构的第一类可支持部分进行管理，这是 Docker 人心中已经有的想法。”。“然而，所发生的是弄清楚如何实现这一点，并确保它确实以一种真正可插拔的方式发生，以便第三方基础架构可以在运行时成为 Docker 本身的一部分，并表现得就像它是直接从 Docker 运来的一样。”

## 即兴曲

与通常所说的故事相反，具有相同基本目标的独立开源项目并不总是能够融合。直到 GitHub 的出现，“贡献上游”的行为才变得普遍。Docker 插件的故事可能会成为历史的例外。

正如戴维斯所说，去年 12 月，ClusterHQ 首席技术官卢克·马斯登和其他第三方参加了阿姆斯特丹 DockerCon Europe 的一次即兴会议。他们设法牵制 Docker，Inc .的首席技术官所罗门·海克斯，并恳求他的救济。他们都在为同样的目的生产自己的 API:可靠的插件。但是插件没有意义，除非有一种方法可以做到(问问 Mozilla 就知道了)。他们可以自己开发，但是为什么要把 Docker 排除在面向 Docker 的过程之外呢？

“那个临时会议变成了一个几个小时的会议，”Davis 说，“让 Docker，Inc .核心团队的几个人和业内的其他几个人围着桌子坐了几个小时，来决定什么是需求，什么必须发生？这是一个合作的过程，直到 6 月份设计、实现并发布了一个实验版本，然后是最近的[Docker] 1.8。”

> “我们确实为此做出了贡献，但 Docker 内外的许多其他人也做出了贡献。

“从我们的角度来看，”他继续说道，“我们从 Docker——包括技术方面和 Solomon 在内的所有 Docker——那里得到的合作和支持非常有帮助。这是一次卓有成效的合作，我们很高兴 Docker 与其合作伙伴一起完成了这项工作，而不是躲在角落里独自完成。”

Hedvig 的 Whiteley 将他的公司和 ClusterHQ 之间的联合解决方案描述为开源驱动程序，而不是真正的联合品牌产品。值得注意的是，Hedvig 平台不是开源的。对于 Hedvig 的现有客户群，他们中的许多人需要使用 Docker 为生产环境生成有状态的应用程序，Hedvig 现在可以建议一个不使用测试版或不完整组件的生产就绪解决方案。

> “我们不会把它作为一个客户买了就做的联合解决方案来推销，”Whiteley 说。“相反，我们只是说，如果他们认为 Hedvig 非常适合您的 Docker 环境，我们会向他们推荐这个驱动程序，并让我们的团队也参与进来，帮助协调卷。”

至少在最初，容器化似乎并没有带来充满哲理、隐喻丰富的高尚编程概念。但它是通过一种激烈的、社区驱动的合作实现的，这实际上更像是开源的更大理想。这一次，正如人们希望他能告诉奇夫·丹·乔治的那样，魔法可能已经奏效了。

Docker 是新堆栈的赞助商。

特征图片: [Keoni Cabral](https://www.flickr.com/photos/keoni101/) 的[插](https://www.flickr.com/photos/keoni101/5145003933/in/photolist-8QDuqn-4AcnWu-5SdvS4-5XXRt4-oFYW7k-4WhnX2-4yBok5-dw886E-588nep-q4CYFx-qm5g1B-56viRK-g84m4T-6Z2c9T-xxTsya-5dh2mS-bWPCe6-RzfKS-5ShESS-oEKoV8-53oaZx-8M6fR7-qkUbZ6-5Vn6L6-4YmuzV-4VJzt4-eWJ1Lb-6zk48b-q4vWWd-q4vW6L-4Xn4EN-4C6Vmu-pd3Sr7-564rjN-71hNn9-4MVDAt-dV9JYN-cPfwno-eaHGYV-eWwB8a-53nh3H-71QKAm-94pvXx-94sAbd-4EY3Eo-56A5Xm-52KQHD-pheM4G-6UxsYg-5VDfVF)在 [CC 下 2.0](https://creativecommons.org/licenses/by/2.0/) 授权。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>