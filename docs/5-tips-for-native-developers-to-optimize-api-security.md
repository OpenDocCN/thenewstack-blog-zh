# 本地开发人员优化 API 安全性的 5 个技巧

> 原文：<https://thenewstack.io/5-tips-for-native-developers-to-optimize-api-security/>

[](https://www.linkedin.com/in/proychowdhury/)

[Pratik Roychowdhury](https://www.linkedin.com/in/proychowdhury/)

[Pratik 目前负责 VMware 的 API 战略。他通过收购 Mesh7(又名 Kavach)加入 VMware，这是一家由他创建的云原生 API 安全公司。他在应用程序、API、网络和安全领域拥有 20 多年的经验。此前，他是 Juniper Networks 云软件(Contrail)业务部门的产品管理主管。在此之前，他是在线视频软件公司 MediaMelon 的产品主管。他拥有密歇根大学安阿伯分校罗斯商学院的 MBA 学位和印度理工学院的电气工程学士学位。](https://www.linkedin.com/in/proychowdhury/)

[](https://www.linkedin.com/in/proychowdhury/)[](https://www.linkedin.com/in/proychowdhury/)

如果你错过了，我们正生活在 API 不安全的时代。Gartner 预测，API 漏洞将成为 2022 年 的 [主要攻击媒介。你不需要看很远就能了解一个 API 安全漏洞如何导致针对 LinkedIn、Parler 和 Clubhouse 等组织的](https://www.gartner.com/en/webinars/4002323/api-security-protect-your-apis-from-attacks-and-data-breaches) [大规模攻击](https://securityboulevard.com/2021/11/biggest-api-security-attacks-of-2021-so-far/) 。随着 API 成为各方和应用程序之间信息交换的事实上的标准，攻击者不仅会损害 API 来窃取知名组织如 [Peloton](https://cisomag.com/pelotons-api-vulnerability-exposes-users-personal-information/) 和 [LinkedIn](https://www.securitymagazine.com/articles/95687-hacker-behind-linkedin-scraping-grabbed-700m-profiles-for-fun) 的数据，还会将其作为接管云资源的载体，以便执行恶意活动，如[【cryptojacking】攻击](https://threatpost.com/cryptomining-attack-exploits-docker-api-misconfiguration-since-2019/177299/) ，这会给受害者带来巨大的经济损失。

这是坏消息。好消息是，阻止 API 攻击是可能的——这样做不需要开发人员从头开始重新思考他们的安全方法。相反，它涉及部署正确的 API 安全保护，以便开发人员可以构建安全的云原生应用，而不必担心这些应用中的 API 安全风险。

具体来说，这里是云原生开发者在构建和部署软件时应该部署的顶级 API 安全防御。

## 1.分布式授权和认证

首先，云原生应用程序需要针对其 API 的**分布式**授权和认证控制。分布式 API 访问控制系统是这样一种系统，它使用粒度体系结构在每个服务(或每个微服务)的基础上授予对单个资源的访问权，而不是在应用程序入口验证和授权请求后就允许访问所有资源和服务。

这很重要，因为可以说 API 是云原生应用王国的关键。如果没有分布式授权和身份验证控制，任何人都可以通过前门访问您的整个环境。但是有了分布式访问控制，攻击者将很难将最初的 API 违规升级为全面攻击。

## 2.API 请求和响应处理

其次，开发人员需要知道他们的应用程序应该如何处理 API 请求，尤其是那些涉及不正确参数的请求。这一点很重要，因为攻击者可能会在 API 请求中传递不正确的参数，从而造成缓冲区溢出漏洞，甚至使应用程序崩溃。

在响应方面——特别是当响应产生错误时——开发人员必须知道 API 响应头或有效负载是否泄露了后端系统的信息，例如，攻击者可以利用这些信息来找到他们环境中的弱点或利用已知的漏洞。

这里的底线是，开发人员需要知道他们的 API 发送和接收什么，这样 API 就不会成为攻击者破坏应用程序或获取他们不应该访问的信息的途径。

## 3.敏感数据处理

虽然允许攻击者通过 API 访问未经授权的数据是有问题的，但如果这些数据被视为敏感数据，尤其危险，因为这些数据包含个人身份信息(PII)、受保护的医疗保健信息(PHI)、支付卡信息(PCI)或其他类型的数据，如果这些数据落入恶意用户之手，可能会使企业违反法规或造成重大声誉损害。

为了减轻这些风险，开发人员需要知道他们的应用程序通过 API 调用交换哪些敏感数据。在表面级别检查流量是不够的，因为这不能揭示数据包中包含哪些敏感信息。相反，开发人员必须检查单个数据包，以解析和理解 API 级别的协议(如 REST/JSON、gRPC、Kafka 或 MySQL)以及传输的敏感数据类型，而不是基于网络流量执行盲目的模式匹配。

这些信息在帮助区分标准 API 请求和处理敏感数据的 API 请求方面起着关键作用，因此容易受到数据泄露、数据主权问题和/或合规性暴露的影响。

## 4.API 出口保护

大多数攻击源自外部来源。因此，通过只检查您的入口流量来识别和阻止流入您的应用程序环境的恶意请求似乎是很自然的。

这是 API 安全性的一部分。然而，保护出口也同样重要，出口是指从应用程序流出的流量。为什么？因为出口是敏感数据从您的环境中泄漏出去的方式。它还可能允许恶意软件进入您的应用程序，因为它会与恶意的第三方站点和/或已经破坏了您的应用程序的不良行为者进行对话，以与他们的命令和控制站点进行通信。检查出口为您提供了第二道防线，防止您在入口处未能检测到的攻击，或者通过高级持续威胁(apt)和供应链攻击渗透到您的环境中的攻击。

还要记住，出口流量通常是多点的(与入口流量不同，入口流量通常只流经少数几个特定的入口点，如 API 网关)。为了最大限度地了解潜在的 API 风险，开发人员需要知道哪些流量正在离开他们的环境，以及它将去往哪些外部端点。

## 5.安全测试和左移

开发人员执行的 API 安全性测试越多，在软件开发生命周期中执行得越早，效果越好。这不仅是因为开发人员应该在进入生产环境之前努力检测 API 安全风险，还因为问题在早期被检测到时通常需要较少的精力和成本来修复。

因此，系统化、自动化的 API 安全测试应该是开发和 CI/CD 过程每个阶段的核心特征。一旦创建了 API 规范，就开始验证、林挺并对其执行静态和动态安全测试。随着您的 API 规范和代码沿着软件交付管道向下流动，继续这些测试。

## 结论:走向免手动 API 安全

以上当然不是 API 安全保护的完整列表。我们还没有触及其他考虑因素，例如记录所有 API(包括内部和外部 API)以跟踪风险所在的重要性，或者保持设置分布式(即每个服务)API 速率控制限制的能力以使攻击者更难执行 API DDoS 扇出。但是我们已经讨论了对于开发人员来说最重要的 API 安全防御是什么，以构建到他们今天的软件交付管道和部署环境中。

如果构建上面描述的 API 安全保护听起来令人生畏，请记住，这些防护可以在不接触应用程序源代码的情况下实现。相反，开发人员可以依靠 API 安全工具来实施分布式访问控制、检查 API 请求和响应、推动安全测试等等，而不管他们保护的是哪种类型的应用程序或 API 请求。

在一个 API 安全风险只会越来越严重的世界里，对于任何应用程序来说，轻松保护 API 请求的能力将变得越来越重要。智能云原生开发人员在他们的组织成为下一个 API 安全漏洞标题的主题之前，现在就通过建立强大的 API 安全保护走在了前面。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>