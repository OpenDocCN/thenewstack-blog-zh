# 备份 Kubernetes 的 5 个最佳实践

> 原文：<https://thenewstack.io/5-best-practices-to-back-up-kubernetes/>

[](https://www.linkedin.com/in/rishigaurav/)

 [高拉夫里什

高拉夫是 Veeam 在 Kasten 的产品副总裁。他处于 Kubernetes 生态系统合作伙伴关系的前沿，并且是云原生创新的频繁发言人和作者。他之前负责思科云媒体处理业务的战略和产品管理。](https://www.linkedin.com/in/rishigaurav/) [](https://www.linkedin.com/in/rishigaurav/)

备份应用程序和数据是企业 IT 部门的标准规范。虽然 Kubernetes 有助于确保应用程序服务的高可用性和可伸缩性，但这些好处并不能保护数据。这就是为什么 Kubernetes 应用程序的数据管理和备份是必不可少的，并且应该整合到您的标准操作程序中。

然而，备份 Kubernetes 应用程序需要一种独特的方法，这种方法与传统的备份解决方案有很大不同。使用 Kubernetes，应用程序被部署在集群中跨节点的多个容器中。为了备份应用程序以及数据和存储卷，您需要一个考虑到所有各种 Kubernetes 对象和配置数据的解决方案。该解决方案还必须适应高速应用开发和部署周期、DevOps“左移”理念、独特的运营商挑战、保护差距、安全要求等。

尽管考虑到这些独特的需求，备份 Kubernetes 可能看起来是一项艰巨的任务，但您可以采取一些步骤来简化这一过程。这里有五个可以遵循的最佳实践:

## 1.想想库伯内特的建筑

一个典型的 Kubernetes 应用程序由数百个组件组成——pod、服务、证书、秘密等等。任何 Kubernetes 备份解决方案必须不仅能够备份和恢复数据，而且能够备份和恢复所有这些组件。至关重要的是，该解决方案通过 API 与 Kubernetes 控制平面自动交互，这样它不仅可以发现集群上运行的 Kubernetes 应用，还可以与底层计算、网络和存储基础架构集成。

存储集成也是一个重要的考虑因素，必须包含在您的备份计划中。就像应用程序配置数据一样，Kubernetes 存储(表示为可用于应用程序容器的持久卷)包含需要保护的重要业务数据。

最后，确定备份存储的位置。您会将它保存在本地块存储上还是云中？灵活性和易用性将是任何备份数据辅助存储的重要特征。

## **2。制定恢复计划**

由于 Kubernetes 应用程序的分布式体系结构，恢复数据有许多步骤。例如，您需要验证集群依赖性，创建重新排序的数据的新 Kubernetes 视图，并确定从哪里开始恢复。然后，您需要确定备份数据源并准备目标存储。一旦计划好了所有这些，就必须更新所有组件以反映新创建的存储资源。提前制定一个详细的计划可以帮助你驾驭这个复杂的过程。幸运的是，有 Kubernetes 备份解决方案可以以自动化的方式为您做到这一点，您应该寻找一个支持此功能的解决方案。

但是一个扎实的执行计划只是开始。您还应该确保您的备份平台能够将各个步骤转换成相关的 Kubernetes API 调用。这确保了完成恢复功能所需的资源可用，并且您的云原生应用程序的所有组件都得到正确的重新部署和配置。

## **3。简化操作**

如果备份需要代码、打包或部署更改，开发人员可能会回避。他们的目标是快速开发和部署应用程序，而复杂的备份流程会阻碍他们的进度。

因此，备份应该是 API 驱动的无缝备份。确保您的解决方案具有侧重于应用程序而不是其单个组件的自动化备份策略，以及在部署新应用程序时检测和备份它们的能力。最后，确保您的备份解决方案提供简单的工作流，并使您的运营团队能够顺利地遵守任何监管和监控要求。自助服务功能是一个优势，例如那些使开发人员能够恢复应用程序或扩展其数据服务备份操作的功能。

## **4。确保安全**

与任何数据管理功能一样，安全性至关重要。执行 Kubernetes 备份时，实施身份和访问管理控制，以及基于角色的访问管理(RBAC)，以确保只有授权用户和组才能访问备份平台。这允许您控制谁可以执行任务，如监控和验证备份、执行恢复等，并允许您授予开发人员从快照恢复应用程序的权限。

您的解决方案应该集成到云提供商的认证解决方案中，而不需要任何额外的工具或 API。最后，确保您的数据是加密的—无论是传输中的还是静态的。

## **5。利用 Kubernetes 的可移植性**

为了利用 Kubernetes 的可移植性，您的备份解决方案应该能够跨各种发行版和基础架构配置执行恢复，并自动转换应用程序的备份版本以在新环境中运行。这支持广泛的用例。例如，备份应该可以跨集群、存储系统、版本以及可用性区域内的命名空间使用。重要的是，备份解决方案可以转换所有应用程序依赖关系，以与新环境兼容。

与恢复项目一样，提前计划是一个好主意，迁移计划有助于确保成功。

## kubernetes-本地备份是您的最佳选择

无论您的目标是保护您的 Kubernetes 应用程序免受数据丢失和损坏、备份用于测试和开发目的的数据、将应用程序迁移到新环境，还是支持您组织的灾难恢复计划，备份对于高效运营都是必不可少的。使用传统解决方案而不是专门为 Kubernetes 环境设计的解决方案会增加意外数据丢失和错误配置的风险，并且无法提供保护应用数据所需的细粒度、应用感知型备份和恢复功能。要在 Kubernetes 环境中遵循备份和恢复最佳实践，Kubernetes 本机备份解决方案是最佳方法。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>