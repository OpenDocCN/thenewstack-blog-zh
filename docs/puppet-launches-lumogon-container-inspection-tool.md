# Puppet 推出 Lumogon，这是一款集装箱检测工具

> 原文：<https://thenewstack.io/puppet-launches-lumogon-container-inspection-tool/>

Puppet 发布了一个开源容器检查工具，它被称为[LUMO gon](https://lumogon.com/)——该公司认为这是一个必要的工具，因为开发人员在日常实践中使用分层方法构建他们的容器映像，这种方法已经变得越来越不可预测。

“突然间，有了一种任何人都可以使用的工具，任何人都可以在它的基础上构建东西，”Puppet 高级软件工程师[加雷思·拉什格罗夫](https://twitter.com/garethr)说，“它可以内省容器中的所有信息，以及容器中的内容。”

早期的案例表明，没有什么比 Docker 容器更透明、更开放的了，因为 Docker 文件是 Docker 引擎为构建容器映像而执行的命令的简短列表。自己看容器的 Dockerfile，应该知道里面会包含什么。

Docker Inc .的官方文档建议，作为最佳实践的一部分，开发人员构建尽可能简单的 Docker 文件，这不仅是为了确保高效地构建容器，而且是为了让它暂时存活。“所谓‘短暂的’，”文档上写着，“我们的意思是它可以被停止和摧毁，一个新的可以被建立和放置，只需要最少的设置和配置。”

这是容器优雅的一部分，至少原则上是这样。在[几个月前的一篇个人博客文章](http://chris.collins.is/2017/02/24/three-docker-build-strategies/)中，Red Hat 高级自动化工程师[克里斯·柯林斯](https://www.linkedin.com/in/chriscollinsis/)展示了围绕 Dockerfiles 的持续集成方法的构建，他说，“这个过程的简单性和不干涉的方法有效地实现了自动化。”

但是所有这些都假设一个组织在其 docker 文件中使用的命令是简单明了的，并且它们的结果是预先确定的，如果不是基本上可以预测的话。

拉什格罗夫认为，在一般实践中，情况可能并非如此。

## 啊哦，是 AppOps

Lumogon 将与其在线服务[木偶云探索](https://puppet.com/blog/discovery-next-frontier)同时发布，起初是一个有限的技术预览。Rushgrove 将其描述为一种永久的数据仓库，用于存储由容器图像生成的元数据。他认为，Lumogon 的报告，加上关于存储在 Cloud Discovery 中的容器映像所包含的特定包的信息，可以使未来的管理工具(不一定是 Puppet 的更多工具)将策略应用于容器映像的生产。想象一下，一个安全系统禁止用一个已知易受攻击的包来构建图像，你就明白了。

Rushgrove 将 Lumogon 描述为满足一群他称之为“AppOps”的 IT 人员的迫切需求。在之前，这个术语[我们只使用过几次，指的是被赋予应用程序操作责任的人。他们不是开发者，所以他们不是“开发者”但是他们拥有运行这些应用程序的平台。他认为，在采用云原生方法的组织中，正是这些人员在生产阶段安排应用程序的生命周期——通常是 AppOps 而不是开发人员。](https://thenewstack.io/bridging-realities-orchestration-programmable-infrastructure/)

Rushgrove 解释说:“在组织中，在很多情况下，一些人——总是在 IT 运营团队中——最终[*宣布*，‘我们将拥有那个平台’”。“这种责任被推给了开发团队，让他们在上面运行应用程序。这并没有真正去除操作；它消除了许多传统的业务管理工作。”

正如 Rushgrove 所认为的，AppOps 人员被授权负责单个平台的操作——例如，Google 容器引擎人员或 Amazon EC2 人员——以及在这些平台上运行的所有应用程序。不止一个平台？不止一个人。正如他所描述的那样，这些个体从开发人员那里继承了容器映像所依赖的依赖关系，而这些开发人员在他们所支持的平台之间并没有如此细分。

Puppet 的 Rushgrove 继续说道:“我们有很多好的开发工具，很多人都在为构建这类应用开发好的工具。但专注于日常运行的工具却越来越少。”

他认为，这种工作职能分离的结果是，为生产构建容器映像的过程，变得与为测试构建容器映像的原始透明过程脱节。一个 AppOps 团队可能被委派了责任(或者只是默认承担)，并且该团队立即开始进行变更和调整。这些调整(不要曲解他的话)对它们正常的运行秩序至关重要。

“但这种环境下的运营与传统的企业管理是不同的，”拉什格罗夫继续说道

## 不变性的不切实际

所有这些使得 Lumogon 成为了一个容器管理工具，对于那些*是 T2 的技术人员，*是 T4 的操作人员，但是*不是开发人员。但还有一个更深层次的含义:组织中的这种文化和/或政治分歧实际上可能与容器的不变性背道而驰——图像总是构建它的过程的可预测产品，如果过程发生变化，图像应该被完全替换。***

在 Gareth Rushgrove 为我们描绘的环境中，日常工作过程不可避免地导致这样一种情况，构建文件不能直接与它自己的产品的结构或内容对话。

“这与运行时间无关，”他解释道。“理想的情况是，人们正在使用不可变的容器，这也是经常发生的情况。作为构建的一部分，人们正在运行命令来构建并非不可改变的东西……如果你获得一个 docker 文件，并在其上运行 docker build，“他解释道，“例如，如果该 docker 文件具有——许多都有——NPM 安装包或 apt-get 安装包，那么它不仅仅是安装单个包。它们有传递依赖关系。所以他们不只是说，“这就是你要安装的东西。”甚至只是从 ubuntu 上拍摄一张图片，然后说，这本身就是一百个软件包，每个都有单独的 gversions。"

Alpine Linux 包仅仅由少数几个依赖包组成。Rushgrove 说，即便如此，添加像 Python 运行时这样简单的东西，总的来说会给最终的图像大小增加比 Alpine 图像本身更多的字节。

管理工具可能无法预测任何容器引擎最终将构建的容器映像的内容。Puppet 所建议的是一种更具取证能力的容器映像管理方法，这种方法可以持续密切地监视其组成组件，并持续监控 Puppet 的新云发现服务，以获取有关这些组件的安全性和互操作性的消息。

Puppet 在周四宣布的最新季度企业 2017.2 更新中添加了这些内容。我们询问了 Puppet 新任命的首席产品官 Omri Gazitt(前 HPE 云原生业务部门的副总裁兼总经理),这一最新更新是否标志着他的目标客户群发生了转变，更像是 Rushgrove 描述的 AppOps 模式。

“今天的操作人员总是能够使用 MCollective 获得安装在他们系统上的所有软件包的列表，”Gazitt 回答说。不是最容易使用的东西。现在，它只是在一个图形用户界面。你点击它，你得到它。你搜索，你就完了。您总是能够从命令行使用 orchestrator。不总是世界上最吸引人的事情；不是最合作的，也不是最内省的。图形用户界面为此提供了一条新的途径。因此，通过减少摩擦，你也可以让更多的人加入进来。但这不一定是我们的目标；这是我们看到将要发生的事情，作为降低摩擦的结果，使用今天存在的 Puppet。”

包括 Lumogon 在内的 Puppet Enterprise 2017.2 于周四上午正式发布。该公司表示，其云发现平台的技术预览版将于本月晚些时候限量发布。其开源平台的第 5 版也准备在本月晚些时候发布。

专题图片:[大约 1895 年发生在缅甸仰光](https://www.pinterest.com/htingsuwan/asias-life-1890s/)(旧称缅甸)的木偶戏，由美国国家档案馆的菲利普·阿道夫·克里尔(Philip Adolphe Klier)拍摄。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>