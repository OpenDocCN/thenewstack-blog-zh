# 哈希公司的领事增加了第 7 层，成为一个成熟的服务网格

> 原文：<https://thenewstack.io/hashicorps-consul-adds-layer-7-to-become-a-full-fledged-service-mesh/>

Terraform、Vault、Nomad 和 Consul 等多云基础设施自动化软件背后的公司 HashiCorp 正在努力满足其他服务网格设定的期望，并同时扩大这些期望。在本周的 HashiConf 欧盟会议上，[公司推出了 Consul 1.6](https://www.hashicorp.com/blog/hashicorp-consul-1-6) 的测试版，称其为“全功能服务网格”，增加了第 7 层流量管理，以及多平台和多云服务网络功能，作为网格网关功能的一部分。

通过增加对七层 OSI 模型的应用层[第七层的支持，以实现 Consul 的管理和可观察性功能，服务网格现在可以提供 HTTP 流量路由、流量整形和对服务解析的严格控制，提供故障转移和重新路由功能。以前，Consul 运行在第 3 级和第 4 级，这意味着它不知道应用程序使用什么协议进行通信，但它不提供这一级别的粒度功能。](https://en.wikipedia.org/wiki/OSI_model)

在接受 New Stack 采访时，HashiCorp 创始人兼联合首席技术官 [Armon Dadgar](https://www.linkedin.com/in/armon-dadgar) 为 Consul 作为一个全服务网格的想法进行了辩护，解释说该产品现在满足了这些期望，同时推动了服务网格所提供的边界。

“随着网格网关和第七层功能的发布，我们现在将 Consul 视为一个全服务网格。我们之前从 Consul 那里得到的反馈是‘你能把它称为没有第七层特性的服务网格吗？’我们的观点是肯定的，因为这取决于你对服务网格的定义。对我们来说，重点更多的是在安全和网络方面，所以，从我们的角度来看，即使没有第七级意识，我们也在解决网络和安全挑战。挑战的一部分是市场对于服务网格并没有一个统一的定义。我们的回应是，好吧，如果有批评者说，如果没有 7 级功能，你就不是一个全服务网格，让我们继续添加 7 级功能，并回应这些批评。现在它是一个全方位服务的网状排序，不管你是否认为第七级是必要的。"

Consul 现在正在推动网格网关的发展，它使用 [Envoy](https://www.envoyproxy.io/) 代理构建，并且“提供简化和安全的跨集群通信，无需配置虚拟专用网络，也无需创建复杂的路由规则。”

“如果将它与现有的许多产品进行比较，无论是 Linkerd 还是 Istio，它们都是在一个集群内讨论服务，相互交流。我认为这有点有趣，但是它们已经可以在集群中互相交流了。这还不是最难的，”达德加尔说。“困难的是，他们无法在群集之外、群集之间或数据中心之间进行对话。这真的可以让您解决那些更困难棘手的网络挑战。”

Dadgar 解释说，无论是出于选择还是出于需要，公司都在走向多云，这些不同的部分需要能够以安全无缝的方式相互通信。他说，网状网关解决了其他网关无法解决的新问题。

“从高层次来看，我们试图解决的问题的使用案例实际上是网络复杂性之一。如果我在一个数据中心内有两个 Kubernetes 集群，它们如何轻松地相互通信？网状网关给了我们一个非常简单的答案。你可以为每个集群运行一个网状网关，这使我们能够无缝地在它们之间传输流量，即使它们可能不会以纯 IP 级别的方式联网，”Dadgar 说。“我可以在本地、异地或在不同的数据中心部署 Kubernetes 集群，或者我可以将其中的一部分作为 Kubernetes，另一部分作为基于虚拟机的应用程序。有数不清的排列。现实是，客户存在于这个无止境的计算世界中。这是我们看到的多云最大的挑战之一——网络。网状网关让我们大大简化了它。”

领事 1.6 目前正在测试中，预计将于今年夏天晚些时候正式发布。

[https://www.youtube.com/embed/QUTB-Jz7YFg?feature=oembed](https://www.youtube.com/embed/QUTB-Jz7YFg?feature=oembed)

视频

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>