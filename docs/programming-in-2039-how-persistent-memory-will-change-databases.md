# 2039 年的编程:持久内存将如何改变数据库

> 原文：<https://thenewstack.io/programming-in-2039-how-persistent-memory-will-change-databases/>

[](https://redis.com/)

 [凯尔·j·戴维斯，Redis 实验室技术营销经理

凯尔·j·戴维斯是 Redis 实验室的技术营销经理。Kyle 是一个热情的全栈开发人员，经常使用 Node.js 和 Redis，这在他关于这两者的长期博客系列中有所记载。此前，Kyle 在高等教育部门工作，帮助为学者和管理人员开发工具和技术。](https://redis.com/) [](https://redis.com/)

我在 1999 年开始上大学。那一年，我学了 SQL。我记得在服务器上想象我的小应用程序，一行 SQL 触发了一连串令人惊奇的事件。查询语言向磁盘控制器发出命令，磁盘控制器在磁盘上移动机械臂。磁头能够读取之前写入磁介质的数据。数据通过一根电线脉动，通过操作系统回到控制器，再回到我的软件。这一切仅仅发生在几秒钟内。

那是大约 20 年前。今年的学生将会有非常不同的经历——一切都不同了。固态硬盘取代旋转介质的微机械特性。固态硬盘是固态的；它们没有马达或致动臂，只有无声闪存。然而，再深入一点，它们仍然模拟旋转磁盘的机械部分。数据库和文件系统仍然是为旋转磁盘的世界而设计的——大多数数据库软件都是专门为在移动介质世界的机械限制内提供持久性而设计的。今天它已经相当过时了。

现在，快进到 20 年后的 2039 年。我确信我们今天所做的事情会像拨号上网一样愚蠢。我不是未来派，我是数据库专家。我思考数据，思考我们如何存储和检索数据。

随着持久存储技术在今天成为现实，应用程序正在摆脱物理介质的限制。事情开始变得模糊，因为我们对数据库*做什么*的概念需要改变。永久存储器的工作方式更像 RAM。此外，文件的概念变得不那么重要，因为文件系统(旋转磁盘时代的另一个遗迹)并不总是关闭持久数据的必要条件。

有了这些想法，没有旋转介质负担的数据库就有点不同了。以下是内存未来的高级候选名单:

*   **集群** —永久存储器将(至少在最初)比固态硬盘更贵。因此，即使是中等大小的数据，也仍然需要一个跨多台机器的数据集。这需要在能够安全提供数据持久性的最少数量的机器上发生。
*   **协议和网络的优化** —当你从一个系统中消除整类瓶颈时，像网络这样的东西就变得非常明显了。具有非常低的开销和可以异步访问的客户端与服务器之间的持久连接的协议确保了不会失去内存中数据存储的优势。
*   **高可用性** —虽然即使在基于磁盘的系统中也经常需要高可用性，但内存系统的更高吞吐量意味着即使是短暂的中断也可能意味着数十亿个请求得不到服务。

此外，2039 年编写的软件架构将会非常不同。现在，我们在以不同方式提供数据的服务之间有着非常严格的界限。您可能有一个服务于关系查询的数据库。今天，我们可以构建不总是需要关系数据的应用程序，而是依赖于既定的 NoSQL 概念。然而，只有在需要额外的性能时才这样做，通常默认使用一些关系数据库来提供持久性和丰富的数据访问。当您可以在不同的模型中提供持久内存和对单个数据进行操作的方式时，传统关系数据库的需求就被归入了一些非常特殊的用途。

## 数据存储基础随着硬件而改变

在过去的几年中，关系模型非常成功。您可以对许多问题进行推理，并将它们放入可以操作和查询的规范化表中。这非常有效，但是如果您要解决一个更简单的问题，比如说，通过主键获取一个条目，那么就必须调用同样复杂的东西——查询、表、模式等等。NoSQL，更确切地说，key/value stores 让这种方法看起来很荒谬。

> 随着我们走向未来，存储数据的基本概念将从翻转极性的铁磁材料颗粒转变为难以置信的微观硅层，可以直接寻址，并可以快速操作和读取。因为硬件在变，所以我们使用它的方式也应该变。

事实上，当考虑其他数据模型时，可以看到类似的模式。对于时间序列数据来说，这很简单，只需要一个轻量级的摄取和一个最小的模式，但是关系数据库中的时间序列数据却是累赘。图形数据尤其不适合在关系模型上实现，这在功能上破坏了任何类型的内部表互操作性，从而无法实现图形节点之间的特殊关系。

从这种沮丧中，NoSQL 世界出现了各种各样的特殊用途数据库。每一种都以自己的方式提供非常好的访问。然而，这也有其自身的挑战。每个数据库都必须由专人管理，并且在扩展、监控和保护方面具有不同的特征。此外，这些数据库不能以有意义的方式相互交流，这给依赖这些系统的应用程序带来了负担。

随着我们走向未来，存储数据的基本概念将从翻转极性的铁磁材料颗粒转变为难以置信的微观硅层，可以直接寻址，并可以快速操作和读取。因为硬件在变，所以我们使用它的方式也应该变。

随着数据库接近 DRAM 的 CPU 寻址能力，而数据在断电的情况下仍然保留，很明显，20 年后我们的应用程序将认为数据是近的和快的，更类似于程序中的变量，而不是远处的数据库。

数据以最方便、最具性能的模型出现，然后，数据库本身可以感知这些数据，并自动操作这些数据，以及对这些数据执行操作。数据会改变模型，可以替换原始形式，也可以与之共存。应用程序可以在需要时立即检索新数据，而不必在单个关系模型上进行操作。人们不再担心如何扩展一个专门的数据库，而是在最基本的层面上操作数据。尽管如此，您仍然需要解决传统的集群、协议优化和高可用性问题，但是数据库层内部数据的处理局部性和可扩展性已经消除了一类问题。

2039 年，我不知道我们是否会使用喷气背包。然而，我很确定我们不会以 1999 年版本的我所熟悉的方式使用数据库或编写应用程序。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>