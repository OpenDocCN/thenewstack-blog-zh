# 安全性差异:容器、无服务器和虚拟机

> 原文：<https://thenewstack.io/security-differences-containers-vs-serverless-vs-virtual-machines/>

[](https://www.paloaltonetworks.com/prisma/cloud)

[Vince Power](https://www.paloaltonetworks.com/prisma/cloud)

[Vince 是 Twistlock 的客座博主，专注于云的采用和使用基于开源技术的技术实现。他在核心计算和网络(IaaS)、身份和访问管理(IAM)、应用平台(PaaS)和持续交付方面拥有丰富的经验。](https://www.paloaltonetworks.com/prisma/cloud)

[](https://www.paloaltonetworks.com/prisma/cloud)[](https://www.paloaltonetworks.com/prisma/cloud)

就在 30 多年前，虚拟化只适用于那些拥有大型机和大型小型机的用户，而安全问题则纯粹是物理问题。二十年前，VMware 发布了它的第一款产品，网络边界安全还处于起步阶段，依赖于防火墙。12 年前 AWS 上线，[网络安全](https://thenewstack.io/category/security/)成为关注点。五年前，由于 Docker，容器成为主流，主机安全性成为焦点。如今，随着无服务器安全性的增长，应用程序级安全性终于受到了计算和网络层多年来一直存在的全面审查。

随着应用、计算和网络安全都被审计，通过 SOC type 2 等报告，管理层和客户对安全问题的了解都有所增加。随着对客户透明度的提高，安全专业人员成为确保部署到生产环境中的资产具有可靠安全特征的关键。根据所使用的部署类型，这个概要文件的大小可能会急剧增加。

这就是为什么理解不同类型的新兴部署技术(即容器、无服务器计算和虚拟机)之间的安全差异非常重要。下面，我们比较了它们在以下方面的安全性:

## 无服务器安全性

首先，让我们解决 [无服务器安全性](https://www.twistlock.com/2018/07/31/security-risks-serverless/) ，因为无服务器应用通常是执行单一功能的纯代码，因此得名“功能即服务”。您部署的实际平台对无服务器应用程序中最常见的安全问题漠不关心。

除了遵循安全编码最佳实践之外，比如只返回处理请求绝对需要的数据，并让应用程序使用只具有允许它完成工作所需的访问权限的服务帐户，任何发现的漏洞都会导致数据泄露，这可能远远超出无服务器应用程序的范围，从而导致公开噩梦。

另一个主要关注的领域是应用程序中包含的任何第三方库，以提供增强的功能并节省开发团队的开发时间。第三方库的例子包括从用于验证电话号码或邮政编码的库到客户端库，如 JDBC 驱动程序，它们需要连接到外部 PostgreSQL 数据库。如果不使用能够自我更新和定期扫描您构建的工件的扫描工具，那么持续保持在组织内使用的所有第三方库的顶部并观察所有各种漏洞公告列表将是一项巨大的人工工作。

## 集装箱安全

因为本质上，无服务器应用程序通常在后台的容器中运行，所以容器具有与无服务器相同的关注点，以及围绕容器为开发人员提供的附加功能的新关注点是有意义的。

特定于容器的安全问题可以归结为两个不同的方面:部署所基于的容器的来源的可信度，以及容器对主机操作系统的访问级别。

在任何主机上运行容器时，无论是 Windows 还是 Linux，都不应该以 root 或管理员权限运行容器。使用像名称空间和卷这样的特性而不是原始磁盘访问，允许这些容器守护进程在一个或多个容器之间共享持久数据的存储，而不需要容器本身具有升级的权限。甚至还有一些项目，比如谷歌的 [gVisor](https://github.com/google/gvisor) ，它们更进一步，隐藏了除了容器需要运行的确切系统调用之外的所有调用。

容器更大的问题是构建容器的层的可信度。有多种方法可以解决这个问题。它们包括指向一个你已经测试过并确信的特定版本，而不是依赖于最新的标签。您还可以扩大无服务器应用程序中第三方库的扫描范围，以扫描整个容器中的已知漏洞。这种扫描可以提前在源注册表中执行，也可以在构建过程中使用它们作为构建的基础。

## 虚拟机安全性

虚拟机是另一个需要解决的问题。有一些书籍和最佳实践指南可以追溯到几十年前，介绍如何保护操作系统的安全。美国国家标准与技术研究所(NIST)维护着一系列针对应用程序和操作系统安全性的清单。这些是合理的安全配置文件，但它们总是可以改进的。

改善它们的一个方法是将运行的服务限制在绝对需要的范围内。例如，默认的 HTTP 服务器很适合查看日志，但是当您的应用程序在 Java 中运行，并且有产品可以通过 SSH 连接并集中整合日志时，它是必需的吗？

另一种选择是在补丁发布后尽快应用补丁。一些补丁每月发布一次。还有微软的“ [补丁周二](https://en.wikipedia.org/wiki/Patch_Tuesday) ”，而其他更关键的补丁在有补丁可用的当天发布(这些被称为带外补丁)。与容器和无服务器不同，在完整的虚拟机上需要应用任何给定补丁的几率要高得多，因为需要和安装的包要多得多。

## 结论

通过了解您和您的开发团队部署应用程序的计算环境的类型，您就有了应用所有安全最佳实践的最佳机会。理想情况下，您的产品组合中的每个应用程序都可以而且将会被评估，并且您将被鼓励使用最合适和最简化的可用部署选项。通过将更多的应用程序转移到容器中，并在适当的地方使用无服务器，这将使类似生产的安全实践能够在开发周期的更早阶段得到实施，并将最终改善您的整体安全状况。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>