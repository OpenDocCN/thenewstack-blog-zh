# 推动持续交付的必要文化演进

> 原文：<https://thenewstack.io/the-necessary-cultural-evolution-driving-continuous-delivery/>

CloudBees 赞助了这篇文章。

随着持续交付——也称为持续集成和持续部署或 CI/CD——成为数字组织中加速软件交付的操作方式，我们看到一些公司将投入大量资金来安装 CI/CD 工具和流程，结果却看到员工流动率上升和生产率停滞。这是因为人民没有被包括在这个变化中。

今天，我们将讨论在启动持续交付之前、期间和之后，您需要与您的员工、您的团队和您的整个组织一起拥抱哪种文化。

### CI/CD 首先必须是一种沟通的文化变革

[汞合金洞察](https://amalgaminsights.com/product/market-landscape-the-2020-guide-to-continuous-integration-and-continuous-delivery-process-projects-and-products/)的研究员 Tom Petrocelli 告诉新的堆栈:“推动文化变革需求的并不是真正的建筑问题。是业务需求……更快地满足市场需求。”

> “在开始研究技术之前，你必须改变文化。我绝对不接受你采用技术并改变文化的想法。这项技术失败了，因为组织没有准备好。”— Tom Petrocelli，汞合金洞察

如果 DevOps 只是一个跨越孤岛的多功能团队，你首先必须破坏文化。

“人们喜欢筒仓，因为它告诉他们在做什么，他们是谁，它给他们安慰，给他们力量，”帕特塞利说。“很多权力结构是为了让人们继续做他们已经在做的事情。”

他继续说，新技术带来了潜在的威胁，有人可能会失去工作。你需要以一种描述价值的方式慢慢推出这些文化变化。特别强调他们当前职位的价值。

DevOps 在理论上是一个很棒的想法，也是一个很硬的现实。Petrocelli 说，许多公司推出了 CI/CD 渠道，并表示他们正在进行 DevOps。

“不，你不是。你在做自动化，”他说。“当团队不工作，没有什么是真正协调的，那是因为你没有开发运维，没有文化，只有自动化。”

部分问题在于 DevOps 和 CI/CD 过于自上而下的强制。而且，正如 Petrocelli 所说，接受这个想法的利益相关者通常是股东，而不是员工。

当然，每个员工利益相关者都有不同的看法。开发人员倾向于很快接受 CI/CD 和 DevOps，因为他们可以更加独立地更快地为客户服务。

Petrocelli 说，如果你能告诉运营部门，拥有协调的团队意味着他们可以更快地解决问题，并且他们不会熬夜找出问题所在，你就更有可能让他们参与进来。

最重要的是，他说要确保不同的跨职能团队坐在一起，互相学习。

### 连续交付的技术性能

[戴夫·法利](https://twitter.com/davefarley77)与杰兹·亨布尔合著了一本书，这本书让连续交付流行起来，《T2》连续交付这本书的主题——也是 Farley 十年后仍然坚持的主题——是持续交付——CI/CD 和所需的文化和过程的结合——是真正的工程驱动的软件方法。

> “持续交付是指建立机制和文化，让我们能够更具实验性地工作，以便我们能够更有效地学习。”—戴夫·法利，持续交付

他告诉 New Stack，在软件开发历史的大部分时间里，当我们应该应用科学和数学原理时，我们一直在应用生产线思维——以瀑布项目管理的形式。

“我们一直试图解决的问题是，作为一个物种，我们做的几乎所有其他事情都是在制造一种物理事物。设计是重要的，但我如何生产-倪泽，在过程中的可理解性和可重复性，”法利说。

他对比说“软件开发从来不是这样的。我们从来没有生产问题。我们的问题总是探索和设计。”

Farley 说，这种误解的存在是因为大多数软件开发没有像工程学科一样被对待。他说这是基于猜测:

*   我们猜测建筑
*   我们猜测可伸缩性和弹性意味着什么
*   在投入生产之前，我们猜测我们的软件是否有缺陷

他说软件开发的目标是不断优化学习和探索。他指出科学方法是一种少猜测多测量的方法:

1.  表征——看着问题，试着弄清楚你在观察什么
2.  假设——探索将描述
3.  设计一个实验——验证或证伪假设
4.  实验并观察结果

Farley 提供了自动化测试的例子。有了这些，我们可以衡量软件的性能和弹性。

他解释说，“为了进行实验，你要控制变量——你要自动完成我们系统的所有配置和部署——这样我们就能消除所有类型的故障。然后我们进行优化，使其快速高效地获得高质量的反馈。”

这为 CI/CD 团队提供了一个试验平台。然后，企业可以实施这些想法，并在市场上进行试验。

> “连续交付是一种技术方法。我们将所有的苦差事自动化，并运用人类的创造力来提出聪明的想法。”—戴夫·法利，持续交付

这就是法利所说的技术性能。他对持续交付的定义还包括文化和组织绩效。

### 持续交付中的文化表演

按照 Scrum 的建议，CI/CD 也需要小团队——五到九个人——所以，正如 Farley 所说，你有非常接近想法的人。这些小型的跨职能团队需要对他们共享的代码片段有一个整体的理解，并且需要可靠的、可视化的交流，以便能够处理代码。

Farley 说这是通过测试驱动开发(TDD)、结对编程和结对轮换来实现的。他说，在他工作过的最成功的组织中，人们总是在白板前争论不休。

他谨慎地将这些团队描述为“在解决问题的方式上受过智力训练”，并不断重复:

*   这是一个有趣的想法，我们如何测试呢？
*   我们会用什么样的实验来验证或者失败呢？

这与许多组织形成对比，在这些组织中，薪酬最高的人负责猜测解决方案。在 CI/CD 中，你试图摆脱猜测，进入探索和发现。

“在我觉得我们做得最好的团队中，我们实现了精英思想。想法的个人所有权减少了。无论是谁想出了这个主意，任何人都可以测试它，”法利说。“在外人看来，这似乎是一种好辩的文化，但我团队中资历最浅的成员可能会质疑我的想法。”

法利说，持续交付的文化表现来自集体所有权和责任。没有人对某个特性的发布、跟踪或修复负责。整个团队都有责任。

这非常符合敏捷软件开发的自组织原则。

Farley 说，这也只能通过真正跨职能的 DevOps 团队来实现，这些团队保留了在生产中设计、构建、测试、部署和管理其软件的能力。

他说结对轮换对所有这些团队来说都是必不可少的。这是结对编程敏捷实践的一个分支，在结对编程中，两个开发人员坐在一台计算机上的一个工作站上工作，交换编写和审查代码的角色。结对轮换看到这些结对不断变化，因此所有团队成员之间的同理心和协作都得到了培养——即使是那些最初相处不好的成员。如果一个特性延续到第二天，一个开发人员会退出，另一个会加入。

“在一个给定的 sprint 中，每个人都与其他人一起工作，每个人都致力于将在 sprint 结束时发布的功能，”Farley 说。

他继续说，这个过程可以让队友学得更快。

> “结对轮换建立了团队文化。团队会更加了解彼此，更加信任彼此。你会了解优势和劣势。”—戴夫·法利，持续交付。

### 持续交付中的组织绩效

现在这两者听起来都很好，但是如果没有自上而下的认同，这种文化或技术变革都不可能发生。你如何组织团队给他们自主权？

法利说，“在一个完美的组织中，任何给定的需求都会有一个自然的团队——分解你的组织，这样人们就可以做工作而不必要求东西。没有开销、会议和协调活动。”

他说，这不一定要求采用微服务，但微服务肯定是最受欢迎的方法，可以带来自治的跨职能团队。

Farley 说，你仍然可以通过共享代码库实现持续交付。你只是对团队进行功能分解，而不是技术分解。你应该围绕用户的观点来驱动开发，而不是像数据库团队和用户界面团队这样的技术团队，就像购物车团队和播放列表团队一样。

法利警告说，沿着技术边界解散团队意味着你将总是在开会。通过围绕用例来划分团队，你可以自由地评估事情是否在你的团队的领域内工作。

### 护栏不是无政府状态

当我们谈论 DevOps 和 CI/CD 组织中的自治团队时，应该澄清的是，最好的成功来自于独立工作的团队，但是在组织和行业的边界内。在与金融或医疗合规性相关的受监管行业中，这非常简单。事实上，新一代工具已经发布，可以自动执行大量的安全性和合规性实施、检测和响应。

但是这在常规组织中是如何工作的呢？CircleCI 首席执行官 Jim Rose 告诉新堆栈，公司发现他们在工具选择上走得太远了。在相对快速地从具有一个标准框架和数据库的大型平台转移之后，在现代微服务架构内协调我的服务与您的服务的过程又增加了决策制定的开销并减慢了流程——“因为我们谁也不知道对方在做什么。”

罗斯说，他现在正在目睹公司制定网飞著名的所谓的[护栏，而不是大门](https://www.slideshare.net/jason_chan/from-gates-to-guardrails-alternate)。

“团队开始处理这种情况的方式是通过我们所说的团队背板——他们建立所有的标准和工具以及所有其他人使用的所有模板，”他解释道。

这是由谷歌的工程生产力团队和 Shopify 的开发者加速团队完成的。他们将工具选择整合到一个包中，该包易于开发人员使用，并且简化了与整个系统的集成过程。

Rose 说，当团队开始使用 CI/CD 时，他们会看到生产力的爆发，但当你有 18 种不同软件和数据库的 7 个不同版本异步工作时，生产力就会下降。

他表示，这推动了二次整合。

“我们在一些真正先进的客户身上看到的最佳实践。他们实际上创造的是在你开始时实例化你需要的整个工具链，”Rose 说。

对于他的客户来说，这包括一个共享的代码库，一个规定所有规则的 CircleCI 管道，以及一个云中的地方，在那里他们可以使用所有必要的密钥和秘密来运行他们的服务。

Rose 表示，“随着开发人员越来越倾向于云计算，他们离计算和基础设施越来越远，他们希望担心他们的应用程序，而不是 Kubernetes 基础。”

通过尽早设置这些防护栏，他们可以在几分钟内获得 CI/CD 管道的各个部分。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>