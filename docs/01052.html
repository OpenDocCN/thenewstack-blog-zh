<html>
<head>
<title>Teridion's Processes and Architecture for Migrating Across Cloud Providers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Teridion跨云提供商迁移的流程和架构</h1>
<blockquote>原文：<a href="https://thenewstack.io/teridion-cloud-architecture/#0001-01-01">https://thenewstack.io/teridion-cloud-architecture/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">随着应用程序、服务和现在的网络向云迁移，一个关键问题是可移植性——一家公司，无论是SaaS公司还是其他公司，从一家云运营商迁移到另一家云运营商的能力。事实上，451研究报告称，根据他们的<a href="https://451research.com/services/price-indexing-benchmarking/cloud-price-index" class="ext-link" rel="external ">云价格指数</a>，一个“多云”策略可以节省高达74%的成本。</p>
<div class="profileContainer"><section class="special"><div class="profileInfo"><p class="name translated">多伦·萨梅尔森</p><p class="content translated">Doron Samelson是DevOps的联合创始人和副总裁，负责客户成功和Teridion部署。他为公司带来了软件平台管理和云计算公司的丰富经验。</p></div></section></div>
<p class="translated">现在，公司已经习惯了公共云和混合云，下一个合乎逻辑的问题是如何跨多个运营商部署，以最佳地利用他们的足迹、功能和价格。关键是实现允许这种方法的过程和架构。</p>
<p class="translated">一个例子是<a href="https://www.teridion.com/" target="_blank" rel="noopener noreferrer external " class="ext-link"> Teridion的</a>全球云网络(GCN)，部署在十几个云运营商之间，而不必每次都重新发明轮子。它依赖于管理系统、抽象层和API，在启动和分解服务时引入了一种通用语言。例如，如果在操作符“B”中请求服务“A”和参数“C”，那么在操作符“D”中对应的术语是什么？此外，在决定使用哪个运算符时，可以使用什么标准？在进入技术细节之前，简要回顾一下Teridion架构会有所帮助。<br/></p><div class="profileContainer"><section class="special"><div class="profileInfo"><p class="name translated">戴夫·金斯伯格</p><p class="content translated">Dave Ginsburg是首席营销官，为Teridion带来了25年以上的经验，涵盖企业和产品营销、产品管理、数字营销和营销自动化。之前的角色包括Pluribus、Extreme、Riverstone、Nortel和Cisco。</p></div></section></div>
<p class="translated">我们的Teridion GCN由三个主要部分组成:</p>
<ul>
<li class="translated"><strong> Teridion测量代理(TMA)</strong>运行在云运营商内的虚拟机上，用于确定运营商主干网或其他云运营商的延迟。这些TMA是本报告的收集点。</li>
<li class="translated"><strong> Teridion云虚拟路由器(TCR)</strong>根据吞吐量、延迟或地理位置在互联网上创建覆盖路径，以优化给定客户的动态内容。</li>
<li class="translated"><strong>Teridion管理系统(TMS) </strong>从TMAs收集数据以描绘互联网性能的实时视图，并为云运营商维护API以按需并基于客户要求创建或销毁TCR。</li>
</ul>
<p class="translated"><a href="https://thenewstack.io/wp-content/uploads/2015/12/E7D0ADBA-88E5-4A0E-8990-5682E7CA55F6.png" class="local-link"><img decoding="async" loading="lazy" class="aligncenter wp-image-857954 size-full" src="../Images/cd27e118eab5874204c63d690bcf7872.png" alt="E7D0ADBA-88E5-4A0E-8990-5682E7CA55F6" data-id="857954" data-original-src="https://thenewstack.io/wp-content/uploads/2015/12/E7D0ADBA-88E5-4A0E-8990-5682E7CA55F6.png"/>T2】</a></p>
<p class="translated">上图描述了该系统。位于云中的TMS在每个主要云运营商的每个区域加速TMA。这些TMA不断收集性能数据，包括通过iPerf的吞吐量和通过建立TCP连接的延迟，并将这些数据发送给TMS。</p>
<p class="translated">任何已经存在的TCR通过嵌入式TMA做同样的事情。TMS使用所有这些数据来构建互联网性能图。TMS使用相同的数据来部署TCR，云运营商也是如此。客户流量沿着最佳路径通过这些TCR发送，TCR还用于生成链路吞吐量数据。这里有两个关键操作:</p>
<ul>
<li class="translated">确定TCR部署的云运营商——时间和地点。</li>
<li class="translated">有效地连接到云运营商。</li>
</ul>
<p class="translated">更多关于特里迪翁GCN建筑的详细信息请点击<a href="http://107.170.240.244/wp-content/uploads/2015/11/rethinking_network_performance_oct2015.pdf" class="ext-link" rel="external ">这里</a>。</p>
<h2 class="translated">云运营商选择</h2>
<p class="translated">如上所述，TMS开发了互联网云运营商绩效的实时视图。我们的客户可能会根据吞吐量、延迟甚至是偏好或避开某些地理位置来选择虚拟覆盖网络。因此，TMS利用这一点和定价为给定客户选择最佳云运营商，这可能因地区和日期/时间而异。例如，我们的一个客户在四个不同的运营商中平均部署了500多个TCR。在部署TCRs之后，TMS建立从一个到另一个的覆盖路径，并且还可以创建用于弹性的备用路径。</p>
<h2 class="translated">云操作员界面</h2>
<p class="translated">TMS能够通过一个API来实现这一点，该API包含了每个操作者所必需的钩子。它需要既灵活又能够实现极高的性能。看待我们的控制平面(TMS)和数据转发平面(TCRs)之间的这种抽象的一种方式是使用数据中心交换机或路由器的类比。在大多数情况下，供应商的网络操作系统并不局限于单个芯片系列，而是实现了一个抽象层。我们刚刚将这一点扩展到了云，其中TMS是云网络操作系统，TCR是云运营商内部的虚拟路由器，是交换元素。<br/></p>
<div id="crayon-642311d84645d748301550" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<pre><span class="crayon-s">"targetTMAPort"</span>:<span class="crayon-h"> </span><span class="crayon-cn">80</span>,
<span class="crayon-s">"tcrBilling"</span>:<span class="crayon-h"> </span><span class="crayon-s">"hourly"</span>,
<span class="crayon-s">"networkName"</span>:<span class="crayon-h"> </span><span class="crayon-s">"devopsday-net"</span>,
<span class="crayon-s">"customerName"</span>:<span class="crayon-h"> </span><span class="crayon-s">"DevOpsDay"</span>,
<span class="crayon-s">"customerId"</span>:<span class="crayon-h"> </span><span class="crayon-s">"a4c064d604364c8e866ff164f3e83267"</span>,
<span class="crayon-s">"tcrPackage"</span>:<span class="crayon-h"> </span><span class="crayon-s">"/tcr/TCR-1.0.116-1.x86_64.rpm"</span>,
<span class="crayon-s">"regions"</span>:<span class="crayon-h"> </span>[
{
<span class="crayon-s">"regionName"</span>:<span class="crayon-h"> </span><span class="crayon-s">"Japan"</span>,
<span class="crayon-s">"geoRegions"</span>:<span class="crayon-h"> </span>[
<span class="crayon-s">"JP"</span>
],
<span class="crayon-s">"nearDcs"</span>:<span class="crayon-h"> </span>[
<span class="crayon-s">"SoftLayer-tok02"</span>,
<span class="crayon-s">"Amazon-ap-northeast-1"</span>
</pre>
</div>
</div>

<p/>

<p class="translated">我们设计TMS的方式确保了高性能。对于给定的区域和子区域，TMS维护潜在云运营商的列表。一旦它选择了一个给定的操作员，它就发出一个部署命令来启动TCR。请注意，在创建TMA之前，可能已经发生了相同的过程。对于这两种情况，我们使用TMA/TCR映像实现了一个下载服务器，并且在Teridion GCN上，不同的TCR可以运行不同的软件版本。</p>
<p class="translated">TMA和TCR基于Kafka向TMS排队/记录引擎报告。这是来自网络节点的所有数据的漏斗。从那里，数据被分流到两个方向。TMS通过图形数据库Neo4j构建了GCN的实时视图。同时，我们将性能数据转发给Elasticsearch进行分析、Kibana可视化和ElasticHQ进行集群监控和管理。这是我们确定互联网状态和最佳路径的地方。可以实时向Kibana查询这些数据。</p>
<div id="attachment_858297" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/12/AC683D6C-2165-47B3-95DE-49B45DE2371B.png" class="local-link"><img aria-describedby="caption-attachment-858297" decoding="async" loading="lazy" class="wp-image-858297 size-full" src="../Images/f50d9e6accf64b7f5f1e08d1d02015b5.png" alt="AC683D6C-2165-47B3-95DE-49B45DE2371B" data-id="858297" data-original-src="https://thenewstack.io/wp-content/uploads/2015/12/AC683D6C-2165-47B3-95DE-49B45DE2371B.png"/></a><p id="caption-attachment-858297" class="wp-caption-text translated">Teridion全球云网络架构</p></div>
<div id="attachment_857953" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/12/0EFE1892-9A65-440A-BAB5-199BC8236C88.png" class="local-link"><img aria-describedby="caption-attachment-857953" decoding="async" loading="lazy" class="wp-image-857953 size-full" src="../Images/25668c2419596618314c4994ffa4d962.png" alt="0EFE1892-9A65-440A-BAB5-199BC8236C88" data-id="857953" data-original-src="https://thenewstack.io/wp-content/uploads/2015/12/0EFE1892-9A65-440A-BAB5-199BC8236C88.png"/></a><p id="caption-attachment-857953" class="wp-caption-text translated">从英国基巴纳到英国、美国和澳大利亚不同运营商的延迟图示例</p></div>
<div id="attachment_857952" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/12/AF716A35-1A0C-41D5-842F-6F87CF342FA8.png" class="local-link"><img aria-describedby="caption-attachment-857952" decoding="async" loading="lazy" class="wp-image-857952 size-full" src="../Images/af9ef719c9a077b1a53aafda532d9303.png" alt="AF716A35-1A0C-41D5-842F-6F87CF342FA8" data-id="857952" data-original-src="https://thenewstack.io/wp-content/uploads/2015/12/AF716A35-1A0C-41D5-842F-6F87CF342FA8.png"/></a><p id="caption-attachment-857952" class="wp-caption-text translated">从EMEA的Kibana运营商到新加坡的3家运营商的延迟图示例</p></div>
<p class="translated">来自我们的分析和图形引擎的汇总数据由用户门户呈现，提供了每个客户的视图。我们还实现了一个REST API，用户可以通过它设计自己的UI。</p>
<div id="attachment_855215" class="wp-caption aligncenter"><a href="https://thenewstack.io/wp-content/uploads/2015/12/image03.png" class="local-link"><img aria-describedby="caption-attachment-855215" decoding="async" loading="lazy" class="wp-image-855215 size-large" src="../Images/0f1afd29440879dd3c151b5ac0d84cbb.png" alt="image03" data-id="855215" data-original-src="https://thenewstack.io/wp-content/uploads/2015/12/image03-1024x390.png"/></a><p id="caption-attachment-855215" class="wp-caption-text translated">客户休息API摘录</p></div>
<h2 class="translated">结论</h2>
<p class="translated">对于希望在计算、存储、网络或这三者的任意组合方面利用多个云运营商的组织来说，上述架构可以作为一个蓝图。关键的不仅是文档化的API，还有后端智能，它可以决定使用哪个操作符，最好是以自动化的方式。</p>
<p class="attribution translated">Teridion是新堆栈的赞助商。</p>
<p class="attribution translated">专题图片:<a href="https://www.flickr.com/photos/ambroo/" target="_blank" rel="noopener noreferrer external " class="ext-link"> Broo_am(安迪B) </a>的《<a href="https://www.flickr.com/photos/ambroo/8617918965/in/photolist-e8x64K-r8YiPP-9b9XxF-7ayPmy-dCXBBy-7FPSdN-cGABLo-e9hnCw-7amoJP-6TaU4X-6ShJVa-k9UyrV-f8oPXX-etf1xm-9kdq1M-akaqKe-dNMxem-hPRjc6-8HZWG-9nLj2i-owmXGB-5yfenV-ax4evK-7xAUaQ-pm5sac-bo4db7-cYTjFu-qHyQKc-4zit57-69tf1j-5ftxDG-4vAm4z-atMkQ3-9A7aib-eSgAoy-eWToA7-9YqkHJ-bs6db6-t5Wjwe-BekwS1-rhh8y1-tc8V1Q-az4Err-A6Am71-7teNNA-pfmcRF-5B7g8b-dojCPq-dJLSyb-8Z8ptT" target="_blank" rel="noopener noreferrer external " class="ext-link">高飞者</a>》在<a href="https://creativecommons.org/licenses/by-nd/2.0/" target="_blank" rel="noopener noreferrer external " class="ext-link"> CC BY-ND 2.0 </a>下授权。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>


</div>
</div>    
</body>
</html>