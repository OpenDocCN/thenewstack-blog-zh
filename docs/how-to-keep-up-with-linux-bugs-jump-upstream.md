# 如何跟上 Linux 的 bug？往上游跳！

> 原文：<https://thenewstack.io/how-to-keep-up-with-linux-bugs-jump-upstream/>

在最近谷歌安全博客上的一篇博文中，谷歌内核安全工程师 T2·凯斯·库克以“Linux 内核安全做得对”为题，为那些依赖于 Linux 但没有为上游 Linux 内核做出贡献的组织写了一份呼吁书。

在这篇文章中，库克认为，这些组织中的许多都陷入了一个似乎永无止境的循环中，试图跟上最新的更新，经常旋转他们的轮子，并花费精力来修复他们自己的 Linux 内核分支中的问题。当试图在保持与所有最新更新同步，或者仅仅更新最“重要”的更新之间找到平衡时，困难就来了。库克指出，这里的部分问题是，即使是[稳定内核版本](http://kroah.com/log/blog/2018/02/05/linux-kernel-release-model/)，它只提供“错误修复”，每个版本每周包含近 100 个新的修复。因此，许多组织发现自己在特定的分支上越来越落伍，创建自己的修补程序。

他说，相比之下，他们的时间更应该花在开发上游 Linux 上，采取“上游优先”的方法，并保持他们的 Linux 本地版本最新。用他的话说，“下游冗余可以转移到更大的上游协作中。”库克提供了 Chrome 操作系统和安卓系统作为这种方法的例子，谷歌成功避免了重复的“内部”工作。

库克在接受 New Stack 采访时说，这篇文章的灵感部分来自于他在谷歌的时候，在那里，处理 Linux 内核的方法因团队而异，导致了这种重复工作。一个团队可能会埋头于他们的内核分支中的某个特定特性，直到他们对它感到满意，最后另一个团队才会注意到，并询问如何获得它。因为两个团队可能在完全不同的版本上操作，所以必须花费精力将其从一个版本移植到另一个版本。

“这造成了所有这些多余的工作，而最初是针对上游内核开发的，突然每个人都可以使用它，所有其他团队，所有其他相关人员，”库克说。

库克说，问题的另一部分是，公司发现自己有一点技术债务，因为目前为止落后于最新的 Linux 内核，但他认为这是一次性的努力，以使一切保持最新。

“当你开始一项新的产品或服务时，看起来真的很容易，只是拿起一把叉子，在角落里工作，你会想，‘是的，我会及时了解需要修复的重要内容’，然后一年后，你就会发现成千上万的错误。因此，随着时间的推移，这种影响会迅速放大，”库克解释道。

虽然有些人认为技术债务对于一些组织来说太大了，以至于他们放弃他们的分支并转移到 Linux stable，但是 Cook 认为这种转移可能看起来违反直觉，但是它最终实际上是有益的。

“走出技术债务洞的方法是在最新的内核上启动你的新产品，然后你遇到的问题将很快告诉你需要什么来赶上旧产品，因为你会发现什么需要测试，什么用例真正重要，以及类似的事情，”他说。“当你从过去的方式开始尝试进入新的内核时，这一点就不那么清楚了。”

在他的博客文章中，库克说他们“最保守的估计”认为 Linux 内核及其工具链需要“至少 100 名工程师”，所以他在这里的部分努力是说服公司，他们的上游优先参与 Linux 内核首先对他们有利，而且还有帮助整个社区的额外好处。库克说，公司提高速度的另一个方法是测试。

“每个组织都需要一个更新内核的过程。关键是要让它的速度至少能跟上稳定的内核更新，因为这样你就能从其他人的工作中受益，”库克说。“如果你在上游内核上工作，你正在对当前内核进行测试，并发送那些测试结果，那些开发人员会立即得到反馈。然后这些 bug 实际上永远不会成为内核的发布版本。作为一个社区，这是我们能做到的最好的地方。要实现这一目标当然需要努力，但我认为，最终实现这一目标比用非常非常旧的软件勉强跟上要容易得多。”

如果这些都不能说服你，库克提出了进一步的观点——如果你开发了某件事的解决方案，你就可以决定(通常)它是如何工作的，而不是依赖其他人和他们的兴趣。

“还有比这更好的吗？”库克问道。“你为什么要拿一些你必须塑造和重新安排的东西，而这些东西并不完全符合你的需求呢？我认为提醒发展机构是重要的。如果你看不到你需要的东西，你可以自己创造它，向其他人展示它的重要性，并努力去实现它。我认为，人们理解他们可以选择拥有这个机构，这是一种巨大的力量。”

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>