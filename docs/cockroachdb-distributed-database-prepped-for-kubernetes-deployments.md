# CockroachDB 分布式数据库为 Kubernetes 部署做好了准备

> 原文：<https://thenewstack.io/cockroachdb-distributed-database-prepped-for-kubernetes-deployments/>

CockroachDB 云原生分布式 SQL 数据库可能会出现在您附近的 Kubernetes 集群中。最近发布的 20.2 版本为 Kubernetes 打包了数据库系统，带有一个定制的 Kubernetes 操作符，用蟑螂实验室的话来说，它是“唯一一个从头开始构建的数据库，以提供 Kubernetes 的核心分布式原则。”

这个最新版本还提供了空间数据特性、更强的 Java 和 Ruby 支持，以及总体性能的提升。

CockroachDB 带来了一个云原生的基础，它是一切的基础，与[谷歌扳手数据库](https://cloud.google.com/spanner)背后的想法一样，它与谷歌 Kubernetes 的祖先 Borg 一起出现，蟑螂实验室[吉姆·沃克](https://www.linkedin.com/in/jwwalker/)的产品营销副总裁。

“很少有哪种数据库是为分布式而构建的。分布式系统和试图在这种协调的分布式环境中部署遗留数据库的人们之间存在着某种阻抗不匹配。沃克说:“遗产不是为这个世界建造的。“当您有多个节点时，事务变得非常复杂，它们不是为扩展而构建的，顺便说一下，pod 是短暂的，所以它们需要能够自动幸存下来。”

Walker 解释说，即使是分布式数据库，也可能不是“直接为像 Kubernetes 这样的 pods 和编排环境构建的”,并且对于那些希望以这种方式使用它的人来说，呈现出很高的复杂性。他将此作为新 Kubernetes 操作符的背景，该操作符旨在简化部署配置并在生产中实现无停机滚动升级，并解释说该操作符实现了额外的功能，而不仅仅是安装数据库的能力。

“大多数数据库需要建立一个操作符，因为它们并不直接适合 Kubernetes。传统的遗留数据库需要弄清楚如何使用证书进行实际部署。我如何管理状态？我如何从节点故障中幸存下来？如果我正在运行 mySQL，而一个 shard 死了，我该如何找回它？这很难做到，人们通常需要做运营商来建立弹性和规模的核心能力，”沃克说。“实际上，我们不需要那个。我们与 Kubernetes 一起自然扩展。我们的运营商正在帮助进行部署和一些安全配置，帮助确定集群的规模，或者帮助管理集群。”

与此同时，根据该公司的一份声明，开源版本 cocroach db 增加了地理空间数据类型和库，使其成为“第一个包含这些功能的云原生分布式数据库”，沃克表示，这与 cocroach db 本身的地理分布式性质一起，应该提供了创新的潜力。

“空间数据是独一无二的。这不是简单的事情，”他说，并指出他们已经重新设计和重建了 Go 中的所有内容以做出改变。

至于性能，该公司表示，最新版本的 TPC-C 基准性能比去年提高了 40%，现在可以处理多达 14 万个仓库，最大吞吐量为每分钟 170 万次交易(tpmC)。

CockroachDB 20.2 的其他新特性包括一个名为 Pebble 的新存储引擎、日志记录的安全性改进、基于角色的访问控制(RBAC)和证书管理，以及对众多 Java 和 Ruby 工具的支持，Walker 强调物化视图是一个值得注意的特性，它提供了一种加快特定查询的方法。这一最新版本还将以前为企业版保留的一些基本的分布式备份和恢复功能带到了 CockroachDB Core，这是 cocroach db 的免费开源版本。

蟑螂实验室是新堆栈的赞助商。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>