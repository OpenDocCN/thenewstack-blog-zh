# Kubernetes 的“禁止”清单

> 原文：<https://thenewstack.io/a-no-bs-checklist-for-kubernetes/>

如果你是 Kubernetes 的新手，并且被要求为你的企业研究一个供应商支持的平台，你可能会感到不知所措。你会遇到一个看似永无止境的供应商名单，所有承诺或多或少相同。

为了帮助您在这个领域导航并向供应商提出正确的问题，我们创建了这个无 BS Kubernetes 清单。清单中包含了面向未来的 Kubernetes 战略的所有必备要素。

## 企业 Kubernetes 必备

 [奥列格·楚尼欣

Kublr 的 CTO Oleg 拥有 20 年的软件架构和开发经验，负责定义 Kublr 的技术战略和标准。在加入 Kublr 之前，Oleg 是 EastBanc Technologies 的首席软件架构师和技术合作伙伴。](https://www.linkedin.com/in/olegch/) 

*   **基础设施管理**

默认情况下，Kubernetes 不能提供基础设施，因此如果一个节点崩溃，Kubernetes 就没有办法提供新的基础设施。Kubernetes 所能做的就是在可用的节点内重组 pod。然而，如果没有足够的可用基础设施资源，Kubernetes 无法保证自我修复。这里有一个小秘密:市场上的大多数解决方案(尚未)管理基础架构，或者仅在选定的环境中提供基础架构。

几乎每个平台都承诺自我修复。然而，您需要在三个不同的层面上进行自我修复:(1)基础设施:取决于上面提到的基础设施管理能力；(2) Kubernetes 组件:这是您必须验证以检查这一点的内容；以及(3)应用层:由 Kubernetes 通过自愈 pod 默认提供。对于真正可靠的应用程序，您需要在所有层进行自我修复。

*   **多集群支持和集中管理**

虽然早期的 Kubernetes 采用方法可能包括一个或几个静态集群，但不断增长的运营规模和成熟的 DevOps 实践要求将 Kubernetes 集群视为牛，而不是宠物。大多数组织必须同时运行多个集群，根据需要创建和销毁它们，并为其开发团队提供自助服务。如果单独管理每个集群，这种情况很快就会变得难以管理。

*   **多环境支持**

随着云和软件变得越来越复杂，在哪里托管应用将越来越影响系统性能。[根据 451 Research](https://mediacenter.ibm.com/media/1_rs0qe7qy) 的调查，超过一半的企业已经选择混合云和多云作为其理想的 IT 架构，大约 63%的企业正在使用两种或更多种云。这就是为什么您需要跨环境工作的解决方案。

*   **对可靠性和灾难恢复的多站点支持**

大型企业不会在一个数据中心、区域或云中运行其任务关键型应用程序。它们分布在不同的站点，以确保可靠性和灾难恢复。如果是这种情况，您的平台必须支持多站点部署，并且能够跨多个站点协调自动故障转移和恢复过程。

*   **集中记录和监控**

集中日志记录和监控是 Ops 和 DevOps 团队快速识别和修复基础架构、Kubernetes 和应用程序问题的关键。它提供了一个完整的画面，而不是许多分散的视图。趋势和相关性更容易发现，有助于尽早采取预防或纠正措施。此外，infosec 需要一个用于安全和审计的所有遥测技术的集中图。

Kubernetes 本身具有很强的安全特性，但是要寻找一个能够将这些特性连接到您的企业系统的提供商。这不仅应该包括集群和容器安全特性(如 TLS、秘密和证书轮换和管理、AAA 和身份管理等)。)，而且能够与 IdM 企业(SAML、OIDC、LDAP)和 Kubernetes 的 RBAC 集成。

*   **第 2 天运营的完全自动化**

该解决方案应该处理集群上的所有管理任务。恢复、还原、更新、升级等。如果不是自动化的，就要由您来做，这会很快耗尽您的资源和预算。

开源的一个主要好处是它是开放和灵活的，允许用户根据市场需求进行调整。然而，我们正在看到一种新的“固执己见的开源”产品，它把你束缚住了。有些将您与特定的基础设施或技术栈联系在一起，有些则修改原始的开源技术。尽管后者可能是开源的，但它们是特定于该供应商的，不受社区支持。确保您的平台不会将您束缚于特定的技术堆栈或基础架构，从而影响您的灵活性。

虽然关于利用供应商支持的 Kubernetes 平台的整个想法是一切都是预先配置的，但是一旦您进入更高级的用例，您将需要覆盖参数的能力。由于 Kubernetes 是一个复杂的多组件系统，配置灵活性可能会有所不同，例如，data science 集群配置将不同于无状态应用程序或微服务的配置。根本没有放之四海而皆准的方法。确保您有权访问主节点和工作节点组件配置，包括交换机、资源请求和限制、操作系统级配置等。

一旦您的 Kubernetes 和容器相关的用例成熟，一些团队成员将更喜欢通过命令行(CLI)工作。CLI 和 API 支持复杂的自动化和集成场景，包括将 Kubernetes 集群操作集成到 CI/CD 管道中、扩展、平衡、故障转移和恢复场景等。

*   **智能监控和报警**

Kubernetes 和容器化的应用程序生成大量原始数据，您必须对这些数据进行翻译，以了解您的集群正在发生什么。早期发现和干预对预防灾害至关重要。如果你不能破译 Kubernetes 告诉你什么，你有一个问题。通过整合自动化智能监控和警报，您将从有关状态、错误、事件和警告的关键信息中受益，从而使您的团队获得采取行动所需的洞察力。

*   **支持多个 Kubernetes 版本**

企业中任何有意义的 Kubernetes 部署都将包含多个集群和环境，无论是开发、生产、试运行、QA 环境，还是由组织内不同部门和组或不同应用程序使用的环境和集群。期望它们都保持相同的配置和补丁/Kubernetes 版本级别是不可行的，因此企业 Kubernetes 解决方案必须能够同时支持多个 Kubernetes 版本和配置。

*   **支持 Kubernetes 升级和更新**

Kubernetes 平台由整个堆栈组成。仅 Kubernetes 每年就有四个主要版本。其他项目都有自己的版本。如何处理更新和升级？停机时间呢？请注意，虽然一些供应商声称支持升级，但是如果您深入了解，您会发现他们需要停机时间(有时是很长的时间)来重新初始化集群。

最后，随着您的组织开始获得 Kubernetes 技能，拥有一个能够提供 24/7 支持和培训的供应商以确保您的 Kubernetes 之旅顺利进行是非常重要的。

## 美好的未来

*   **适合初学者的用户友好界面**

用户友好的用户界面对刚接触 Kubernetes 的企业尤其有益。它们通过提供方便的下拉菜单简化了大部分部署，使得几乎不可能创建有故障的集群。这将允许您的组织在您开始构建内部专业知识时快速采用 Kubernetes。

*   **与 Kubernetes“Essentials”的集成**

有许多组件不是 Kubernetes 的一部分，但对于 Kubernetes 用户实现任何有意义的目标都是必不可少的。其中包括容器覆盖网络提供商、入口控制器、Kubernetes autoscaler、云原生存储系统、不同类型卷的持久卷供应器、GPU 集成等组件和框架。

显然，当迁移到基于 Kubernetes 的面向未来的架构时，企业需要考虑多个方面。不幸的是，并不是所有的企业在研究他们的选择时都完全理解他们的需求。如果你考虑到 Kubernetes 和 cloud native 对大多数人来说是多么新，这并不奇怪。

无论您选择 Kublr 的企业级平台还是其他替代平台，我们都希望这份列表能帮助您在生态系统中导航，找到满足您需求的合适平台。

*要了解更多关于集装箱化基础设施和云原生技术的信息，请参加阿姆斯特丹的 [KubeCon + CloudNativeCon EU](https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/) 。*

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>