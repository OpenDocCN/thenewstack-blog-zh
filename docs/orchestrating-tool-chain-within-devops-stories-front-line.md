# 编制 DevOps 工具链:来自前线的故事

> 原文：<https://thenewstack.io/orchestrating-tool-chain-within-devops-stories-front-line/>

[](https://automic.com/)

 [罗恩·吉德龙，Automic

罗恩·吉德龙是 Automic Software 的发布自动化产品营销总监。在过去的 14 年里，他在初创公司和大型企业中担任产品营销、产品管理和售前职位。Ron 的激情在于软件、用户和市场趋势的交集。](https://automic.com/) [](https://automic.com/)

如今，走进任何一个 IT 部门，谈论的话题都是敏捷性，即更快地为企业提供创新、高质量的服务。然后再快一点。

> 随着 IT 部门采用 DevOps，基于任务的 IT 自动化开始出现裂缝，并显示出其局限性

自动化正在引领这个敏捷的新时代。它将以前的手动任务机械化，以便更快、更可靠地完成它们。 [DevOps](/category/devops/) 是其中固有的一部分。越来越多的组织正在采用融合了开发人员、操作人员和质量保证测试人员的文化实践的方法，以便加速交付和减少错误。

这是“但是”

随着 IT 部门采用 DevOps，基于任务的 IT 自动化开始出现问题，并显示出其局限性。当任务自动化涉及一个领域中的几个步骤时，它是理想的，然而，一旦团队移动到那个领域或影响之外，自动化就不再工作了。

这就是编排的用武之地。DevOps 编排将 IT 中基于任务的概念和流程与更大的业务联系起来，使用自动化来交付 IT 服务。编排和自动化有什么区别？自动化是重复执行单个任务(例如部署服务器)或完成任务的不同步骤的理想选择。编排将这些独立的自动化任务放入一个驱动连续交付的工作流中。编排平台不会取代自动化，它只是将现有的东西带入一个内聚的平台。

流程编排是一种成熟的方法，世界各地的组织都在使用它来自动化发布并巩固其数字化转型战略。这里是最近两个使用 DevOps 编排的例子。第一个反映了 DevOps 编排在基于云的现代基础设施和全新技术体系中的使用。第二个是不同的:复杂的遗留基础设施中的 DevOps 编排。两者都提出了非常不同的挑战。

## TASC:在云中协调发布

道达尔行政服务公司( [TASC](https://www.tasconline.com/) )是美国最大的第三方员工福利行政服务独立提供商，拥有 60，000 名客户和 8，000 名现场代表。

在 MyTASC 网站上，TASC 的基于网络的应用程序和系统应用程序通常有 40，000 名活跃用户，高峰时在线用户多达 100，000 人。直到最近，每两到三个月就会有代码发布到公司的 Java 平台上，这显然不够快。大约有六个人参与计划和执行每个版本，系统必须离线。

Jenkins 最初是为了帮助自动化部署而推出的，但跨多个节点部署的复杂性，加上对可扩展性和更高敏捷性的需求，促使 TASC 采用了一种发布自动化解决方案——在这种情况下是来自 Automic。这消除了关闭系统并从早期测试到生产使用相同部署模型的需要，从而提高了质量。

这种编排模式的结果是什么？部署时间从长达 10 小时的停机时间缩短到 45 分钟的交付周期，没有任何中断。只需要两名员工来管理发布，客户可以立即使用新功能。

这只是开始。

TASC 现在正在协调其部署管道，与 [Sonatype Nexus Maven](http://www.sonatype.org/nexus/) 和 [Subversion](https://subversion.apache.org/) 集成，通过基于 JBoss 的开发、QA、试运行和生产环境推广其应用。web 界面为用户提供了提交请求和跟踪部署进度的网关。

团队现在可以为每个目标环境提供服务器、这些服务器的组件、数据刷新和特定代码发布，例如，以一致和可重复的方式。现在，业务分析师、项目经理和 QA 工程师访问门户网站，选择他们想要的内容，然后按一下按钮，他们就可以在一个小时内以适当的构建和配置级别调配一个完整的环境。

这一成功激励 TASC 将所有东西——从开发和测试到 QA 和登台平台——都迁移到亚马逊 EC2 云。这带来了巨大的成本节约，不需要未使用的内部计算资源和无限的可用容量。

TASC 已经在自动开发和部署下一代 Java 和 Docker 应用程序，并将其创建为微服务。DevOps 编排使公司能够灵活地在其交付渠道中引入和替换单个组件。目前，该公司正在从 subversion 过渡到 git，并扩展其管道以协调 [Spring Cloud](http://projects.spring.io/spring-cloud/) 配置管理、使用 [Nginx](https://nginx.org/en/) 的服务发现以及使用 [Kibana](https://www.elastic.co/products/kibana) 的日志管理。

## 克服 Siebel 的复杂性，实现敏捷和连续的部署

自动化和 DevOps 编排的第二个例子是不同的。与 TASC 基于云的现代技术体系不同，一家匿名的荷兰电信公司背负着复杂的传统基础设施。这是一个完全不同的挑战。

咨询机构 [Accenture](https://www.accenture.com/) 最近与荷兰的一家大型电信提供商合作，使用 Automic 的 DevOps 流程编排和自动化来实现 Oracle Siebel 部署的自动化。目标是最大限度地提高使用 Siebel 的呼叫中心系统的可用性，同时减少新版本投入生产的实施时间。

然而， [Oracle Siebel](http://www.oracle.com/us/products/applications/siebel/overview/index.html) 版本是复杂的。执行一口井是困难的。提取数据库、迁移 Siebel Repository Files (SRF)存储库、部署非存储库项目以及管理所有计划内和计划外停机是一项艰巨的任务。部署很容易花费数天时间，并且很少更新，因为企业承受不起任何停机时间。

传统的部署方法涉及大量的手动干预:例如，管理员手动改进 XML 文件，并且需要在文件传输期间停止 Siebel Web 和应用程序服务器。这导致了错误、部署期间环境链的有限可用性、合规性降低(因为很难区分谁在何时做了什么),以及环境管理方法阻止了开发运维的使用。

Accenture 使用的发布自动化解决方案为电信公司提供了自动化部署框架，环境团队使用该框架来执行部署请求。现在，相同的产品包以相同的方式部署到每个环境中，QA 团队在运营团队部署时不再无所事事，重复性工作大幅减少。结果是革命性的:

*   整个部署工作流程(一个 ADM 请求、DDL、SFR、导入存储库)过去需要 197 分钟，现在只需要 137 分钟(提高了 30%)；
*   过去需要 99 分钟的部署工作流程(一个 ADM 请求)现在只需要 17 分钟(提高了 82%)；
*   部署 100 个 ADM 请求所需的时间从 58 分钟减少到了 5 分钟(提高了 91%)；
*   生产停机时间从八小时减少到不到一小时(减少了 87%)。

最终，该电信公司能够在几分钟内交付 Siebel 更新，减少计划内和计划外停机时间，并为最复杂的环境部署正确的工件和配置设置。

## 把这些都画在一起

DevOps 编排能够让 IT 更快地响应业务需求。自动化是 IT 的第一步——编排是下一步，因为它将继续发展并建立在成功的基础上。自动化工具可以独立存在，但是如果没有自动化来驱动任务和事件，编排就无法存在。虽然它们是独立的工具，在一个组织中有不同的角色和功能，但在编排等式中它们是连在一起的。

由 [Breno Machado](https://unsplash.com/photos/in9-n0JwgZ0?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的特写图片。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>