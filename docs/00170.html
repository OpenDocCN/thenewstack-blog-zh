<html>
<head>
<title>What's in the New Apple Swift Developer Release</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新的苹果Swift开发者版本中有什么</h1>
<blockquote>原文：<a href="https://thenewstack.io/whats-in-the-new-apple-swift-developer-release/#0001-01-01">https://thenewstack.io/whats-in-the-new-apple-swift-developer-release/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">2014年，苹果发布了一种新的编程语言<a href="https://developer.apple.com/swift/" class="ext-link" rel="external "> Swift </a>。当时，Swift还不太完整，尽管发布了1.1版本，但仍有关于性能问题的<a title="link to " href="http://www.reddit.com/r/swift/comments/2g7dpy/does_swift_have_performance_issues/" class="ext-link" rel="external ">报告</a>，特别是在调试模式或非优化代码中。任何新软件的1.0版本总会有缺陷，但苹果公司总体上做得很好，值得称赞。</p>
<h2 class="translated">Swift 1.2发布</h2>
<p class="translated">2015年2月下旬，苹果推出了Swift 1.2，作为苹果iOS 8.3测试版的一部分，供注册iOS开发者测试。苹果的政策是在开发版本中不断发布测试版，以便让开发者提前了解未来的功能和变化。在几个测试版之后，他们将推出一个主要版本，新的完整版Xcode通常会同步到新的iPhone/iPad版本、新的iOS版本或像Apple Watch这样的新工具，将于4月份推出iOS 8.2。</p>
<h2 class="translated">那么这个开发者版本有什么新内容呢？</h2>
<p class="translated">性能。尽管如果启用的话，编译的时间会长一点。有一个新的构建设置叫做整体模块优化(见下文),可以一起优化目标中的所有文件。此外，编译器现在知道增量编译，现在应该只重新编译已经改变的文件。</p>
<p class="translated"><a href="https://thenewstack.io/wp-content/uploads/2015/03/wholeModule1.png" class="local-link"> <img decoding="async" loading="lazy" class="aligncenter wp-image-271702 size-full" src="../Images/04b26b66e34936502be8693149329531.png" alt="Xcode settings for Whole Module" data-original-src="https://thenewstack.io/wp-content/uploads/2015/03/wholeModule1.png"/> </a></p>
<p class="translated">与nil合并运算符结合使用的不可空变量类型的选项"？?"如果变量为零，允许您指定一个默认值，这从一开始就存在于Swift中。在Swift 1.2中，“？?"这给表达带来了好的影响。在Xcode操场上试试下面的代码。它在Swift 1.1下无法编译，但在1.2下可以正常工作:<br/></p>
<div id="crayon-64231093b1929958627157" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code translated">(A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A(A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A) (A？)(我)(们)(都)(没)(想)(到)(这)(些)(事)(,)(我)(们)(都)(不)(想)(到)(这)(里)(去)(了)(,)(我)(们)(还)(没)(想)(到)(这)(些)(事)(,)(我)(们)(就)(没)(想)(到)(了)(。)(这)(就)(是)(我)(们)(的)(一)(个)(情)(况)(,)(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(有)(些)(情)(况)(。？<span class="crayon-h"/><span class="crayon-cn"/><span class="crayon-h"/><span class="crayon-sy">&amp;)(我)(们)(都)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(,)(我)(们)(还)(不)(知)(道)(。(一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (一) (二) (一) (一) (一) (一) (一) (一) (一) (二) (一) (一) (一) (一) (一) (二) (一) (一) (一) (二) (一) (一) (一) (一) (一) (二) (一) (一) (一) (二) (一) (一) (一) (一) (一) (二) (一) (一) (一) (一) (二) (一) (一) (一) (一) (二) (一) (一) (一</span></td>
</tr>
</table>
</div>
</div>

<p class="translated"><br/>第一次打印输出99999，第二次输出6。OR ||右边稍显混乱的表达式表示，如果“a”为零，则默认为“0”然后，如果a &gt; 0或b &gt; 0，打印可选的“a”的展开值。零合并运算符"？?"从“a可选”中展开值，但是print(a)没有，所以它需要print(a！)来显式解包。</p>
<h2 class="translated">转换工具</h2>
<p class="translated">如果您有大量Swift 1.0/1.1代码，您可能希望运行Swift转换工具以升级到Swift 1.2。在“编辑”菜单上查找“转换”，在子菜单上查找“至最新Swift”。这可能需要几分钟时间，具体取决于有多少文件。</p>
<p class="translated">下面我在苹果Adventure App上试了一下，是Swift 1.0出来的。在转换之前，它有103个编译错误。转换后，它仍然有26个，所以它不是完美的，但它纠正了其中的75%。</p>
<div id="attachment_271703" class="wp-caption alignnone"><a href="https://thenewstack.io/wp-content/uploads/2015/03/adventurefailure1.png" class="local-link"><img aria-describedby="caption-attachment-271703" decoding="async" loading="lazy" class="wp-image-271703 size-full" src="../Images/43937bc93e30ff9db6a274d2c0bcb189.png" alt="Conversion failures for Adventure" data-original-src="https://thenewstack.io/wp-content/uploads/2015/03/adventurefailure1.png"/></a><p id="caption-attachment-271703" class="wp-caption-text translated">冒险的转换失败</p></div>
<p class="translated">在您提交转换(通过点击保存)之前，它会显示更改的并排预览，以便您可以看到将被更改的内容，这为您提供了取消转换的选项。它还为您提供了在大规模转换之前拍摄快照的选项。</p>
<p class="translated">许多错误的问题是有两个可能的修复。我只需点击每个错误并选择适当的修复，通常通过添加“？”使类型可选。其他的是没有被打开的可选类型。</p>
<h2 class="translated">新的集合数据结构</h2>
<p class="translated">从Swift 1.0中省略，set相当于Objective-C的NSSet类型。基于类型定义一个集合，然后向实例添加成员。我使用了枚举类型，但是任何类型都可以:<br/></p>
<div id="crayon-64231093b192f830374542" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code translated"><div class="crayon-pre"> <p class="crayon-line" id="crayon-64231093b192f830374542-1"> <span class="crayon-e">枚举</span> <span class="crayon-i">颜色</span><span class="crayon-h"/>:<span class="crayon-h"/><span class="crayon-e">Int</span><span class="crayon-h"/>{<span class="crayon-h"/><span class="crayon-e">case</span><span class="crayon-i">红色</span>，<span class="crayon-i">橙色</span>，<span class="crayon-i">黄色</span>，<span class="crayon-h"> </span> <span class="crayon-i">绿色</span>，<span class="crayon-h"> </span> <span class="crayon-i">蓝色</span>，<span class="crayon-h"> </span> <span class="crayon-i">红色</span>，<span class="crayon-h"> </span> <span class="crayon-i">颜色</span> <span class="crayon-st">。</span> <span class="crayon-i">橙色</span>，<span class="crayon-h"> </span> <span class="crayon-i">颜色</span> <span class="crayon-st">。</span> <span class="crayon-i">绿色</span>)<span class="crayon-h"/><span class="crayon-c">//设置用三种颜色初始化</span></p><p class="crayon-line crayon-striped-line" id="crayon-64231093b192f830374542-4"><span class="crayon-i">drink colors</span><span class="crayon-st">。</span> <span class="crayon-e">插入</span> ( <span class="crayon-i">颜色</span> <span class="crayon-st">)。</span> <span class="crayon-i">蓝色</span> ) </p> <p class="crayon-line" id="crayon-64231093b192f830374542-5"> <span class="crayon-e">打印</span><span class="crayon-h"/>(<span class="crayon-s">“drink colors”有\( <span class="crayon-i"> drinkColors </span> <span class="crayon-st">)。</span> <span class="crayon-v ">计数</span>)颜色</span>)<span class="crayon-h"/><span class="crayon-c">//4</span></p><p class="crayon-line crayon-striped-line" id="crayon-64231093b192f830374542-6"><span class="crayon-i">drink colors</span><span class="crayon-st">。</span> <span class="crayon-e">去掉</span> ( <span class="crayon-i">颜色</span> <span class="crayon-st">)。</span> <span class="crayon-i">红色</span> ) </p> <p class="crayon-line" id="crayon-64231093b192f830374542-7"> <span class="crayon-e">打印</span><span class="crayon-h"/>(<span class="crayon-s">“drink colors”有\(<span class="crayon-i"/><span class="crayon-st">)。</span> <span class="crayon-v ">计数</span>)颜色</span>)<span class="crayon-h"/><span class="crayon-c">//3</span></p><p class="crayon-line crayon-striped-line" id="crayon-64231093b192f830374542-8"><span class="crayon-i">drink colors</span><span class="crayon-st">。</span> <span class="crayon-e">去掉</span> ( <span class="crayon-i">颜色</span> <span class="crayon-st">)。</span> <span class="crayon-i">红色</span> ) </p> <p class="crayon-line" id="crayon-64231093b192f830374542-9"> <span class="crayon-e">打印</span><span class="crayon-h"/>(<span class="crayon-s">“drink colors”有\(<span class="crayon-i"/><span class="crayon-st">)。</span> <span class="crayon-v ">计数</span>)颜色</span>)<span class="crayon-h"/><span class="crayon-c">//3</span></p></div></td>
</tr>
</table>
</div>
</div>

<p class="translated">这里我定义了一个枚举，Colors，然后基于它创建了一个集合drinkColors，最初用红色、橙色和绿色填充。然后加入蓝色，红色去除两次。不变的第三个计数为3是因为您不能从集合中移除已经移除的值。</p>
<h2 class="translated">让常数</h2>
<p class="translated">要指定一个常量值，可以使用关键字let来声明它，同时指定一个值。与许多只能分配编译时间常数的语言不同，Swift允许您分配一个计算值。在Swift 1.2中，您现在可以声明一个常量并推迟赋值。如果您试图在赋值前使用它，编译器会抱怨:</p>
<p class="translated"><a href="https://thenewstack.io/wp-content/uploads/2015/03/unassigned1.png" class="local-link"> <img decoding="async" loading="lazy" class="alignnone wp-image-271704 size-full" src="../Images/f4ed7db688b74698211609ac103b4d3a.png" alt="Unassigned error message" data-original-src="https://thenewstack.io/wp-content/uploads/2015/03/unassigned1.png"/> </a></p>
<p class="translated">下面是正确的用法:<br/></p>
<div id="crayon-64231093b1930232937667" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code translated"><div class="crayon-pre"> <p class="crayon-line" id="crayon-64231093b1930232937667-1"> <span class="crayon-i">让</span><span class="crayon-h"/><span class="crayon-i">b</span><span class="crayon-h"/>=<span class="crayon-h"/><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-64231093b1930232937667-2"><span class="crayon-i">让</span><span class="crayon-h"/><span class="crayon-st">a</span><span class="crayon-h"/>:<span class="crayon-h"/><span class="crayon-i">Int</span><span class="crayon-h"/><span class="crayon-c">//声明一个</span> </p> <p class="crayon-line" id="crayon-64231093b1930232937667-3"> <span class="crayon-st"> a </span><span class="crayon-h"/><span class="crayon-cn"/><span class="crayon-h"/>？<span class="crayon-h"/><span class="crayon-cn">6</span><span class="crayon-h"/>:<span class="crayon-h"/><span class="crayon-cn">8</span><span class="crayon-h"/><span class="crayon-c">//赋值取决于b </span> </p> <p class="crayon-line crayon-striped-line" id="crayon-64231093b1930232937667-4"> <span class="crayon-e">打印</span><span class="crayon-h"/>(<span class="crayon-s">" a = \(<span class="crayon-st"/>)</span></p></div></td>
</tr>
</table>
</div>
</div>

<p class="translated">这里它在第二行声明，但直到第三行才赋值。老实说，没什么大不了的。与早期的Swift版本一样，下面的方法有效:<br/></p>
<div id="crayon-64231093b1931672433918" class="crayon-syntax crayon-theme-github-gist crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code translated"><div class="crayon-pre"> <p class="crayon-line" id="crayon-64231093b1931672433918-1"> <span class="crayon-i">让</span><span class="crayon-h"/><span class="crayon-i">b</span><span class="crayon-h"/>=<span class="crayon-h"/><span class="crayon-cn">1</span><span class="crayon-h"/><span class="crayon-c">//试同0 </span> </p> <p class="crayon-line crayon-striped-line" id="crayon-64231093b1931672433918-2"> <span class="crayon-i">让</span><span class="crayon-h"/><span class="crayon-st">a</span><span class="crayon-h"/>=<span class="crayon-h"/><span class="crayon-i">b</span><span class="crayon-h"/><span class="crayon-cn"/><span class="crayon-h"/>？<span class="crayon-h"/><span class="crayon-cn">6</span><span class="crayon-h"/>:<span class="crayon-h"/><span class="crayon-cn">8</span></p><p class="crayon-line" id="crayon-64231093b1931672433918-3"><span class="crayon-e">打印</span><span class="crayon-h"/>(<span class="crayon-s">" a = \(<span class="crayon-st"/>)"</span>)</p></div></td>
</tr>
</table>
</div>
</div>

<p/>
<h2 class="translated">结论</h2>
<p class="translated">Swift在每个版本中都变得越来越好，Swift 1.2版本——即使是测试版——也是一个重大改进。不过，在Swift 1.2正式发布之前，开发者无法在App Store中部署Swift 1.2应用。推出iOS 8.3版本。</p>
<p class="attribution translated">专题图片:<a href="https://www.flickr.com/photos/aaron_eos_photography/" target="_blank" class="ext-link" rel="external "> aaron_eos_photography </a>拍摄的:<a href="https://www.flickr.com/photos/aaron_eos_photography/14643982590/in/photolist-oj3eQs-p5cYXE-55uQ7t-5FHEYw-7B8HvS-54xpd1-dPm4pj-71yhY9-6tRvAE-f4Uqt7-8erju2-2DKAXD-boJ451-boJ2NJ-bBCVJn-boJ2a1-6tMn52-8VLbFc-6tRukq-7V5cDA-pMVTtv-5wdmF6-dPm5CE-raJZqF-qHQoYh-7jCGQA-dn1oZx-e5TKkk-9r9KSc-9KYxHu-dPkYUd-qaYjRi-bBCQ4i-9UXw2b-5KYjdu-bBDgqP-bBCWGX-boJ395-8BoB1a-raJZnV-62Scyr-9r9LKg-4SmHDm-4WE364-fgC93j-dPEW5c-b7hNsk-3cwHe9-bBD6Ui-8VRQSk" target="_blank" class="ext-link" rel="external "> Swift in Flight </a>获得<a href="https://creativecommons.org/licenses/by-nc-sa/2.0/" target="_blank" class="ext-link" rel="external "> CC BY-NC-SA 2.0 </a>授权。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>
</div>
</div>    
</body>
</html>