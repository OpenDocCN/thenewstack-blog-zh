# 云原生软件的技术债务正在增加

> 原文：<https://thenewstack.io/cloud-native-softwares-technical-debt-is-growing/>

[](https://www.linkedin.com/in/jonkschneider/)

 [乔纳森·施耐德

乔纳森·施耐德，Moderne 的联合创始人兼首席执行官，在网飞领导了大规模自动化代码重构的工程工作，创立了开源的 OpenRewrite 项目。在 Pivotal 的 Spring 团队中，他领导了站点可靠性工程团队，并创建了流行的 Java 度量库 Micrometer。他是 O'Reilly 的《使用 Java 微服务的 SRE》一书的作者。](https://www.linkedin.com/in/jonkschneider/) [](https://www.linkedin.com/in/jonkschneider/)

我们向来自各种组织和行业的开发人员提出了一个简单的问题:“如果不允许您接触您的应用程序的代码，您的应用程序还能继续运行多久？”我们发现，应用程序越现代，它停止工作的速度就越快。传统应用程序在几年内都没问题，但云原生应用程序会在几周内崩溃并烧毁。

在过去的十年中，软件开发经历了巨大的变化。软件不再完全在内部构建，取而代之的是现在所谓的软件供应链。它包括软件生产过程中涉及到的所有东西:开发人员工具(ide、CI/CD)、第三方软件(依赖项)或应用程序堆栈中更普遍的部分，如语言运行时、监控和测试框架。

随着向软件供应链的转移，软件开发已经工业化。我们正在构建越来越多的定制软件，但通过集成更高级别的构建模块(如 OSS 或供应商 API)可以更快地生产软件。现代应用程序是粘合代码，多达 90%的软件可能来自第三方组件。全球软件供应链中不同组件的复杂性和可用性使得定制软件快速增长。

 [奥尔加·孔兹奇

Moderne 的联合创始人 Olga Kundzich 拥有在戴尔 EMC 和 Pivotal 构建企业技术的丰富经验，包括应用交付管理和数据保护解决方案。](https://www.linkedin.com/in/olgakundzich/) 

关于 API 的一个常见误解是，它们是稳定的接口，一旦使用 API 而不是定制的内部协议，组件之间的通信仍然是定义良好且稳定的。实际上，API 的供应商并不是一成不变的。他们正在基于他们想要支持的用例来开发他们的产品:在这样做的时候添加、取消和删除 API。

这解释了我们之前描述的悖论，即现代云原生应用需要更多的维护，因为第三方依赖关系以自己的速度变化和发展，需要开发人员不断地将新版本重新组合在一起。遗留应用程序是在内部从零开始构建的，所以即使你积累了大量的技术债务，并且无法为应用程序添加功能，至少它们可以继续工作。

这个休息时间可不小。软件维护通常需要开发人员 20-30%的时间。这些是单调乏味的重复性任务，但是它们需要只有最资深的开发人员才拥有的专业知识，并且对创新和软件质量是一个巨大的拖累。

## 对于这种持续的软件维护来说，技术债务是一个错误的术语

技术债务这个术语起源于敏捷开发的引入。这一切都是为了让快速的应用交付优先于完美的代码。伴随技术债务而来的是作为管理代码技术的重构实践。重构在不改变代码外部行为的情况下重构代码。它解决了技术问题，并对代码进行了必要的内部更改，以支持应用程序的最新迭代和新功能。

管理技术债务的一种常见方法是将 it 工程的责任作为每个 scrum sprint(开发团队努力完成一定数量工作的时期)的一部分，并将其视为增强软件过程的隐性成本。它在工程的控制之下——他们引入了技术债务，所以他们应该解决它。

> 我们正在构建越来越多的定制软件，但通过集成更高级别的构建模块(如 OSS 或供应商 API)可以更快地生产软件。

我们继续使用术语技术债务来表示工程内部的活动，并且不产生有形的商业利益，但是债务的原因已经从根本上改变了。当您将最新版本的供应商库合并到应用程序中时，您并没有故意承担技术债务。接下来，供应商发布了一个新版本，而你的软件现在已经过时了。这是伪装成技术债务的供应链管理活动。

当使用软件供应链中的组件组装软件时，维护是不同的，因为它不再受开发人员的控制，而是与第三方软件和 API 的更改联系在一起。现代软件维护感觉就像一场与时间赛跑的比赛，不断更新组件以防止整体崩溃，并且无法控制对这些第三方组件的更改，您实际上是在鞋带系在一起的情况下进行比赛。

## 软件供应链维护是高度可重复的

我们在与开发人员交谈时注意到的另一件事是他们问题的可重复性。每个人都在升级第三方软件的类似子集，并将其合并到自己的代码中。其中一些，比如对通用框架或语言运行时的升级，实际上影响了每个人。同[普通 cv](https://thenewstack.io/cvss-struggles-to-remain-viable-in-the-era-of-cloud-native-computing/)。

与过去的技术债务不同，在过去，每个人都有一套独特的技术债务，并且必须通过单独的重构来理解和解决它，作为通用组件升级的软件维护在不同的代码库之间是可重复的。显然，不是所有的事情都可以自动化，但是大量繁琐的迁移可以。

## 超越重构——自动化代码维护

我们需要的是一个开放的生态系统，为这些乏味的代码维护任务开发和分发自动化:升级、CVE 补丁、内部 API 维护。它只能由社区通过组合越来越复杂的重构操作并在越来越多的代码上验证它们来解决。

我们可以从 IDE 提供的相同的、经过验证的构建块开始，但是使它们可共享、可组合，并且可通过不同的工作流应用。有了这些构件，API 供应商和 OSS 框架作者就可以开发和分发自动化，用于升级他们的库和 API 的消费者以及他们的库的新版本。安全研究人员不仅可以披露漏洞，还可以为每个受影响的人提供自动补救。

OpenRewrite 是一个 OSS，Apache 许可的重构食谱生态系统，旨在创建这样一个社区。现在还为时尚早，但是我们已经通过为 Java 框架迁移构建了许多高价值的重构方法来验证这种方法。

我们想象这样一个世界:全球软件供应链变成一个分布式的、最终一致的单一回购协议:当你把一个新版本的库合并到你的应用程序中时，你的粘合代码会自动更新。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>