# 设计你的系统来自我更新:Greg Kroah-Hartman 谈 Linux 安全性

> 原文：<https://thenewstack.io/design-system-can-update-greg-kroah-hartman-linux-security/>

在上个月柏林的 CoreOS Fest 期间，领先的 Linux 内核开发者 Greg Kroah-Hartman 分享了一些关于安全性的见解，指出“所有的错误都可能是安全漏洞。我们不知道这是不是安全漏洞。”

你无法摆脱 bug，当然，它们是软件开发过程的一部分。你实际上能做的是尽快照顾好他们。“内核错误是很严重的事情。我们想解决这些问题，”克罗亚-哈特曼说。

在过去的 15 年里， [Linux 内核社区](https://www.kernel.org/)一直遵循一条规则:尽快修复错误。内核社区在修复这些错误方面做了令人难以置信的工作，但是有一个问题。在 Linux 内核上构建产品的供应商不会采用这些补丁。大多数这样的供应商都懒得升级他们的设备。这让这些设备的用户处于危险之中。

Kroah-Hartman 举了一个很好的例子，说明一个看起来良性的 bug 如何变成令人讨厌的东西。大约三年前，一个 TTY1 层的错误被修复。那时候，它看起来像一个正常的，无害的错误。内核社区修复了它，在新版本中推出了它，并完成了它。三年后有人发现这是一个安全漏洞。现在公司吓坏了。他们当时都懒得用这些补丁，现在甚至像 SUSE 和 Red Hat 这样的公司也不得不回去修复他们所有的旧东西。

“我们有很长一段时间让虫子存活的不良历史。有人做过调查，大多数已知的病毒在系统中可以存活五年。这些都是人们知道并知道如何利用的东西。他们没有关门。这是我们基础设施中的一个问题。

公司懒得更新软件的原因有很多。公司出售它们并转向下一版本的硬件，因为它们通过出售更多的硬件而不是通过维护旧设备来赚钱。由于没有金钱上的激励，他们懒得在这个硬件上更新软件。

> 许多人运行的系统不接受他们不能更新内核，或者他们认为如果他们坚持使用内核并且没有任何改变，那就很好。这不是真的，”–格雷格·克罗亚·哈特曼。

谷歌的 Android 是一个很好的例子，因为它使用的是一个长期支持的(LTS)模型，但运行的是一个非常旧的内核，这个内核有已知的漏洞。Kroah-Hartman 说，“有一些众所周知的简单方法可以在我的手机上获得 root…这很好，因为我喜欢在我的手机上获得 root，但这已经被修复了。补丁会公开发布，但不会更新。”

然而，运行旧内核并不意味着这是一件坏事。人们运行旧内核是有真正的原因的，这也是为什么 Linux 维护 [LTS 发布的](https://www.kernel.org/category/releases.html)，更新它们，这很大程度上要感谢 Kroah-Hartman 的协调工作，在大量开发工作转移到新版本内核后很久才修复错误。但是，如果公司不把补丁推送到他们依赖 Linux 的设备上，修复这些旧版本又有什么好处呢？

四年多来，3.2 内核是 LTS 发布的，仍然每天进行两次修复，并定期更新:内核开发者[本·休金斯](https://twitter.com/benhutchingsuk)每隔一周发布一次。Debian 社区在获取这些补丁并保持更新方面做得非常好。

“一个由志愿者组成的非营利组织比一些最大的 Linux 提供商做得更好。这太疯狂了。那很糟糕。克罗亚-哈特曼说:“要么以 Debian 为基础，要么超时更新你的内核。

## **新内核，旧心态**

在系统管理员社区中有一种普遍的看法，即一旦系统被设置好并且稳定了，就不应该再碰它。克罗亚-哈特曼对这种情况并不满意。

“你必须能够运行一个能够自我升级的系统。许多人运行的系统不接受他们不能更新内核，或者他们认为如果他们坚持使用内核，如果什么都没有改变，那就很好。不是这样的。我们每天都在修复大约 10 个内核错误。并非所有这些都是安全问题，但有时大问题是我们不知道一个问题是否是安全问题，”Kroah-Hartman 在采访中说。

有很多邪恶的团体密切关注未修复的 bug。他们投入时间和资源来发现该漏洞是否会被利用来提高安全性。如果他们发现任何此类漏洞，他们可能会使用它，或者将它出售给可能用于更大规模攻击的人。

“这很令人难过，因为我们已经尽力了。我们正在修复它们，并对它们进行更新，”克罗亚-哈特曼说。

在克罗亚-哈特曼看来，最好的方法是使用(或设计)自我更新的系统。他举了 Chrome OS 和 CoreOS 操作系统的例子，这两个操作系统都可以自动更新。

“Chrome 操作系统和后来的 Core 操作系统都采用了同样的思路。您有两个系统映像。你要更新一个。一旦你知道它工作，它可以切换到另一个。你必须能够以一种安全的方式更新它。这项技术已经被证实了。问题已经解决了。人们只需要使用它并将其构建到他们的系统中。内核不会自行更新自己。”

CoreOS 是新堆栈的赞助商。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>