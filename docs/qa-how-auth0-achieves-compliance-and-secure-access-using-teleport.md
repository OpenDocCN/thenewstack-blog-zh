# 问与答:Auth0 如何使用 Teleport 实现合规和安全访问

> 原文：<https://thenewstack.io/qa-how-auth0-achieves-compliance-and-secure-access-using-teleport/>

[](https://www.linkedin.com/in/benarent/)

 [Ben Arent

Ben 是 Teleport 的开发者倡导者。他开发过一系列开发工具，从数据库到监控系统。](https://www.linkedin.com/in/benarent/) [](https://www.linkedin.com/in/benarent/)

自 2013 年成立以来， [Auth0](https://auth0.com/) 创造了一个新的类别:一个开发人员第一的身份管理平台，易于实施和扩展。该平台专为应用程序构建者和开发人员打造，允许通过任何身份提供商对应用程序和 API 进行身份验证和授权，可在任何设备或云上的任何堆栈上运行。它帮助客户在登录框的用户便利性、隐私性和安全性之间找到合适的平衡点。

“Auth0 是一个易于实施且适应性强的身份验证和授权平台。我们遵循行业标准，如 OAuth 2 和 SAML，让您的登录框非常棒，拥有卓越的开发人员体验和简单易用的界面；以及确保应用安全的 SDK 和工具，”Auth0 私有云工程经理 Pablo Terradillos 说。

Auth0 平台为全球企业解决复杂大规模身份用例。通过使用它，开发人员可以保护应用程序，而不必成为安全专家。然而，Auth0 需要对其私有云客户环境的访问进行标准化，以便为这些客户提供支持。为此，它选择了 [Teleport](https://goteleport.com/?utm_content=inline-mention) —一个统一的访问平面，提供对基础设施的安全和经审核的访问。

Teleport 强制使用短期证书，而不是使用长期的公钥/私钥或密码。其可信集群功能为各种主机上的所有访问和活动提供了认证机构和审计日志，并允许 Teleport 管理员连接多个客户集群并在它们之间建立信任。Auth0 如何使用 [Teleport](https://goteleport.com/?utm_content=inline-mention) 实现对客户私有云的合规性和安全访问？我和 Terradillos 聊了聊 Auth0 的安全挑战以及他们是如何解决的。这是我们谈话的浓缩版。

你的传送用例很有趣，你能描述一下吗？

 [巴勃罗·特拉迪洛斯

Pablo 是 Auth0 的私有云工程经理。](https://www.linkedin.com/in/terradillospablo/) 

Auth0 私有云产品由适用于 Auth0 产品的隔离环境组成。我们的每个客户都获得了完整的专用 Auth0 部署。Auth0 私有云的大多数客户都是高调的，有非常具体的、有时是独特的监管问题。我们使用 Teleport 为客户的环境提供支持。Auth0 私有云运营商团队与我们客户的基础设施互动。传送是一个工具，我们用它来允许他们访问特定 Auth0 集群的内置机器。

【Auth0 不仅是 SaaS 的产品，也是要求非常严格的客户的内部解决方案。 **当你在他们的环境中部署 Auth0 的时候，你用瞬移做什么？**

概括地说，我们在私有云中有两种不同的产品，分为授权 0 管理的产品和客户托管的产品。我们使用 Teleport 来管理私有云运营商团队的 Auth0 部分的访问，以获得对属于该集群的每台内置机器的 SSH 访问，从而能够提供支持，尤其是在意外情况下。通过传送，我们确保只有应该进入环境的人才能进入。

**当您的工程师进来时，他们是否会通过您的集中式集群访问给定客户的基础架构？**

是的，没错。在 Auth0 私有网络中，我们可以访问我们的主 Teleport 集群，该集群可以通过可信集群访问每个客户环境。在某些情况下，允许客户启用或禁用实现的访问连接—通过他们一侧的防火墙或通过他们自己接口上的交换机。但在大多数情况下，我们管理整个基础架构。

在你使用传送之前，你是怎么做到的？

在传送之前，我们没有一个标准化的方法来访问环境。这变成了一场噩梦，因为有很多方法可以访问环境——从`ssh jumphosts`到通过电话会议进行远程共享桌面会话，再到使用 Putty 通过`shh`进行连接。如果你没有这种经历的乐趣，那你应该觉得自己很幸运。那是一场可怕的噩梦。但最重要的是，除此之外，支持体验是痛苦的。假设您在凌晨 3 点醒来，遇到了意外问题，需要访问环境，您首先需要了解如何为该特定客户访问该环境。有了传送，我们就标准化了。现在，这是我们针对环境访问的默认且独特的产品。我们能够在一个工具中收集我们在法规遵从性方面的所有不同要求。现在非常容易，因为如果你不知道你需要连接的集群，你可以很容易地进入网络界面，获得集群列表和集群名称，然后通过`tsh`【Teleport 的 CLI 客户端】连接。但是在大多数情况下，我们已经储存了所有的信息。因此，如果您需要访问某个特定的客户，您只需使用`tsh`命令就可以连接到该客户。

**这些接入传送的终端工程师用 Auth0 来做吗？**

是的。我们是 Auth0 的忠实用户，几乎可以满足所有的认证和授权需求，包括传送。Teleport 支持[OpenID Connect](https://openid.net/connect/)【OIDC】，而 Auth0 恰好是 OIDC 的提供商，所以我们只要把 Auth0 挂到 Teleport 上就可以了。从那里，在 Auth0 端，我们能够完全从我们这边定制认证和授权体验和需求。这是 Auth0 功能的一部分，我们只需点击一个按钮，将我们自己的规则添加到身份验证过程中，就可以启用多因素身份验证。在这种情况下，我们有不同的角色，主要对应于客户所在的不同地区。当新员工加入 it 并需要访问这些环境时，在 Auth0 界面中，我们会为这些人分配特定的角色。该角色被映射到 Teleport 集群中的角色，从那里，我们管理完整的身份验证流程。

**这对新客户或新员工的入职意味着什么？**

对两者来说，这都非常容易。对于客户来说，我们通过自己的内部工具自动完成了环境的所有设置。您可以提供描述客户环境的不同输入—这将设置完整的环境和一个 Teleport 集群。它会发出一个令牌，这个令牌会自动存储在我们的秘密管理工具中。我们在传送端有一个工具，通过令牌和环境工具来评估。

对于员工而言，当您在 Auth0 上入职时，入职列表中的第一项是要求对您所在团队的特定访问权限。作为入职流程的一部分，您将通过我们授权产品上的 Auth0 接口被添加到特定路线，该路线将为您提供对客户要求的访问。

**您如何处理合规性问题，Teleport 如何帮助您驾驭这一过程？**

每当我们得到一个新客户，合规肯定是一个问题。首先，Teleport 帮助了我们，为我们提供了一个可重复的、详细的流程，让员工能够接触到环境。它允许我们提供你在节点上所做的一切的所有轨迹。传送会话中发生的一切都以 JSON 格式记录下来。你也可以通过 tsh play 来重播。会议回放对理解发生了什么非常有帮助。当你在凌晨 3 点醒来发现生产问题时，能够理解你是如何陷入这种情况的非常有帮助。

**你对考虑瞬移的人有什么建议吗？**

仔细阅读[传送文档](https://goteleport.com/teleport/docs/)。它非常详细，涵盖了关于如何实现架构和如何管理身份验证的许多不同场景。

**你的团队对 Teleport 有什么反馈？**

用起来真的很简单。通过 SSH 的命令行界面和 web 界面可以很好地相互补充。我可以通过 web 用户界面快速找到有关该群集的信息。然后是`tsh`中的过程，这在大多数情况下更加可靠和令人愉快，因为一旦你连接上了，这种体验就和在一个环境中进行简单的 SSH 非常相似。这当然很好。使用传送时，你不需要重新学习如何做事情。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>