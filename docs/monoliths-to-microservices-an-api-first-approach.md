# 从单片到微服务:API 优先的方法

> 原文：<https://thenewstack.io/monoliths-to-microservices-an-api-first-approach/>

[](https://www.linkedin.com/in/james-burns-7816a82/)

 [詹姆斯·伯恩斯

詹姆斯是 LightStep 的开发者倡导者。从网络负载平衡器到 FPGAs 到 ASICs 到嵌入式安全再到大规模的云操作，James 目睹了系统如何工作，但更有趣的是，他们是如何失败的。他热衷于分享他所学到的东西，以提升团队水平，让开发人员更开心，并改善客户体验。](https://www.linkedin.com/in/james-burns-7816a82/) [](https://www.linkedin.com/in/james-burns-7816a82/)

对于后端开发人员来说，决定从整体服务迁移到微服务可能是一个令人兴奋的机会，有助于推动长期成功的业务转型。

但是成功的迁移是一个漫长的过程，甚至会耗尽精英中的精英。由于现代技术堆栈中的许多抽象层，开发人员通常倾向于进行数据优先迁移:移动一个模式或一组模型，这样就可以使用 HTTP 而不是数据库来调用它。

乍一看，这似乎是最容易的选择，但是这种技术通常会导致分布式的整体，不会产生特别容易使用或合理的后端工作体验。它将是一个跨许多服务的紧密耦合的模型，只有可容忍的 API。这就是为什么最好的选择是 API 优先的方法，它允许开发人员创建引人入胜的、直观的界面——那些他们想要长期使用的界面。那么，从哪里开始呢？

## 首先，看得更远一些

开发人员需要理解“完成”实际上会是什么样子。这是一个灰色区域，但在微服务迁移场景中，这是可以的；实际上，这是应该的，因为 API 的版本化是有原因的。对新服务所处理的业务问题的新见解可以改变所采用的方法或负责管理它们的团队。

然而，对最有效地推动迁移工作的服务和 API 类型有一个明确的认识是关键。这样，开发人员可以在早期描绘出过程将如何进行的完美画面，使他们能够判断这是否是看待变更的正确方式。这些对 API 有用性的确认将是连续的。

这里的结论是，这是一种迁移，而不是一种转变。反对已经存在的东西不是最终目的，也永远不应该是。这听起来像是一项巨大的投资，而且它可能是，但无论如何，开发人员都能够更快地工作，在更好地服务于组织的长期旅程中排除(或规定)API 的接口。

## 业务流程

微服务允许软件通过不同的网络与技术堆栈中的其他层快速通信，如果企业希望在行业中保持竞争力，这一属性至关重要。因此，实施和测试最有效的业务流程对于实现 ROI 的迁移至关重要。

与 API 存储的数据集成还使开发人员能够适应日常工作，并快速处理来自迁移的任何问题。对正在创建的服务和 API 有一个具体的理解将使执行迁移变得更容易。基本上，对数据如何集中保持透明有助于开发人员在迁移过程中做出最终有利于项目(和他们自己)的决策。

## 摸清底细

同样，API 优先的方法允许开发人员更快地发现该策略是成功还是失败。可能会有一些失败，所以要做好准备，坦然面对。设计错误是常见的，淘汰一个原型并重新开始是好的。API 的即时使用——因此，即时反馈——确实有助于巩固这种方法的优势。

实现和观察这些 API 的结果可能会因过程而异——开发人员可能会在他们的整体中创建数据存储 API，或者与他们分离。两种方式都可行。重要的是能够在几天之内——而不是几年之内——知道一个 API 的接口将会(或不会！)为迁移服务。

## 继续前进

重要的是从一开始就知道[完美的迁移计划](https://mailtrack.io/trace/link/5fd785f1c3134a44068f007441a087079b9c5718?url=https%3A%2F%2Flightstep.com%2Fblog%2Fmicroservices-architecture-when-and-how-to-move-to-microservices%2F&userId=4038883&signature=e0b596785e5e2c26)不会一蹴而就。这是一个持续的过程。API 接口相对于现有的整体来说是不可预测的(有些比其他的更不可预测)，所以在整个迁移过程中，它们需要被原型化、利用和改变——换句话说，不断地进化。但是，通过利用 API 优先的方法进行微服务迁移，这一过程可以缩短很多——只需几天就可以执行，而不是一次几个月甚至几年。

这种方法还允许开发人员提高他们的技能，创建他们擅长并喜欢使用的 APIs 当多余的开发工作成为一个持续的问题时，为采取行动扫清道路。一旦开发人员掌握并习惯了这些机制，他们会感觉到生产力的转变，这将推动他们作为开发人员和技术专家的职业生涯向前发展。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>