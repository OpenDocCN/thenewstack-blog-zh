# 确保微服务应用服务质量的三个最佳实践

> 原文：<https://thenewstack.io/3-best-practices-ensuring-service-quality-microservice-applications/>

[](https://www.instana.com/)

 [米尔科·诺瓦科维奇

米尔科·诺瓦科维奇是 Instana 的首席执行官兼联合创始人。Mirko 在敏捷开发、DevOps 和性能管理软件方面拥有丰富的技术经验。四年前，他认识到组织需要一种新的方法来管理当今的动态容器化微服务应用程序，于是开始了 Instana。](https://www.instana.com/) [](https://www.instana.com/)

像网飞、沃尔玛和亚马逊这样的早期数字变革者很早就认识到，让客户满意的关键是与客户需求保持同步并比竞争对手表现更好的完美应用服务。简而言之，编码最快的人获胜。

为了更快地发布代码和应用程序，以便在竞争中胜出，不同的策略和架构已经被广泛采用。有一个从瀑布到敏捷的过渡；打破开发和运营之间的孤岛—也称为 DevOps 最近，我们看到一些公司将大型、复杂、单一的代码库分解成更小、更容易开发的单元，从而形成微服务架构。每个微服务通常只提供几个可通过 API 调用访问的功能，这使得开发和发布每个微服务的速度更快。

数字企业正在使用微服务来快速部署应用服务，并为客户提供最新、最强大的应用特性和功能。但微服务为 DevOps 团队引入了一种新游戏，增加了复杂性，并使服务质量面临风险。微服务为当今应用带来的活力需要三种最佳实践来监控和管理微服务及其应用的服务质量——发现、理解和调查。

## 发现必须是自动的、即时的和持续的

微服务架构本质上是动态的。它们可以水平扩展，以在粒度级别适应工作负载的峰值。例如，在一个在线银行应用程序中，当人们以数字方式兑现他们的工资支票或检查他们的账户余额时，可能会在周五出现使用高峰。“登录”、“支票成像”和“账户余额”功能都将经历巨大的工作负载峰值，这可能导致传统架构中的性能不佳或服务中断。在微服务架构中，您可以构建新的服务实例，提供“登录”、“检查图像”和“账户余额”功能。这种级别的精细控制有助于确保客户满意度，同时将额外的计算资源准确地集中在需要的地方。

微服务架构有许多优势，但也有必须了解和解决的挑战。传统的应用程序由几十到几百个不同的组件组成。微服务应用程序可以轻松扩展到数千个组件，所有这些组件相互作用以提供一个完整的应用程序。大量动态变化的互连组件给管理和故障排除带来了困难。将这种规模的复杂性与几小时或几天的新代码发布速度结合起来，潜在的问题会成倍增加。有效的监控成为微服务架构中的一个关键成功因素。

在实践敏捷开发、DevOps 和使用微服务架构时，监控有以下切实的好处:

*   了解每个新代码部署的影响——与持续集成/持续交付工具集成，以实现回滚或全面部署。
*   更快地发现生产中表现不佳或错误的根本原因。
*   充分了解微服务中断造成的下游影响。
*   每时每刻跟踪你的全部财产的状况。
*   确定何时扩大或缩小规模—随时调整您的环境规模，以确保客户满意并控制成本。

为动态应用程序监控微服务和维护服务质量的第一步是跟上快速变化的步伐。只有自动、即时和持续地发现新的和已更改的应用程序组件，才能确保从由数千个构建块组成的动态应用程序(包括微服务)中准确收集数据。

让我们看看必须监控的各种组件，这些组件随时都可能发生变化:

*   **物理:**服务器、网络适配器、磁盘—尽管此处列出的每一项现在都已虚拟化，但它们仍被视为“物理”设备。
*   **虚拟:**容器、进程、OS 虚拟机、应用虚拟机(JVM、CLR)。
*   **逻辑:**集群、交易、服务、应用、业务线分组。

自动发现(在组件更改或添加时无需人工干预)、即时发现(在一秒钟内)和持续发现(永无止境)是保持应用程序服务质量的基本要素。

“任何傻瓜都能知道。重点是要理解。”

用阿尔伯特·爱因斯坦的话说，“任何傻瓜都能知道。重点是要理解。”监控微服务就是如此。发现和了解所有组件是不够的。如果你不理解它们之间的关系和依赖关系，就没有办法正确地管理应用程序和服务质量。

一旦发现了组件，下一步必须是理解它们的相互依赖关系、应用程序的“正常”性能和行为，以及对预期行为的专业知识。

相互依存关系主要通过两种方式确定:

1.  **观察** —当组件相互通信时，观察它们之间的所有交互。
2.  **继承** —在单个主机中，软件可以确定主机运行一个容器，该容器运行一个由 JVM 组成的进程，JVM 实际上是一个 Tomcat 应用服务器。

结合观察和继承的结果，我们可以在任何给定的时间点对任何应用程序形成完整的理解。但是请记住，我们必须持续并立即收集新的观察和继承数据，以保持准确性。

## 人工智能实现更快、更准确的事件响应

在我们努力确保每个微服务及其支持的应用的服务质量时，我们需要做好准备，在服务受到影响时立即做出响应。随着对所处理的微服务和应用的发现和理解，我们为调查任何服务问题做好了充分准备。但是，使用传统的手动方法和工具调查问题速度很慢，并且不是确保服务质量和让客户满意的最佳方式。

从彻底的发现和理解中获得的丰富信息允许 DevOps 团队自动化调查过程，以快速确定根本原因，甚至预测未来的故障点。

人工智能只有应用于准确而详细的数据模型才能有效。人工智能技术，如神经网络和深度学习，可以执行人类无法大规模执行的任务:

*   行为学习理解在一天中的任何时间、一周中的某一天、一个月中的某一天、一年中的某一天等通常会发生什么。
*   预测分析，以了解和避免迫在眉睫的问题。
*   自动根本原因分析。
*   下游影响评估。
*   “假设”建模场景。

在数千个节点的微服务应用中，识别单个问题的根本原因以及每个下游影响的能力对人类来说是一项不可能完成的任务，现在必须由人工智能来完成。

随着微服务架构渗透到当今的动态应用中，并以预计到 2023 年 16%的 CAGR 速度增长，想要竞争并获胜的组织需要确保其应用的服务质量完美无瑕。实践良好的微服务发现、理解和调查有助于保持微服务及其支持的应用良好运行，并让客户满意。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>