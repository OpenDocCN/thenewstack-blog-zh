# 打破持续集成/持续交付之间的壁垒

> 原文：<https://thenewstack.io/breaking-down-the-wall-between-continuous-integration-continuous-delivery/>

[CloudBees](https://www.cloudbees.com/) 赞助了这个故事，作为正在进行的“**云原生 DevOps”系列的一部分。**“查看本月的后续版本。

部署在云原生平台上的 DevOps 管理的生产管道比宣传的要好得多。

基于通常在容器上运行的微服务，组织现在能够以火箭般的速度部署应用程序基础架构。一个重要的结果是，开发运维人员一天安排几个版本变得越来越常见，而在过去，代码更新和发布周期需要几周甚至几个月才能完成。

持续集成/持续交付(CI/CD)当然也在 DevOps 团队能够实现的目标中发挥了关键作用，因为他们从内部部署和虚拟机环境中转移出来，并利用了云上提供的无状态环境。随着云原生 DevOps 的成熟，我们还将继续看到生产周期在许多方面的进步和改进。一个这样的例子是 DevOps 如何利用微服务来合并 CD 和 CI。

最近在法国尼斯举行的[devo PS World | Jenkins World 2018](https://www.cloudbees.com/devops-world/nice)大会上， [CloudBees](https://www.cloudbees.com/) 的高级架构师 [James Strachan](https://www.linkedin.com/in/jstrachan/) 表示:“我们发现，要想走得更快，你需要摆脱这些我们以前常常没有想到的 CI/CD 块。

[企业管理协会(EMA)](https://www.enterprisemanagement.com/) 的分析师 [Torsten Volk](https://www.enterprisemanagement.com/about/team/Torsten_Volk.php) 说，在许多方面，合并 CI/CD 对于实现持续交付“作为开发运维的最终目标”至关重要。“开发人员需要不断地发布新代码，并立即收到产品反馈，只需将新代码提供给最终用户的一小部分即可。观察这种新代码的行为使开发人员能够根据现实生活中的用户需求，进一步微调他们的应用程序或微服务，”Volk 说。与此同时，开发人员会收到关于他们的新代码如何影响性能、可靠性以及成本的即时反馈。”

使用 DevOps 将 CI 与 CD 合并也意味着更好、更严密的安全性。

“通过解除 CI 和 CD 之间的这种人为隔离，IT 运营商可以集中解决持续的安全性和合规性，这是当今业务线的核心痛点，”Volk 说。这应该通过将安全性和法规遵从性实施为代码来实现，以集中定义和实施代码和基础架构配置、数据处理以及整体部署体系结构方面的要求

成功地合并 CI 和 CD 还取决于将特定的工具整合到管道中。当然，自动化是重中之重。Strachan 说，例如，在集群上部署的开发人员可能会看到云上的微服务“像野火一样增长”。“因此，很快你就需要实现某种自动化来跟踪和测试所有这些东西。”

## **隐藏的瓶颈**

当不同的团队沿着生产流水线工作时，暂停开发代表了 CI/CD 开发周期中需要改进的地方。例如，对于测试环境数量有限的组织来说，一个不必要的更新或一个长达四小时的测试可能会阻止一个紧急代码修复的完成。Strachan 说，这个场景是一个具体的例子，说明了如何将“CD 与 CI 相结合可以消除这类瓶颈”。

"你真正想做的是把你的 CD 移到你的 CI 中，Strachan 说. "以前，人们经常想‘我需要一个部署工具，所以我要用 Spinnaker。我需要一个 CI 工具，所以我会选择詹金斯。"

相反，当合并 CD 和 CI 时，这些过程是并行完成的，这“为每个部署到它自己的独立动态环境中的拉请求创建了一个动态预览环境，”Strachan 说。

因此，安全扫描或漏洞检查等任务以及其他并行测试是可能的，因此“如果一个人正在处理一个紧急的 P1 补丁以修复内存泄漏，然后另一个人正在考虑在主页上使用什么图标，一个过程可能需要几周时间，而另一个过程可以直接完成，”Strachan 说。“一旦拉动请求被批准，你几乎可以直接投入生产，”Strachan 说。

针对云原生部署的 CD 与 CI 的合并还涉及到开发和运营角色的合并。“对很多人来说，DevOps 意味着全栈开发和转移所有遗留的东西，”[cloud bees 的 DevOps 宣传员 Brian Dawson](https://www.linkedin.com/in/bvdawson/) 说。

“因此，无论是否是云原生开发，这都意味着允许访问短暂的云基础架构，为开发人员提供测试所需的工具，并允许开发人员提交代码，直接投入生产。”

汇丰运营部平台数字运营全球负责人 Cheryl Razzell 说，汇丰在一定程度上依赖 CI/CD 工具“从内部重建银行”，以此彻底改变汇丰向客户提供服务的方式。这需要从零开始构建许多流程，并集合团队来构建基础设施。“我们重建了一些詹金斯大师，并意识到我们想要稳定环境，”拉泽尔说 CI/CD 平台中的另一个工具当时出现了故障，因此我们必须通过堆栈来重建堆栈，因此我们为 CI/CD 平台完全构建了一个新的数字基础架构。"

随着 CI/CD 面向云，开发和部署之间的界限逐渐融合，开发人员也可能承担许多与运营相关的角色。[爱普生](https://epsagon.com/)的联合创始人兼首席执行官[尼赞·沙皮拉](https://il.linkedin.com/in/nitzan-shapira-521291108)说:“随着云部署越来越关注 CI/CD，开发人员的工作也经常涉及测试、自动化、部署和监控。”开发人员实际上是现在部署和更新系统的人，他有权访问系统。如果微服务的设计是好的，一个小的开发团队可以负责服务，也许在团队内部，有人会负责更像运营的所有工作，但这仍然是一个开发者在做，”沙皮拉说。开发人员负责生产，我真的很喜欢这个想法，因为它真的符合模型或现代化，他们转移到云，让开发人员更有能力，在组织中有更大的影响。"

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>