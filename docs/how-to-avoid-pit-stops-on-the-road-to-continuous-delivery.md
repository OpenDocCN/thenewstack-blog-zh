# 为什么单元测试不是持续交付的唯一答案

> 原文：<https://thenewstack.io/how-to-avoid-pit-stops-on-the-road-to-continuous-delivery/>

[云代工厂](https://www.cloudfoundry.org/)赞助本帖。

 [Chip Childers

Chip 在大规模计算和开源软件方面已经花了超过 18 年的时间。2015 年，他成为云铸造基金会的联合创始人，担任技术参谋长。他是 Apache CloudStack 的第一任副总裁，在 SunGard 领导企业云服务时，他帮助推动了该平台的发展，后来又担任 Cumulogic 的产品战略副总裁。在 SunGard 之前，他领导了包括 IRS.gov、USMint.gov、美林和 SEI Investments 在内的组织的任务关键型应用程序的重建工作。](https://www.cloudfoundry.org/) 

企业必须回顾他们的内部过程，并重新思考他们如何处理软件交付生命周期，以使持续集成和持续交付(CI/CD)成为现实。过去的清单和审查根本不是前进的方向。严酷的事实是，大多数企业在持续交付的征途上远远落后。对软件交付过程本身进行根本性的改变和从架子上拿一些工具这样的半步是不同的。

如果目标是更好地响应客户和用户，软件团队需要关注软件交付周期的更快迭代，并围绕快速响应用户反馈来组织自己。虽然可能有代理指标，比如每月发布的数量，但是采用连续交付的最佳成功度量是跟踪从反馈到更新软件的时间。

但是，如果你只是东拼西凑，你不会达到目标。

人们很容易以渐进的方式看待某件事情，并理解一个组织如何才能从目前的状况发展到它想要达到的目标。虽然我认为这总是正确的方法，但只迈出第一步的企业不应该自欺欺人地认为自己已经走得够远了。

## 不要迷恋 CI/CD 工具

通常，团队从 CI 开始，只是通过一些自动化的单元测试来自动化构建过程。这是一个很好的开始，但是不要花太多时间在有多少行代码有单元测试覆盖的图表上。相反，企业应该将他们的自动化测试注意力集中在验证核心业务流程、用户事务和用户交互上，以确保它们仍然按照业务有效运行所期望和需要的那样运行。

CI/CD 策略的下一个复杂级别是倾向于捆绑大量按季度安排的变更，但如果企业止步于此，这也是一个错误。实际上，CI 成了公司暂停努力的一个点。另一方面，CD 是关于通过管道尽可能频繁地将变更投入生产。一旦企业理解了用户将如何受到代码变更的影响，并且自动化了这些变更将如何实现，它就需要鼓足勇气和必要的手段来推动这些变更。

通常，即使一个组织正在追求 CI/CD，它也会培养一种将变化视为风险的心态。这不可避免地导致了这样一种观点，即应该减少变更的频率。这与持续交付正好相反，它阻碍了企业完全采用 CI/CD 的能力。

更小的变化本质上带来更少的风险，这意味着高生产率的软件组织应该能够更快地前进。持续交付的概念和承诺依赖于企业不断部署小变化的能力。此外，人们普遍认为释放会频繁发生。

## 范围软件会相应改变

纯粹以旧的思维方式——CI 工具、单元和验收测试——进入这一领域的企业仍然没有获得任何真正的好处。企业正在部署的变更的范围应该作为它在软件开发生命周期中能够忍受的质量问题的级别的指南。

另一个常见的问题发生在当一个组织决定将事情分解成小的变更，但是仍然有一系列的会议、变更控制委员会或者开发团队必须通过的严格的安全检查。如果您的组织的目标是通过部署更小的变更栈来更快地前进，那么它将不会有任何进展，直到它全面地重新思考它的内部形式化的发布周期方法。

在受到严格监管的部门中运营的组织，如政府机构，必须通过将变更和必要的文档作为他们发布的产品的一部分来克服这些挑战。政府部门之外的组织可以效仿他们，通过对软件进行更改并描述这些更改将如何影响标记版本中的用户来克服文档需求。一个很好的例子是美国政府的 cloud.gov 团队如何以编程方式生成文档，比如他们的系统图。

想要在 CI/CD 中取得成功的企业必须找到一种方法，将那些对软件是否应该发布有意见的人的意见编入某种可以快速完成的自动化测试中，而不是听取他们的意见。否则，该路径上的每一个手动步骤都只会将这些交付推得更远。

## 组织如何解决这个问题

太多的企业卡在中间的某个地方——他们有各种工具来允许其中的一些实践，但是内部流程、清单或管理权限下的决策阻止了组织定期发布更新。

大量的开发人员被困在这些软件开发周期中，要么甚至不尝试 CI/CD，要么通过专注于工具、测试和自动化来拥抱它的人工版本。

组织有两种方法来解决这个问题。一种方法是从获得 CI/CD 工具开始，并授权您的各种开发团队在企业范围内开始使用公共构建服务。另一种方法是识别将从更高的速度、更小的变更集中受益最多的开发团队，并允许从该经验中获得的洞察力渗透到整个业务中。

我认为后一种模式在大多数情况下效果更好，因为涉及的人员数量保持在最低水平，IT 组织中更关注法规遵从性和审计的部分将有更大的灵活性来了解单个应用程序范围内发生的事情。企业应该更愿意尝试一个应用程序和一个团队，而不是试图推动整个公司一起进行转变。

CI/CD 的目标总是在移动，这是由设计决定的，但是请放心，当所有能够受益于更快交付的团队都实现这些结果时，您的组织将知道它开始实现 CI/CD 的目标。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>