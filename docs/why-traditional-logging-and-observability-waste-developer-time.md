# 为什么传统的日志记录和可观察性会浪费开发人员的时间

> 原文：<https://thenewstack.io/why-traditional-logging-and-observability-waste-developer-time/>

这是本月晚些时候 KubeCon + CloudNativeCon 系列文章的一部分。

过去几年见证了 DevOps 的变化。容器和微服务突出了这些趋势，安全责任分散到更多的团队，并试图尽可能自动化。

你可能会说，共同点是让一切都成为云本机——容器集中体现了对架构师的重视，更多的东西以“服务”的形式提供，并且通过将一切都转移到异地(按需)服务器，扩展似乎是自动化的。但最大的“哲学”转变是“左移”。

我们最近看到了一个关于这种情况的非 DevOps 例子:[新冠肺炎疫苗](https://www.nytimes.com/interactive/2020/04/30/opinion/coronavirus-covid-vaccine.html)。想想 2020 年 3 月冠状病毒让我们陷入的紧急情况。我们需要一种疫苗，但疫苗生产过程通常需要数年的多阶段测试。为了生产这种疫苗，学术研究和临床前试验要么被跳过，要么被减少。试验阶段重叠，而不是等待前面的阶段完成。最终，这一策略帮助在不到一年的时间里生产出了一种可行的疫苗。

这个想法同样适用于软件。规划阶段之后是编码，然后是测试、发布、部署和运营。在这里，前三个阶段相互重叠和重复:计划、编码和测试。一旦达到最小可行产品，发布过程就开始了，但是最初的左移过程继续进行更新和 UX。

说真的，这个概念有多“哲学”？不是抽象的，是具体的。这更多的是开门见山，而不是一个总体哲学:让事情可行，并且做得更快。但如果真的这么实用，为什么我们以前没做过呢？

“左移”这么久才成为现实是有原因的。直到现在才需要。

## 为什么是现在？

云计算已经存在了一段时间，但只是在最近几年才加快了从本地服务器全面转移的步伐。由于更多的数据和流程可以出现在云中，它可以托管更复杂的应用程序。随着这些应用变得越来越复杂，它们的架构也发生了变化。

为了处理新应用程序使用或提供的许多机制和服务，它们被分解成自己的微级应用程序:微服务。将所有组件从一个整体中分离出来，让每一个组件都可以更有效地独立运行，这显然需要一个复杂的架构来使它们协同工作。

云原生开发运维相当自然地缩短了开发周期。过去的 monolith 环境使得在测试中复制东西非常简单。但是有了云，移动的部分太多了。

每一个齿轮和齿轮——一个实例、一个容器、某个应用程序的第二次部署——都有自己的配置。再加上影响某些个人用户体验或某些云资源可用性的确切条件，你就有了一系列不可复制的条件。

因此，开发人员需要在全面部署之前预见越来越多的问题，特别是如果他们将流程外包给另一个“即服务”提供商(尤其是无服务器的)。

如果他们不这样做，后期的故障排除将变得不堪重负。

## 向左前方推进

总体而言，存在与测试、安全和开发运维相关的不同类型的左移。在测试中，我们将测试推到开发的早期阶段，以获得更快的反馈。在安全性方面，我们在新应用发布前就开始保护它——并在构建应用时重申这种安全性。

你明白了——左移意味着将开发阶段移近项目的开始。这对领导开发过程每个阶段的人都有影响。

Ops 过去拥有整个监控体系。随着开发人员和运营人员的关系越来越密切，开发人员不仅更接近运营工具，而且还承担起了运营工具的责任。这种自然发展需要继续下去。

开发人员真正需要的是继续向左推进:通过将故障排除时间吸收到开发过程每个阶段的默认工作流中，找到新的方法来最小化故障排除时间。更短的平均恢复时间(MTTR)现在不仅仅是您产品的一个讨论点，它是这么多微服务投入使用的一个必要条件。

这意味着给予开发人员访问实时生产数据的必要权限。这使得您的整个运营更加灵活和动态。您的开发团队获得了在产品级代码中移动的独立性，而不必等待 Ops 根据具体情况授予他们访问权限。这就是为什么我们将 Rookout 的现场调试提升到与远程调试或可观察性三大支柱同等重要的水平。

## 开发人员第一可观察性的实例

生产调试工具可以与传统的监控和应用程序性能监控(APM)工具分开使用，但是当考虑这些工具一起工作时，演示为什么可观察性需要向左移动更容易。因为事实是，虽然传统的 APM 和监控至关重要，但他们提供的数据通常更让运营人员感兴趣，而不是开发人员。

无论您选择哪种生产调试解决方案，都应该直接与监控和 APM 平台(如 Datadog)集成。在诊断和查明性能问题的根本原因时，这将极大地提高企业的敏捷性和速度。从 Datadog 警报或异常直接跳转到导致错误的特定代码行，而无需重新启动、重新部署或添加更多代码，这就是左移位可观察性的神奇之处。

我们的目标是最终让企业更容易理解他们自己的软件，并缩小以下两者之间的差距:指出影响性能的代码相关问题，在代码行内查明直接问题，以及快速部署解决方案以实现无缝的客户体验，而无需编写更多代码或重新部署应用程序。在现代生产调试器中，这是通过设置不间断断点来实现的，这些断点可以在不停止应用程序的情况下实时提取数据。

## 节省金钱和时间

生产力可以是三种不同资源的产物:时间、金钱和精力。

很难量化通过更早地检测缺陷你会节省多少钱(一个经常被引用的数字是已经投入生产的成本的 100 倍[可能不是真的](https://www.theregister.com/2021/07/22/bugs_expense_bs/))。也就是说，有大量数据表明部署前故障排除和测试的成本与生产中的停机时间相关的成本相比。

如果你考虑生产中的调试成本，考虑一个四人 QA 团队在美国每年的成本约为 30 万美元——zip recruiter 估计这里的平均工资为 7.5 万美元——以及完成这项工作的各种工具的额外费用。

另一方面， [Gartner](https://blogs.gartner.com/andrew-lerner/2014/07/16/the-cost-of-downtime/) 称停机成本为每分钟 5600 美元，或每小时 30 万美元；波内蒙研究所称其价格为[每分钟 9000 美元](https://www.vertiv.com/globalassets/documents/reports/2016-cost-of-data-center-outages-11-11_51190_1.pdf)(或 54 万美元/小时)。

考虑关闭一个完全运行的操作的成本。这意味着将团队的精力转移到其他地方。更多的人将直接参与识别和/或补救问题。甚至非开发人员也不得不降低他们的工作效率来等待工程师来拯救世界。销售代表无法吸引客户；在服务中断后，企业对企业的销售代表可能不得不从进攻(追加销售客户)转向防御和重新赢得信任(避免流失)。

## 结论:攀登下一座山

向左推进越过下一个山脊意味着更快地给你的部队提供正确的补给。说没有任何左移可观测性的工具是一个神话，但应该有更多的工具。说 QA 这样的团队正在消亡是一个神话；他们的工作性质正在发生变化，他们需要合适的工具来完成工作。

我们认为我们的工作是制造一种工具来填补这些空白。我们必须从两个角度来看待它，既是作为服务提供商，也是作为 DevOps 实践者。我们预计客户的这种方式会越来越受欢迎，所以我们正在做相应的准备。其他服务提供商也应该如此。我们正在把自己的内部调试过程推向左边；很难想象其他科技公司会不一样。

*要了解更多关于云原生的话题，请参加 10 月 24 日至 28 日在底特律举办的[云原生计算基金会](http://cncf.io/)和云原生社区 [KubeCon + CloudNativeCon 北美 2022](https://events.linuxfoundation.org/kubecon-cloudnativecon-north-america/) (以及虚拟)。*

![](img/25bc05722c52e80806074bddd7e413fd.png)

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>