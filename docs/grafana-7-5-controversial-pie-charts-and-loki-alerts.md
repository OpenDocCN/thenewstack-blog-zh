# Grafana 7.5:有争议的饼图和洛基警报

> 原文：<https://thenewstack.io/grafana-7-5-controversial-pie-charts-and-loki-alerts/>

Grafana Labs 在其广受欢迎的 observability 平台上引入了许多功能，这可能是其今年最重要的发布，届时它将于 6 月发布 Grafana 8.0。

这些更新在很大程度上来自活跃的 Grafana 开源社区的反馈。[企业管理协会(EMA)](https://www.enterprisemanagement.com/) 的分析师 [Torsten Volk](https://www.linkedin.com/in/torstenvolk) 告诉新的堆栈:“可用性的提高，与 Grafana 和第三方软件的更紧密集成，以及查询缓存都解决了在野外可以找到的挫折点。”。“虽然这是一个增量版本，但它可能会普遍提高最终用户的满意度，这是 Grafana 在可观察性竞赛中保持领先的关键。

Grafana Labs 的团队负责人[李仁港](https://www.linkedin.com/in/daniel-lee-57a6708/?originalSubdomain=se)告诉新堆栈，用户应该特别欣赏 Loki 的新更新，包括在 Loki 指标查询上创建警报的能力，以及让用户基于特定标签和值进行搜索的新日志浏览器。“特别是，日志浏览器消除了滚动潜在的数百个标签来识别日志流，用直观的搜索过程取代了耗时的过程，”Lee 告诉 News Stack。

至于在其他新功能中引入饼状图，有一些与该功能相关的背景——其中一些并非没有争议。事实上，Grafana Labs 已经在 2015 年的一篇博客文章中承认了 GitHub 和会议上提出的大量提供饼状图的请求。然而，在许多情况下，这些请求被视为安抚业务人员的一种方式，对于 Grafana 的主要原因并不重要:为应用程序性能的可观察性提供非常容易获得的指标。马特·托贝克在 2015 年写道，风险在于饼状图“可能会妨碍数据。”

在“饼图不好”的原因中，托贝克在可观察性的背景下描述了以下缺点:视觉 CPU 过载，过度依赖颜色，时间序列数据无效，以及“馅饼不应该生长”

“当有超过 2-3 个明确定义的部分时，饼图会阻碍数据，”托贝克写道。"再多一点，就几乎不可能迅速辨别出价值观的差异."

与此同时，Lee 在一篇博客文章中写道，虽然注意到饼状图自 Grafana 创建之初就一直是其经常请求的功能，并且饼状图已经“非常一致”，但以这种方式可视化指标数据的选项是 Grafana 7.5 的关键新功能之一。

“虽然我们几年前推出了一个基本的饼图面板，但它从来不是 Grafana 的内置可视化选项，”Lee 写道。“在 7.5 中，我们引入了一个新的改进的饼图面板(beta)，它现在是 Grafana 可视化库中的一等公民。该面板是完全重写的，标准样式、图例、覆盖和字段与其他内置可视化一致。”

Volk 说，虽然饼状图看起来不错，对可观察性指标来说并不重要，但它们仍然是有用的。沃尔克说:“虽然我对这种或那种方式不太热衷，但我相信，如果在适当的环境下谨慎使用，饼状图可以有自己的位置。”“我还没有看到他们在当前实现中内置的‘护栏’，但让我们让仪表板设计者决定是否要进入 piechart 兔子洞。”

Lee 表示 Grafana 7.5 提供的其他新功能包括:

*   Loki 的警报支持:LogQL，Loki 查询语言，“允许您从日志中创建指标，7.5 允许您在这些 Loki 指标查询上创建警报。”
*   Loki 标签浏览:新的日志浏览器允许用户“使用您选择的标签和值构建查询”，而不必手动滚动标签下拉列表来查找查询编辑器中的日志流
*   [Grafana Tempo](https://grafana.com/oss/tempo/) 作为后端数据源添加:分布式跟踪后端。
*   速度已被转换为“后端数据源”“这意味着不再支持 tempo-query 的 Jaeger 响应，”Lee 写道。"只需指向速度配置文件中设置的端口来配置数据源."
*   Grafana Enterprise 中的查询缓存:Grafana 现在临时存储数据源查询的结果。这种能力加快了仪表板加载时间，降低了 API 成本，并降低了 API 限制或抑制请求的可能性，”Lee 写道。

“这些和其他新功能对社区特别有帮助，因为它们继续使 Grafana 更容易使用和更强大，同时降低了进入平台的门槛，并帮助更多的人进入 Grafana 社区，”Lee 说。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>