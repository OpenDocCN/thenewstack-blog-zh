<html>
<head>
<title>Conway's Law and Internal APIs at The New York Times</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纽约时报的康威定律和内部API</h1>
<blockquote>原文：<a href="https://thenewstack.io/conways-law-internal-apis-new-york-times/#0001-01-01">https://thenewstack.io/conways-law-internal-apis-new-york-times/#0001-01-01</a></blockquote><div><div id="tns-post-body-content">


<p class="translated">昨天，我们讨论了“纽约时报”如何将其十几个外部应用程序编程接口(API)作为其150多个内部API的一种驱动效率和创新的方式。今天，我们来了解一下组织是如何设计其API的，以便它们不仅仅是其内部组织的反映，这是一个被称为康威定律的诅咒。</p>
<p class="translated">对《纽约时报》来说，改造内部API结构更多的是一种文化和组织变革——其中大部分反映在论文本身的章节中——至少有150个内部API每天进行大约80亿次调用，由许多不同的团队和利益相关者所有。</p>
<p class="translated">《纽约时报》的API架构师<a href="http://blog.sefindustries.com/" class="ext-link" rel="external ">斯科特·范伯格</a>说:“在内部，当我为另一个团队提供关键服务时，我的经验导致一些东西中断或工作不顺利，这可能导致一些东西无法启动。</p>
<blockquote><p class="translated">“我们有时会忘记，我们的组织结构不应该反映在我们发布内容的方式上。”</p></blockquote>
<h2 class="translated">康威定律</h2>
<p class="translated">但这并不新鲜，出版业仍然以印刷为基础，甚至许多在线出版物都是先印刷后出版的。不要被每个人都在网上获取新闻所迷惑，纽约时报仍然有超过110万份的印刷发行量。只是它发布消息的方式仍然反映了这一点，这似乎越来越不理想。</p>
<p class="translated">“我们思考信息的方式，即使是对即将出版的新出版物，在很多方面仍然是一种印刷心态，”他说。</p>
<p class="translated">但这就是他们164年来一直在做的事情，所以这有什么关系呢？因为<a href="http://www.melconway.com/Home/Conways_Law.html" class="ext-link" rel="external ">康威定律</a>，组织反映了技术的构成方式，反之亦然。</p>
<p class="translated">例如，今年11月，美国最高法院大法官鲁斯·巴德·金斯伯格和女权领袖格洛丽亚·斯泰纳姆与作家菲利普·加兰尼斯在<a href="http://www.nytimes.com/2015/11/15/fashion/ruth-bader-ginsburg-and-gloria-steinem-on-the-unending-fight-for-womens-rights.html" class="ext-link" rel="external ">月刊“三人桌”中共进午餐</a>这篇关于这些女权主义先锋的令人难以置信的文章被许多读者错过了，因为“当我们在我们的平台上发布它时，页面顶部写着‘时尚与风格’部分，原因是这来自‘时尚与风格’——‘三人桌’就在那里。这是一个过时的团队划分，但却是一个组织的事情。”人们没有意识到，像这样一件史诗般的作品出现在时尚版上可能会看起来很糟糕，因为这只是它的来源。</p>
<p class="translated">另一次，一个伟大的国家甚至国际新闻可能来自地铁服务台，只有那些对三州地区感兴趣的人阅读。书桌上写的东西不一定描述新闻来自哪里，但是，由于时代的技术和文化架构，这就是发生的事情。</p>
<p class="translated">“我们有时会忘记，我们的组织结构不应该反映在我们如何发布内容上，”范伯格说。</p>
<p class="translated">当然，说起来容易做起来难。当你谈论拥有1300名记者的世界上最大的新闻编辑室之一时，你肯定需要某种更严格的组织，因为这些团队中的每一个都不可能知道另一个在做什么。这个组织问题必须被带入我们的数字世界。</p>
<p class="translated">自60年代以来,《纽约时报》就在a部分引用了当天的内容。范伯格正在为此构建一个API，并发现该部分有一半时间出现在更正中，另一半时间出现在摘要中，这可能对它在印刷版中的出现有意义，但在数字版中则没有意义。</p>
<p class="translated">“164年的内容是一个挑战，也是我们最大的优势之一，”他说。</p>
<p class="translated">在很多方面，时报是一家大数据公司。追溯到1851年左右的所有日常文章都被存档和存储为类似于巨大的可搜索pdf的东西，并使用地理空间数据分析工具进行剪切，就像那些制图员使用的一样，以在页面上定位每篇文章。</p>
<p class="translated">所有这些数据都存储在一个内部API可访问的系统中，包括所有订阅者都可访问的<a href="http://query.nytimes.com" class="ext-link" rel="external ">可搜索数据库中的全文。通过时光机器，你可以见证在这个时代的生活中，一些部分是如何存在的，而另一些部分已经死亡。</a></p>
<p class="translated">例如,《泰晤士报》的档案中有超过17000份食谱。“我们只是拥有这些内容，几年前，我们就像‘哦，也许我们应该开始考虑将这些文章货币化，因为我们可能比食品网有更多的食谱’。”这导致了<a href="https://itunes.apple.com/us/app/nyt-cooking-recipes-from-new/id911422904" class="ext-link" rel="external "> NYT烹饪应用</a>。</p>
<p class="translated">当《泰晤士报》砍掉了其有44年历史的桥牌专栏和2007年的革命城市博客时，今年不得不做出改变。</p>
<p class="translated">“我们的变化速度比以往任何时候都要快，但随着我们的变化，我们看到了历史上看到的许多变革阻力，”范伯格说。随着这些变化，也需要有结构性的变化。</p>
<p class="translated">“我们仍在创造最优质的信息，但我们只是在想新的方法，”包括管理、共享、重复使用和分发到不同平台和设备上的新方法。“我们正在对印刷品做同样的事情，我们只是重新发现如何在网络、移动和社交的背景下做到这一点，并试图在给人们提供他们想要的信息和他们需要的信息的同时做到这一点，”范伯格说。</p>
<p class="translated">《纽约时报》的第一个网站于1996年推出。这实际上是离线内容的复制，离线内容以图片的形式每天发布一次。从那以后，他们显然经历了很多变化，这导致了大量服务的产生——一些服务本身可以被认为是一个整体——它们组成了面向服务的架构。</p>
<p class="p1 translated">在过去的四年里,《纽约时报》大幅增加了对技术人员的投资。Feinberg承认，拥有数百名工程师的团队，如果他们都共享同一个界面，开发几乎是不可能的。他还解释说，他们不使用大型企业工具，而是围绕其<a href="https://github.com/NYTimes" class="ext-link" rel="external "> GitHub </a>进行标准化，GitHub现在有大约600个代码库，约占时报总回购量的三分之一。</p>
<p class="translated">“我们的服务肯定越来越小。“微服务这个术语有很长的历史，但我们正朝着这个方向前进，”范伯格说。“在内部，我们正在走向一个世界，我们所有的API都将用Swagger或类似的东西来记录。随着新的<a href="https://openapis.org/" class="ext-link" rel="external "> OADF计划【开放API定义格式】</a>，它无疑拥有了最多的关注，从我们的角度来看，它拥有了最多的工具，我们所有的API都将以至少相同的方式记录，但它超越了这一点，因为我们正在弄清楚我们的合同测试是如何工作的。”</p>
<p class="translated">他说，他们不仅需要确保其API被记录在案，还需要以一致的方式对其进行测试。对于公共API，他们使用Runscope进行契约测试，每半小时调用一次端点。他承认这太长了，无法从中检索分析，但“这证实了我们的API符合我们已经同意的标准。”</p>
<p class="translated">Feinberg继续说，在整个团队中，他们正在推出和添加更多内容，改进他们定义API的方式，以及如何在API中定义资源。</p>
<p class="translated">API团队也在跨部门的所有API中使用相似的词汇，Feinberg说这有很大的不同。《纽约时报》有一个圆锥形的文章数据存储库，有一致的词汇，这使他们可以有很多不同的方式来显示文章内容，但他说，“最终，都要回到同一个系统。在标准化方面，我们肯定有很多工作要做。”</p>
<p class="translated">此外，他们正在向新API的规范优先开发策略靠拢，甚至在开始编写代码之前就获得反馈，人们甚至在决定使用哪个数据源之前就与API进行交互，甚至在技术建立之前就努力改善跨团队的交流。</p>
<p class="translated">目前，《纽约时报》将继续在你打开报纸或网站或应用程序或手表时看到的东西、它的API合作伙伴想要的东西以及稳定一致的API架构之间寻找平衡。</p>
<p class="attribution translated">特色图片:<a href="http://developer.nytimes.com/readtweet_app" class="ext-link" rel="external ">关于纽约时报文章的地理可视化</a>，作者<a href="http://projects.justinblinder.com/" class="ext-link" rel="external ">贾斯汀·布林德</a>。</p>


<div class="tns-logo-slug">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 68 31" version="1.1">
<title>Group</title>
<desc>Created with Sketch.</desc>
<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
<g id="Group">
<path d="M24.002,29.619 L29.77,29.619 L29.77,15.808 C29.77,15.038 29.622,11.265 29.59,10.414 L29.77,10.414 C31.424,14.019 31.473,14.147 32.168,15.322 L39.65,29.618 L44.845,29.618 L44.845,0 L39.075,0 L39.075,11.064 C39.075,12.197 39.075,12.44 39.182,14.472 L39.325,17.468 L39.151,17.468 C39.034,17.267 38.596,16.173 38.467,15.929 C38.164,15.323 37.725,14.512 37.373,13.905 L30.031,0 L24,0 L24,29.619 L24.002,29.619 Z" id="Path-Copy" fill="#FF3287"/>
<path d="M56.948,0 C50.745,0 47.606,3.43 47.606,8.296 C47.606,14.114 51.036,15.404 55.518,17.132 C60.438,18.853 61.782,19.332 61.782,21.539 C61.782,24.225 58.969,24.867 57.401,24.867 C54.579,24.867 52.493,23.342 51.536,20.858 L47,24.185 C49.43,28.937 52.145,30.185 57.713,30.185 C59.364,30.185 62.059,29.74 63.727,28.694 C67.779,26.156 67.779,22.22 67.779,20.898 C67.779,18.129 66.531,16.207 66.178,15.726 C65.049,14.121 63.032,12.918 61.25,12.278 L57.084,10.914 C55.073,10.267 52.928,10.105 52.928,8.019 C52.928,7.707 53.008,5.528 56.288,5.319 L61.465,5.319 L61.465,0 C61.465,0 57.342,0 56.948,0 Z" id="Path-Copy-2" fill="#00AFF4"/>
<polygon id="Path" fill="#00AFF4" points="5.32907052e-15 1.77635684e-15 5.32907052e-15 5.319 7.572 5.319 7.572 29.564 14.132 29.564 14.132 5.319 21.544 5.319 21.544 1.77635684e-15"/>
</g>
</g>
</svg> </div>

</div>
</div>    
</body>
</html>