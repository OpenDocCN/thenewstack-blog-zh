# 我们需要在 Kubernetes 中保护数据的 3 个原因

> 原文：<https://thenewstack.io/3-reasons-we-need-data-protection-in-kubernetes/>

为了理解保护 Kubernetes 应用程序的重要性，将今天的容器环境与八年前 Kubernetes 刚成立时的环境进行比较是有益的。

 [高拉夫·里什

Gaurav 是 Veeam Kasten 的产品和合作伙伴副总裁。他处于 Kubernetes 生态系统合作伙伴关系的前沿，并且是云原生创新的频繁发言人和作者。他之前负责思科云媒体处理业务的战略和产品管理。](https://www.linkedin.com/in/rishigaurav/) 

当时，容器环境中的数据保护是事后才想到的。容器被认为是无状态的轻量级结构，可以快速启动应用程序。由于这些过于简单的应用程序没有数据依赖性，并且可以在没有任何明显副作用的情况下终止或重启，因此企业没有将保护策略放在高度优先的位置。

随着 Kubernetes 发展成为一个更加普遍的企业级项目，这种情况发生了变化。随着用户在集群中运行数百个节点，很快就可以清楚地看到，任何处理业务功能的重要 Kubernetes 应用程序都需要数据在最初的容器启动之后继续存在(客户的购物车、银行交易等)。).

Kubernetes 发展很快，增加了这些处理状态的能力，包括 StatefulSets、容器存储接口(CSI)等构造。换句话说，随着 Kubernetes 的成熟，应用程序变得有状态，数据库成为当今最流行的工作负载之一。这一演变导致备份和灾难恢复等数据保护计划成为企业的当务之急和优先事项。

让我们深入了解 Kubernetes 本机数据保护背后的一些驱动因素:

1.  云原生应用的兴起。
2.  有状态应用程序的激增。
3.  IT 中不断变化的角色和范围。

## **云原生应用**

尽管体系结构(服务器、虚拟服务器、容器)不断发展，变得更加动态和分布式，但保护数据的核心要求仍然是当务之急。

对于 Kubernetes 操作环境中的云原生应用程序，底层应用程序架构与基于虚拟机管理程序的环境完全不同。因此，需要一种新的 Kubernetes 本地数据保护方法。突出这些变化的几个例子包括，在 Kubernetes 中，pods 不断被重新安排到不同的物理节点，因此使用虚拟机作为备份单元是行不通的。此外，有了 Kubernetes，元数据对象(秘密、配置映射等)的数量有了数量级的增长。)除了存储卷数据之外，还需要进行备份，这使得基于虚拟机管理程序的备份不合适。

因此，使用云原生应用程序作为备份和恢复操作的原子单位的 Kubernetes 原生解决方案应该是每个希望实现基础架构和应用程序现代化的组织的目标。

## **有状态应用**

虽然基于 Kubernetes 的应用程序的起源是不包含状态的简单、短暂的工作负载，但自那以后已经发生了很大的变化。解决重要业务功能的应用程序需要状态。从开发或运营的角度来看，在 Kubernetes 环境中运行无状态构造，在遗留环境中运行有状态数据库并不是最佳选择。

因此，Kubernetes 本身发展到包括允许云原生应用包含跨单个 pod 持续的状态的构造。这些构造包括在 2017 年引入 StatefulSets，这使得能够在高度可用的环境中处理分布式数据库集群。运营商框架在 2018 年开始受到欢迎，使应用程序能够控制其生命周期操作，并定义单个微服务的依赖关系，包括包含状态的微服务。同年，容器存储接口(CSI)开始广泛使用，使存储供应商能够向应用程序公开标准的块和文件接口。2020 年，卷快照成为 Kubernetes v1.20 版本的一部分，允许您从以前的快照恢复或克隆数据。此后，还增加了更多的功能，目前正在努力使有状态应用程序在您最喜欢的 Kubernetes 环境中轻松工作。

所有这些进步的最终结果是，数据库是当今 Kubernetes 上最受欢迎的工作负载之一。Redis，Postgres，MySQL 等。都是在集装箱上运行的一些[顶级技术的例子。这极大地提高了生产率，简化了操作。然而，这使得使用易于操作的 Kubernetes 本机备份和灾难恢复工具来确保您的环境受到保护变得更加迫切。](https://www.datadoghq.com/container-report/)

## **转换角色**

Kubernetes 使应用程序开发和交付更快更好的方法之一是在基础设施和应用程序团队之间架起一座桥梁。基础架构团队通常负责构建和交付管理安全云原生基础架构的工具，我们称他们为提供商。应用程序团队是这些工具的消费者，专注于构建业务应用程序。

Kubernetes 允许基础设施团队创建灵活的环境，可以跨内部和云进行部署。这些环境可以通过提供安全、备份和灾难恢复等通用功能的平台进行扩展，这些功能可以保护作为 Kubernetes 集群的一部分引入的应用程序。另一方面，应用程序团队不需要打开服务单并等待漫长的过程来执行数据恢复或回滚等功能。相反，如果经过身份验证和授权，他们可以利用自助服务功能来执行这些功能。

这就是 Kubernetes 本地基于角色的访问控制(RBAC)的用武之地。Kubernetes 本地数据保护工具可以识别这些 RBAC 结构，并可以确保应用程序团队只能访问并获得其 Kubernetes 管理员配置的应用程序和名称空间的可见性和操作。这与 Bottlerocket 或 Red Hat Enterprise Linux 等容器优化操作系统相结合，可确保在保持操作敏捷性和关注点分离的同时遏制攻击面。

## **结论**

随着组织将 Kubernetes 作为其操作环境，备份和灾难恢复等数据保护计划已成为当务之急。这将需要选择正确的 Kubernetes 原生数据保护工具，为基础架构和应用团队提供以 DevOps 速度创新的能力，同时确保云原生应用可以顺利扩展和运行。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>