# 你的首席架构师并不真正了解微服务

> 原文：<https://thenewstack.io/genius-techie-doesnt-really-understand-cloud/>

毫无疑问，炒作胜过学习，这只是事实；在互联网时代，我们有大量可用的即时信息。专家需要时间来辨别什么是重要的，什么是不重要的。但最终，跟随领导者可能是最好的方法。

几个月前，我被要求审查一个将使用“微服务”架构的应用程序的基础架构图。

“我在这里只看到一个数据库，”我说。“所有独立微服务的数据存储库是什么？”

“哦，这让事情变得太困难了——只有一个数据库要好得多，”首席架构师回答道。“但我们有一个 API 层微服务，将所有其他微服务连接到它。”

“如果数据库关闭，会发生什么情况？微服务不就下去了吗？如果您需要升级数据库服务器，这不会影响整个系统吗？”

“当然可以。你必须这么做。”

这里的首席架构师参加了几个以微服务架构为主题的会议，并阅读了许多关于该主题的博客帖子。但从根本上说，他不知道微服务架构的根本“存在理由”是什么。

同样的，我经常遇到敏捷开发商店，它们总是运行两周的冲刺，不管是什么项目(对[人而言超过了过程，](http://agilemanifesto.org/)嗯？);精益创业公司“计划”在客户第一次与产品互动后不久就耗尽种子资金；以及依赖手动软件更新和构建 AWS AMIs 来“保存配置”的云架构

这不仅仅是普通的无知。这些都是一些人花时间去学习新的东西，并把他们正在做的事情贴上那个东西的标签，而完全不理解那个东西是什么的例子。我们当前浏览博客文章并试图通过推特获取信息的文化让我们比自己想象的更加无知。因此，在很大程度上，我们比什么都没学到的情况要糟糕得多。毕竟，不知道什么是精益创业要比错误地认为你已经知道它好得多，这样你就可以虚心学习。

这里的总体问题是这样的:我们在 IT 领域有一个重大问题，即技术专业人员构建他们认为是最佳实践的东西(例如，云、微服务)，但他们实际上不是。这是因为那些专业人员没有正确理解什么是最佳实践。这有三个主要原因:

### 1.缺乏继续教育

里面没有好的继续教育。我们有会议，但大多数是由供应商经营、供应商审查和供应商增加收入的。尝试只参加甲骨文全球大会、VMworld 和微软大会来了解云计算！在 AWS 于 2013 年发布近五年后，[微软](https://gigaom.com/2013/10/07/microsoft-embraces-celebrates-enterprise-roots-in-cloud-push/)和[甲骨文](http://readwrite.com/2013/09/25/oracle-reverses-course-embraces-cloud-to-catch-departing-customers)接受了类似 AWS 的云愿景，VMware 也逐渐增加了越来越多的云功能，但非常注重锁定(和高价格)。

### 2.非从业记者

持续了解 IT 领域新技术的唯一途径是通过科技新闻，遗憾的是，从业者几乎从未进行过这方面的工作。一般来说，科技新闻只是由公关机构推荐的专业记者，他们经常与首席执行官交谈。当某人实际上花了四到五个小时测试某项新技术时，通过查看有多少个人博客帖子流传开来，你就可以看到人们是多么渴望真正的技术从业者评论(例如， [John Titus](https://medium.com/@john.titus/moving-a-simple-api-to-amazon-s-api-gateway-680d025e0921) 和 [Hiram Software](https://blog.hiramsoftware.com/blog/day-one-aws-api-gateway/index.html) 最近对 AWS API Gateway 的评估)。

### 3.技术创新者对帮助新手不感兴趣

最后，那些在想出新方法和新技术方面做了大量工作的从业者，对写新手指南不感兴趣。这本身并不是对他们的打击，但这确实意味着，作为一个行业，我们没有一种有效的方式来传播新的和创新的方法，除非它在财务上有利于供应商。(这可能是我们有这么多糟糕的 PHP 代码的原因之一——那些是最简单的教程！)

因此，让我尝试给出一些高层次的指导方针，这样你就可以弄清楚你实际上是否正确地做了以下事情:

## 一个合适的云应用架构/部署应该是什么样的？

1.  所有数据都存储在数据存储中，没有数据存储在应用服务器上。日志可能会临时存储在应用服务器上，但会定期发送到中央数据存储。
2.  应用程序服务器在一个阵列中，并设置为自动缩放；您永远不应该知道或关心有多少应用服务器正在运行——除非至少有两个应用服务器在独立的数据中心运行，它们有独立的电源和独立的互联网连接。
3.  数据存储应该是云管理的(例如 RDS、Google SQL)；数据存储即服务(例如，S3、DynamoDB、Firebase)；或者后端即服务(例如，解析)。这使得故障转移、备份和恢复能够实现高可用性。
4.  所有重复的服务器任务—尤其是启动服务器和故障转移—都应该编写脚本，最好是自动响应各种事件。

## 一个合适的微服务软件架构是什么样的？

1.  每个微服务都有一个与其他微服务的瘦连接，通常是通过 RESTful API。
2.  微服务的界限是围绕组织能力来划分的——也许是围绕特定的开发团队。
3.  每个微服务的部署和更新都独立于其他微服务。

## 你怎么知道你做的是否正确？

我不指望在继续教育、会议或帮助不知情的人方面看到任何显著的改善，所以我不指望这个问题会消失。然而，我认为有一个策略可以帮助你理解新趋势:跟随领导者。几乎可以肯定的是，一些相当知名的公司已经做了你想做的事情，并且是出于特定的战略原因(意味着与收入相关的)。确保你将获得相同或相似的利益，并且你所做的不仅仅是为了技术的纯粹性。如果你应该得到不同的好处，那么你应该非常怀疑！记住，即使你的天才技术人员也有巨大的无知漏洞。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>