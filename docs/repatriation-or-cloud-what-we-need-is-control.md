# GitOps 和廉价云神话

> 原文：<https://thenewstack.io/repatriation-or-cloud-what-we-need-is-control/>

[](https://uk.linkedin.com/in/jordimoncompanys)

 [乔迪·蒙公司

乔迪是 Weaveworks 的产品营销总监。他是一名开源产品专家、社区建设者和公共演说家。他是 OpenUK 和 PMM 联盟大使，常驻伦敦。](https://uk.linkedin.com/in/jordimoncompanys) [](https://uk.linkedin.com/in/jordimoncompanys)

Andreessen Horowitz 的王予柔和马丁·卡萨多写了一篇发人深省的文章，指出云供应商占据了公司的巨大市场价值，导致许多组织将其基础设施从云迁移到内部。他们的结论是，长期来看，寡头垄断是不可持续的。三大公共云提供商要么开始放弃目前 30%的利润，要么开始放弃工作负载。我肯定不是财务分析师，所以我最感兴趣的结论是工作负载交付和工作负载遣返。

无论你站在哪个阵营，任何软件公司目前应用的无数应用交付和持续运营用例都可能推动组织采用混合云方法:不完全依赖公共云，不完全回归内部机器或环境。无论是哪种情况，混合和分布式计算、存储和网络方法都会带来环境蔓延，这也称为彻底的混乱。没有对基础设施的控制，组织就无法有效地集成和管理他们的应用程序部署，这阻碍了他们的代码中封装的任何价值。没有对配置的控制，公司就失去了他们的开发人员，也失去了转型和适应的机会。最后，如果无法控制工作负载，公司将完全错失未来。

让我们看看采用混合云模型的原因、随之而来的挑战，以及如何最好地在这些未知的水域中航行。

## 廉价云神话

云计算产业在过去几年里发展非常迅速。人们一致认为，云计算比内部部署更方便，有时还更实惠。然而，现实总是有点复杂。云计算的成本很难预测，包括大量的影子成本，这些成本最终会侵蚀组织的底线，就像 Sarah 和 Martin 指出的那样，它们会严重降低利润。

开始使用云既容易又便宜，但更容易迷失在许可成本的海洋中，这取决于您的工作负载。例如，如果您使用云运行一个相当静态的网站，您不需要定制服务器或操作系统。你可以一觉醒来就知道你的网站每天都在运行。然而，对于复杂的 web 应用程序或企业应用程序来说，情况并非如此。他们通常需要大量集成良好的云服务，例如独特的计算和内存需求、用于不同目的的不同类型的存储，以及跨整个软件交付流程的大量管理工具。

这有点像拥有一辆汽车和租一辆优步。当然，如果你每个月只需要几次乘坐，优步会更便宜。然而，大多数人无法想象没有汽车的生活。这就是为什么大多数人仍然更喜欢拥有一辆车的安心和长期储蓄，而不是完全依赖优步。

下图提供了一些关于 SaaS 产品云消费的有趣数据。

私有云与数据中心的预测[壮观](https://twitter.com/OphirGottlieb/status/1441413386625945614?s=20)。因此，似乎在一段时间内，公司将被混合设置所困。

记住，云计算真的没有看起来那么便宜。如果将云实例的每小时成本与昂贵的硬件服务器进行比较，云似乎更有优势。公共云的便利性和总正常运行时间的承诺仍然很有吸引力，是的，但边缘计算和网络以及私有云的增长，只是在混合是事情的方式这一理念上有所复合。

## 安全和管理挑战

在转向混合云环境时，主要有两个挑战:安全性和环境管理。

保护混合云环境并不容易。混合云包含多样化的基础架构，这使得安全团队难以监控和保护。恶意软件变得越来越复杂，这意味着安全团队必须时刻适应新类型的威胁。企业在安全性方面投入了更多的时间和资源，但仍然存在导致数据丢失、停机和声誉受损的漏洞。必须重新评估和实施安全协议和控制措施，以确保所有安全方面都得到考虑。

在将数据迁移到云中时，IT 部门最关心的问题之一是数据主权。一些公司被要求将数据保存在国家边界内，而另一些公司只是希望将数据保存在自己的服务器上。无论是什么原因，混合云都是将您的数据保留在本地同时仍能从云解决方案中受益的唯一方式。

另一个混合云挑战是基础架构和资源管理。组织希望优化他们对混合云环境的使用，并发现跨环境移动工作负载的机会，并且在不中断服务交付的情况下做到这一点。构建自动化流程是另一个目标。这使得他们可以在手工任务上花费更少的时间，而在战略项目上花费更多的时间。

## 混合云管理解决方案

混合云管理工具应该不受环境限制，与任何云平台中的工具一样，在内部具有相同的功能和效率。一种已经成为混合云管理强有力候选的方法是 [GitOps](https://www.weave.works/use-cases/kubernetes-on-multiple-clusters-and-across-clouds/) 。GitOps 是一种相对较新的(自 2017 年以来)管理混合云基础架构资源的方法。GitOps 是一组实践，它使用 Git 作为唯一的事实来源来管理系统的所有部分，从基础设施到应用程序，从内部到云。它使用 Git 来存储和管理配置项。这些项目不仅包括用于控制资源的配置文件，还包括这些资源的状态以及触发该状态变化的事件。

[Weave GitOps](https://www.weave.works/product/gitops-enterprise/) 是我们的解决方案，它结合了领先开源工具(如 Flux、Flagger)和服务网格工具(如 Istio 和 Linkerd)中应用的 GitOps 原则，以实现跨数据中心和云的混合云管理。

## 结论

云被吹捧为具有成本效益，但隐藏在这个故事背后的是影子成本，它可能会打破有利于内部部署的平衡。出于监管原因，组织希望采用混合云，以避免供应商锁定或采用同类最佳的工具。不管什么原因，混合云管理都不容易。关键是要有正确的混合云管理方法和解决方案。能够应对内部和云之间差异的解决方案。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>