# 您真正想要的无服务器数据库

> 原文：<https://thenewstack.io/the-serverless-database-you-really-want/>

[](https://www.linkedin.com/in/patrick-mcfadin-53a8046/)

 [帕特里克·麦克法丁

Patrick 是 DataStax 的开发人员关系副总裁，他领导的团队致力于让 Apache Cassandra 的用户获得成功。他还担任过 Apache Cassandra 的首席布道者和 DataStax 的顾问，在那里他帮助构建了一些最大、最激动人心的生产部署。](https://www.linkedin.com/in/patrick-mcfadin-53a8046/) [](https://www.linkedin.com/in/patrick-mcfadin-53a8046/)

最终，每个站点可靠性工程师(SRE)工作的可怕部分:容量规划。你知道，在部署应用程序时，所有利益相关者之间的舞蹈。工程真的模拟了正确的负载吗？我们了解应用程序如何扩展吗？产品经理是否准确估算了使用量？我们是否做出了会阻碍我们实现 SLA 目标的架构决策？然后是每个人最终都必须回答的问题:这要花多少钱？这迫使 SREs 承担了工程师、会计和算命师的角色。

大型云提供商很久以前就明白这一点，因此“云经济学”一词应运而生。本质上这意味着:租用一切，只支付你需要的。我想说这条信息起作用了，因为我们都喜欢云。这也不是一种时尚。当最初的基础设施容量讨论*可能*有点偏离时，SREs 可以消除很多不利因素。犯错不再是毁灭性的。只需添加更多您需要的东西，在最好的情况下，服务会自行扩展，让每个人都能睡个好觉。所有这些都没有配置服务器，这就产生了术语“无服务器”

随着无服务器方法在应用程序层的蔓延，数据库已经成为最后一个感受到进步之热的大东西。不过这并不奇怪。有状态工作负载——如我真正想要保留的信息——比无状态工作负载更难解决。云提供商都发布了他们自己版本的无服务器数据库，前提是你同意被锁在他们的围墙花园里。开源一直是可怕的锁定的解药，在这方面，Apache Cassandra 社区正在发生令人兴奋的事情。

## 预言未来的神谕

在分布式数据库的早期，一篇开创性的论文改变了一切:来自亚马逊的[发电机论文](https://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf)，发表于 2007 年。在这篇文章中，一组研究人员和工程师描述了如何构建一个理想的系统来最大限度地提高性能和数据一致性，同时平衡规模和运营。引用这篇论文:“一个高度可用的键值存储系统，亚马逊的一些核心服务使用它来提供‘永不停机’的体验。”它是几个数据库实现的基础，包括后来的 Apache Cassandra。

迪纳摩认为，在即将到来的云时代，廉价的商品硬件是可用的。随着我们的行业慢慢转变为构建云原生应用，商用硬件的定义也发生了变化。我们消耗网络、计算和存储的独立规模组件，而不是裸机或虚拟机。建立一个无服务器的 Cassandra 数据库继续了 Dynamo 论文在这个新范式中的工作；与此同时，新的扩展和部署选项也适合我们的云环境。

## 定义商品

2007 年该论文首次发表时，商品的定义与今天大不相同。大多数服务器级系统体积庞大，极其复杂，难以提供所需的计算能力和正常运行时间。“商品”需要非常便宜的小型服务器，配有最基本的 CPU、磁盘和内存。我第一次在我的基础设施中部署 Cassandra 时，我能够使用商用服务器进行横向扩展，并在此过程中节省了大量资金以获得更好的结果。

然后出现了云，定义也有了更多的变化。商品现在是一种实例类型，我们可以按小时供应和支付。这推动了大规模应用程序的大规模扩展和云原生的兴起，但 CPU、磁盘和内存仍然是必须考虑的因素，尤其是在像数据库这样的有状态工作负载中。因此，可怕的容量规划讨论仍在部署会议上进行。幸运的是，使用云基础设施时，做出错误决策的影响要小得多，尤其是使用 Cassandra。需要更多吗？只需向集群中添加更多实例。再见容量墙，你好秤。

现在，我们正处于 Kubernetes 推进我们可以利用云原生应用做些什么的时代。有了它，我们看到了商品定义的又一次转变。传统的可部署服务器或实例类型已被分解为计算、网络和存储。Kubernetes 为我们创建了一种定义和部署整个虚拟数据中心的方法，其中包含支持我们正在部署的应用程序所需的部件。容器允许对所需的计算(以及何时)进行精确控制。

软件定义的网络在我们的数据中心中动态完成所有复杂的虚拟布线。所有这些创造了一个有弹性、可伸缩和自我修复的环境。我们还获得了精细成本控制的额外好处。再见过度配置，你好云经济。

## 开源:现在比以往任何时候都重要

就像过去 10 年中的大多数数据基础架构创新一样，所需变革的广度和深度只能由积极参与的用户群体来解决。无服务器数据库的革命将发生在开源领域。在早期的无服务器实现中，云移动得很快，但是正如我们在开源中所知道的:要走得远，我们要一起走。使用特定于供应商的无服务器数据库的云经济效果很好，直到它不起作用。自由意味着你可以在任何地方使用它。在云中，在您自己的数据中心，甚至在您的笔记本电脑上。

推动 Kubernetes 流行的一个方面是云的可移植性和自由带来的不可否认的好处。将您的虚拟数据中心部署与任何商用计算、网络和存储提供商进行对比。不喜欢你在的地方？将您的数据中心转移到其他地方。不喜欢租用云中的服务？在库伯内特斯亲自运行它们。不久的将来，我们将在 Kubernetes 和我们围绕现代数据应用这一令人兴奋的部分形成的社区中创建新的云数据服务。

Apache Cassandra 的发电机血统和多年来在最大工作负载中证明的可靠性使其在下一次无服务器数据库革命中处于有利地位。在 [DataStax](https://www.datastax.com/?utm_content=inline-mention) ，我们是只爱开源 Cassandra 的公司；我们已经看到了数据库的未来发展方向，我们很高兴能够参与其中。我们还通过 [DataStax Astra](https://astra.datastax.com/) 在 Kubernetes 中积累了丰富的运行大规模数据库云部署的经验。因此，我们的工程团队已经为无服务器的 Cassandra 做了一些前期工作。我们将提炼和构建关于如何利用新的云原生商品定义的知识，并传递云经济的较低成本。

期待很快在 GitHub 库中看到我们的想法和代码，以及关于我们所学内容的讨论。Cassandra 社区已经在讨论 4.0 之后会发生什么，可以肯定地说，无服务器的 Cassandra 是重中之重。包含在开源项目 [K8ssandra](https://k8ssandra.io/) 中，结合 [Stargate](http://stargate.io) 项目，将进一步扩大部署选项和使用的自由度。

Kubernetes 上的数据依赖于真正的云经济和规模，这将我们带回到我们的 SREs。在不久的将来，当他们考虑容量规划时，我很乐意让他们选择召开一次压力较小的会议。

[*了解更多*](https://www.datastax.com/astradb/serverless) *关于 DataStax Astra 如何通过无服务器数据库实现更快的应用程序开发和简化的操作。*

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>