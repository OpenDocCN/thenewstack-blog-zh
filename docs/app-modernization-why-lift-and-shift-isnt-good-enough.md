# 应用程序现代化:为什么“提升和转移”不够好

> 原文：<https://thenewstack.io/app-modernization-why-lift-and-shift-isnt-good-enough/>

云转型。敏捷转型。 [DevOps](https://thenewstack.io/category/devops/) 转型。这些名字有问题。它们暗示着有一个终点。追逐这些所谓变革的高级领导人和决策者的最后期限也是如此。

但是这些变革机制更多的是手段而不是目的。企业应用程序现代化必须应用持续的文化和技术策略。这是一个持续的学习过程，包括将所有人召集到一起，确定业务和技术需求的优先级。

如果处理得当，应用程序现代化(以及通常推动应用程序现代化的云迁移)将使团队能够更快地发布产品、降低成本和更轻松地扩展，同时限制认知过载和过度疲劳。如果做错了，钱就打水漂了。那么那些罕见的成功案例是什么样的呢？我们将分享两个故事和一些策略。

## 没有放之四海而皆准的方法

当企业计划应用程序现代化时，暂停一下是很重要的，因为你所做的每一个改变几乎都会立即变成[技术债务](https://thenewstack.io/to-reduce-tech-debt-eliminate-dependencies-and-refactoring/)。[](https://www.linkedin.com/in/edwardhieatt/)

将工作负载迁移到云是科技行业面临的最大挑战之一，[VMware 的 Tanzu](https://www.linkedin.com/in/edwardhieatt/) 服务和支持高级副总裁 Edward Hieatt 告诉 New Stack。许多公司已经尝试了很长时间，但大多数仍然无法从中获得价值。

例如，[哈佛商业评论 2020 年调查](https://www.splunk.com/en_us/form/the-state-of-cloud-driven-transformation-by-harvard-business-review.html)中，不到一半的参与者表示他们的云战略在 IT 管理、客户体验和创新方面是有效的。

这种失败率是因为许多 IT 组织只是提升和转移—简单地重新托管到云—以满足人为的截止日期。

“然后我们可能会在一个地方结束，我们可能会像以前一样建造，”Hieatt 说。这种迁移不能操之过急。

首席信息官可能会感到实现某种“云终结状态”的压力但根据 Hieatt 的说法，对于 VMware 的大多数客户来说，这一过渡至少需要五年时间，而且大多数客户无论如何都不会全押在全云上。

> “我坚信，这必须是一场合作，否则我们将会以通常那种糟糕的结局告终。开发者最终会得到他们称之为云的东西，但无论如何都不会像云那样运作。”

VMware Tanzu 的 Edward Hieatt

大多数大型企业采用[多云方法](https://thenewstack.io/serverless-multicloud-popular-with-k8s-users-survey-says/)，决定保持数据中心和私有云以及各种公共云供应商的混合。这个决定可能是基于便利性、传统大型机的复杂性、安全性、合规性、更低的延迟，或者简单地说，如果它没有坏，就不要修复它。
由于企业基础设施可以像雪花一样各不相同，因此不存在适用于应用程序和云现代化的通用[框架](https://blogs.vmware.com/customer-experience-and-success/2021/08/a-framework-for-application-and-cloud-modernization-part-1.html)。

“退后，”希亚特说。“从多个方面考虑问题，根据每个工作负载考虑什么是重要的，而不是一味追求云。”

他补充说，公司需要问自己，“我们实际上想要完成什么？”

甚至答案也会因应用而异。大多数企业都有用 Java 和 Spring 新编写的云原生应用程序、不久前编写的相当现代的 dotNET 和 Java 应用程序、用更传统的语言编写的早期应用程序，甚至一些应用程序运行在世纪中叶的大型机上。加上定制和现成的应用程序。

Hieatt 说:“如果你是一个 IT 团队，并不完全了解这些工作负载是什么，那么很容易将它们推到一个环境中。

他说，第一步是发现并列出所有工作量的清单；像 Tanzu 这样的工具可以提供帮助。

Hieatt 说:“IT 团队与业务线、开发人员和产品团队非常脱节。“过去，他们的工作只是一组标准化的虚拟机和私有云，他们真的不知道在运行什么。”

他补充说，一些 VMware 客户甚至没有他们正在运行的应用程序的源代码。

## 应用程序现代化的 7 R

一旦你知道你在做什么，是时候把 it 和业务放在一起了。

“我们陷入了行业思维，认为所有问题都是技术决策——它会购买哪个解决方案？他们会选择哪家厂商？”Hieatt 说。"有很多争论、预算和研究."

他说，这些都是值得考虑的好事情，但它们不应该是起点。

Hieatt 说:“我认为一直缺乏的是将必须维护和运营的业务利益相关者与做出选择的 IT 团队结合起来。”

业务和 IT 利益相关方应共同展望未来一两年并制定计划，将每个应用程序或应用程序部分分配到七个不同类别中的一个:

### 1.保留。

将会有无法移动的数据，或者可以推迟的大型机现代化。

### 2.重新主持。

将工作负载从虚拟机(VM)移至公共云。在这些情况下，提升和转移实际上是正确的选择，尤其是在内部部署成本过高的情况下。

### 3.重构。

改变应用程序的代码而不改变它的行为，所以用户体验没有变化，但速度或效率应该会提高。

### 4.重新架构。

修改源代码，这往往意味着从根本上改变架构到微服务。这通常允许 it 使用云并提高可伸缩性。

### 5.重建。

完全以云原生方式重建。

### 6.替换。

转向现成的软件即服务产品(SaaS)。

### 7.退休。

弃用该应用程序。

在做出这些决定时，首先要考虑商业因素。优先化通常不是削减 IT 成本，而是寻求增加业务线或收入，这通常意味着能够快速做出改变，并快速、安全和可快速部署地扩展。

但是架构上的考虑，比如可行性，仍然很重要。这并不总是关于大的变化，而是考虑需要什么来使大多数工作负载“足够云友好”以重新托管或重新平台化。

Hieatt 说，整个应用程序现代化过程通常始于大约两周的白板胶粘物协作。“在这个试图找出如何更快更好地做到这一点的世界里，它开始以人为本。让作品告知计划。”

一旦你搞清楚了人的方面，那么你就可以引入自动化、工具和云管理来加快速度。

## 现代化如何帮助留住工程师

应用程序现代化是关于创建一套最佳实践和能力建设。这是关于持续学习的——这对于高招聘率的技术人员来说非常有吸引力。

Kerry Schaffer 是 OneMagnify 的信息技术高级总监；她的工作包括监督数据中心的运营。2020 年，OneMagnify 为客户提供了一个非常紧迫的截止日期，可以为一款标志性车辆的预发布进行预订。

借助 Tanzu 应用托管的微服务，Schaffer 的团队只需进行一些持续集成/持续交付(CI/CD)部署。团队按时交付，客户获得了两倍于预期的预订量。

“事实上，它是在一个可扩展的平台上，这意味着我们能够在没有任何中断的情况下为所有客户服务，”谢弗说。她补充说，从那以后，这位客户又推出了另外四个车辆预订系统，“因为我们用现代的方式编写了这个系统，所以我们能够重用所有的架构。”

在应用程序现代化之旅开始之前，她将 OneMagnify 描述为“开发的大部分都是独石”当该公司开始更新其应用程序时，它优先考虑变化最大的应用程序。

> “今年，由于人才短缺，如果我们没有在 2018 年和 2019 年对我们的应用程序和应用程序堆栈进行现代化，我们就不可能交付今年交付的客户成果。”

——凯瑞·谢弗，OneMagnify

当团队进行这些变更时，他们会从每个应用程序中取出这些块，并将它们转化为微服务，将架构变更与客户请求联系起来。

OneMagnify 开发人员看到了 33%的效率提升。与单一职责分离意味着在每个环境阶段都有票证的情况相比，在零票证的情况下，他们每次部署平均少花了 6 个小时。

“过去，你有 Linux 和 Windows 环境——为了买票，你必须等上海的人醒来。现在他们连夜编码(美国时间)，然后转移到 QA，然后你要求客户测试 QA 中的第一件事，”谢弗说。

“这让他们惊叹不已，并给他们带来了额外的满足感，因为他们正在以更快的速度获得改变。它彻底改变了我们为客户工作的方式。”

但是对 Schaffer 来说，应用程序堆栈现代化最重要的影响是它如何减少了下班后的工作量。在大辞职的时代，这种更好的工作与生活的平衡有助于留住员工。

作为云本地人有助于招聘，因为每个人都想从事新的和现代的工作。这一切都有助于 OneMagnify 持续出现在[最佳工作场所名单](https://topworkplaces.com/company/marketing-associates/delawareonline/)上。

## 发现应用现代化的直接价值

提供医疗保健信息系统的 Cerner 拥有部分可追溯到 25 年前的技术，并处于现代化的不同阶段。大约七年前，据公司杰出的工程师之一 [Greg Meyer](https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fspringone.io%2F2018%2Fspeakers%2Fgreg-meyer&data=04%7C01%7Ckstrem%40vmware.com%7Cdb33910e1bf74fbfbf8f08d9a9e412e3%7Cb39138ca3cee4b4aa4d6cd83d9dd62f0%7C0%7C0%7C637727619332024648%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=Xg%2FwFKpv5dbsoZ%2BP6DLf4t5WHBtCGMhlRFSs1Sn0r5I%3D&reserved=0) 说，Cerner 遇到了 36 小时的停机时间，这表明它无法再从文化或架构上维护其基础设施。

五年前，Cerner 开始向公共云迁移。

这种向当时的 Pivotal Cloud Foundry(后来被 VMware 收购并更名为 Tanzu)的云转型始于 Cerner 工程团队的基层努力，而不是常见的自上而下的指令。

工程师们通过创建基于真实测量的价值流图开始了他们的 C 级宣传活动，因为，正如 Meyer 所说，“你必须证明对客户和整个企业的价值。”

以下是工程师向他们的业务同事强调的三个应用现代化价值流:

### 1.数据库丢失/恢复。

当工程师在迁移到 Tanzu 的过程中维护遗留架构时，他们丢失了遗留数据库——结果是开发人员数据库不再进行备份。

通过切换到 Tanzu self service，他们能够在一周内将所有数据丢失，由四名开发人员尝试修复，到仅四个小时的数据库故障，没有数据丢失，只有一名队友在处理。

### 2.改进的补丁。

在现代化之前，平均需要一个月的时间和两到三个人来执行修补。有了 Tanzu，他们将使用一个标准的公共数据环境，一个人只需点击一个按钮就可以触发自动发布。

### 3.所有节点/单元损失的产生。

Cerner 在生产过程中又经历了一次数据库宕机—该公司将因未能达到其服务级别协议(SLA)而受到处罚。通常情况下，他们会在四名工程师的帮助下，在大约九个小时内关闭。

“但是 Tanzu 在一分钟内就发现了，并在早上 5:30 发出了警报，”Meyer 说。大约 50 分钟后，让每个人都打电话，Tanzu 已经在不到 20 分钟的时间内自动纠正了错误。现在，工程师们能够实现四个 9 或五个 9 的高可用性。

这些只是 Cerner 工程师的概念证明所发现的至少八个商业价值流中的三个。这给了他们前进的能力——但是，在他们的旅程开始一年后，他们想让更多的团队参与进来。这归结为显示结果。

“这整个转变都是关于结果的，”迈耶说。“如果你不能从一个业务部门或客户那里获得好的结果，你为什么要这样做？”

他说，一旦工程师能够超越早期的概念验证，他们就能够超越架构变化，更好地拥抱云原生文化，变得更加敏捷地使用 CI/CD 流程。

Meyer 说，以前，开发人员和 DevOps 团队是两个独立的实体:“当我们转向云原生文化时，我们真的变成了拥抱一个完全跨职能的工程师和 DevOps 团队，他们一起工作，从一个环境到另一个环境，再到另一个环境的流程流。”

现在，同样的人在整个软件生命周期中一起工作，从开发到生产。

Cerner 应用程序现代化的第一阶段大约在三年前完成。但是他们“绝对不会停止，”Meyer 说，并且目前正在寻找方法来改善 CI/CD 过程和可观察性。毕竟，应用程序现代化是一个旅程，而不是目的地。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>