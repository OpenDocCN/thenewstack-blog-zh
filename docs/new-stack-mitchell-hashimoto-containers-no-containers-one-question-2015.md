# 米切尔·桥本:集装箱还是没有集装箱？这是 2015 年的一个问题

> 原文：<https://thenewstack.io/new-stack-mitchell-hashimoto-containers-no-containers-one-question-2015/>

在…里

[part one](https://thenewstack.io/new-stack-makers-mitchell-hashimoto-vagrant-containers-growing-open-source/)

在我们的采访中，Mitchell Hashimoto 谈到了他的第一个技术发现，以及是什么推动了他对自动化的兴趣，以及他为什么开发了诸如 vagger 这样的技术。在第二部分中，Mitchell 讨论了安全性、Hashicorp 的 Atlas 服务和开源管理。

亚历克斯:大家好，我是《新书库》的亚历克斯·威廉姆斯，和我一起的是哈希公司的米切尔·桥本。

你所说的这种复杂的矩阵是最近很多人都在谈论的东西。Docker 谈论它；他们在早期谈论过这件事。你是否已经开始看到不同党派解决这些问题的模式？我是说，码头工人有他们自己的方法。例如，你的方法与 Docker 或其他公司有何不同？

**Mitchell** :我们一次又一次看到的方法——我们看到 VMware 这样做了，我认为这与 Docker 的做法非常相似——就是获得新的技术突破。

[桥本米切尔，Hashicorp:新栈访谈，下集](https://thenewstack.simplecast.com/episodes/mitchell-hashimoto-hashicorp-the-new-stack-interview-part-two)

让我们以 VMware 为例。VMware 的突破是虚拟化，他们展示了虚拟化是如何解决所有这些不同问题的。因此，每个人都希望将一切都切换到虚拟化，并将他们的所有工作流和所有流程都绑定到虚拟化。但是还有另一个突破，或者有些东西不适合那个盒子，不适合虚拟化。这是一种几乎总是奏效的事情，但在某些情况下却不尽如人意。然后当新的事情发生时，可以说你被困在了那个老岛上。

我们注意到的一个趋势或模式是，如果你采用所有的解决方案——如果你采用 Docker 的营销、VMware 的营销或许多其他供应商的营销——而你只是用其他东西替换他们所有的解决方案，那么它们仍然完全有效。用虚拟机取代容器–它们正在解决从物理到虚拟的相同问题。看了一眼，我们说，“嗯，为什么？”我们有一个理论，但我们想测试它，所以我们开始四处打听。

我们的结论是，所有事情的最终目标都是一样的，人们在高层次上遇到的问题也是一样的。你需要知道以什么顺序开始什么；你需要知道什么在运行；你需要知道如何开始那些事情；你需要知道什么在筹备，什么在生产；如何构建容器或虚拟机；你需要知道如何建造一件艺术品。

这些是非常常见的相同问题，所以我们说这些最终目标保持不变，并且它们是技术不可知的-它们不依赖于技术。所以，让我们为最终目标而努力。让我们构建他们想要的工作流:如何从开发到构建再到部署，等等。让我们为此而设计，让所有的技术都浮在下面，而我们浮在上面，我们可以不断地替换它。这就是我们设计软件的方式。

Alex:…根据你提到的五个原则【开发、构建、工件注册、部署和监控&维护】？

**米切尔**:我们把它分成了五个部分。

**亚历克斯**:所以这是你开发自己的产品和服务的基础？

**Mitchell** :我们不认为从根本上来说这就是五个步骤，但我们看到供应商在这五个步骤中分裂，为了使集成最有意义，我们也在这五个步骤中分裂。

**Alex** :回想一下，比如我在 DockerCon 和你谈话的时候，你说的是 [Docker Machine](http://blog.docker.com/2014/12/announcing-docker-machine-swarm-and-compose-for-orchestrating-distributed-apps/) 。它解决了什么问题？你提到它不能解决所有问题。你会如何评估它？

**Mitchell**:Docker Machine 为 Docker 解决了一个巨大的问题，那就是“我如何让一台机器运行我的容器？”这是一个显而易见的问题，需要一个显而易见的答案。但是，我们正在研究的理论和原则是，您自己运行的服务器数量实际上正在下降。

《木偶奇遇记》中的卢克(Kanies)曾告诉我一次，我对此表示赞同:

> 没有更少的服务器就没有未来。

另一方面，服务器并没有减少，但我相信未来你自己运行的服务器会更少，因为服务提供商正在为你选择功能。

回到五年前，人们会说这样的话，“我们永远不能在服务提供商上运行我们的数据库，因为那是我们皇冠上的宝石。我们拥有用户的数据；我们不能泄露出去。“但现在你会看到很多初创公司使用数据库提供商。还有 RDS，你可能拥有它。还有 Heroku Postgres。此外，还有一些服务提供商的历史要长得多:有 DNS，有 CDN，有所有这些不同的服务，你过去都是自己运行的。以前你运行那些服务器，还得管理那些服务器，现在不用了。

我们相信，随着时间的推移，您自己运行的服务器会越来越少。你的应用将会转移到服务提供商那里。他们需要的所有东西都将转移到服务提供商那里。Docker Machine 解决了“为我建造一台服务器”的问题，但在未来服务器越来越少的情况下，你需要一些东西来代替“为我启动一个服务提供商”和“为我配置一个服务提供商”

Alex :这就提出了一些关于服务器本身以及如何管理它们的问题。如果它们不是由所有者管理，则由服务提供商管理。随之而来的，你开始从客户那里看到的一些重要问题是什么？

**米切尔**:如果你是服务提供商的消费者，那么在安全和访问控制方面会出现新的问题。当一切都在您的数据中心并且您运行一切时，您可以仔细控制谁可以访问什么、何时访问以及如何访问，并记录访问情况。现在，我听到的一件事是:在 15 个服务提供商的海洋中，你的安全性只取决于你最弱的接入令牌。

相对于其他服务提供商而言，AWS 拥有出色的访问控制系统。您的弱点是有一个提供者不支持密钥轮换，它只给了您一个可以访问所有内容的根访问密钥。这就是事情对你来说变得棘手的地方，就运行一个大的组织和安全地策划变革而言，有一个根密钥四处浮动，只是等待有人搞砸。这是我们一直关注的一个大问题。我认为这是主要问题。

**Alex** :有一家公司叫jump cloud；他们采用了一些支点，但最初他们试图找到保护钥匙本身的方法，将钥匙放在一个特殊的地方，这样就很难拿到。

米切尔:实际上我认为这是你能做的最好的事情，因为我们没有办法强迫这些服务提供商拥有最好的关键政策。总会有一些弱势的服务提供商存在。实际上，您能做的最好的事情就是隐藏安全风险，并在可控的环境中控制安全风险。

例如，我们的方法是:这些密钥和秘密应该隐藏在 Atlas 中，访问控制应该位于 Atlas 层。最终用户和开发人员永远看不到访问密钥，因为使用它的是 Atlas。Atlas 正在观察他们试图用密钥做什么，并在那个级别做 ACL。不太理想；您宁愿只有一个更强的密钥。但是就像我说的，你不能强迫每个人都有完美的情况，所以这是你能做的最好的。

Alex :那么你打算如何利用你的 Atlas 服务来缓解这个问题呢？

**米切尔**:我们想说的是——我们得到了很多积极的反馈——是:

> 不再有仪表板；服务提供商不再提供 API 密钥。

不要让任何人访问 Heroku 仪表板；不要让任何人访问 AWS 仪表板；不要给任何人 AWS 密钥；不要给任何人 Heroku 钥匙。“你只要给他们阿特拉斯通行令牌。你把所有其他的秘密放进了阿特拉斯。ACL 层是在 Atlas 完成的，它为你隐藏了一切，Atlas 记录了详细的审计日志。

我们将在明年的某个时候宣布一个系统，说明我们如何安全地存储这些秘密，实际上，这是一种让*你*保守秘密并且永远不会把它们交给 Atlas 的方法，我们只是从那里访问它，所以当我们访问它时你会知道。我认为这是正确的方法。

这也是正确的方法，因为它抽象出了这些实现细节。如果你的应用从 AWS 切换到 Google Compute，那么 OS 结构会改变，密钥也会改变。但是开发人员实际上永远不知道，因为开发人员正在查看这个访问其他内容的元键。

**亚历克斯**:这些年来你一直对安全感兴趣。你在华盛顿大学研究它。我不知道这是否仅仅是你被分配的项目的结果。你现在对安全有什么哲学？例如，我们开始看到 Docker 环境中的一些弱点。

**米切尔**:我不是安全研究员。我必须咨询其他人的安全建议。这绝对不是我想自己发明的东西。

亚历克斯:但你对它感兴趣？

米切尔:我对此很感兴趣，因为我认为你需要认识到这一点。在云世界中，可以说一切都有风险。你需要小心你是如何做事情的，我的安全方法是:做其他人在研究中做的事情。不要发明你自己的安全。一个常见的词是，“不要发明自己的密码。”审计一切；记录下一切。

例如，Atlas 的数据库永远不允许删除。我们只允许创建和读取，所以数据只会不断增加。我们不会丢失以前的数据，我们只是将它存档，因为它对审计和历史很有用。

关键是咨询那些真正知道自己在做什么的人。我实际上不知道 Docker 的安全风险，但我肯定他们也会这么做。

亚历克斯:所以你现在对 Docker 的安全问题还不太熟悉？

米切尔:Docker 总是说 Docker 不是一个完全安全的容器；这是一种隔离机制，而不是安全的隔离机制。以我在 LXC 的背景，我从来没有这么想过。

**Alex** :展望 2015 年，对于客户来说，在这个分布式基础设施世界中，有哪些问题会变得更加复杂——你认为最重要的有哪些？

**Mitchell** :第一个是服务激增，数据中心的服务越来越多。第二点是，在更早的阶段，固有地成为多数据中心和高度分布的。有了 Docker 这样的东西，你可以在更小的单元中运行，开始运行更多的服务就变得容易多了。结果，我们遇到了管理问题、编排问题和分布式系统问题。

我认为第三点是，“我们如何迁移到这些系统？”大公司刚刚完成向虚拟化的过渡。前瞻性的已经完成了，但是旧的已经接近尾声了。现在的问题是，“我们要不要转向集装箱，如何转向集装箱，什么时候转向集装箱，在哪里转向集装箱？”

我认为 2015 年将会证明这三件事。

**亚历克斯**:那就是从这些垂直的基础设施转向这些更水平的基础设施。这仍然是这些客户面临的一个大问题。您如何看待客户现在试图解决这些问题，您认为这种方式会继续下去吗？

**Mitchell** :横向发展的价值——我认为这与“云”的概念密切相关，所以我现在将交替使用这两个概念——在成本节约和灵活性方面，横向发展的价值现在已经得到了很好的体现。价值前景消失了，所以现在我认为有足够的动力开始转化这些东西。

困难在于,*不需要转换，所以你必须以某种方式编写你的应用程序——你必须以某种方式访问数据。有些人会对很多应用程序这样做，但我认为总会有一个或少数几个服务没人想再碰，所以你只需要把它放在一个非常糟糕的云机器上。没关系。*

Alex :今天你是如何构建开源社区的，与五年前相比，你的观点有什么变化？

米切尔:这是你自己的小政府或社区中的小社区。这是世界人口，然后是你的小人口。所以你有很多社会问题，领导问题和政治问题。这项技术实际上是最简单的部分，因为它非常符合逻辑。“是的，有用，”或者“不，没用。”但是“我们增加一个功能吗？”或者“这个人对某人的反应好吗？”所有这些都是人类的动力，所以我从一个更哲学的层面看待开源，“人们如何相互交流？”

我个人对此的立场源于我在苹果商店工作的两年。他们训练你如何与人合作，我在博客上写了这个。他们有这个东西，它是一个缩写，“苹果”，我只是跟着这个缩写到最后。这真的是关于同理心:非常友好地接近某人，理解如果他们生气，99%的时候一个人生气是有原因的。他们不生气，因为他们只是粗鲁的人。所以，我试图理解他们为什么生气。你只需要非常耐心地去弄明白这一点。但归根结底，是人与人之间的交流让电脑工作。但是人们正在这么做，所以你得为人们着想。

**Alex** :你认为开源社区会延续这种风气吗？那还活着吗？开源管理正在开始改变——我们开始看到不同形式的开源管理。那有影响吗？

**Mitchell** :我很想看看开源管理是如何发展的。例如，当你只是把自己的东西放到网上，而这个项目没有真正的风险时，“仁慈的独裁者”模式就很有意义。但是现在，特别是在过去的几年里，我们开始看到更多的开源公司——他们的核心产品是开源的。这变得更加危险，因为, [BDFL](https://en.wikipedia.org/wiki/Benevolent_dictator_for_life) 有可能会关闭它吗？你有可能需要一把叉子吗？分叉对用户意味着什么？我认为这是导致这些问题的驱动力变化。我只是想知道事情会如何发展。我还不确定。

Alex :我们开始看到很多，一旦开源社区通过了仁慈的独裁者阶段，他们是如何被管理的。你自己的项目呢？你是流浪者的 BD；你也是 BD over [领事](https://www.consul.io/)吗？

米切尔**:到目前为止，我们公司仍然遵循开源模式，最终我们是看门人，但同时我想我们有非常仁慈的历史。例如，从历史上看，我认为孙 T14 被认为是相当仁慈的，但是，一旦甲骨文公司收购了他们，事情就变得有点复杂了。**

 **我认为社区对我们现在的项目运行方式非常满意，这是目前的正确模式，因为它给了我们最高的灵活性。这就是为什么我如此感兴趣地想看看这是如何发生的，因为随着时间的推移，这个问题会一次又一次地出现，答案可能会随着时间的推移而改变，很可能会。

Alex :对于你管理的社区，你会关注哪些事情，考虑如何适应？

**米切尔**:现在，每个人看起来都很开心。就我们的社区而言，我没有看到任何重大问题。我得说我们很幸运。我们的产品被非常大的公司使用，他们似乎一点也不关心我们运行项目的方式。

我正在密切关注其他一些项目。[火箭](https://coreos.com/blog/rocket/)出来了，马上就有人要求成立治理委员会。我有点想知道他们是怎么做到的。它提供价值吗？它为用户提供了真正的动力吗？是积极的还是消极的？我一直在关注这类事情，只是期待这类事情发生在我们身上。

Alex :这又回到了你所说的开源正在发生巨大变化的话题。当你刚开始从事技术开发和编程时，开源社区是关于学习的——在许多方面，现在仍然是。但是现在开源社区的竞争非常激烈。

米切尔:我认为这是主要原因。一个项目与一个商业实体联系在一起本身就有更大的风险。最近，就在上周，我们明确了我们的商业模式和我们赚钱的目标，从而避免了这种情况。然而，如果开源项目是赚钱的机器，那就更可怕了。这只是不确定性。

亚历克斯:举个码头工人的例子…

米切尔:也许吧。还不清楚 Docker*到底*在做什么，所以我不知道。

亚历克斯:还有其他的例子，比如 OpenStack。

米切尔:OpenStack，是的。比如厨师。主厨已经改变了做法，他们最近变得更加开放，这很酷。我不知道这件事的背景，但我肯定其中有一些有趣的故事。

亚历克斯:关于开源管理，我们可以谈很多。我们刚刚和唐尼·伯克霍尔兹和迈克尔·科特就这个话题做了一个播客，我想我们会再做一次，所以我们希望你能参与进来。

Mitchell，非常感谢您抽出时间与我们交谈。我很期待看到你们的所作所为，以及你们自己的开源项目的方向。

米切尔:太好了！谢谢你，谢谢你的时间。很高兴和你聊天。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>**