# 向开源的转变是为了。NET 和微软

> 原文：<https://thenewstack.io/switch-open-source-working-net-microsoft/>

微软在开源. NET 的时候有一个清晰的战略，现在进展如何？制作中。NET 开源让微软可以更快地构建它，让它进入更多的平台(你现在可以在 OS X 上运行公共语言运行时(CLR )),并利用社区贡献。这也改变了。NET 是发达的。

其中一些是开源的本质。一方面，从社区中获取贡献并实现拉请求意味着贡献者自己解决个人的痒处，直到改进注释或修正代码的格式。

微软开源项目中看似微不足道的变化不会被拒绝。人们的心态正在发生变化，从认为产品团队让人们玩它的玩具，到欣赏这样一个事实，即你越让社区产生影响，他们就越致力于产品。

> 当涉及到国际化问题时，像逗号这样简单的东西都可能成为问题。

让社区参与进来是当务之急，因为这才是最重要的。NET 真正的跨平台。作为伊莫·兰德维尔特。NET 团队说，“如果你想真正实现跨平台，你必须是一个开源堆栈；看看所有其他的跨平台工具，比如 Linux 和浏览器。如果你把它搬到户外，那些关心某个建筑的人就会加入进来。”他们做到了。

的前 100 个拉请求中。的 Dave Kean 称，超过 40 个来自社区。网队。其中许多是小变化，但已经有了更大的贡献。到 1 月底，GitHub 的分支太多了，无法用图形显示:超过 1000 个。到那时，已经有将近 250 个拉取请求，其中 51%来自社区。

事实上，微软似乎对参与和贡献的数量感到惊讶，特别是对 OS x。core clr 最初支持 Windows 和 Ubuntu，在团队做了更多准备后，计划稍后支持 OS X。但是有那么多人想参与进来——包括最初的 Mono 团队的 Geoff Norton，他为 OS X 开发了 Mono，并贡献了将 CoreCLR 移植到 OS X 的代码——以至于微软很快创建了一个功能分支，并将其已经完成的准备工作迁移到 GitHub，以便社区可以加入进来。

实际上，那次[讨论和协作](https://github.com/dotnet/coreclr/issues/177#issuecomment-73648128)花了几天时间才解决，一路上遇到了一些挫折。微软工程师管理内部项目的经验比他们管理高知名度的开源项目的经验要丰富得多，而且他们仍在加快进度。但这个问题确实得到了解决，微软做了正确的事情，所以很明显，他们致力于此，并希望做正确的事情，即使他们并不总是像社区一样行动迅速。

> “我们仍在学习，”兰德维尔特反复说道。

他们最近强调了一些“待价而沽”的领域，以明确他们没有在做什么(当它进入公共功能分支时，你可以看到他们在做什么)。新的。NET 基金会顾问委员会(http://www . dotnetfoundation .<wbr>org/blog/welcome-the-new-<wbr>minted-Advisory-NET-<wbr>Foundation-Advisory-Council-<wbr>members)并不是一个橡皮图章式的微软员工和现有员工名单。NET 项目；那里有一些熟悉的、可信的、开源的名字，比如 Debian 和 GitHub。

只是放。NET 引入 GitHub 意味着团队工作方式的重大改变。他们的内部工程系统都是基于微软的 Team Foundation Server，这对于使用 Visual Studio 与微软内部的人进行协作来说非常好，但它并不适用于其他人。

“去拿来。Kean 指出:“我们需要工程系统是开源的。“我们不想拥有偶尔给你的源代码快照。我们需要给你真正的交易。”这意味着通过向 GitHub 添加双向镜像来改变内部系统的工作方式，这样代码就可以在两个系统上运行。为了准备代码，微软还使用 Roslyn 编写了一个自动代码格式化程序，将所有代码转换成。NET 认可的编码风格(旧的核心库通常有不同的编码风格)。

这也是为什么代码库一直在逐步发展:首先是带外库，如可变集合，以及用于交叉程序集和 xml 的元数据读取器；然后是更大的部分，如原语、注册表、文件系统和 CoreCLR 执行引擎——甚至包括垃圾收集器。(垃圾收集器在多种意义上都是大的。对于 GitHub 来说，这个文件太大了，很难打印出来；在某一点上，微软的构建系统必须重写以处理文件大小。它最初是用 LISP 写的，然后机器翻译成 C；微软的一位技术人员多年来一直致力于这项工作，不断增加新的功能。)

更大的变化是将内部流程转移到社区中。如果。正在接受代码审查的. NET 核心代码在 GitHub 上，现在代码审查在 GitHub 上进行——即使是来自微软内部开发人员的代码。这个想法是“外部和内部贡献者之间真的没有区别；双方都将提交一个拉取请求，都将从微软人和社区那里得到反馈，然后决定是否加入。“这确实模糊了界限；你是谁并不重要。”

最终，内部和外部的拉请求将通过相同的内部代码运行，检查国际化和兼容性之类的东西。这可能会减慢速度，因为兼容性测试可能需要几天时间，但它为社区的主要贡献铺平了道路，因为它们可以像内部开发一样被对待。

的。NET 团队定期进行 API 评审(如果有足够的请求和变更需要处理，一周几次)。开源贡献者不能参加这些会议，但首先有一个社区讨论的过程，来自 API 的视频记录和笔记会上传到[微软的 Channel 9 网站](http://channel9.msdn.com/Series/NET-Framework/NET-Core-API-Review-2015-01-14)和 [GitHub wiki](https://github.com/dotnet/apireviews) ，所以每个人都可以看到决策是如何做出的。

> 这也是。NET 团队希望将微软的“部落知识”传播给社区。

“在内部，我们有一个网站，上面有他们用 C#和。兰德维尔特解释道:“从一开始，我们就需要‘团队’。“这里面有很多真知灼见，关于你为什么做某些事情，为什么拒绝某些事情。”他也热衷于改变流程，一般来说，尽可能地简化流程。因此，如果当前的 API 审查系统对社区不起作用，你可以期待它的改变。

。NET 远不是微软唯一严肃的开源项目:有 Roslyn 编译器、F#、Azure SDKs、TypeScript、TouchDevelop、Project Orleans、Bond……2 月初，GitHub 上有 840 个微软回购(现在可能更多)。

所有这些都开始改变微软内部的一些其他事情。首席执行官塞特亚·纳德拉多次谈到“内部开源”——让不同的部门彼此共享代码，而不是每次都重新发明轮子——这是从内部开始的，通过内部系统。Visual Studio Online (VSO)的源代码在内部提供，Office 团队将他们用于构建移动应用程序的代码贡献给了下一版本的 VSO 构建系统。但是一些微软开发人员也从微软其他部门的团队获得代码——从他们的 GitHub repo 获得。

开放开发并不适合所有人，也不适合所有项目。但是它显然有好处，即使是在像微软这样传统的开发组织中。

精选图片 [via](https://www.flickr.com/photos/challiyan/1978399197) Flickr 知识共享。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>