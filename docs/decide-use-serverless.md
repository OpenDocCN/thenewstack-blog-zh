# 如何决定何时使用无服务器

> 原文：<https://thenewstack.io/decide-use-serverless/>

无服务器计算是在云中构建应用的新方式。问题不是你是否应该利用无服务器计算，而是你应该何时开始。

嗯，好吧——无服务器计算并不适合每个应用程序。但在许多情况下，它可以提高性能和成本效益。

本文解释了什么是无服务器计算，以及在决定无服务器计算是否可以帮助您部署应用时需要考虑哪些因素。

## 什么是无服务器(我为什么要关心)？

随着所有主要云提供商提供解决方案，以及针对私有云安装的内部选项，无服务器架构在行业中迅速获得牵引力。无服务器计算是一种部署单一功能的方式，这些功能只有在调用特定触发器时才会被激活。无服务器应用也可以处理异步或同步交互。您使用的无服务器平台将决定您可以用来编写应用程序的输入/输出选项和语言。JavaScript 似乎是唯一跨所有平台的通用语言。

有大量的文章介绍了无服务器的商业价值和其他好处。本文主要讨论无服务器何时具有技术意义。

## 无服务器是这个应用程序的可行选项吗？

在决定无服务器是否是您将要构建和部署的功能的最佳方法时，需要考虑以下几个问题:

*   app 是一个小的、可用的积木，还是可以分解成小块？
*   所有的构建模块都有明确定义的输入和输出吗？
*   我可以使用现有的开发和构建工具吗？
*   无服务器平台是否支持:
    *   从我的客户那里接收连接？
    *   与目标数据存储区交互？
    *   我知道的语言？

## 无服务器构建块

 [文斯·鲍尔

Vince Power 是 Fixate IO 的撰稿人，也是 Twistlock 的客座博主。他还是一名解决方案架构师，专注于云的采用和使用基于开源技术的技术实现。他在核心计算和网络(IaaS)、身份和访问管理(IAM)、应用平台(PaaS)和持续交付方面拥有丰富的经验。](https://www.paloaltonetworks.com/prisma/cloud) 

需要记住的无服务器计算的一个重要方面是，它围绕着离散的代码块(或者函数，如果你喜欢这个术语的话)。这些是无服务器架构的构建模块。

作为定义函数的一部分，您显式地设置了一个且仅一个输入触发器，以及有限数量的可以编写输出的目标。测试代码的方法是上传一个文本块(通常是 JSON)，它被用作输入，只是测试它是否能接受输入并成功执行。基本日志是可见的，可以导出到 CloudWatch 等云内日志聚合解决方案。

鉴于每个功能只有一个输入机制，与需要处理多种输入变化的传统应用程序相比，代码高度简化。最复杂的函数类型是响应 web 或 API 请求的函数，如果需要不同的数据集输入或利用不同的数据存储，甚至每个方法都需要单独的函数。

## 无服务器语言和开发工具

如果您想要或需要使用特定的语言来编写代码，那么您可以使用的无服务器平台可能会受到限制。除非您正在运行一个多云环境，否则这可能意味着您甚至不能在部署您的云上使用无服务器选项。在所有无服务器平台中，最接近通用语言的是 JavaScript。限制的一个例子是如果你编码。那么，Azure 是你唯一真正的选择。或者如果你想用 Swift 写代码，那么 IBM Cloud Functions(又名 OpenWhisk)就是你的目标平台。

几乎总是可以使用您已经拥有的相同工具和 CI/CD 管道来构建无服务器。如果您目前正在支持容器开发，那么您的 CI/CD 工具已经准备好了。

## 无服务器平台集成点

集成点分为两类:传入(通常称为触发器)和传出(可以称为目标)。

云平台上的触发器总是特定于平台的，并且通常是异步的，就像 S3 桶被写入，或者 Cosmos DB 被更新，或者 SNS 主题接收消息。虽然函数中的主要代码可以是跨平台的和通用的，但是如果您使用的是特定的云，为什么要在不必要的时候增加代码呢？处理物联网设备随机发送的数据点并将它们存储在数据库中是无服务器绝对是最佳选择的完美例子。

一种同步类型的调用来自 API 管理器或 web 前端。在这种情况下，它们会主动等待函数的响应。如果响应时间真的很重要，那么无服务器不是构建这些应用程序的最快方式。不是说无服务器慢。它只是比其他选项慢一些(除了在最大容量的情况下)，因为它每次都必须完全初始化和执行。

无服务器平台对于目标或触发器总是有一个“自定义”选项。在走这条路之前，您需要考虑的是，您在定制框架中编写的代码越多，您在专有框架中需要支持的就越多。在某一点上，在容器中使用微服务比试图强迫你正在做的东西没有服务器更有意义。

## 摘要

任何单一应用程序开发框架的教条主义都可能像没有标准和使用所有可用的应用程序开发框架一样糟糕。无服务器架构有它的位置，在它适合的地方，它工作得非常好。通过多年与各种规模的开发团队合作，我发现最可持续的方法是拥有两个可以利用的开发和部署模型。不同的模型存在是有原因的。打个比方，本田思域(Honda Civic)是一辆很棒的车，但对有两个以上孩子的家庭来说没什么好处。无服务器，或功能即服务，将会继续存在。随着它的流行和使用的增长，把它用在最有意义的地方。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>