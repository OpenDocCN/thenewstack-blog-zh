# 容器比虚拟机更安全的十三种方式

> 原文：<https://thenewstack.io/thirteen-ways-containers-secure-virtual-machines/>

[](http://robhirschfeld.com/digital-rebar/)

 [罗布·希施菲尔德

罗布·希施菲尔德是 RackN 的首席执行官兼联合创始人，该公司为以容器为中心的数据中心提供编排软件。他已经在云计算和基础设施领域工作了近 15 年，从早期的 ESX 测试版开始工作，到在 OpenStack Foundation 董事会任职四届。作为数字 Rebar 项目的联合创始人，Rob 创建了新一代 DevOps 编排工具，以利用容器和面向服务的运营。他认为，在云上运行数据中心和应用程序的技术只是更大故事的一部分。作为一名工业工程师，他热衷于将精益和敏捷流程应用到软件交付中。](http://robhirschfeld.com/digital-rebar/) [](http://robhirschfeld.com/digital-rebar/)

去年，传统观点认为容器远不如虚拟机安全！为什么？因为它更容易突破容器抽象层，容器抽象层可以说比硬件 VT-x 优化支持的虚拟机抽象更弱。一旦失控，恶意代码可以很容易地攻击主机。更糟糕的是，一旦主机受到威胁，容器就失去了自己的操作系统屏障，基本上处于不设防状态。因为容器具有如此薄的分隔壁；很容易用一把大刷子来描绘这些后门风险。

**这里有一个事实:前门攻击和未打补丁的漏洞比这些后门黑客更有可能。**

运行臃肿的操作系统且安全实践不一致的独特配置的虚拟机的激增是我们的主要安全问题。事实上，轻型集装箱配置的受攻击面要小得多，薄壁实际上更容易增强部署前后的安全性。

在没有任何内在技术优势的情况下，容器至少在六个方面更安全，我可以很容易地描述这六个方面:

1.  容器中没有启用 ssh:这为大多数攻击打开了大门。
2.  **预期无用户访问:**无用户消除了对支持用户的凭证或工具的需要。
3.  **默认情况下，容器系统限制端口**:因为容器是服务，我们通常会更具体地限制要连接的端口。
4.  短命的容器不太可能是攻击者的基地:很难穿越一个可能只存在几分钟甚至几秒钟的系统。
5.  **不可变的设计使得注入恶意软件变得困难:**我们不在容器中持久化文件系统的应用区域，所以它们不保留注入的程序。
6.  **自动生成使获取和升级安全补丁变得更快**:借助 CI/CD 管道的自动构建，无需手动操作即可快速将代码和库更新到产品中。

此外，围绕容器的最佳实践提供了额外的保护:

1.  **预部署源代码和依赖验证**:这些服务检查容器，以确保它们使用了有效的和预期的代码路径。
2.  **预部署真实性验证**:采取上述检查的另一个步骤，我们可以确保容器上的信任链，以确保代码没有被篡改。
3.  **针对漏洞的预部署图像扫描**:更好的是，这些服务通过寻找受损包的签名来自动评估容器中的已知问题。
4.  **正在运行的容器的主动漏洞扫描**:一旦部署，容器外部的服务可以监视容器的入侵并停止或拦截攻击。
5.  **包含流量检查的网络路由**:由于网络路由在容器编排中非常重要，因此在这些服务中包含一个安全层来有效地创建基于功能的服务防火墙是有意义的。
6.  **集成日志捕获**:由于没有本地存储，大多数容器模式都包括作为一等公民的中央日志捕获和分析。这使得日志分析更加容易。
7.  **信任和凭证的外部注入**:容器的服务模式不允许在容器或代码中注入凭证。这意味着我们正在构建信任系统，其基础是及时向运行中的实例而不是静态代码提供凭证。

这是容器比当前基于虚拟机映像的模型更安全的许多方式！主要的新的非 VM 好处是使用容器的薄壁在主机级提供横切安全性和其他服务。对于高级用户来说，大多数改进都来自容器服务所需的强大架构模式，这并不奇怪。这些服务的市场才刚刚开始。

通过 Pixabay 的特征图像。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>