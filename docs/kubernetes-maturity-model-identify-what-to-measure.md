# Kubernetes 成熟度模型:确定测量什么

> 原文：<https://thenewstack.io/kubernetes-maturity-model-identify-what-to-measure/>

[](https://www.linkedin.com/in/josephpelletier/)

 [乔·佩尔蒂埃

乔是 Fairwinds 公司的产品副总裁。他可以到达 joe@fairwinds.com](https://www.linkedin.com/in/josephpelletier/) 

对于那些已经掌握了采用 Kubernetes 的基础知识的人来说，您已经花费了大量的时间来准备、部署和改进您的 Kubernetes 环境。一旦你获得了信心，你就准备好完善已经设置好的东西了。 [Kubernetes 成熟度模型](https://www.fairwinds.com/kubernetes-maturity-model)包括实现 Kubernetes 完全成熟度的七个阶段。在第六阶段，是时候进行测量和控制了。

那么你到底需要衡量什么呢？您需要重点衡量的五个关键领域包括:

1.  **安全性**:测量您的容器或集群中存在多少漏洞，确定漏洞是什么，并量化您修补工作负载、集群或附加组件的频率和时间。
2.  **审计**:创建一个审计跟踪，以便了解谁执行了最近的操作，并可以识别工作负载在集群中采取的操作。如果发生未授权的访问和操作，这些审核可以帮助您识别它们。
3.  **漂移**:识别哪些工作负载不符合您的标准，哪些版本的依赖项和集群附加组件正在运行，以及工作负载是否与 Kubernetes 的未来版本兼容。
4.  **效率**:跟踪工作负载的典型资源使用情况和集群中节点的典型使用情况。测量这一点还将帮助您了解集群扩展的频率。
5.  **Velocity** :跟踪部署的发货频率、有多少用户访问您的集群以及集群中最常见的操作。这些测量将帮助你提高你的开发速度。

## 衡量什么…

你听说过这句话，“什么得到衡量，得到管理。”嗯，你会发现在库伯内特斯也是如此。一旦你开始收集和测量这些关键领域的数据，你很可能会发现一些问题。您可能会发现一些工作负载杂乱无章，并且会影响其他工作负载。突然，您可能意识到来自工作负载的过多访问会导致安全问题。现在您正在仔细地跟踪它，您可能会意识到您有可靠性或可伸缩性问题。当您使用太多资源或没有清理工作负载时，成本的增加可能会超出您的计划。

为了解决您新发现的问题，您可以利用一些精心放置的控件。根据您收集的数据，是时候回答几个基本问题了，这将有助于您建立一套 Kubernetes 护栏。

## 安全性

Kubernetes 的工作负载安全性至关重要。您需要决定如何控制与以下内容相关的群集权限:

*   谁有权访问集群？
*   用户可以在集群中采取什么行动？
*   集群中的工作负载可以采取哪些措施？
*   工作负载在集群中拥有什么级别的权限？
*   您的集群中工作负载之间的网络策略是什么？

## 配置

要创建可靠的 Kubernetes 环境，您需要有一致性的配置标准。是时候对以下方面实施控制了:

*   Kubernetes 资源住在哪里？它们在哪里定义？
*   发生了什么变化，何时发生？
*   你对资源的代码审查过程是怎样的？
*   什么类型的资源可以部署在您的集群中？
*   哪些名称空间可供哪些用户使用？
*   工作负载部署到哪些命名空间？
*   如何设置工作负载或名称空间的可用资源量？
*   您的工作负载和部署的通用标准是什么？

## 工作流程

此外，您需要为如何部署工作负载和服务、晋升途径和责任建立工作流:

*   谁可以向您的集群部署工作负载和服务？
*   如何将工作负载和服务部署到您的集群？
*   环境之间的晋升路径是怎样的？
*   谁负责您环境的哪些方面？

## 开始基于策略的配置更改并实施它们

有了这些答案，您现在就有了一组策略，可以用来开始在集群中实现配置更改。在这一点上，Kubernetes 的政策执行是至关重要的。简单地写下政策并不意味着你可以期望你的团队贯彻执行。这就是为什么确保有一种方法在集群中实施策略非常重要。

许多开源工具，如 [Polaris](https://www.fairwinds.com/polaris) 、 [OPA](https://www.openpolicyagent.org/) 和 [Goldilocks](https://www.fairwinds.com/blog/introducing-goldilocks-a-tool-for-recommending-resource-requests) 可以帮助您检查 Kubernetes 最佳实践的配置和定制策略。使用这些开源工具仍然需要您的团队在每个集群中应用每个工具，如果您要管理多个人员和集群，这将变得非常耗时。

另一种选择是使用一种解决方案，将经过审查的开源工具合并到一个仪表板视图中，这有助于您测量集群配置，并根据这些数据建立和实施策略。这很有帮助，因为它提供了与安全性、可靠性和效率相关的严重或中等问题的可见性。在 Kubernetes 成熟度的这个阶段，测量和跟踪安全性、审计、漂移、效率和速度有助于您创建和执行将对您的工程团队产生影响的策略。

Kubernetes 成熟度模型的最后一个阶段与优化和自动化相关，这将是您的组织的一个持续过程。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>