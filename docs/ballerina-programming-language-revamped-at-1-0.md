# 芭蕾舞演员编程语言改进，在 1.0

> 原文：<https://thenewstack.io/ballerina-programming-language-revamped-at-1-0/>

把云原生中间件当做编程语言的芭蕾舞女演员，已经到了 1.0。

周二，WSO2 首席技术官兼联合创始人保罗·弗里曼特尔(Paul Fremantle)在拉斯维加斯举行的 ApacheCon 北美展上展示了芭蕾舞。虽然 Ballerina 是作为解决企业服务总线(ESB)缺点的一种方式而发展出 WSO2 的，但代码是开放的，GitHub 上的每个人都可以免费[获得](https://github.com/ballerina-platform/ballerina-lang)。

与此同时，WSO2 将在未来几周发布其商业企业集成器的新版本，其中将包括芭蕾舞演员。Fremantle 说，它已经在 Apache License 2.0 下发布，但不是 Apache 软件基金会项目。

“我们没有足够大的社区，”他说。“这是我们在这里(阿帕奇康)的原因之一。”

## 一种内置网络的编程语言

尽管许多开发人员正在使用和/或创建 API，但现有的语言通常不了解或不关心网络。虽然 IO 库寻求添加网络，但 Ballerina 旨在将网络视为编程的首要方面。

他说，它可以区分本地网络呼叫和分布式系统呼叫，并做出相应的响应。

“我们试图建立网络的概念，将网络带来的一些挑战融入语言。所以这就是为什么会有一种新的语言，”他说。

![Paul Fremantle at ApacheCon North America 2019](img/58f35be078193b1ef8c50d161effedd7.png)

Paul Fremantle 描述了 WSO2 通往芭蕾舞演员 1.0 的道路。

它是一种编译的、类型安全的、并发的语言，以序列图的概念为模型。Ballerina 程序是自文档化的，完全符合微服务和云原生开发的模式，使得创建 RESTful 和 gRPC APIs 更加简单。语法是围绕服务设计的；端点；网络类型，如 JSON 和 ProtoBuf 简单的注释自动为 Kubernetes、Docker 和 Istio 创建部署。

在[的一篇博文](https://blog.ballerina.io/posts/annoucing-1.0.0/)中，产品经理[桑吉瓦·威拉拉娜](https://twitter.com/sanjiva?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor)描述了打造芭蕾舞演员的三年工作。

“2016 年，我们决定，显著改善集成编程的唯一真正方法是发明一种完整的编程语言。我们想，哦，可能需要 6-8 个月，我们就可以完成了，”他写道。

在演示中，OptDyn 的首席技术官兼创始人亚历克斯·卡拉苏鲁(Alex Karasulu)似乎对其生产速度感到惊讶。

“我花了五年时间编写了一套名为[Apache] [Mina](https://mina.apache.org/mina-project/index.html) 的库来完成这个任务，而[芭蕾舞演员]却把它一笔勾销了，”他说。"这将彻底改变人们编写网络代码的方式."

“六行该死的代码。SAP Hybris 软件开发总监兼 Apache ActiveMQ 副总裁 [Bruce Snyder](https://www.linkedin.com/in/brucesnyder/) 补充道。

弗里曼特尔说，并不是每个他介绍过芭蕾舞演员的观众都如此热情。

“我认为观众在这一点上是正确的。你可以告诉他们，就像，'我可以用这个。他说，尤其是那些看到 Kubernetes 易于部署的人。

他说，芭蕾舞女演员已经可以生产了，95%的规格都很稳定。他说，另外的 5%是由实验性的特性组成的，这些特性将会显示一个标志，而且代码很可能会改变。

## 芭蕾舞演员作为云母语的演变

他说，自 2018 年 5 月芭蕾舞演员第一次[出现在新的堆栈中](https://thenewstack.io/ballerina-an-api-first-programming-language/)以来，发生了很多变化。

“[然后]我们就可以说这是一种真正有用的语言，可以取代 ESB。…我在谈论 WSO2 用例，也就是您可能称之为集成的用例。就在那之后，我们聘请了一位非常有经验的语言设计师，”他解释道。

XML 最初的设计者之一詹姆斯·克拉克(James Clark)，弗里曼特尔说，“我只是想做一点验证检查，说没问题。”。“他和他的团队突然意识到这是一个真正把它变成一种非常好的语言的机会。”

“他只是浏览了一下这种语言，然后说，‘伙计们，你们已经有了一种不错的语言，但它永远不会成为一种伟大的语言。’因此，自 2018 年 5 月以来最大的变化是，我们真的花了 18 个月来清理它，确保它是一致的，符合逻辑的。当一个计算机科学家来看它时，他们可能不同意所有的东西，但他们不会说它只是一团乱。这是一大块。"

他们也意识到他们不会得到他们想要的性能。最初的版本是基于 WSO2 的虚拟机。

他们基本上是在另一个 JVM 上写了一个 VM，然后运行他们自己的字节码，所以很有效，它被解释了。它被编译成一种中间形式，但这种中间形式被解释，所以这有点像 Java 1.0 问世时的情况，没有利用过去 20 年的所有进步。所以他们决定重新构建它来生成 JVM 字节码。

“给你一个概念，旧版本在我的笔记本电脑上可能每秒处理 20，000 个请求；新的时速是 55 英里。所以至少快了两倍。但更重要的是，它在调整，在改进。特别是如果你构建更复杂的逻辑，所有的聪明都来自 JVM，”他说。

## 芭蕾舞女演员 1.0 的新功能

Java 互操作性，允许用户从 Ballerina 调用 Java 代码，是 1.0 版本的一部分，也是重新设计的开发工具的一部分。

总的来说，芭蕾舞演员提供:

*   专门用于消费和提供网络服务的语言结构。
*   与序列图紧密对应的并发性和网络交互的抽象和语法，支持文本和图形表示之间的芭蕾舞演员源代码的双向映射。
*   一种结构类型系统，比传统的静态类型语言更灵活，允许更松散的耦合。
*   设计适合现代开发生命周期，包括持续集成和持续交付(CI/CD)工具，如 Jenkins、Travis 和 Codefresh 可观测性工具，如 Prometheus、Zipkin 和 Honeycomb 还有像 Kubernetes 这样的云编排系统。

Ballerina 平台包括一个包/模块管理框架，包括依赖性和版本管理，一个共享模块的公共 web 服务，IDE 工具插件，一个文档和测试框架，一个资源库等等。

“我们被 Ballerina 的云原生功能所吸引，例如 Docker、Kubernetes 和 Helm 工件的自动生成，以及它的小尺寸和更快的启动时间。它还能够在 AWS 中运行 Lambda 函数(无服务器)。这些功能使我们能够轻松地在容器中大规模运行微服务，并轻松地与 CI/CD 工具集成，”芭蕾舞演员的早期采用者之一、摩托罗拉的集成架构师兼高级经理 Sri Harsha Pulleti 表示。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>