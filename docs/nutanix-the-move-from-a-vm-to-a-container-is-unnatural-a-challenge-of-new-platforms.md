# Nutanix:从 VM 到容器的迁移是不自然的，是新平台的挑战

> 原文：<https://thenewstack.io/nutanix-the-move-from-a-vm-to-a-container-is-unnatural-a-challenge-of-new-platforms/>

如果一个新的堆栈要在现代企业中扎根，那么必须有所牺牲。不仅旧的基础设施必须为新的工作方式腾出空间，而且新的堆栈必须向互操作性和共存的前景开放，至少在我们的参考框架中，它不再是新的。

第一波虚拟化涉及将工作负载从难以管理的物理服务器上移除，将其传输到虚拟层，然后将这些层下的资源集中起来，将虚拟机变成行星大小的设备。这是第一阶段。第二阶段是将这些虚拟机迁移到专为虚拟化设计的云平台层。现在，第三阶段涉及重新调整软件，使其成为专门为虚拟化而构建的软件，以便它“生活”在这个新环境中，而不是作为难民，而是作为本地人。

这将我们置于一种境地，我们发现自己正在协调新旧堆栈:我们为持续部署和无状态分发而设计的服务的支持结构和上下文。

## 搬回家

软件定义的存储公司 [Nutanix](http://www.nutanix.com/) 向我们介绍了一个我们没有考虑太多的情况——让这两个阶段实现互操作的问题的一部分，老实说，这个问题从未真正讨论过。

这与认识到“云”不应该是所有商业软件的最终目的地有关。当然，OpenStack 等云平台支持虚拟环境之间的移动性。但这种流动性应该是双向的。这意味着，如果新的体系真的带来了它所承诺的所有效率和优化，那么对于企业来说，将虚拟化应用迁移回家不仅是必要的，而且是经济高效的。

Nutanix 营销高级副总裁霍华德·丁(Howard Ting)在接受 New Stack 采访时表示:“我认为从虚拟机到容器的转变是非常不自然的，甚至可能是不必要的。”。“但是从 VMware 虚拟机管理程序迁移到 Hyper-V 环境，然后再迁移到 AWS，这是一个非常现实的需求。”

Nutanix 的工作是虚拟化存储，因此虚拟机环境和 Docker 容器环境可以识别混合存储池，就像它们是巨大的 iSCSI 卷一样。上周，该公司宣布了其新的 Acropolis 分布式存储结构，该结构扩展了 Nutanix 现有的文件系统，使其也包含网络规模的存储。该公司表示，Acropolis 的目标是“将所有工作负载统一在一个基础设施上。”

## 可扩展性的新尺度

容器将很好地利用 Web 级的存储，因为容器的一个主要目的是消除可伸缩性的所有限制。

但是让容器将这种新结构与虚拟机共存并不意味着转换虚拟机工作负载以匹配容器工作负载，反之亦然；或者让两者都由同一个霸主管理。虽然 VMware 公开表示想要这个 T1，但丁似乎也承认，实际上，我们能做到的最好的事情就是共存。

这种共存将使客户能够将工作负载从网络规模缩减到本地数据中心。这并不明显，但专门为虚拟机构建的应用程序很难做到这一点。

无论是在开发和测试阶段，还是在投产期间，数据中心都倾向于使用 AWS 存储作为新软件服务的初始平台。Ting 说，一旦这些服务成熟了，客户就会想办法把它们带回公司。对于容器化的工作负载和虚拟机，这种分布模式可能会保持不变；事实上，有了容器，生命周期可能只会加快。

“现在，如你所知，没有办法在 AWS 中启动它，然后再恢复它，”Ting 说。他举的一个例子是脸书游戏制造商 Zynga，该公司最初被认为是亚马逊最大的单一 AWS 客户，但后来将其意外收入投资于扩建自己的数据中心。[众所周知，Zynga 建立了自己的“Z-cloud”基础设施](https://www.zdnet.com/article/zyngas-play-platform-a-big-test-for-its-cloud-computing-prowess/)来拉回其资源，但这是在 OpenStack 之前的时代。有人说，该公司仍在努力重组，恢复正常的商业模式。

## 疏散通道

为了支持这种来来去去的虚拟化部署模式，Nutanix 在 Acropolis 中采取了可能是有争议的一步:引入自己的虚拟机管理程序。

“虚拟机管理程序已经成为新的商品，”Ting 解释说。“现在有很多很好的选择。五年前，你不能这么说。Hyper-V 处于不成熟的状态，KVM 缺乏许多企业类型的功能，并且刚刚兴起。但我们相信，这些确实是非常成熟的产品，能够提供大多数基本的虚拟机管理程序级服务。”

Ting 指出，目前使用的大多数虚拟机管理程序都充分利用了实时迁移和分布式资源调度。Acropolis 的 hypervisor 是开源 KVM 的扩展。他说，有了它，管理员不再需要在管理控制台之间“跳来跳去”，例如在 Nutanix 的 Prism 和 VMware 的 vCenter 之间。现在，可以通过单一控制台部署虚拟机和管理存储。

对于容器和微服务来说，这种能力无疑是必要的，如果还没有的话。如今的虚拟化由主要供应商大量削减的渠道组成。Docker 的创新在很大程度上是绕过这些虚拟机管理程序，将虚拟化移入内核。但是，除非容器想在沙盒阶段度过余生，否则它们需要某种方式来逃离自己的外壳，与 2000 年的模型堆栈、20 世纪 90 年代的模型甚至可能是 20 世纪 80 年代的模型共存。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>