# 微服务:好的、坏的和炒作

> 原文：<https://thenewstack.io/beauty-beast-justgivings-microservices-transformation/>

微服务可能会给企业带来很多好处，但它们也会带来一些麻烦，尤其是如果你没有预料到它们的话，工程师迈克尔·弗兰克在上个月在伦敦举行的敏捷环岛会议上发表演讲时说道。

Franc 将微服务作为解决问题的昂贵工具——但这些问题必须产生大量利润才能使其有价值。

记住，他说，“分布式系统的第一条规则是:除非你有明显的理由，否则不要发布你的系统。”

在他的演讲中，弗兰克解释了他在帮助他的前雇主慈善基金平台 [JustGiving](https://www.justgiving.com/) 从整体架构转向微服务和云时学到的经验。

## 微服务之美

Franc 以半满杯开始，列举了微服务的以下好处:

*   它很容易更换。
*   它易于部署。
*   它一次解决一个业务目标或技术能力。
*   可以是任意大小长度的代码(甚至是 10000 行代码，提醒我们“微”就是一个服务的意思)。
*   可通过开发运维或自助式敏捷基础设施来实现(人人参与)。
*   它是基于消息传递的。

他认为，主要的好处之一是可扩展性。“这个系统你可以很容易地修改，并且能够支持更多的负载，如果它能够运行一百万次的话，”弗兰克说。

您可以水平扩展和复制微服务，而 monolith 只能垂直扩展。微服务还允许您扩展不同系统的功能。最后，它允许将数据划分成处理不同类型数据的较小数据库。

“微服务的好处在于，您可以为自己和您的系统提供一种灵活的可扩展性方法。弗兰克说:“你不需要制造整个整体，而是检查哪里需要扩展，然后增加可部署的部分，以便灵活扩展。

他接着说，monoliths 也是可扩展的，但是有限制，这“可能适合许多公司”。微服务的可扩展性更强，但会带来大量成本。”

微服务还提供了灵活性。在这里，您可以探索语言、技术和框架的丰富多样性。但他指出，这种多样性越大，成本就越高。 当然，monolith 的灵活性要差得多，但是对于像微服务这样的分布式系统，你必须学会如何以异步的方式处理事务和其他动作。

## 潜伏在微服务背后的野兽

“如果你进入微服务领域，你要分发你的系统，然后你必须了解它是什么，以及在网络中工作意味着什么，”弗兰克说，并提出了微服务带来的以下挑战:

*   延迟问题
*   复杂性
*   调试
*   安全
*   连通性

Franc 提出了一个他称之为“微单片架构”的形象，如果您的微服务过渡没有计划好，这可能会发生，这往往会导致许多连接微服务的意大利面条式代码。

“我们建造的大部分巨石都是某种‘偶然建筑’，”他说。“当你构建你的产品时，你不知道你想要构建什么，你决定特性和代码。”

但是他说你可以将意外转移到微服务，你必须开始考虑这个领域。

“当你有了一个整体，你就已经探索了你的问题空间，并且已经有了客户，”他说。

微服务通过[领域驱动设计](https://martinfowler.com/tags/domain%20driven%20design.html) (DDD)打开了一个新的思考机会，将每个项目的焦点放在一个特定的领域或目的上，并解决该领域的问题。

## 如果您同时构建整体服务和微服务会怎么样？

“我相信整体服务和微服务都是有用的工具。由你决定哪种工具更好。”但弗兰克警告说，“这个决定可能不会持续太久。”

他提供了第三种选择——以一种易于日后分解成微服务的方式构建一个整体。但是，唉，它们大部分仍然是事故的结果。

他呼吁给予一个持续的过渡，以脱离那块巨石。他们首先尝试了具有新功能的微服务。

而且要把其余的分开并不容易。他们发现脱离 Salesforce 和 Sharepoint 有特别的困难，因为它们与这个庞然大物联系如此紧密。

最后，Franc 建议你向微服务的过渡应该是敏捷和迭代的。你必须小心不要在改变的时候损失很多钱。

为了实现这一点，他说你必须制定一个策略，首先分离出需要扩展的部分，或者那些会导致大量技术债务的部分。

他还警告说，“人们认为微服务仅仅是技术。你必须改变你的组织、团队和结构。”

弗兰克继续说，你的团队必须学会彼此独立工作。

“在 JustGiving，这很自然，但浪费了很多时间，”他说。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>